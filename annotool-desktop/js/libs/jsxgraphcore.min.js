!function(){var P,E;!function(m){function q(a,f){var n,c,p,k,b,d,g,r,e,h=f&&f.split("/"),v=s.map,l=v&&v["*"]||{};if(a&&"."===a.charAt(0))if(f){h=h.slice(0,h.length-1);a=h.concat(a.split("/"));for(r=0;r<a.length;r+=1)if(n=a[r],"."===n)a.splice(r,1),r-=1;else if(".."===n){if(1===r&&(".."===a[2]||".."===a[0]))break;0<r&&(a.splice(r-1,2),r-=2)}a=a.join("/")}else 0===a.indexOf("./")&&(a=a.substring(2));if((h||l)&&v){n=a.split("/");for(r=n.length;0<r;r-=1){if(c=n.slice(0,r).join("/"),h)for(e=h.length;0<
e;e-=1)if(p=v[h.slice(0,e).join("/")],p&&(p=p[c])){k=p;b=r;break}if(k)break;!d&&l&&l[c]&&(d=l[c],g=r)}!k&&d&&(k=d,b=g);k&&(n.splice(0,b,k),a=n.join("/"))}return a}function l(a,f){return function(){return k.apply(m,y.call(arguments,0).concat([a,f]))}}function e(a){return function(f){return q(f,a)}}function h(a){return function(f){n[a]=f}}function g(f){if(r.call(p,f)){var c=p[f];delete p[f];v[f]=!0;a.apply(m,c)}if(!r.call(n,f)&&!r.call(v,f))throw Error("No "+f);return n[f]}function d(a){var f,n=a?a.indexOf("!"):
-1;return-1<n&&(f=a.substring(0,n),a=a.substring(n+1,a.length)),[f,a]}function b(a){return function(){return s&&s.config&&s.config[a]||{}}}var a,k,c,f,n={},p={},s={},v={},r=Object.prototype.hasOwnProperty,y=[].slice;c=function(a,f){var n,c=d(a),p=c[0];return a=c[1],p&&(p=q(p,f),n=g(p)),p?a=n&&n.normalize?n.normalize(a,e(f)):q(a,f):(a=q(a,f),c=d(a),p=c[0],a=c[1],p&&(n=g(p))),{f:p?p+"!"+a:a,n:a,pr:p,p:n}};f={require:function(a){return l(a)},exports:function(a){var f=n[a];return"undefined"!=typeof f?
f:n[a]={}},module:function(a){return{id:a,uri:"",exports:n[a],config:b(a)}}};a=function(a,k,b,s){var d,e,y,q,F,D=[];if(s=s||a,"function"==typeof b){k=!k.length&&b.length?["require","exports","module"]:k;for(q=0;q<k.length;q+=1)if(y=c(k[q],s),e=y.f,"require"===e)D[q]=f.require(a);else if("exports"===e)D[q]=f.exports(a),F=!0;else if("module"===e)d=D[q]=f.module(a);else if(r.call(n,e)||r.call(p,e)||r.call(v,e))D[q]=g(e);else{if(!y.p)throw Error(a+" missing "+e);y.p.load(y.n,l(s,!0),h(e),{});D[q]=n[e]}k=
b.apply(n[a],D);a&&(d&&d.exports!==m&&d.exports!==n[a]?n[a]=d.exports:k===m&&F||(n[a]=k))}else a&&(n[a]=b)};P=k=function(n,p,b,d,r){return"string"==typeof n?f[n]?f[n](p):g(c(n,p).f):(n.splice||(s=n,p.splice?(n=p,p=b,b=null):n=m),p=p||function(){},"function"==typeof b&&(b=d,d=r),d?a(m,n,p,b):setTimeout(function(){a(m,n,p,b)},4),k)};k.config=function(a){return s=a,s.deps&&k(s.deps,s.callback),k};E=function(a,f,c){f.splice||(c=f,f=[]);r.call(n,a)||r.call(p,a)||(p[a]=[a,f,c])};E.amd={jQuery:!0}}();E("../node_modules/almond/almond",
function(){});E("jxg",[],function(){var m={};return"object"!=typeof JXG||JXG.extend||(m=JXG),m.extend=function(m,l,e,h){var g,d;e=e||!1;h=h||!1;for(g in l)(!e||e&&l.hasOwnProperty(g))&&(d=h?g.toLowerCase():g,m[d]=l[g])},m.extend(m,{boards:{},readers:{},elements:{},registerElement:function(m,l){m=m.toLowerCase();this.elements[m]=l},registerReader:function(m,l){var e,h;for(e=0;e<l.length;e++)h=l[e].toLowerCase(),"function"!=typeof this.readers[h]&&(this.readers[h]=m)},shortcut:function(m,l){return function(){return m[l].apply(this,
arguments)}},getRef:function(m,l){return m.select(l)},getReference:function(m,l){return m.select(l)},debugInt:function(){var m,l;for(m=0;m<arguments.length;m++)l=arguments[m],"object"==typeof window&&window.console&&console.log?console.log(l):"object"==typeof document&&document.getElementById("debug")&&(document.getElementById("debug").innerHTML+=l+"<br/>")},debugWST:function(){var q=Error();m.debugInt.apply(this,arguments);q&&q.stack&&(m.debugInt("stacktrace"),m.debugInt(q.stack.split("\n").slice(1).join("\n")))},
debugLine:function(){var q=Error();m.debugInt.apply(this,arguments);q&&q.stack&&m.debugInt("Called from",q.stack.split("\n").slice(2,3).join("\n"))},debug:function(){m.debugInt.apply(this,arguments)}}),m});E("base/constants",["jxg"],function(m){var q;return q={version:"0.99.1",licenseText:"JSXGraph v0.99.1 Copyright (C) see http://jsxgraph.org",COORDS_BY_USER:1,COORDS_BY_SCREEN:2,OBJECT_TYPE_ARC:1,OBJECT_TYPE_ARROW:2,OBJECT_TYPE_AXIS:3,OBJECT_TYPE_AXISPOINT:4,OBJECT_TYPE_TICKS:5,OBJECT_TYPE_CIRCLE:6,
OBJECT_TYPE_CONIC:7,OBJECT_TYPE_CURVE:8,OBJECT_TYPE_GLIDER:9,OBJECT_TYPE_IMAGE:10,OBJECT_TYPE_LINE:11,OBJECT_TYPE_POINT:12,OBJECT_TYPE_SLIDER:13,OBJECT_TYPE_CAS:14,OBJECT_TYPE_GXTCAS:15,OBJECT_TYPE_POLYGON:16,OBJECT_TYPE_SECTOR:17,OBJECT_TYPE_TEXT:18,OBJECT_TYPE_ANGLE:19,OBJECT_TYPE_INTERSECTION:20,OBJECT_TYPE_TURTLE:21,OBJECT_TYPE_VECTOR:22,OBJECT_TYPE_OPROJECT:23,OBJECT_TYPE_GRID:24,OBJECT_TYPE_TANGENT:25,OBJECT_TYPE_HTMLSLIDER:26,OBJECT_CLASS_POINT:1,OBJECT_CLASS_LINE:2,OBJECT_CLASS_CIRCLE:3,OBJECT_CLASS_CURVE:4,
OBJECT_CLASS_AREA:5,OBJECT_CLASS_OTHER:6,GENTYPE_ABC:1,GENTYPE_AXIS:2,GENTYPE_MID:3,GENTYPE_REFLECTION:4,GENTYPE_MIRRORPOINT:5,GENTYPE_TANGENT:6,GENTYPE_PARALLEL:7,GENTYPE_BISECTORLINES:8,GENTYPE_BOARDIMG:9,GENTYPE_BISECTOR:10,GENTYPE_NORMAL:11,GENTYPE_POINT:12,GENTYPE_GLIDER:13,GENTYPE_INTERSECTION:14,GENTYPE_CIRCLE:15,GENTYPE_CIRCLE2POINTS:16,GENTYPE_LINE:17,GENTYPE_TRIANGLE:18,GENTYPE_QUADRILATERAL:19,GENTYPE_TEXT:20,GENTYPE_POLYGON:21,GENTYPE_REGULARPOLYGON:22,GENTYPE_SECTOR:23,GENTYPE_ANGLE:24,
GENTYPE_PLOT:25,GENTYPE_SLIDER:26,GENTYPE_TRUNCATE:27,GENTYPE_JCODE:28,GENTYPE_MOVEMENT:29,GENTYPE_COMBINED:30,GENTYPE_RULER:31,GENTYPE_SLOPETRIANGLE:32,GENTYPE_PERPSEGMENT:33,GENTYPE_DELETE:41,GENTYPE_COPY:42,GENTYPE_MIRROR:43,GENTYPE_ROTATE:44,GENTYPE_ABLATION:45,GENTYPE_MIGRATE:46,GENTYPE_CTX_TYPE_G:51,GENTYPE_CTX_TYPE_P:52,GENTYPE_CTX_TRACE:53,GENTYPE_CTX_VISIBILITY:54,GENTYPE_CTX_CCVISIBILITY:55,GENTYPE_CTX_MPVISIBILITY:56,GENTYPE_CTX_WITHLABEL:57,GENTYPE_CTX_LABEL:58,GENTYPE_CTX_FIXED:59,GENTYPE_CTX_STROKEWIDTH:60,
GENTYPE_CTX_LABELSIZE:61,GENTYPE_CTX_SIZE:62,GENTYPE_CTX_FACE:63,GENTYPE_CTX_STRAIGHT:64,GENTYPE_CTX_ARROW:65,GENTYPE_CTX_COLOR:66,GENTYPE_CTX_RADIUS:67,GENTYPE_CTX_COORDS:68,GENTYPE_CTX_TEXT:69,GENTYPE_CTX_ANGLERADIUS:70,GENTYPE_CTX_DOTVISIBILITY:71,GENTYPE_CTX_FILLOPACITY:72,GENTYPE_CTX_PLOT:73,GENTYPE_CTX_SCALE:74,GENTYPE_CTX_INTVAL:75,GENTYPE_CTX_POINT1:76,GENTYPE_CTX_POINT2:77,GENTYPE_CTX_LABELSTICKY:78},m.extend(m,q),q});E("utils/type",["jxg","base/constants"],function(m,q){return m.extend(m,
{isId:function(l,e){return"string"==typeof e&&!!l.objects[e]},isName:function(l,e){return"string"==typeof e&&!!l.elementsByName[e]},isGroup:function(l,e){return"string"==typeof e&&!!l.groups[e]},isString:function(l){return"string"==typeof l},isNumber:function(l){return"number"==typeof l||"[Object Number]"===Object.prototype.toString.call(l)},isFunction:function(l){return"function"==typeof l},isArray:function(l){return Array.isArray?Array.isArray(l):null!==l&&"object"==typeof l&&"function"==typeof l.splice&&
"function"==typeof l.join},isObject:function(l){return"object"==typeof l&&!m.isArray(l)},isPoint:function(l){return"object"==typeof l?l.elementClass===q.OBJECT_CLASS_POINT:!1},exists:function(l){return function(e){return!(e===l||null===e)}}(),def:function(l,e){return m.exists(l)?l:e},str2Bool:function(l){return m.exists(l)?"boolean"==typeof l?l:m.isString(l)?"true"===l.toLowerCase():!1:!0},createEvalFunction:function(l,e,h){var g,d=[];for(g=0;h>g;g++)d[g]=m.createFunction(e[g],l,"",!0);return function(b){return d[b]()}},
createFunction:function(l,e,h,g){var d=null;return m.exists(g)&&!g||!m.isString(l)?m.isFunction(l)?d=l:m.isNumber(l)?d=function(){return l}:m.isString(l)&&(d=function(){return l}):d=e.jc.snippet(l,!0,h,!0),null!==d&&(d.origin=l),d},bind:function(l,e){return function(){return l.apply(e,arguments)}},evaluate:function(l){return m.isFunction(l)?l():l},indexOf:function(l,e,h){var g,d=m.exists(h);if(Array.indexOf&&!d)return l.indexOf(e);for(g=0;g<l.length;g++)if(d&&l[g][h]===e||!d&&l[g]===e)return g;return-1},
eliminateDuplicates:function(l){var e,h=l.length,g=[],d={};for(e=0;h>e;e++)d[l[e]]=0;for(e in d)d.hasOwnProperty(e)&&g.push(e);return g},swap:function(l,e,h){var g;return g=l[e],l[e]=l[h],l[h]=g,l},uniqueArray:function(l){var e,h,g,d=[];if(0===l.length)return[];for(e=0;e<l.length;e++)for(g=m.isArray(l[e]),h=e+1;h<l.length;h++)g&&m.cmpArrays(l[e],l[h])?l[e]=[]:g||l[e]!==l[h]||(l[e]="");for(e=h=0;e<l.length;e++)(g=m.isArray(l[e]))||""===l[e]?g&&0!==l[e].length&&(d[h]=l[e].slice(0),h+=1):(d[h]=l[e],
h+=1);return d},isInArray:function(l,e){return-1<m.indexOf(l,e)},coordsArrayToMatrix:function(l,e){var h,g=[],d=[];for(h=0;h<l.length;h++)e?(g.push(l[h].usrCoords[1]),d.push(l[h].usrCoords[2])):d.push([l[h].usrCoords[1],l[h].usrCoords[2]]);return e&&(d=[g,d]),d},cmpArrays:function(l,e){var h;if(l===e)return!0;if(l.length!==e.length)return!1;for(h=0;h<l.length;h++)if(l[h]!==e[h])return!1;return!0},removeElementFromArray:function(l,e){var h;for(h=0;h<l.length;h++)if(l[h]===e)return l.splice(h,1),l;
return l},trunc:function(l,e){return e=m.def(e,0),0===e?(l=~l,l=~l):l=l.toFixed(e),l},autoDigits:function(l){var e=Math.abs(l);return.1<e?l.toFixed(2):.01<=e?l.toFixed(4):1E-4<=e?l.toFixed(6):l},keys:function(l,e){var h,g=[];for(h in l)e?l.hasOwnProperty(h)&&g.push(h):g.push(h);return g},clone:function(l){var e={};return e.prototype=l,e},cloneAndCopy:function(l,e){var h,g=function(){};g.prototype=l;for(h in e)g[h]=e[h];return g},merge:function(l,e){var h,g;for(h in e)if(e.hasOwnProperty(h))if(this.isArray(e[h]))for(l[h]||
(l[h]=[]),g=0;g<e[h].length;g++)l[h][g]="object"==typeof e[h][g]?this.merge(l[h][g],e[h][g]):e[h][g];else"object"==typeof e[h]?(l[h]||(l[h]={}),l[h]=this.merge(l[h],e[h])):l[h]=e[h];return l},deepCopy:function(l,e,h){var g,d,b,a;if(h=h||!1,"object"!=typeof l||null===l)return l;if(this.isArray(l))for(g=[],d=0;d<l.length;d++)b=l[d],g[d]="object"==typeof b?this.deepCopy(b):b;else{g={};for(d in l)a=h?d.toLowerCase():d,b=l[d],g[a]="object"==typeof b?this.deepCopy(b):b;for(d in e)a=h?d.toLowerCase():d,
b=e[d],g[a]="object"==typeof b?m.isArray(b)||!m.exists(g[a])?this.deepCopy(b):this.deepCopy(g[a],b,h):b}return g},copyAttributes:function(l,e,h){var g,d,b,a,k;g={circle:1,curve:1,image:1,line:1,point:1,polygon:1,text:1,ticks:1,integral:1};b=arguments.length;g=3>b||g[h]?m.deepCopy(e.elements,null,!0):{};4>b&&this.exists(h)&&this.exists(e.layer[h])&&(g.layer=e.layer[h]);a=e;k=!0;for(d=2;b>d;d++){if(!m.exists(a[arguments[d]])){k=!1;break}a=a[arguments[d]]}k&&(g=m.deepCopy(g,a,!0));a=l;k=!0;for(d=3;b>
d;d++){if(!m.exists(a[arguments[d]])){k=!1;break}a=a[arguments[d]]}k&&this.extend(g,a,null,!0);a=e;k=!0;for(d=2;b>d;d++){if(!m.exists(a[arguments[d]])){k=!1;break}a=a[arguments[d]]}return k&&m.exists(a.label)&&(g.label=m.deepCopy(a.label,g.label)),g.label=m.deepCopy(e.label,g.label),g},toJSON:function(l,e){var h,g,d;if(e=m.def(e,!1),JSON.stringify&&!e)try{return JSON.stringify(l)}catch(b){}switch(typeof l){case "object":if(l){if(h=[],m.isArray(l)){for(g=0;g<l.length;g++)h.push(m.toJSON(l[g],e));return"["+
h.join(",")+"]"}for(g in l)if(l.hasOwnProperty(g)){try{d=m.toJSON(l[g],e)}catch(a){d=""}e?h.push(g+":"+d):h.push('"'+g+'":'+d)}return"{"+h.join(",")+"} "}return"null";case "string":return"'"+l.replace(/(["'])/g,"\\$1")+"'";case "number":case "boolean":return l.toString()}return"0"},clearVisPropOld:function(l){return l.visPropOld={strokecolor:"",strokeopacity:"",strokewidth:"",fillcolor:"",fillopacity:"",shadow:!1,firstarrow:!1,lastarrow:!1,cssclass:"",fontsize:-1,left:-1E5,top:-1E5},l},isInObject:function(l,
e){for(var h in l)if(l.hasOwnProperty(h)&&l[h]===e)return!0;return!1},escapeHTML:function(l){return l.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},unescapeHTML:function(l){return l.replace(/<\/?[^>]+>/gi,"").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">")},capitalize:function(l){return l.charAt(0).toUpperCase()+l.substring(1).toLowerCase()},trimNumber:function(l){return l=l.replace(/^0+/,""),l=l.replace(/0+$/,""),("."===l[l.length-1]||","===l[l.length-1])&&(l=l.slice(0,
-1)),("."===l[0]||","===l[0])&&(l="0"+l),l},filterElements:function(l,e){var h,g,d,b,a,k,c,f=l.length,n=[];if("function"!=typeof e&&"object"!=typeof e)return n;for(h=0;f>h;h++){if(c=!0,d=l[h],"object"==typeof e)for(g in e){if(e.hasOwnProperty(g)&&(b=g.toLowerCase(),a="function"==typeof d[g]?d[g]():d[g],k=d.visProp&&"function"==typeof d.visProp[b]?d.visProp[b]():d.visProp&&d.visProp[b],c="function"==typeof e[g]?e[g](a)||e[g](k):a===e[g]||k===e[g],!c))break}else"function"==typeof e&&(c=e(d));c&&n.push(d)}return n},
trim:function(l){return l=l.replace(/^\s+/,""),l.replace(/\s+$/,"")},sanitizeHTML:function(l,e){return"function"==typeof html_sanitize&&e?html_sanitize(l,function(){},function(e){return e}):(l&&(l=l.replace(/</g,"&lt;").replace(/>/g,"&gt;")),l)},evalSlider:function(l){return l.type===q.OBJECT_TYPE_GLIDER&&"function"==typeof l.Value&&(l=l.Value()),l}}),m});E("utils/env",["jxg","utils/type"],function(m,q){return m.extend(m,{touchProperty:"touches",isBrowser:"object"==typeof window&&"object"==typeof document,
supportsVML:function(){return this.isBrowser&&!!document.namespaces},supportsSVG:function(){return this.isBrowser&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")},supportsCanvas:function(){var l=!1;if(this.isNode())try{"object"==typeof module?module.require("canvas"):P("canvas"),l=!0}catch(e){}return l||this.isBrowser&&!!document.createElement("canvas").getContext},isNode:function(){return!this.isBrowser&&("object"==typeof module&&!!module.exports||"object"==
typeof global&&global.requirejsVars&&!global.requirejsVars.isBrowser)},isWebWorker:function(){return!this.isBrowser&&"object"==typeof self&&"function"==typeof self.postMessage},supportsPointerEvents:function(){return m.isBrowser&&window.navigator&&(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)},isTouchDevice:function(){return this.isBrowser&&void 0!==window.ontouchstart},isAndroid:function(){return q.exists(navigator)&&-1<navigator.userAgent.toLowerCase().indexOf("android")},
isWebkitAndroid:function(){return this.isAndroid()&&-1<navigator.userAgent.indexOf(" AppleWebKit/")},isApple:function(){return q.exists(navigator)&&(-1<navigator.userAgent.indexOf("iPad")||-1<navigator.userAgent.indexOf("iPhone"))},isWebkitApple:function(){return this.isApple()&&-1<navigator.userAgent.search(/Mobile\/[0-9A-Za-z\.]*Safari/)},isMetroApp:function(){return"object"==typeof window&&window.clientInformation&&window.clientInformation.appName&&-1<window.clientInformation.appName.indexOf("MSAppHost")},
isMozilla:function(){return q.exists(navigator)&&-1<navigator.userAgent.toLowerCase().indexOf("mozilla")&&-1===navigator.userAgent.toLowerCase().indexOf("apple")},isFirefoxOS:function(){return q.exists(navigator)&&-1===navigator.userAgent.toLowerCase().indexOf("android")&&-1===navigator.userAgent.toLowerCase().indexOf("apple")&&-1<navigator.userAgent.toLowerCase().indexOf("mobile")&&-1<navigator.userAgent.toLowerCase().indexOf("mozilla")},ieVersion:function(){var l,e,h=3;if("object"!=typeof document)return 0;
l=document.createElement("div");e=l.getElementsByTagName("i");do l.innerHTML="\x3c!--[if gt IE "+ ++h+"]><i></i><![endif]--\x3e";while(e[0]);return 4<h?h:void 0}(),getDimensions:function(l,e){var h,g,d,b,a,k,c,f;if(!m.isBrowser||null===l)return{width:500,height:500};if(e=e||document,h=e.getElementById(l),!q.exists(h))throw Error("\nJSXGraph: HTML container element '"+l+"' not found.");return g=h.style.display,"none"!==g&&null!==g?{width:h.offsetWidth,height:h.offsetHeight}:(d=h.style,b=d.visibility,
a=d.position,k=d.display,d.visibility="hidden",d.position="absolute",d.display="block",c=h.clientWidth,f=h.clientHeight,d.display=k,d.position=a,d.visibility=b,{width:c,height:f})},addEvent:function(l,e,h,g){var d=function(){return h.apply(g,arguments)};d.origin=h;g["x_internal"+e]=g["x_internal"+e]||[];g["x_internal"+e].push(d);q.exists(l)&&q.exists(l.addEventListener)&&l.addEventListener(e,d,!1);q.exists(l)&&q.exists(l.attachEvent)&&l.attachEvent("on"+e,d)},removeEvent:function(l,e,h,g){var d;if(!q.exists(g))return m.debug("no such owner"),
void 0;if(!q.exists(g["x_internal"+e]))return m.debug("no such type: "+e),void 0;if(!q.isArray(g["x_internal"+e]))return m.debug("owner[x_internal + "+e+"] is not an array"),void 0;if(d=q.indexOf(g["x_internal"+e],h,"origin"),-1===d)return m.debug("no such event function in internal list: "+h),void 0;try{q.exists(l)&&q.exists(l.removeEventListener)&&l.removeEventListener(e,g["x_internal"+e][d],!1),q.exists(l)&&q.exists(l.detachEvent)&&l.detachEvent("on"+e,g["x_internal"+e][d])}catch(b){m.debug("event not registered in browser: ("+
e+" -- "+h+")")}g["x_internal"+e].splice(d,1)},removeAllEvents:function(l,e,h){var g;if(h["x_internal"+e]){g=h["x_internal"+e].length;for(g-=1;0<=g;g--)m.removeEvent(l,e,h["x_internal"+e][g].origin,h);0<h["x_internal"+e].length&&m.debug("removeAllEvents: Not all events could be removed.")}},getPosition:function(l,e,h){var g,d,b=0,a=0;if(l||(l=window.event),h=h||document,d=l[m.touchProperty],q.exists(e)&&q.exists(d))if(-1===e)for(g=d.length,e=0;g>e;e++){if(d[e]){l=d[e];break}}else l=d[e];return l.pageX||
l.pageY?(b=l.pageX,a=l.pageY):(l.clientX||l.clientY)&&(b=l.clientX+h.body.scrollLeft+h.documentElement.scrollLeft,a=l.clientY+h.body.scrollTop+h.documentElement.scrollTop),[b,a]},getOffset:function(l){var e,h=l,g=h.offsetLeft-h.scrollLeft;e=h.offsetTop-h.scrollTop;e=this.getCSSTransform([g,e],h);g=e[0];e=e[1];for(h=h.offsetParent;h;){g+=h.offsetLeft;e+=h.offsetTop;h.offsetParent&&(g+=h.clientLeft-h.scrollLeft,e+=h.clientTop-h.scrollTop);e=this.getCSSTransform([g,e],h);g=e[0];e=e[1];for(l=l.parentNode;l!==
h;)g+=l.clientLeft-l.scrollLeft,e+=l.clientTop-l.scrollTop,e=this.getCSSTransform([g,e],l),g=e[0],e=e[1],l=l.parentNode;h=h.offsetParent}return[g,e]},getStyle:function(l,e){var h,g;return g=l.ownerDocument,window.getComputedStyle?h=g.defaultView.getComputedStyle(l,null).getPropertyValue(e):l.currentStyle&&9<=m.ieVersion?h=l.currentStyle[e]:l.style&&(e=e.replace(/-([a-z]|[0-9])/gi,function(d,b){return b.toUpperCase()}),h=l.style[e]),h},getProp:function(l,e){var h=parseInt(this.getStyle(l,e),10);return isNaN(h)?
0:h},getCSSTransform:function(l,e){var h,g,d,b,a=["transform","webkitTransform","MozTransform","msTransform","oTransform"];b=a.length;h=0;for(g="";b>h;h++)if(q.exists(e.style[a[h]])){g=e.style[a[h]];break}if(""!==g&&(d=g.indexOf("("),0<d)){b=g.length;h=g.substring(d+1,b-1);b=h.split(",");h=0;for(d=b.length;d>h;h++)b[h]=parseFloat(b[h]);0===g.indexOf("matrix")?(l[0]+=b[4],l[1]+=b[5]):0===g.indexOf("translateX")?l[0]+=b[0]:0===g.indexOf("translateY")?l[1]+=b[0]:0===g.indexOf("translate")&&(l[0]+=b[0],
l[1]+=b[1])}return l},getCSSTransformMatrix:function(l){var e,h,g,d,b=["transform","webkitTransform","MozTransform","msTransform","oTransform"],a=[[1,0,0],[0,1,0],[0,0,1]];d=b.length;e=0;for(h="";d>e;e++)if(q.exists(l.style[b[e]])){h=l.style[b[e]];break}if(""!==h&&(g=h.indexOf("("),0<g)){d=h.length;l=h.substring(g+1,d-1);g=l.split(",");l=0;for(e=g.length;e>l;l++)g[l]=parseFloat(g[l]);0===h.indexOf("matrix")?a=[[1,0,0],[0,g[0],g[1]],[0,g[2],g[3]]]:0===h.indexOf("scaleX")?a[1][1]=g[0]:0===h.indexOf("scaleY")?
a[2][2]=g[0]:0===h.indexOf("scale")&&(a[1][1]=g[0],a[2][2]=g[1])}return a},timedChunk:function(l,e,h,g){var d=l.concat(),b=function(){var a=+new Date;do e.call(h,d.shift());while(0<d.length&&300>+new Date-a);0<d.length?window.setTimeout(b,1):g(l)};window.setTimeout(b,1)}}),m});E("utils/xml",["jxg","utils/type"],function(m,q){return m.XML={cleanWhitespace:function(l){for(var e=l.firstChild;q.exists(e);)3!==e.nodeType||/\S/.test(e.nodeValue)?1===e.nodeType&&this.cleanWhitespace(e):l.removeChild(e),
e=e.nextSibling},parse:function(l){var e,h,g;return g="function"==typeof DOMParser||"object"==typeof DOMParser?DOMParser:function(){this.parseFromString=function(d){var b;return"function"==typeof ActiveXObject&&(b=new ActiveXObject("MSXML.DomDocument"),b.loadXML(d)),b}},e=new g,h=e.parseFromString(l,"text/xml"),this.cleanWhitespace(h),h}},m.XML});E("utils/event",["jxg","utils/type"],function(m,q){return m.EventEmitter={eventHandlers:{},suspended:{},trigger:function(l,e){var h,g,d,b,a,k;a=l.length;
for(g=0;a>g;g++)if(b=this.eventHandlers[l[g]],!this.suspended[l[g]]){if(this.suspended[l[g]]=!0,b)for(k=b.length,h=0;k>h;h++)d=b[h],d.handler.apply(d.context,e);this.suspended[l[g]]=!1}return this},on:function(l,e,h){return q.isArray(this.eventHandlers[l])||(this.eventHandlers[l]=[]),h=q.def(h,this),this.eventHandlers[l].push({handler:e,context:h}),this},off:function(l,e){var h;return l&&q.isArray(this.eventHandlers[l])?(e?(h=q.indexOf(this.eventHandlers[l],e,"handler"),-1<h&&this.eventHandlers[l].splice(h,
1),0===this.eventHandlers[l].length&&delete this.eventHandlers[l]):delete this.eventHandlers[l],this):this},eventify:function(l){l.eventHandlers={};l.on=this.on;l.off=this.off;l.triggerEventHandlers=this.trigger;l.trigger=this.trigger;l.suspended={}}},m.EventEmitter});E("math/math",["jxg"],function(m){var q=function(l){var e,h;return l.memo?l.memo:(e={},h=Array.prototype.join,l.memo=function(){var g=h.call(arguments);return void 0!==e[g]?e[g]:e[g]=l.apply(this,arguments)},l.memo)};return m.Math={eps:1E-6,
mod:function(l,e){return l-Math.floor(l/e)*e},vector:function(l,e){var h,g;e=e||0;h=[];for(g=0;l>g;g++)h[g]=e;return h},matrix:function(l,e,h){var g,d,b;h=h||0;e=e||l;g=[];for(d=0;l>d;d++)for(g[d]=[],b=0;e>b;b++)g[d][b]=h;return g},identity:function(l,e){var h,g;void 0===e&&"number"!=typeof e&&(e=l);h=this.matrix(l,e);for(g=0;g<Math.min(l,e);g++)h[g][g]=1;return h},frustum:function(l,e,h,g,d,b){var a=this.matrix(4,4);return a[0][0]=2*d/(e-l),a[0][1]=0,a[0][2]=(e+l)/(e-l),a[0][3]=0,a[1][0]=0,a[1][1]=
2*d/(g-h),a[1][2]=(g+h)/(g-h),a[1][3]=0,a[2][0]=0,a[2][1]=0,a[2][2]=-(b+d)/(b-d),a[2][3]=-(2*b*d)/(b-d),a[3][0]=0,a[3][1]=0,a[3][2]=-1,a[3][3]=0,a},projection:function(l,e,h,g){l=h*Math.tan(l/2);e*=l;return this.frustum(-e,e,-l,l,h,g)},matVecMult:function(l,e){var h,g,d,b=l.length,a=e.length,k=[];if(3===a)for(h=0;b>h;h++)k[h]=l[h][0]*e[0]+l[h][1]*e[1]+l[h][2]*e[2];else for(h=0;b>h;h++){for(d=g=0;a>d;d++)g+=l[h][d]*e[d];k[h]=g}return k},matMatMult:function(l,e){var h,g,d,b,a=l.length,k=0<a?e[0].length:
0,c=e.length,f=this.matrix(a,k);for(h=0;a>h;h++)for(g=0;k>g;g++){for(b=d=0;c>b;b++)d+=l[h][b]*e[b][g];f[h][g]=d}return f},transpose:function(l){var e,h,g,d,b;d=l.length;b=0<l.length?l[0].length:0;e=this.matrix(b,d);for(h=0;b>h;h++)for(g=0;d>g;g++)e[h][g]=l[g][h];return e},inverse:function(l){var e,h,g,d=l.length,b=[],a=[],k=[];for(e=0;d>e;e++){b[e]=[];for(h=0;d>h;h++)b[e][h]=l[e][h];a[e]=e}for(h=0;d>h;h++){l=Math.abs(b[h][h]);g=h;for(e=h+1;d>e;e++)Math.abs(b[e][h])>l&&(l=Math.abs(b[e][h]),g=e);if(l<=
this.eps)return[];if(g>h){for(l=0;d>l;l++)e=b[h][l],b[h][l]=b[g][l],b[g][l]=e;e=a[h];a[h]=a[g];a[g]=e}g=1/b[h][h];for(e=0;d>e;e++)b[e][h]*=g;b[h][h]=g;for(l=0;d>l;l++)if(l!==h){for(e=0;d>e;e++)e!==h&&(b[e][l]-=b[e][h]*b[h][l]);b[h][l]*=-g}}for(e=0;d>e;e++){for(l=0;d>l;l++)k[a[l]]=b[e][l];for(l=0;d>l;l++)b[e][l]=k[l]}return b},innerProduct:function(l,e,h){var g,d=0;void 0!==h&&"number"==typeof h||(h=l.length);for(g=0;h>g;g++)d+=l[g]*e[g];return d},crossProduct:function(l,e){return[l[1]*e[2]-l[2]*e[1],
l[2]*e[0]-l[0]*e[2],l[0]*e[1]-l[1]*e[0]]},factorial:q(function(l){return 0>l?0/0:(l=Math.floor(l),0===l||1===l?1:l*this.factorial(l-1))}),binomial:q(function(l,e){var h,g;if(e>l||0>e)return 0/0;if(e=Math.round(e),l=Math.round(l),0===e||e===l)return 1;h=1;for(g=0;e>g;g++)h*=l-g,h/=g+1;return h}),cosh:function(l){return.5*(Math.exp(l)+Math.exp(-l))},sinh:function(l){return.5*(Math.exp(l)-Math.exp(-l))},pow:function(l,e){return 0===l?0===e?1:0:Math.floor(e)===e?Math.pow(l,e):0<l?Math.exp(e*Math.log(Math.abs(l))):
0/0},log10:function(l){return Math.log(l)/Math.log(10)},log2:function(l){return Math.log(l)/Math.log(2)},squampow:function(l,e){var h;if(Math.floor(e)===e){h=1;for(0>e&&(l=1/l,e*=-1);0!==e;)1&e&&(h*=l),e>>=1,l*=l;return h}return this.pow(l,e)},normalize:function(l){var e,h,g=2*l[3],d=l[4]/g;return l[5]=d,l[6]=-l[1]/g,l[7]=-l[2]/g,1/0===d||isNaN(d)?(e=Math.sqrt(l[1]*l[1]+l[2]*l[2]),l[0]/=e,l[1]/=e,l[2]/=e,l[3]=0,l[4]=1):1<=Math.abs(d)?(l[0]=(l[6]*l[6]+l[7]*l[7]-d*d)/(2*d),l[1]=-l[6]/d,l[2]=-l[7]/d,
l[3]=1/(2*d),l[4]=1):(h=0>=d?-1:1,l[0]=.5*h*(l[6]*l[6]+l[7]*l[7]-d*d),l[1]=-h*l[6],l[2]=-h*l[7],l[3]=h/2,l[4]=h*d),l},toGL:function(l){var e,h,g;if(e="function"==typeof Float32Array?new Float32Array(16):Array(16),4!==l.length&&4!==l[0].length)return e;for(h=0;4>h;h++)for(g=0;4>g;g++)e[h+4*g]=l[h][g];return e}},m.Math});E("base/coords",["jxg","base/constants","utils/event","utils/type","math/math"],function(m,q,l,e,h){return m.Coords=function(g,d,b,a){this.board=b;this.usrCoords=[];this.scrCoords=
[];(this.emitter=!e.exists(a)||a)&&l.eventify(this);this.setCoordinates(g,d,!0,!0)},m.extend(m.Coords.prototype,{normalizeUsrCoords:function(){var g=h.eps;Math.abs(this.usrCoords[0])>g&&(this.usrCoords[1]/=this.usrCoords[0],this.usrCoords[2]/=this.usrCoords[0],this.usrCoords[0]=1)},usr2screen:function(g){var d=Math.round,b=this.board,a=this.usrCoords,k=b.origin.scrCoords;null===g||g?(this.scrCoords[0]=d(a[0]),this.scrCoords[1]=d(a[0]*k[1]+a[1]*b.unitX),this.scrCoords[2]=d(a[0]*k[2]-a[2]*b.unitY)):
(this.scrCoords[0]=a[0],this.scrCoords[1]=a[0]*k[1]+a[1]*b.unitX,this.scrCoords[2]=a[0]*k[2]-a[2]*b.unitY)},screen2usr:function(){var g=this.board.origin.scrCoords,d=this.scrCoords,b=this.board;this.usrCoords[0]=1;this.usrCoords[1]=(d[1]-g[1])/b.unitX;this.usrCoords[2]=(g[2]-d[2])/b.unitY},distance:function(g,d){var b,a,k=0,c=this.usrCoords,f=this.scrCoords;if(g===q.COORDS_BY_USER){if(b=d.usrCoords,a=c[0]-b[0],k=a*a,k>h.eps)return Number.POSITIVE_INFINITY;a=c[1]-b[1];k+=a*a;a=c[2]-b[2]}else b=d.scrCoords,
a=f[1]-b[1],k+=a*a,a=f[2]-b[2];return Math.sqrt(k+a*a)},setCoordinates:function(g,d,b,a){var k=this.usrCoords,c=this.scrCoords,f=[k[0],k[1],k[2]],n=[c[0],c[1],c[2]];return g===q.COORDS_BY_USER?(2===d.length?(k[0]=1,k[1]=d[0],k[2]=d[1]):(k[0]=d[0],k[1]=d[1],k[2]=d[2],this.normalizeUsrCoords()),this.usr2screen(b)):(c[1]=d[0],c[2]=d[1],this.screen2usr()),!this.emitter||a||n[1]===c[1]&&n[2]===c[2]||this.triggerEventHandlers(["update"],[f,n]),this},copy:function(g,d){return"undefined"==typeof d&&(d=0),
this[g].slice(d)},__evt__update:function(){},__evt:function(){}}),m.Coords});E("utils/color",["jxg","utils/type","math/math"],function(m,q,l){var e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",
cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",
fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",
lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",
navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",
slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},h=[{re:/^\s*rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([\d\.]{1,3})\s*\)\s*$/,example:["rgba(123, 234, 45, 0.5)","rgba(255,234,245,1.0)"],process:function(g){return[parseInt(g[1],10),parseInt(g[2],
10),parseInt(g[3],10)]}},{re:/^\s*rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)\s*$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(g){return[parseInt(g[1],10),parseInt(g[2],10),parseInt(g[3],10)]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(g){return[parseInt(g[1],16),parseInt(g[2],16),parseInt(g[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(g){return[parseInt(g[1]+g[1],16),parseInt(g[2]+g[2],16),parseInt(g[3]+
g[3],16)]}}];return m.rgbParser=function(g,d,b){var a,k,c,f,n,p,s;f=g;c=!1;if(!q.exists(g))return[];if(q.exists(d)&&q.exists(b)&&(f=[g,d,b]),a=f,q.isArray(a)){for(g=0;3>g;g++)c=c||/\./.test(f[g].toString());for(g=0;3>g;g++)c=c&&0<=f[g]&&1>=f[g];return c?[Math.ceil(255*f[0]),Math.ceil(255*f[1]),Math.ceil(255*f[2])]:f}"string"==typeof f&&(a=f);"#"===a.charAt(0)&&(a=a.substr(1,6));a=a.replace(/ /g,"").toLowerCase();a=e[a]||a;for(g=0;g<h.length;g++)c=h[g].re,f=h[g].process,(c=c.exec(a))&&(k=f(c),n=k[0],
p=k[1],s=k[2]);return isNaN(n)||isNaN(p)||isNaN(s)?[]:(n=0>n||isNaN(n)?0:255<n?255:n,p=0>p||isNaN(p)?0:255<p?255:p,s=0>s||isNaN(s)?0:255<s?255:s,[n,p,s])},m.rgb2css=function(g,d,b){var a;return a=m.rgbParser(g,d,b),"rgb("+a[0]+", "+a[1]+", "+a[2]+")"},m.rgb2hex=function(g,d,b){var a,k,c;return a=m.rgbParser(g,d,b),k=a[1],c=a[2],a=a[0],a=a.toString(16),k=k.toString(16),c=c.toString(16),1===a.length&&(a="0"+a),1===k.length&&(k="0"+k),1===c.length&&(c="0"+c),"#"+a+k+c},m.hex2rgb=function(g){var d;return d=
m.rgbParser(g),"rgb("+d[0]+", "+d[1]+", "+d[2]+")"},m.hsv2rgb=function(g,d,b){var a,k,c,f,n,p,s;if(g=(g%360+360)%360,0===d){if(!(isNaN(g)||g<l.eps))return"#ffffff";c=k=a=b}else switch(p=360<=g?0:g,p/=60,n=Math.floor(p),f=p-n,g=b*(1-d),s=b*(1-d*f),d=b*(1-d*(1-f)),n){case 0:a=b;k=d;c=g;break;case 1:a=s;k=b;c=g;break;case 2:a=g;k=b;c=d;break;case 3:a=g;k=s;c=b;break;case 4:a=d;k=g;c=b;break;case 5:a=b,k=g,c=s}return a=Math.round(255*a).toString(16),a=2===a.length?a:1===a.length?"0"+a:"00",k=Math.round(255*
k).toString(16),k=2===k.length?k:1===k.length?"0"+k:"00",c=Math.round(255*c).toString(16),c=2===c.length?c:1===c.length?"0"+c:"00",["#",a,k,c].join("")},m.rgb2hsv=function(g,d,b){var a,k,c,f,n,p,s,e,r,h,l,u;return a=m.rgbParser(g,d,b),k=a[1],c=a[2],a=a[0],f=a/255,n=k/255,p=c/255,l=Math.max(a,k,c),u=Math.min(a,k,c),s=l/255,e=u/255,h=0,0<s&&(h=(s-e)/s),r=1/(s-e),0<h&&(r=l===a?(n-p)*r:l===k?2+(p-f)*r:4+(f-n)*r),r*=60,0>r&&(r+=360),l===u&&(r=0),[r,h,s]},m.rgb2LMS=function(e,d,b){var a,k,c,f,n,p,s,h=[[.05059983,
.08585369,.0095242],[.01893033,.08925308,.01370054],[.00292202,.00975732,.07145979]];return a=m.rgbParser(e,d,b),k=a[1],c=a[2],a=a[0],a=Math.pow(a,.476190476),k=Math.pow(k,.476190476),c=Math.pow(c,.476190476),f=a*h[0][0]+k*h[0][1]+c*h[0][2],n=a*h[1][0]+k*h[1][1]+c*h[1][2],p=a*h[2][0]+k*h[2][1]+c*h[2][2],s=[f,n,p],s.l=f,s.m=n,s.s=p,s},m.LMS2rgb=function(e,d,b){var a,k,c,f,n=[[30.830854,-29.832659,1.610474],[-6.481468,17.715578,-2.532642],[-.37569,-1.199062,14.273846]],p=function(a){for(var f=127,n=
64;0<n;){if(Math.pow(f,.476190476)>a)f-=n;else{if(Math.pow(f+1,.476190476)>a)return f;f+=n}n/=2}return 254===f&&13.994955247<a?255:f};return a=e*n[0][0]+d*n[0][1]+b*n[0][2],k=e*n[1][0]+d*n[1][1]+b*n[1][2],c=e*n[2][0]+d*n[2][1]+b*n[2][2],a=p(a),k=p(k),c=p(c),f=[a,k,c],f.r=a,f.g=k,f.b=c,f},m.rgba2rgbo=function(e){var d;return 9===e.length&&"#"===e.charAt(0)?(d=parseInt(e.substr(7,2).toUpperCase(),16)/255,e=e.substr(0,7)):d=1,[e,d]},m.rgbo2rgba=function(e,d){var b;return"none"===e?e:(b=Math.round(255*
d).toString(16),1===b.length&&(b="0"+b),e+b)},m.rgb2bw=function(e){var d,b,a;return"none"===e?e:(a=m.rgbParser(e),d=Math.floor(.3*a[0]+.59*a[1]+.11*a[2]),b="0123456789ABCDEF".charAt(15&d>>4)+"0123456789ABCDEF".charAt(15&d),"#"+b+b+b)},m.rgb2cb=function(e,d){var b,a,k,c,f,n;if("none"===e)return e;switch(f=m.rgb2LMS(e),a=f[0],k=f[1],c=f[2],d.toLowerCase()){case "protanopia":a=.6903216543277437>c/k?-(.08277001656812001*k+-.013200141220000003*c)/-.06150039994295001:-(-.07934519995360001*k+.013289415272000003*
c)/.05858939668799999;break;case "tritanopia":c=.8349489908460004>k/a?-(-5.8973116217E-4*a+.007690316482*k)/-.01011703519052:-(.025495080838999994*a+-.0422740347*k)/.017005316784;break;default:k=.5763833686400911>c/a?-(-.06150039994295001*a+-.013200141220000003*c)/.08277001656812001:-(.05858939668799999*a+.013289415272000003*c)/-.07934519995360001}return b=m.LMS2rgb(a,k,c),n="0123456789ABCDEF".charAt(15&b[0]>>4)+"0123456789ABCDEF".charAt(15&b[0]),e="#"+n,n="0123456789ABCDEF".charAt(15&b[1]>>4)+"0123456789ABCDEF".charAt(15&
b[1]),e+=n,n="0123456789ABCDEF".charAt(15&b[2]>>4)+"0123456789ABCDEF".charAt(15&b[2]),e+n},m.autoHighlight=function(e){var d=m.rgba2rgbo(e),b=d[0],d=d[1];return"#"===e.charAt(0)?(d*=.3>d?1.333333:.666666,m.rgbo2rgba(b,d)):e},m});E("options",["jxg","base/constants","math/math","utils/color","utils/type"],function(m,q,l,e,h){return m.Options={jc:{enabled:!0,compile:!0},board:{boundingBox:[-5,5,5,-5],zoomFactor:1,zoomX:1,zoomY:1,showCopyright:!0,axis:!1,showNavigation:!0,showReload:!1,showClearTraces:!1,
keepAspectRatio:!1,document:!1,takeFirst:!1,takeSizeFromFile:!1,renderer:"svg",animationDelay:35,registerEvents:!0,minimizeReflow:"svg",offsetX:0,offsetY:0,zoom:{factorX:1.25,factorY:1.25,wheel:!1,needshift:!1,eps:.1},pan:{needShift:!0,needTwoFingers:!0,enabled:!0}},navbar:{strokeColor:"#333333",fillColor:"transparent",highlightFillColor:"#aaaaaa",padding:"2px",position:"absolute",fontSize:"14px",cursor:"pointer",zIndex:"100",right:"5px",bottom:"5px"},elements:{strokeColor:"#0000ff",highlightStrokeColor:"#C3D9FF",
fillColor:"red",highlightFillColor:"none",strokeOpacity:1,highlightStrokeOpacity:1,fillOpacity:1,highlightFillOpacity:1,strokeWidth:2,highlightStrokeWidth:2,fixed:!1,frozen:!1,withLabel:!1,visible:!0,priv:!1,layer:0,dash:0,shadow:!1,trace:!1,traceAttributes:{},highlight:!0,needsRegularUpdate:!0,snapToGrid:!1,scalable:!0,draft:{draft:!1,strokeColor:"#565656",fillColor:"#565656",strokeOpacity:.8,fillOpacity:.8,strokeWidth:1},isLabel:!1},ticks:{generateLabelValue:null,drawLabels:!1,label:{},anchor:"left",
drawZero:!1,insertTicks:!1,minTicksDistance:10,minorHeight:4,majorHeight:10,tickEndings:[1,1],minorTicks:4,scale:1,scaleSymbol:"",labels:[],maxLabelLength:5,precision:3,ticksDistance:1,strokeOpacity:1,strokeWidth:1,strokeColor:"black",highlightStrokeColor:"#888888",includeBoundaries:!1},hatch:{drawLabels:!1,drawZero:!0,majorHeight:20,anchor:"middle",strokeWidth:2,strokeColor:"blue",ticksDistance:.2},precision:{touch:30,touchMax:100,mouse:4,epsilon:1E-4,hasPoint:4},layer:{numlayers:20,text:9,point:9,
glider:9,arc:8,line:7,circle:6,curve:5,turtle:5,polygon:3,sector:3,angle:3,integral:3,axis:2,grid:1,image:0,trace:0},angle:{withLabel:!0,radius:.5,type:"sector",orthoType:"square",orthoSensitivity:1,fillColor:"#FF7F00",highlightFillColor:"#FF7F00",strokeColor:"#FF7F00",fillOpacity:.3,highlightFillOpacity:.3,radiuspoint:{withLabel:!1,visible:!1,name:""},pointsquare:{withLabel:!1,visible:!1,name:""},dot:{visible:!1,strokeColor:"none",fillColor:"black",size:2,face:"o",withLabel:!1,name:""},label:{position:"top",
offset:[0,0],strokeColor:"#0000FF"}},arc:{label:{},firstArrow:!1,lastArrow:!1,fillColor:"none",highlightFillColor:"none",strokeColor:"#0000ff",highlightStrokeColor:"#C3D9FF",useDirection:!1},axis:{name:"",needsRegularUpdate:!1,strokeWidth:1,strokeColor:"#666666",highlightStrokeWidth:1,highlightStrokeColor:"#888888",withTicks:!0,straightFirst:!0,straightLast:!0,lastArrow:!0,withLabel:!1,scalable:!1,ticks:{label:{offset:[4,-9],parse:!1},needsRegularUpdate:!1,strokeWidth:1,strokeColor:"#666666",highlightStrokeColor:"#888888",
drawLabels:!0,drawZero:!1,insertTicks:!0,minTicksDistance:10,minorHeight:10,majorHeight:-1,tickEndings:[0,1],minorTicks:4,ticksDistance:1,strokeOpacity:.25},point1:{needsRegularUpdate:!1},point2:{needsRegularUpdate:!1},label:{position:"lft",offset:[10,10]}},bisector:{strokeColor:"#000000",point:{visible:!1,fixed:!1,withLabel:!1,name:""}},bisectorlines:{line1:{strokeColor:"black"},line2:{strokeColor:"black"}},chart:{chartStyle:"line",colors:"#B02B2C #3F4C6B #C79810 #D15600 #FFFF88 #C3D9FF #4096EE #008C00".split(" "),
highlightcolors:null,fillcolor:null,highlightonsector:!1,highlightbysize:!1,label:{}},circle:{hasInnerPoints:!1,fillColor:"none",highlightFillColor:"none",strokeColor:"#0000ff",highlightStrokeColor:"#C3D9FF",center:{visible:!1,withLabel:!1,fixed:!1,name:""},label:{position:"urt"}},circumcircle:{fillColor:"none",highlightFillColor:"none",strokeColor:"#0000ff",highlightStrokeColor:"#C3D9FF",center:{visible:!1,fixed:!1,withLabel:!1,name:""}},circumcirclearc:{fillColor:"none",highlightFillColor:"none",
strokeColor:"#0000ff",highlightStrokeColor:"#C3D9FF",center:{visible:!1,withLabel:!1,fixed:!1,name:""}},circumcirclesector:{useDirection:!0,fillColor:"#00FF00",highlightFillColor:"#00FF00",fillOpacity:.3,highlightFillOpacity:.3,strokeColor:"#0000ff",highlightStrokeColor:"#C3D9FF",point:{visible:!1,fixed:!1,withLabel:!1,name:""}},conic:{fillColor:"none",highlightFillColor:"none",strokeColor:"#0000ff",highlightStrokeColor:"#C3D9FF",foci:{fixed:!1,visible:!1,withLabel:!1,name:""}},curve:{strokeWidth:1,
strokeColor:"#0000ff",fillColor:"none",fixed:!0,useQDT:!1,handDrawing:!1,curveType:null,RDPsmoothing:!1,numberPointsHigh:1600,numberPointsLow:400,doAdvancedPlot:!0,doAdvancedPlotOld:!1,label:{position:"lft"}},glider:{label:{}},grid:{needsRegularUpdate:!1,hasGrid:!1,gridX:1,gridY:1,strokeColor:"#C0C0C0",strokeOpacity:.5,strokeWidth:1,dash:0,snapToGrid:!1,snapSizeX:10,snapSizeY:10},htmlslider:{widthRange:100,widthOut:34,step:.01,frozen:!0,isLabel:!1,strokeColor:"black",display:"html",anchorX:"left",
anchorY:"middle",withLabel:!1},image:{imageString:null,fillOpacity:1,cssClass:"JXGimage",highlightCssClass:"JXGimageHighlight",rotate:0,snapSizeX:1,snapSizeY:1},incircle:{fillColor:"none",highlightFillColor:"none",strokeColor:"#0000ff",highlightStrokeColor:"#C3D9FF",center:{visible:!1,fixed:!1,withLabel:!1,name:""}},inequality:{fillColor:"red",fillOpacity:.2,strokeColor:"none",inverse:!1},infobox:{fontSize:12,isLabel:!1,strokeColor:"#bbbbbb",display:"html",anchorX:"left",anchorY:"middle",cssClass:"JXGinfobox",
rotate:0,visible:!0,parse:!1},integral:{axis:"x",withLabel:!0,strokeWidth:0,strokeOpacity:0,fillOpacity:.8,curveLeft:{visible:!0,withLabel:!1,layer:9},baseLeft:{visible:!1,fixed:!1,withLabel:!1,name:""},curveRight:{visible:!0,withLabel:!1,layer:9},baseRight:{visible:!1,fixed:!1,withLabel:!1,name:""},label:{fontSize:20}},intersection:{alwaysIntersect:!0},label:{strokeColor:"black",strokeOpacity:1,highlightStrokeOpacity:.666666,highlightStrokeColor:"black",fixed:!0,position:"urt",offset:[10,10]},legend:{style:"vertical",
labels:"12345678".split(""),colors:"#B02B2C #3F4C6B #C79810 #D15600 #FFFF88 #C3D9FF #4096EE #008C00".split(" ")},line:{firstArrow:!1,lastArrow:!1,straightFirst:!0,straightLast:!0,fillColor:"none",highlightFillColor:"none",strokeColor:"#0000ff",highlightStrokeColor:"#888888",withTicks:!1,point1:{visible:!1,withLabel:!1,fixed:!1,name:""},point2:{visible:!1,withLabel:!1,fixed:!1,name:""},ticks:{drawLabels:!0,label:{offset:[4,-9]},drawZero:!1,insertTicks:!1,minTicksDistance:50,minorHeight:4,majorHeight:-1,
minorTicks:4,defaultDistance:1,strokeOpacity:.3},label:{position:"llft"},snapToGrid:!1,snapSizeX:1,snapSizeY:1},locus:{translateToOrigin:!1,translateTo10:!1,stretch:!1,toOrigin:null,to10:null},normal:{strokeColor:"#000000",point:{visible:!1,fixed:!1,withLabel:!1,name:""}},orthogonalprojection:{},parallel:{strokeColor:"#000000",point:{visible:!1,fixed:!1,withLabel:!1,name:""},label:{position:"llft"}},perpendicular:{strokeColor:"#000000",straightFirst:!0,straightLast:!0},perpendicularsegment:{strokeColor:"#000000",
straightFirst:!1,straightLast:!1,point:{visible:!1,fixed:!0,withLabel:!1,name:""}},point:{withLabel:!0,label:{},style:5,face:"o",size:3,fillColor:"#ff0000",highlightFillColor:"#EEEEEE",strokeWidth:2,strokeColor:"#ff0000",highlightStrokeColor:"#C3D9FF",zoom:!1,showInfobox:!0,infoboxDigits:"auto",draft:!1,attractors:[],attractorUnit:"user",attractorDistance:0,snatchDistance:0,snapToGrid:!1,snapSizeX:1,snapSizeY:1,snapToPoints:!1},polygon:{hasInnerPoints:!1,fillColor:"#00FF00",highlightFillColor:"#00FF00",
fillOpacity:.3,highlightFillOpacity:.3,withLines:!0,borders:{withLabel:!1,strokeWidth:1,highlightStrokeWidth:1,layer:5,label:{position:"top"}},vertices:{withLabel:!0,strokeColor:"#ff0000",fillColor:"#ff0000",fixed:!0},label:{offset:[0,0]}},prescribedangle:{anglepoint:{size:2,visible:!1,withLabel:!1}},riemannsum:{withLabel:!1,fillOpacity:.3,fillColor:"#ffff00"},sector:{fillColor:"#00FF00",highlightFillColor:"#00FF00",fillOpacity:.3,highlightFillOpacity:.3,highlightOnSector:!1,radiuspoint:{visible:!1,
withLabel:!1},center:{visible:!1,withLabel:!1},anglepoint:{visible:!1,withLabel:!1},label:{offset:[0,0]}},segment:{label:{position:"top"}},semicircle:{midpoint:{visible:!1,withLabel:!1,fixed:!1,name:""}},slider:{snapWidth:-1,precision:2,firstArrow:!1,lastArrow:!1,withTicks:!0,withLabel:!0,layer:9,showInfobox:!1,name:"",visible:!0,strokeColor:"#000000",highlightStrokeColor:"#888888",fillColor:"#ffffff",highlightFillColor:"none",size:6,point1:{needsRegularUpdate:!1,showInfobox:!1,withLabel:!1,visible:!1,
fixed:!0,name:""},point2:{needsRegularUpdate:!1,showInfobox:!1,withLabel:!1,visible:!1,fixed:!0,name:""},baseline:{needsRegularUpdate:!1,fixed:!0,name:"",strokeWidth:1,strokeColor:"#000000",highlightStrokeColor:"#888888"},ticks:{needsRegularUpdate:!1,fixed:!0,drawLabels:!1,drawZero:!0,insertTicks:!0,minorHeight:4,majorHeight:10,minorTicks:0,defaultDistance:1,strokeOpacity:1,strokeWidth:1,strokeColor:"#000000"},highline:{strokeWidth:3,fixed:!0,name:"",strokeColor:"#000000",highlightStrokeColor:"#888888"},
label:{strokeColor:"#000000"}},slopetriangle:{fillColor:"red",fillOpacity:.4,highlightFillColor:"red",highlightFillOpacity:.3,glider:{fixed:!0,visible:!1,withLabel:!1},baseline:{visible:!1,withLabel:!1,name:""},basepoint:{visible:!1,withLabel:!1,name:""},toppoint:{visible:!1,withLabel:!1,name:""},label:{visible:!0}},stepfunction:{},tapemeasure:{strokeColor:"#000000",strokeWidth:2,highlightStrokeColor:"#000000",withTicks:!0,withLabel:!0,precision:2,point1:{strokeColor:"#000000",fillColor:"#ffffff",
fillOpacity:0,highlightFillOpacity:.1,size:6,snapToPoints:!0,attractorUnit:"screen",attractorDistance:20,showInfobox:!1,withLabel:!1,name:""},point2:{strokeColor:"#000000",fillColor:"#ffffff",fillOpacity:0,highlightFillOpacity:.1,size:6,snapToPoints:!0,attractorUnit:"screen",attractorDistance:20,showInfobox:!1,withLabel:!1,name:""},ticks:{drawLabels:!1,drawZero:!0,insertTicks:!0,minorHeight:8,majorHeight:16,minorTicks:4,tickEndings:[0,1],defaultDistance:.1,strokeOpacity:1,strokeWidth:1,strokeColor:"#000000"},
label:{position:"top"}},text:{fontSize:12,digits:2,parse:!0,useCaja:!1,isLabel:!1,strokeColor:"black",highlightStrokeColor:"black",highlightStrokeOpacity:.666666,useASCIIMathML:!1,useMathJax:!1,display:"html",anchorX:"left",anchorY:"middle",cssClass:"JXGtext",highlightCssClass:"JXGtext",dragArea:"all",withLabel:!1,rotate:0,visible:!0,snapSizeX:1,snapSizeY:1},tracecurve:{strokeColor:"#000000",fillColor:"none",numberPoints:100},turtle:{strokeWidth:1,fillColor:"none",strokeColor:"#000000",arrow:{strokeWidth:2,
withLabel:!1,strokeColor:"#ff0000"}},shortcuts:{color:["strokeColor","fillColor"],opacity:["strokeOpacity","fillOpacity"],highlightColor:["highlightStrokeColor","highlightFillColor"],highlightOpacity:["highlightStrokeOpacity","highlightFillOpacity"],strokeWidth:["strokeWidth","highlightStrokeWidth"]}},m.Validator=function(){var e,d=function(a){return h.isString(a)},b=function(a){return Math.abs(a-Math.round(a))<l.eps},a=function(a){return b(a)&&0<a},k=function(a){return 0<a},c=function(a){return 0<=
a},f={},d={attractorDistance:c,color:d,defaultDistance:h.isNumber,display:function(a){return"html"===a||"internal"===a},doAdvancedPlot:!1,draft:!1,drawLabels:!1,drawZero:!1,face:function(a){return h.exists(m.normalizePointFace(a))},factor:h.isNumber,fillColor:d,fillOpacity:h.isNumber,firstArrow:!1,fontSize:b,dash:b,gridX:h.isNumber,gridY:h.isNumber,hasGrid:!1,highlightFillColor:d,highlightFillOpacity:h.isNumber,highlightStrokeColor:d,highlightStrokeOpacity:h.isNumber,insertTicks:!1,lastArrow:!1,majorHeight:b,
minorHeight:b,minorTicks:a,minTicksDistance:a,numberPointsHigh:a,numberPointsLow:a,opacity:h.isNumber,radius:h.isNumber,RDPsmoothing:!1,renderer:function(a){return"vml"===a||"svg"===a||"canvas"===a||"no"===a},right:function(a){return/^[0-9]+px$/.test(a)},showCopyright:!1,showInfobox:!1,showNavigation:!1,size:b,snapSizeX:k,snapSizeY:k,snapWidth:h.isNumber,snapToGrid:!1,snatchDistance:c,straightFirst:!1,straightLast:!1,stretch:!1,strokeColor:d,strokeOpacity:h.isNumber,strokeWidth:b,takeFirst:!1,takeSizeFromFile:!1,
to10:!1,toOrigin:!1,translateTo10:!1,translateToOrigin:!1,useASCIIMathML:!1,useDirection:!1,useMathJax:!1,withLabel:!1,withTicks:!1,zoom:!1};for(e in d)d.hasOwnProperty(e)&&(f[e.toLowerCase()]=d[e]);return f}(),m.normalizePointFace=function(e){return{cross:"x",x:"x",circle:"o",o:"o",square:"[]","[]":"[]",plus:"+","+":"+",diamond:"<>","<>":"<>",triangleup:"^",a:"^","^":"^",triangledown:"v",v:"v",triangleleft:"<","<":"<",triangleright:">",">":">"}[e]},m.useStandardOptions=function(e){var d,b,a,k,c=
m.Options,f=e.hasGrid;e.options.grid.hasGrid=c.grid.hasGrid;e.options.grid.gridX=c.grid.gridX;e.options.grid.gridY=c.grid.gridY;e.options.grid.gridColor=c.grid.gridColor;e.options.grid.gridOpacity=c.grid.gridOpacity;e.options.grid.gridDash=c.grid.gridDash;e.options.grid.snapToGrid=c.grid.snapToGrid;e.options.grid.snapSizeX=c.grid.SnapSizeX;e.options.grid.snapSizeY=c.grid.SnapSizeY;e.takeSizeFromFile=c.takeSizeFromFile;k=function(a,f){a.visProp.fillcolor=f.fillColor;a.visProp.highlightfillcolor=f.highlightFillColor;
a.visProp.strokecolor=f.strokeColor;a.visProp.highlightstrokecolor=f.highlightStrokeColor};for(d in e.objects)if(e.objects.hasOwnProperty(d))if(a=e.objects[d],a.elementClass===q.OBJECT_CLASS_POINT)k(a,c.point);else if(a.elementClass===q.OBJECT_CLASS_LINE)for(k(a,c.line),b=0;b<a.ticks.length;b++)a.ticks[b].majorTicks=c.line.ticks.majorTicks,a.ticks[b].minTicksDistance=c.line.ticks.minTicksDistance,a.ticks[b].visProp.minorheight=c.line.ticks.minorHeight,a.ticks[b].visProp.majorheight=c.line.ticks.majorHeight;
else a.elementClass===q.OBJECT_CLASS_CIRCLE?k(a,c.circle):a.type===q.OBJECT_TYPE_ANGLE?k(a,c.angle):a.type===q.OBJECT_TYPE_ARC?k(a,c.arc):a.type===q.OBJECT_TYPE_POLYGON?k(a,c.polygon):a.type===q.OBJECT_TYPE_CONIC?k(a,c.conic):a.type===q.OBJECT_TYPE_CURVE?k(a,c.curve):a.type===q.OBJECT_TYPE_SECTOR&&(a.arc.visProp.fillcolor=c.sector.fillColor,a.arc.visProp.highlightfillcolor=c.sector.highlightFillColor,a.arc.visProp.fillopacity=c.sector.fillOpacity,a.arc.visProp.highlightfillopacity=c.sector.highlightFillOpacity);
e.fullUpdate();f&&!e.hasGrid?e.removeGrids(e):!f&&e.hasGrid&&e.create("grid",[])},m.useBlackWhiteOptions=function(g){var d=m.Options;d.point.fillColor=e.rgb2bw(d.point.fillColor);d.point.highlightFillColor=e.rgb2bw(d.point.highlightFillColor);d.point.strokeColor=e.rgb2bw(d.point.strokeColor);d.point.highlightStrokeColor=e.rgb2bw(d.point.highlightStrokeColor);d.line.fillColor=e.rgb2bw(d.line.fillColor);d.line.highlightFillColor=e.rgb2bw(d.line.highlightFillColor);d.line.strokeColor=e.rgb2bw(d.line.strokeColor);
d.line.highlightStrokeColor=e.rgb2bw(d.line.highlightStrokeColor);d.circle.fillColor=e.rgb2bw(d.circle.fillColor);d.circle.highlightFillColor=e.rgb2bw(d.circle.highlightFillColor);d.circle.strokeColor=e.rgb2bw(d.circle.strokeColor);d.circle.highlightStrokeColor=e.rgb2bw(d.circle.highlightStrokeColor);d.arc.fillColor=e.rgb2bw(d.arc.fillColor);d.arc.highlightFillColor=e.rgb2bw(d.arc.highlightFillColor);d.arc.strokeColor=e.rgb2bw(d.arc.strokeColor);d.arc.highlightStrokeColor=e.rgb2bw(d.arc.highlightStrokeColor);
d.polygon.fillColor=e.rgb2bw(d.polygon.fillColor);d.polygon.highlightFillColor=e.rgb2bw(d.polygon.highlightFillColor);d.sector.fillColor=e.rgb2bw(d.sector.fillColor);d.sector.highlightFillColor=e.rgb2bw(d.sector.highlightFillColor);d.curve.strokeColor=e.rgb2bw(d.curve.strokeColor);d.grid.gridColor=e.rgb2bw(d.grid.gridColor);m.useStandardOptions(g)},m.Options.normalizePointFace=m.normalizePointFace,m.Options});E("math/numerics",["utils/type","math/math"],function(m,q){var l={rk4:{s:4,A:[[0,0,0,0],
[.5,0,0,0],[0,.5,0,0],[0,0,1,0]],b:[1/6,1/3,1/3,1/6],c:[0,.5,.5,1]},heun:{s:2,A:[[0,0],[1,0]],b:[.5,.5],c:[0,1]},euler:{s:1,A:[[0]],b:[1],c:[0]}};return q.Numerics={Gauss:function(e,h){var g,d,b,a,k,c=q.eps,f=0<e.length?e[0].length:0;if(f!==h.length||f!==e.length)throw Error("JXG.Math.Numerics.Gauss: Dimensions don't match. A must be a square matrix and b must be of the same length as A.");a=[];k=h.slice(0,f);for(g=0;f>g;g++)a[g]=e[g].slice(0,f);for(d=0;f>d;d++){for(g=f-1;g>d;g--)if(Math.abs(a[g][d])>
c)if(Math.abs(a[d][d])<c)m.swap(a,g,d),m.swap(k,g,d);else for(a[g][d]/=a[d][d],k[g]-=a[g][d]*k[d],b=d+1;f>b;b++)a[g][b]-=a[g][d]*a[d][b];if(Math.abs(a[d][d])<c)throw Error("JXG.Math.Numerics.Gauss(): The given matrix seems to be singular.");}return this.backwardSolve(a,k,!0),k},backwardSolve:function(e,h,g){var d,b;h=g?h:h.slice(0,h.length);d=e.length;g=0<e.length?e[0].length:0;for(d-=1;0<=d;d--){for(b=g-1;b>d;b--)h[d]-=e[d][b]*h[b];h[d]/=e[d][d]}return h},gaussBareiss:function(e){var h,g,d,b,a,k,
c,f,n=q.eps;if(k=e.length,0>=k)return 0;e[0].length<k&&(k=e[0].length);c=[];for(d=0;k>d;d++)c[d]=e[d].slice(0,k);g=h=1;for(e=0;k-1>e;e++){if(a=c[e][e],Math.abs(a)<n){for(d=e+1;k>d&&!(Math.abs(c[d][e])>=n);d++);if(d===k)return 0;for(b=e;k>b;b++)f=c[d][b],c[d][b]=c[e][b],c[e][b]=f;g=-g;a=c[e][e]}for(d=e+1;k>d;d++)for(b=e+1;k>b;b++)f=a*c[d][b]-c[d][e]*c[e][b],c[d][b]=f/h;h=a}return g*c[k-1][k-1]},det:function(e){return 2===e.length&&2===e[0].length?e[0][0]*e[1][1]-e[1][0]*e[0][1]:this.gaussBareiss(e)},
Jacobi:function(e){var h,g,d,b,a,k,c,f,n=q.eps,p=0,s=e.length,v=[[0,0,0],[0,0,0],[0,0,0]],r=[[0,0,0],[0,0,0],[0,0,0]],l=0;for(h=0;s>h;h++){for(g=0;s>g;g++)v[h][g]=0,r[h][g]=e[h][g],p+=Math.abs(r[h][g]);v[h][h]=1}if(1===s||0>=p)return[r,v];p/=s*s;do{f=c=0;for(g=1;s>g;g++)for(h=0;g>h;h++)if(d=Math.abs(r[h][g]),d>f&&(f=d),c+=d,d>=n){d=.5*Math.atan2(2*r[h][g],r[h][h]-r[g][g]);b=Math.sin(d);a=Math.cos(d);for(e=0;s>e;e++)k=r[e][h],r[e][h]=a*k+b*r[e][g],r[e][g]=-b*k+a*r[e][g],k=v[e][h],v[e][h]=a*k+b*v[e][g],
v[e][g]=-b*k+a*v[e][g];r[h][h]=a*r[h][h]+b*r[g][h];r[g][g]=-b*r[h][g]+a*r[g][g];for(e=r[h][g]=0;s>e;e++)r[h][e]=r[e][h],r[g][e]=r[e][g]}l+=1}while(Math.abs(c)/p>n&&2E3>l);return[r,v]},NewtonCotes:function(e,h,g){var d,b,a,k=0;a=g&&"number"==typeof g.number_of_nodes?g.number_of_nodes:28;k={trapez:!0,simpson:!0,milne:!0};k=g&&g.integration_type&&k.hasOwnProperty(g.integration_type)&&k[g.integration_type]?g.integration_type:"milne";g=(e[1]-e[0])/a;switch(k){case "trapez":k=.5*(h(e[0])+h(e[1]));d=e[0];
for(b=0;a-1>b;b++)d+=g,k+=h(d);k*=g;break;case "simpson":if(0<a%2)throw Error("JSXGraph:  INT_SIMPSON requires config.number_of_nodes dividable by 2.");a/=2;k=h(e[0])+h(e[1]);d=e[0];for(b=0;a-1>b;b++)d+=2*g,k+=2*h(d);d=e[0]-g;for(b=0;a>b;b++)d+=2*g,k+=4*h(d);k*=g/3;break;default:if(0<a%4)throw Error("JSXGraph: Error in INT_MILNE: config.number_of_nodes must be a multiple of 4");a*=.25;k=7*(h(e[0])+h(e[1]));d=e[0];for(b=0;a-1>b;b++)d+=4*g,k+=14*h(d);d=e[0]-3*g;for(b=0;a>b;b++)d+=4*g,k+=32*(h(d)+h(d+
2*g));d=e[0]-2*g;for(b=0;a>b;b++)d+=4*g,k+=12*h(d);k*=2*g/45}return k},I:function(e,h){return this.NewtonCotes(e,h,{number_of_nodes:16,integration_type:"milne"})},Newton:function(e,h,g){var d,b=0,a=q.eps,k=e.apply(g,[h]);for(m.isArray(h)&&(h=h[0]);50>b&&Math.abs(k)>a;)d=this.D(e,g)(h),Math.abs(d)>a?h-=k/d:h+=.2*Math.random()-1,k=e.apply(g,[h]),b+=1;return h},root:function(e,h,g){return this.fzero(e,h,g)},generalizedNewton:function(e,h,g,d){var b,a,k,c,f,n,p,s,v,r,l,x=0;this.generalizedNewton.t1memo?
(b=this.generalizedNewton.t1memo,a=this.generalizedNewton.t2memo):(b=g,a=d);g=e.X(b)-h.X(a);d=e.Y(b)-h.Y(a);k=g*g+d*d;s=this.D(e.X,e);v=this.D(h.X,h);r=this.D(e.Y,e);for(l=this.D(h.Y,h);k>q.eps&&10>x;)k=s(b),c=-v(a),f=r(b),n=-l(a),p=k*n-c*f,b-=(n*g-c*d)/p,a-=(k*d-f*g)/p,g=e.X(b)-h.X(a),d=e.Y(b)-h.Y(a),k=g*g+d*d,x+=1;return this.generalizedNewton.t1memo=b,this.generalizedNewton.t2memo=a,Math.abs(b)<Math.abs(a)?[e.X(b),e.Y(b)]:[h.X(a),h.Y(a)]},Neville:function(e){var h=[],g=function(b){return function(a,
k){var c,f,n;f=q.binomial;var p=e.length,s=p-1,d=0,r=0;if(!k)for(n=1,c=0;p>c;c++)h[c]=f(s,c)*n,n*=-1;f=a;for(c=0;p>c;c++){if(0===f)return e[c][b]();n=h[c]/f;f-=1;d+=e[c][b]()*n;r+=n}return d/r}},d=g("X"),g=g("Y");return[d,g,0,function(){return e.length-1}]},splineDef:function(e,h){var g,d,b=Math.min(e.length,h.length),a=[],k=[],c=[],f=[],n=[],p=[];if(2===b)return[0,0];for(d=0;b>d;d++)g={X:e[d],Y:h[d]},c.push(g);c.sort(function(a,f){return a.X-f.X});for(d=0;b>d;d++)e[d]=c[d].X,h[d]=c[d].Y;for(d=0;b-
1>d;d++)f.push(e[d+1]-e[d]);for(d=0;b-2>d;d++)n.push(6*(h[d+2]-h[d+1])/f[d+1]-6*(h[d+1]-h[d])/f[d]);a.push(2*(f[0]+f[1]));k.push(n[0]);for(d=0;b-3>d;d++)g=f[d+1]/a[d],a.push(2*(f[d+1]+f[d+2])-g*f[d+1]),k.push(n[d+1]-g*k[d]);p[b-3]=k[b-3]/a[b-3];for(d=b-4;0<=d;d--)p[d]=(k[d]-f[d+1]*p[d+1])/a[d];for(d=b-3;0<=d;d--)p[d+1]=p[d];return p[0]=0,p[b-1]=0,p},splineEval:function(e,h,g,d){var b,a,k,c,f,n,p=Math.min(h.length,g.length),s=1,v=!1,r=[];m.isArray(e)?(s=e.length,v=!0):e=[e];for(b=0;s>b;b++){if(e[b]<
h[0]||h[b]>h[p-1])return 0/0;for(a=1;p>a&&!(e[b]<=h[a]);a++);a-=1;k=g[a];c=(g[a+1]-g[a])/(h[a+1]-h[a])-(h[a+1]-h[a])/6*(d[a+1]+2*d[a]);f=d[a]/2;n=(d[a+1]-d[a])/(6*(h[a+1]-h[a]));a=e[b]-h[a];r.push(k+(c+(f+n*a)*a)*a)}return v?r:r[0]},generatePolynomialTerm:function(e,h,g,d){for(var b=[];0<=h;h--)b=b.concat(["(",e[h].toPrecision(d),")"]),1<h?b=b.concat(["*",g,"<sup>",h,"<","/sup> + "]):1===h&&(b=b.concat(["*",g," + "]));return b.join("")},lagrangePolynomial:function(e){var h=[],g=function(d,b){var a,
k,c,f=e.length,n=0,p=0;if(!b){for(a=0;f>a;a++){h[a]=1;c=e[a].X();for(k=0;f>k;k++)k!==a&&(h[a]*=c-e[k].X());h[a]=1/h[a]}k=[];for(a=0;f>a;a++)k.push([1])}for(a=0;f>a;a++){if(c=e[a].X(),d===c)return e[a].Y();k=h[a]/(d-c);p+=k;n+=k*e[a].Y()}return n/p};return g.getTerm=function(){return""},g},CardinalSpline:function(e,h){var g,d,b,a=[],k={},c={};return b=m.isFunction(h)?h:function(){return h},d=function(f){return function(n,p){var s,d,r=e.length,h=b();if(2>r)return 0/0;if(!p)for(k[f]=function(){return 2*
e[0][f]()-e[1][f]()},c[f]=function(){return 2*e[r-1][f]()-e[r-2][f]()},g=[k].concat(e,[c]),a[f]=[],s=0;r-1>s;s++)a[f][s]=[1/h*g[s+1][f](),-g[s][f]()+g[s+2][f](),2*g[s][f]()+(-3/h+1)*g[s+1][f]()+(3/h-2)*g[s+2][f]()-g[s+3][f](),-g[s][f]()+(2/h-1)*g[s+1][f]()+(-2/h+1)*g[s+2][f]()+g[s+3][f]()];return r+=2,isNaN(n)?0/0:0>=n?g[1][f]():n>=r-3?g[r-2][f]():(s=Math.floor(n),s===n?g[s][f]():(n-=s,d=a[f][s],h*(((d[3]*n+d[2])*n+d[1])*n+d[0])))}},[d("X"),d("Y"),0,function(){return e.length-1}]},CatmullRomSpline:function(e){return this.CardinalSpline(e,
.5)},regressionPolynomial:function(e,h,g){var d,b,a,k,c,f,n="";if(m.isPoint(e)&&"function"==typeof e.Value)b=function(){return e.Value()};else if(m.isFunction(e))b=e;else{if(!m.isNumber(e))throw Error("JSXGraph: Can't create regressionPolynomial from degree of type'"+typeof e+"'.");b=function(){return e}}if(3===arguments.length&&m.isArray(h)&&m.isArray(g))c=0;else if(2===arguments.length&&m.isArray(h)&&0<h.length&&m.isPoint(h[0]))c=1;else{if(!(2===arguments.length&&m.isArray(h)&&0<h.length&&h[0].usrCoords&&
h[0].scrCoords))throw Error("JSXGraph: Can't create regressionPolynomial. Wrong parameters.");c=2}return f=function(f,s){var e,r,l,x,u=h.length;if(x=Math.floor(b()),!s){if(1===c)for(a=[],k=[],e=0;u>e;e++)a[e]=h[e].X(),k[e]=h[e].Y();if(2===c)for(a=[],k=[],e=0;u>e;e++)a[e]=h[e].usrCoords[1],k[e]=h[e].usrCoords[2];if(0===c)for(a=[],k=[],e=0;u>e;e++)m.isFunction(h[e])?a.push(h[e]()):a.push(h[e]),m.isFunction(g[e])?k.push(g[e]()):k.push(g[e]);l=[];for(r=0;u>r;r++)l.push([1]);for(e=1;x>=e;e++)for(r=0;u>
r;r++)l[r][e]=l[r][e-1]*a[r];r=k;e=q.transpose(l);l=q.matMatMult(e,l);e=q.matVecMult(e,r);d=q.Numerics.Gauss(l,e);n=q.Numerics.generatePolynomialTerm(d,x,"x",3)}l=d[x];for(e=x-1;0<=e;e--)l=l*f+d[e];return l},f.getTerm=function(){return n},f},bezier:function(e){var h,g,d=function(b){return function(a,k){var c=3*Math.floor(a),f=a%1,n=1-f;return k||(g=3*Math.floor((e.length-1)/3),h=Math.floor(g/3)),0>a?e[0][b]():a>=h?e[g][b]():isNaN(a)?0/0:n*n*(n*e[c][b]()+3*f*e[c+1][b]())+(3*n*e[c+2][b]()+f*e[c+3][b]())*
f*f}};return[d("X"),d("Y"),0,function(){return Math.floor(e.length/3)}]},bspline:function(e,h){var g,d=[],b=function(a){return function(k){var c,f,n=e.length,p=n-1;c=h;if(0>=p)return 0/0;if(c>=p+2&&(c=p+1),0>=k)return e[0][a]();if(k>=p-c+2)return e[p][a]();f=Math.floor(k)+c-1;var b=c,v,r=[];for(v=0;p+b+1>v;v++)r[v]=b>v?0:p>=v?v-b+1:p-b+2;var p=g=r,b=c,l,x,m,t=[];t[f]=p[f]<=k&&k<p[f+1]?1:0;for(v=2;b>=v;v++)for(r=f-v+1;f>=r;r++)l=f-v+1>=r||0>r?0:t[r],x=r>=f?0:t[r+1],m=p[r+v-1]-p[r],t[r]=0===m?0:(k-
p[r])/m*l,m=p[r+v]-p[r+1],0!==m&&(t[r]+=(p[r+v]-k)/m*x);d=t;k=0;for(c=f-c+1;f>=c;c++)n>c&&0<=c&&(k+=e[c][a]()*d[c]);return k}};return[b("X"),b("Y"),0,function(){return e.length-1}]},D:function(e,h){var g=1/2E-5;return m.exists(h)?function(d,b){return(e.apply(h,[d+1E-5,b])-e.apply(h,[d-1E-5,b]))*g}:function(d,b){return(e(d+1E-5,b)-e(d-1E-5,b))*g}},riemann:function(e,h,g,d,b){var a,k,c,f,n=[],p=[],s=0,v=d,r=0;if(h=Math.round(h),n[s]=v,p[s]=0,0<h)for(c=(b-d)/h,k=.01*c,d=0;h>d;d++){if("right"===g)f=e(v+
c);else if("middle"===g)f=e(v+.5*c);else if("left"===g||"trapezoidal"===g)f=e(v);else if("lower"===g)for(f=e(v),b=v+k;v+c>=b;b+=k)a=e(b),f>a&&(f=a);else if("upper"===g)for(f=e(v),b=v+k;v+c>=b;b+=k)a=e(b),a>f&&(f=a);else f="random"===g?e(v+c*Math.random()):"simpson"===g?(e(v)+4*e(v+.5*c)+e(v+c))/6:e(v);s+=1;n[s]=v;p[s]=f;s+=1;v+=c;"trapezoidal"===g&&(f=e(v));n[s]=v;p[s]=f;s+=1;n[s]=v;p[s]=0;r+=f*c}return[n,p,r]},riemannsum:function(e,h,g,d,b){var a,k,c,f,n=0,p=d;if(h=Math.floor(h),0<h)for(c=(b-d)/
h,k=.01*c,d=0;h>d;d++){if("right"===g)f=e(p+c);else if("middle"===g)f=e(p+.5*c);else if("trapezoidal"===g)f=.5*(e(p+c)+e(p));else if("left"===g)f=e(p);else if("lower"===g)for(f=e(p),b=p+k;p+c>=b;b+=k)a=e(b),f>a&&(f=a);else if("upper"===g)for(f=e(p),b=p+k;p+c>=b;b+=k)a=e(b),a>f&&(f=a);else f="random"===g?e(p+c*Math.random()):"simpson"===g?(e(p)+4*e(p+.5*c)+e(p+c))/6:e(p);n+=c*f;p+=c}return n},rungeKutta:function(e,h,g,d,b){var a,k,c,f,n=[],p=[],s=(g[1]-g[0])/d,v=g[0],r=h.length,y=[],x=0;m.isString(e)&&
(e=l[e]||l.euler);f=e.s;for(g=0;r>g;g++)n[g]=h[g];for(h=0;d>h;h++){y[x]=[];for(g=0;r>g;g++)y[x][g]=n[g];x+=1;k=[];for(a=0;f>a;a++){for(g=0;r>g;g++)p[g]=0;for(c=0;a>c;c++)for(g=0;r>g;g++)p[g]+=e.A[a][c]*s*k[c][g];for(g=0;r>g;g++)p[g]+=n[g];k.push(b(v+e.c[a]*s,p))}for(g=0;r>g;g++)p[g]=0;for(c=0;f>c;c++)for(g=0;r>g;g++)p[g]+=e.b[c]*k[c][g];for(g=0;r>g;g++)n[g]+=s*p[g];v+=s}return y},maxIterationsRoot:80,maxIterationsMinimize:500,fzero:function(e,h,g){var d,b,a,k,c,f,n,p,s,v,r,l,x,u,t,w,z=q.eps,B=this.maxIterationsRoot,
A=0;if(m.isArray(h)){if(2>h.length)throw Error("JXG.Math.Numerics.fzero: length of array x0 has to be at least two.");d=h[0];a=e.call(g,d);b=h[1];k=e.call(g,b)}else{d=h;a=e.call(g,d);f=0===d?1:d;f=[.9*f,1.1*f,f-1,f+1,.5*f,1.5*f,-f,2*f,-10*f,10*f];p=f.length;for(n=0;p>n&&(b=f[n],k=e.call(g,b),!(0>=a*k));n++);d>b&&(c=d,d=b,b=c,s=a,a=k,k=s)}if(0<a*k)return m.isArray(h)?this.fminbr(e,[d,b],g):this.Newton(e,d,g);h=d;for(c=a;B>A&&!(s=b-d,Math.abs(c)<Math.abs(k)&&(d=b,b=h,h=d,a=k,k=c,c=a),x=2*z*Math.abs(b)+
.5*z,w=.5*(h-b),Math.abs(w)<=x&&Math.abs(k)<=z);)Math.abs(s)>=x&&Math.abs(a)>Math.abs(k)&&(r=h-b,d===h?(v=k/a,u=r*v,t=1-v):(t=a/c,v=k/c,l=k/a,u=l*(r*t*(t-v)-(b-d)*(v-1)),t=(t-1)*(v-1)*(l-1)),0<u?t=-t:u=-u,u<.75*r*t-.5*Math.abs(x*t)&&u<Math.abs(.5*s*t)&&(w=u/t)),Math.abs(w)<x&&(w=0<w?x:-x),d=b,a=k,b+=w,k=e.call(g,b),(0<k&&0<c||0>k&&0>c)&&(h=d,c=a),A++;return b},fminbr:function(e,h,g){var d,b,a,k,c,f,n,p,s,v,r,l,x,u,t=.5*(3-Math.sqrt(5)),w=q.eps,z=q.eps,B=this.maxIterationsMinimize,A=0;if(!m.isArray(h)||
2>h.length)throw Error("JXG.Math.Numerics.fminbr: length of array x0 has to be at least two.");d=h[0];h=h[1];a=d+t*(h-d);f=e.call(g,a);k=b=a;for(n=c=f;B>A&&!(p=h-d,s=.5*(d+h),v=z*Math.abs(b)+w/3,Math.abs(b-s)+.5*p<=2*v);)r=t*(s>b?h-b:d-b),Math.abs(b-k)>=v&&(u=(b-k)*(c-f),x=(b-a)*(c-n),l=(b-a)*x-(b-k)*u,x=2*(x-u),0<x?l=-l:x=-x,Math.abs(l)<Math.abs(r*x)&&l>x*(d-b+2*v)&&x*(h-b-2*v)>l&&(r=l/x)),Math.abs(r)<v&&(r=0<r?v:-v),u=b+r,r=e.call(g,u),c>=r?(b>u?h=b:d=b,a=k,k=b,b=u,f=n,n=c,c=r):(b>u?d=u:h=u,n>=
r||k===b?(a=k,k=u,f=n,n=r):(f>=r||a===b||a===k)&&(a=u,f=r)),A+=1;return b},RamerDouglasPeuker:function(e,h){var g,d,b,a=[],k=function(a,f,n,p,b){var d;var e,g,h,l,t,w,m,B,A,C=0,F=f;if(2>n-f)d=[-1,0];else if(g=a[f].scrCoords,h=a[n].scrCoords,isNaN(g[1]+g[2]+h[1]+h[2]))d=[0/0,n];else{for(e=f+1;n>e;e++)l=a[e].scrCoords,t=l[1]-g[1],l=l[2]-g[2],w=h[1]-g[1],m=h[2]-g[2],B=w*w+m*m,B>=q.eps?(A=(t*w+l*m)/B,0>A?A=0:1<A&&(A=1),t-=A*w,l-=A*m,d=t*t+l*l):(A=0,d=t*t+l*l),d>C&&(C=d,F=e);d=[Math.sqrt(C),F]}d[0]>p?
(k(a,f,d[1],p,b),k(a,d[1],n,p,b)):b.push(a[n])};b=e.length;for(g=0;b>g&&isNaN(e[g].scrCoords[1]+e[g].scrCoords[2]);)g+=1;for(d=b-1;d>g&&isNaN(e[d].scrCoords[1]+e[d].scrCoords[2]);)d-=1;return g>d||g===b||(a[0]=e[g],k(e,g,d,h,a)),a}},q.Numerics});E("math/geometry","jxg base/constants base/coords math/math math/numerics utils/type utils/expect".split(" "),function(m,q,l,e,h,g,d){return e.Geometry={},m.extend(e.Geometry,{angle:function(b,a,k){var c,f,n,p,s=[],d=[],e=[];return b.coords?(s[0]=b.coords.usrCoords[1],
s[1]=b.coords.usrCoords[2]):(s[0]=b[0],s[1]=b[1]),a.coords?(d[0]=a.coords.usrCoords[1],d[1]=a.coords.usrCoords[2]):(d[0]=a[0],d[1]=a[1]),k.coords?(e[0]=k.coords.usrCoords[1],e[1]=k.coords.usrCoords[2]):(e[0]=k[0],e[1]=k[1]),c=s[0]-d[0],f=s[1]-d[1],n=e[0]-d[0],p=e[1]-d[1],Math.atan2(c*p-f*n,c*n+f*p)},trueAngle:function(b,a,k){return 57.29577951308232*this.rad(b,a,k)},rad:function(b,a,k){var c,f,n,p,s,d,e;return b.coords?(c=b.coords.usrCoords[1],f=b.coords.usrCoords[2]):(c=b[0],f=b[1]),a.coords?(n=
a.coords.usrCoords[1],p=a.coords.usrCoords[2]):(n=a[0],p=a[1]),k.coords?(s=k.coords.usrCoords[1],d=k.coords.usrCoords[2]):(s=k[0],d=k[1]),e=Math.atan2(d-p,s-n)-Math.atan2(f-p,c-n),0>e&&(e+=6.283185307179586),e},angleBisector:function(b,a,k,c){var f,n,p,s,d,e=b.coords.usrCoords;a=a.coords.usrCoords;k=k.coords.usrCoords;return g.exists(c)||(c=b.board),0===a[0]?new l(q.COORDS_BY_USER,[1,.5*(e[1]+k[1]),.5*(e[2]+k[2])],c):(s=e[1]-a[1],d=e[2]-a[2],f=Math.atan2(d,s),s=k[1]-a[1],d=k[2]-a[2],n=Math.atan2(d,
s),p=.5*(f+n),f>n&&(p+=Math.PI),s=Math.cos(p)+a[1],d=Math.sin(p)+a[2],new l(q.COORDS_BY_USER,[1,s,d],c))},reflection:function(b,a,k){var c,f,n,p,s,d,e,h=a.coords.usrCoords,x=b.point1.coords.usrCoords;b=b.point2.coords.usrCoords;return g.exists(k)||(k=a.board),s=b[1]-x[1],d=b[2]-x[2],c=h[1]-x[1],f=h[2]-x[2],e=(s*f-d*c)/(s*s+d*d),n=h[1]+2*e*d,p=h[2]-2*e*s,new l(q.COORDS_BY_USER,[n,p],k)},rotation:function(b,a,k,c){var f,n,p,s,d,e,h=a.coords.usrCoords;b=b.coords.usrCoords;return g.exists(c)||(c=a.board),
f=h[1]-b[1],n=h[2]-b[2],p=Math.cos(k),s=Math.sin(k),d=f*p-n*s+b[1],e=f*s+n*p+b[2],new l(q.COORDS_BY_USER,[d,e],c)},perpendicular:function(b,a,k){var c,f,n,p,s,d=b.point1.coords.usrCoords,r=b.point2.coords.usrCoords,h=a.coords.usrCoords;return g.exists(k)||(k=a.board),a===b.point1?(c=d[1]+r[2]-d[2],f=d[2]-r[1]+d[1],s=d[0]*r[0],Math.abs(s)<e.eps&&(c=r[2],f=-r[1]),p=[s,c,f],n=!0):a===b.point2?(c=r[1]+d[2]-r[2],f=r[2]-d[1]+r[1],s=d[0]*r[0],Math.abs(s)<e.eps&&(c=d[2],f=-d[1]),p=[s,c,f],n=!1):Math.abs(e.innerProduct(h,
b.stdform,3))<e.eps?(c=h[1]+r[2]-h[2],f=h[2]-r[1]+h[1],s=r[0],Math.abs(s)<e.eps&&(c=r[2],f=-r[1]),n=!0,Math.abs(s)>e.eps&&Math.abs(c-h[1])<e.eps&&Math.abs(f-h[2])<e.eps&&(c=h[1]+d[2]-h[2],f=h[2]-d[1]+h[1],n=!1),p=[s,c,f]):(p=[0,b.stdform[1],b.stdform[2]],p=e.crossProduct(p,h),p=e.crossProduct(p,b.stdform),n=!0),[new l(g.COORDS_BY_USER,p,k),n]},circumcenterMidpoint:m.shortcut(e.Geometry,"circumcenter"),circumcenter:function(b,a,k,c){var f,n,p,s,d=b.coords.usrCoords;a=a.coords.usrCoords;k=k.coords.usrCoords;
return g.exists(c)||(c=b.board),f=[a[0]-d[0],-a[2]+d[2],a[1]-d[1]],n=[.5*(d[0]+a[0]),.5*(d[1]+a[1]),.5*(d[2]+a[2])],p=e.crossProduct(f,n),f=[k[0]-a[0],-k[2]+a[2],k[1]-a[1]],n=[.5*(a[0]+k[0]),.5*(a[1]+k[1]),.5*(a[2]+k[2])],s=e.crossProduct(f,n),new l(q.COORDS_BY_USER,e.crossProduct(p,s),c)},distance:function(b,a,k){var c,f=0;k||(k=Math.min(b.length,a.length));for(c=0;k>c;c++)f+=(b[c]-a[c])*(b[c]-a[c]);return Math.sqrt(f)},affineDistance:function(b,a,k){var c;return c=this.distance(b,a,k),c>e.eps&&
(Math.abs(b[0])<e.eps||Math.abs(a[0])<e.eps)?1/0:c},sortVertices:function(b){var a,k=d.each(b,d.coordsArray),c=k.length;for(b=1;c>b;b++)(k[b][2]<k[0][2]||Math.abs(k[b][2]-k[0][2])<e.eps&&k[b][1]<k[0][1])&&(k=g.swap(k,b,0));return a=k.shift(),k.sort(function(f,n){var c=Math.atan2(f[2]-a[2],f[1]-a[1]),k=Math.atan2(n[2]-a[2],n[1]-a[1]);return c-k}),k.unshift(a),k.unshift(k[k.length-1]),k},signedTriangle:function(b,a,k){b=d.coordsArray(b);a=d.coordsArray(a);k=d.coordsArray(k);return.5*((a[1]-b[1])*(k[2]-
b[2])-(a[2]-b[2])*(k[1]-b[1]))},signedPolygon:function(b,a){var k,c,f=0,n=d.each(b,d.coordsArray);a?n.unshift(n[n.length-1]):n=this.sortVertices(n);c=n.length;for(k=1;c>k;k++)f+=n[k-1][1]*n[k][2]-n[k][1]*n[k-1][2];return.5*f},GrahamScan:function(b){var a=1,k=d.each(b,d.coordsArray),c=k.length,k=this.sortVertices(k),c=k.length;for(b=2;c>b;b++){for(;0>=this.signedTriangle(k[a-1],k[a],k[b]);)if(1<a)a-=1;else{if(b===c-1)break;b+=1}a+=1;k=g.swap(k,a,b)}return k.slice(0,a)},calcStraight:function(b,a,k,
c){var f,n,p,s,d,r,h,l;if(g.exists(c)||(c=10),s=b.visProp.straightfirst,d=b.visProp.straightlast,Math.abs(a.scrCoords[0])<e.eps&&(s=!0),Math.abs(k.scrCoords[0])<e.eps&&(d=!0),(s||d)&&(r=[],r[0]=b.stdform[0]-b.stdform[1]*b.board.origin.scrCoords[1]/b.board.unitX+b.stdform[2]*b.board.origin.scrCoords[2]/b.board.unitY,r[1]=b.stdform[1]/b.board.unitX,r[2]=-b.stdform[2]/b.board.unitY,!isNaN(r[0]+r[1]+r[2]))){if(f=!1,n=!1,f=!s&&Math.abs(a.usrCoords[0])>=e.eps&&0<=a.scrCoords[1]&&a.scrCoords[1]<=b.board.canvasWidth&&
0<=a.scrCoords[2]&&a.scrCoords[2]<=b.board.canvasHeight,n=!d&&Math.abs(k.usrCoords[0])>=e.eps&&0<=k.scrCoords[1]&&k.scrCoords[1]<=b.board.canvasWidth&&0<=k.scrCoords[2]&&k.scrCoords[2]<=b.board.canvasHeight,p=this.meetLineBoard(r,b.board,c),b=p[0],c=p[1],!f&&!n)if(!s&&d&&!this.isSameDirection(a,k,b)&&!this.isSameDirection(a,k,c)||s&&!d&&!this.isSameDirection(k,a,b)&&!this.isSameDirection(k,a,c))return;f?n||(l=this.isSameDir(a,k,b,c)?c:b):n?h=this.isSameDir(a,k,b,c)?b:c:this.isSameDir(a,k,b,c)?(h=
b,l=c):(l=b,h=c);h&&a.setCoordinates(q.COORDS_BY_USER,h.usrCoords);l&&k.setCoordinates(q.COORDS_BY_USER,l.usrCoords)}},calcLineDelimitingPoints:function(b,a,k){var c,f,n,p,s,d,r,g,h,l,t=!1,w=!1;if(d=b.visProp.straightfirst,r=b.visProp.straightlast,Math.abs(a.scrCoords[0])<e.eps&&(d=!0),Math.abs(k.scrCoords[0])<e.eps&&(r=!0),g=[],g[0]=b.stdform[0]-b.stdform[1]*b.board.origin.scrCoords[1]/b.board.unitX+b.stdform[2]*b.board.origin.scrCoords[2]/b.board.unitY,g[1]=b.stdform[1]/b.board.unitX,g[2]=-b.stdform[2]/
b.board.unitY,!isNaN(g[0]+g[1]+g[2])){if(t=!d,w=!r,f=b.board.getBoundingBox(),n=b.getSlope(),0<=n?(p=this.projectPointToLine({coords:{usrCoords:[1,f[2],f[1]]}},b,b.board),s=this.projectPointToLine({coords:{usrCoords:[1,f[0],f[3]]}},b,b.board)):(p=this.projectPointToLine({coords:{usrCoords:[1,f[0],f[1]]}},b,b.board),s=this.projectPointToLine({coords:{usrCoords:[1,f[2],f[3]]}},b,b.board)),!t&&!w)if(!d&&!r&&((c=a.distance(q.COORDS_BY_USER,k),Math.abs(a.distance(q.COORDS_BY_USER,p)+p.distance(q.COORDS_BY_USER,
k)-c)>e.eps)||Math.abs(a.distance(q.COORDS_BY_USER,s)+s.distance(q.COORDS_BY_USER,k)-c)>e.eps)||!d&&r&&!this.isSameDirection(a,k,p)&&!this.isSameDirection(a,k,s)||d&&!r&&!this.isSameDirection(k,a,p)&&!this.isSameDirection(k,a,s))return;t?w||(l=this.isSameDir(a,k,p,s)?s:p):w?h=this.isSameDir(a,k,p,s)?p:s:this.isSameDir(a,k,p,s)?(h=p,l=s):(l=p,h=s);h&&a.setCoordinates(q.COORDS_BY_USER,h.usrCoords);l&&k.setCoordinates(q.COORDS_BY_USER,l.usrCoords)}},isSameDir:function(b,a,k,c){var f=a.usrCoords[1]-b.usrCoords[1],
n=a.usrCoords[2]-b.usrCoords[2],p=c.usrCoords[1]-k.usrCoords[1];k=c.usrCoords[2]-k.usrCoords[2];return Math.abs(a.usrCoords[0])<e.eps&&(f=a.usrCoords[1],n=a.usrCoords[2]),Math.abs(b.usrCoords[0])<e.eps&&(f=-b.usrCoords[1],n=-b.usrCoords[2]),0<=f*p+n*k},isSameDirection:function(b,a,k){var c,f,n,p,s=!1;return c=a.usrCoords[1]-b.usrCoords[1],f=a.usrCoords[2]-b.usrCoords[2],n=k.usrCoords[1]-b.usrCoords[1],p=k.usrCoords[2]-b.usrCoords[2],Math.abs(c)<e.eps&&(c=0),Math.abs(f)<e.eps&&(f=0),Math.abs(n)<e.eps&&
(n=0),Math.abs(p)<e.eps&&(p=0),0<=c&&0<=n?s=0<=f&&0<=p||0>=f&&0>=p:0>=c&&0>=n&&(s=0<=f&&0<=p||0>=f&&0>=p),s},meet:function(b,a,k,c){var f=e.eps;return Math.abs(b[3])<f&&Math.abs(a[3])<f?this.meetLineLine(b,a,k,c):Math.abs(b[3])>=f&&Math.abs(a[3])<f?this.meetLineCircle(a,b,k,c):Math.abs(b[3])<f&&Math.abs(a[3])>=f?this.meetLineCircle(b,a,k,c):this.meetCircleCircle(b,a,k,c)},meetLineBoard:function(b,a,k){var c,f,n=[];g.exists(k)||(k=0);n[0]=e.crossProduct(b,[k,0,1]);n[1]=e.crossProduct(b,[k,1,0]);n[2]=
e.crossProduct(b,[-k-a.canvasHeight,0,1]);n[3]=e.crossProduct(b,[-k-a.canvasWidth,1,0]);for(b=0;4>b;b++)if(Math.abs(n[b][0])>e.eps){for(k=2;0<k;k--)n[b][k]/=n[b][0];n[b][0]=1}return Math.abs(n[1][0])<e.eps?(c=n[0],f=n[2]):Math.abs(n[0][0])<e.eps?(c=n[1],f=n[3]):0>n[1][2]?(c=n[0],f=n[3][2]>a.canvasHeight?n[2]:n[3]):n[1][2]>a.canvasHeight?(c=n[2],f=0>n[3][2]?n[0]:n[3]):(c=n[1],f=0>n[3][2]?n[0]:n[3][2]>a.canvasHeight?n[2]:n[3]),c=new l(q.COORDS_BY_SCREEN,c.slice(1),a),f=new l(q.COORDS_BY_SCREEN,f.slice(1),
a),[c,f]},meetLineLine:function(b,a,k,c){b=e.crossProduct(b,a);return Math.abs(b[0])>e.eps&&(b[1]/=b[0],b[2]/=b[0],b[0]=1),new l(q.COORDS_BY_USER,b,c)},meetLineCircle:function(b,a,k,c){var f,n,p,s,d,r,g,h,m;return a[4]<e.eps?Math.abs(e.innerProduct([1,a[6],a[7]],b,3))<e.eps?new l(q.COORDS_BY_USER,a.slice(6,8),c):new l(q.COORDS_BY_USER,[0/0,0/0],c):(p=a[0],n=a.slice(1,3),f=a[3],s=b[0],d=b.slice(1,3),r=n[0]*d[1]-n[1]*d[0],g=f*s*s-(n[0]*d[0]+n[1]*d[1])*s+p,h=r*r-4*f*g,0<=h?(h=Math.sqrt(h),m=[(-r+h)/
(2*f),(-r-h)/(2*f)],0===k?new l(q.COORDS_BY_USER,[-m[0]*-d[1]-s*d[0],-m[0]*d[0]-s*d[1]],c):new l(q.COORDS_BY_USER,[-m[1]*-d[1]-s*d[0],-m[1]*d[0]-s*d[1]],c)):new l(q.COORDS_BY_USER,[0,0,0],c))},meetCircleCircle:function(b,a,k,c){var f;return b[4]<e.eps?Math.abs(this.distance(b.slice(6,2),a.slice(6,8))-a[4])<e.eps?new l(q.COORDS_BY_USER,b.slice(6,8),c):new l(q.COORDS_BY_USER,[0,0,0],c):a[4]<e.eps?Math.abs(this.distance(a.slice(6,2),b.slice(6,8))-b[4])<e.eps?new l(q.COORDS_BY_USER,a.slice(6,8),c):new l(q.COORDS_BY_USER,
[0,0,0],c):(f=[a[3]*b[0]-b[3]*a[0],a[3]*b[1]-b[3]*a[1],a[3]*b[2]-b[3]*a[2],0,1,1/0,1/0,1/0],f=e.normalize(f),this.meetLineCircle(f,b,k,c))},meetCurveCurve:function(b,a,k,c,f,n){var p;return p=g.exists(n)&&"newton"===n?h.generalizedNewton(b,a,k,c):3===b.bezierDegree&&3===a.bezierDegree?this.meetBezierCurveRedBlueSegments(b,a,k):this.meetCurveRedBlueSegments(b,a,k),new l(q.COORDS_BY_USER,p,f)},meetCurveLine:function(b,a,k,c,f){var n,p;return g.exists(c)||(c=b.board),b.elementClass===q.OBJECT_CLASS_CURVE?
(n=b,p=a):(n=a,p=b),"plot"===n.visProp.curvetype?this.meetCurveLineDiscrete(n,p,k,c,!f):this.meetCurveLineContinuous(n,p,k,c)},meetCurveLineContinuous:function(b,a,k,c,f){var n,p,s,d,r,g,m,u=10*e.eps;return d=this.meetCurveLineDiscrete(b,a,k,c,f),r=d.usrCoords[1],g=d.usrCoords[2],p=function(a){var f=r-b.X(a);a=g-b.Y(a);return Math.sqrt(f*f+a*a)},s=function(f){f=a.stdform[0]+a.stdform[1]*b.X(f)+a.stdform[2]*b.Y(f);return f*f},n=h.root(p,[b.minX(),b.maxX()]),n=h.root(s,n),m=Math.abs(s(n))>u?0/0:1,new l(q.COORDS_BY_USER,
[m,b.X(n),b.Y(n)],c)},meetCurveLineContinuousOld:function(b,a,k,c){var f,n,p,s,d,r,g,m,u=10*e.eps;if(p=function(f){f=a.stdform[0]+a.stdform[1]*b.X(f)+a.stdform[2]*b.Y(f);return f*f},this.meetCurveLineContinuous.t1memo?(d=this.meetCurveLineContinuous.t1memo,f=h.root(p,d)):(d=b.minX(),r=b.maxX(),f=h.root(p,[d,r])),this.meetCurveLineContinuous.t1memo=f,g=b.X(f),m=b.Y(f),1===k){if(this.meetCurveLineContinuous.t2memo&&(d=this.meetCurveLineContinuous.t2memo),n=h.root(p,d),!(.1<Math.abs(n-f)&&.1<Math.abs(g-
b.X(n))&&.1<Math.abs(m-b.Y(n))))for(r=(b.maxX()-b.minX())/20,d=b.minX(),k=0;20>k&&(n=h.root(p,[d,d+r]),!(Math.abs(p(n))<=u&&.1<Math.abs(n-f)&&.1<Math.abs(g-b.X(n))&&.1<Math.abs(m-b.Y(n))));k++)d+=r;f=n;this.meetCurveLineContinuous.t2memo=f}return s=Math.abs(p(f))>u?0/0:1,new l(q.COORDS_BY_USER,[s,b.X(f),b.Y(f)],c)},meetCurveLineDiscrete:function(b,a,k,c,f){var n,p,s,d,r,g,h,m,t=0,w=b.numberPoints;g=new l(q.COORDS_BY_USER,[0,0/0,0/0],c);d=b.points[0].usrCoords;for(n=1;w>n;n++)if(s=d.slice(0),d=b.points[n].usrCoords,
h=this.distance(s,d),h>e.eps)for(3===b.bezierDegree?(m=this.meetBeziersegmentBeziersegment([b.points[n-1].usrCoords.slice(1),b.points[n].usrCoords.slice(1),b.points[n+1].usrCoords.slice(1),b.points[n+2].usrCoords.slice(1)],[a.point1.coords.usrCoords.slice(1),a.point2.coords.usrCoords.slice(1)],f),n+=2):m=[this.meetSegmentSegment(s,d,a.point1.coords.usrCoords,a.point2.coords.usrCoords)],p=0;p<m.length;p++)if(r=m[p],0<=r[1]&&1>=r[1]){if(t===k)return f&&(!a.visProp.straightfirst&&0>r[2]||!a.visProp.straightlast&&
1<r[2])?g:new l(q.COORDS_BY_USER,r[0],c);t+=1}return g},meetCurveRedBlueSegments:function(b,a,k){var c,f,n,p,s,d,e,g,h,l=0,t=a.points.length,w=b.points.length;if(1>=t||1>=w)return[0,0/0,0/0];for(c=1;w>c;c++)for(n=b.points[c-1].usrCoords,p=b.points[c].usrCoords,g=Math.min(n[1],p[1]),h=Math.max(n[1],p[1]),d=a.points[0].usrCoords,f=1;t>f;f++)if(s=d,d=a.points[f].usrCoords,Math.min(s[1],d[1])<h&&Math.max(s[1],d[1])>g&&(e=this.meetSegmentSegment(n,p,s,d),0<=e[1]&&0<=e[2]&&(1>e[1]&&1>e[2]||c===w-1&&1===
e[1]||f===t-1&&1===e[2]))){if(l===k)return e[0];l++}return[0,0/0,0/0]},meetSegmentSegment:function(b,a,k,c){var f,n,p,s=e.crossProduct(b,a),d=e.crossProduct(k,c),s=e.crossProduct(s,d),d=s[0];return Math.abs(d)<e.eps?[s,1/0,1/0]:(p=[k[1]-b[1],k[2]-b[2]],f=(p[0]*(c[2]-k[2])-p[1]*(c[1]-k[1]))/d,n=(p[0]*(a[2]-b[2])-p[1]*(a[1]-b[1]))/d,[s,f,n])},_bezierSplit:function(b){var a,k,c,f,n,p;return a=[.5*(b[0][0]+b[1][0]),.5*(b[0][1]+b[1][1])],k=[.5*(b[1][0]+b[2][0]),.5*(b[1][1]+b[2][1])],c=[.5*(b[2][0]+b[3][0]),
.5*(b[2][1]+b[3][1])],f=[.5*(a[0]+k[0]),.5*(a[1]+k[1])],n=[.5*(k[0]+c[0]),.5*(k[1]+c[1])],p=[.5*(f[0]+n[0]),.5*(f[1]+n[1])],[[b[0],a,f,p],[p,n,c,b[3]]]},_bezierBbox:function(b){var a=[];return 4===b.length?(a[0]=Math.min(b[0][0],b[1][0],b[2][0],b[3][0]),a[1]=Math.max(b[0][1],b[1][1],b[2][1],b[3][1]),a[2]=Math.max(b[0][0],b[1][0],b[2][0],b[3][0]),a[3]=Math.min(b[0][1],b[1][1],b[2][1],b[3][1])):(a[0]=Math.min(b[0][0],b[1][0]),a[1]=Math.max(b[0][1],b[1][1]),a[2]=Math.max(b[0][0],b[1][0]),a[3]=Math.min(b[0][1],
b[1][1])),a},_bezierOverlap:function(b,a){return b[2]>=a[0]&&b[0]<=a[2]&&b[1]>=a[3]&&b[3]<=a[1]},_bezierListConcat:function(b,a,k,c){var f,n=g.exists(c);f=0;var p=a.length,s=b.length;for(0<s&&(1===b[s-1][1]&&0===a[0][1]||n&&1===b[s-1][2]&&0===a[0][2])&&(f=1);p>f;f++)n&&(a[f][2]*=.5,a[f][2]+=c),a[f][1]*=.5,a[f][1]+=k,b.push(a[f])},_bezierMeetSubdivision:function(b,a,k){var c,f,n,p,s,d,e,g,h,l,t,w,m=[];return f=this._bezierBbox(a),c=this._bezierBbox(b),this._bezierOverlap(f,c)?5>k?(n=this._bezierSplit(b),
d=n[0],e=n[1],n=this._bezierSplit(a),p=n[0],s=n[1],this._bezierListConcat(m,this._bezierMeetSubdivision(d,p,k+1),0,0),this._bezierListConcat(m,this._bezierMeetSubdivision(d,s,k+1),0,.5),this._bezierListConcat(m,this._bezierMeetSubdivision(e,p,k+1),.5,0),this._bezierListConcat(m,this._bezierMeetSubdivision(e,s,k+1),.5,.5),m):(t=[1].concat(b[0]),w=[1].concat(b[3]),h=[1].concat(a[0]),l=[1].concat(a[3]),g=this.meetSegmentSegment(t,w,h,l),0<=g[1]&&0<=g[2]&&1>=g[1]&&1>=g[2]?[g]:[]):[]},_bezierLineMeetSubdivision:function(b,
a,k,c){var f,n,p,s,d,e,g,h,l,t,w=[];return f=this._bezierBbox(a),n=this._bezierBbox(b),c&&!this._bezierOverlap(n,f)?[]:5>k?(p=this._bezierSplit(b),s=p[0],d=p[1],this._bezierListConcat(w,this._bezierLineMeetSubdivision(s,a,k+1),0),this._bezierListConcat(w,this._bezierLineMeetSubdivision(d,a,k+1),.5),w):(l=[1].concat(b[0]),t=[1].concat(b[3]),g=[1].concat(a[0]),h=[1].concat(a[1]),e=this.meetSegmentSegment(l,t,g,h),0<=e[1]&&1>=e[1]&&(!c||0<=e[2]&&1>=e[2])?[e]:[])},meetBeziersegmentBeziersegment:function(b,
a,k){b=4===b.length&&4===a.length?this._bezierMeetSubdivision(b,a,0):this._bezierLineMeetSubdivision(b,a,0,k);b.sort(function(a,f){return 1E7*(a[1]-f[1])+(a[2]-f[2])});a=[];for(k=0;k<b.length;k++)0!==k&&b[k][1]===b[k-1][1]&&b[k][2]===b[k-1][2]||a.push(b[k]);return a},meetBezierCurveRedBlueSegments:function(b,a,k){var c,f,n,p,s,d,e,g=a.points.length,h=b.points.length,l=[];if(4>g||4>h)return[0,0/0,0/0];for(f=0;h-3>f;f+=3)for(c=b.points,p=[[c[f].usrCoords[1],c[f].usrCoords[2]],[c[f+1].usrCoords[1],c[f+
1].usrCoords[2]],[c[f+2].usrCoords[1],c[f+2].usrCoords[2]],[c[f+3].usrCoords[1],c[f+3].usrCoords[2]]],d=this._bezierBbox(p),n=0;g-3>n;n+=3)if(c=a.points,s=[[c[n].usrCoords[1],c[n].usrCoords[2]],[c[n+1].usrCoords[1],c[n+1].usrCoords[2]],[c[n+2].usrCoords[1],c[n+2].usrCoords[2]],[c[n+3].usrCoords[1],c[n+3].usrCoords[2]]],e=this._bezierBbox(s),this._bezierOverlap(d,e)&&(l=l.concat(this.meetBeziersegmentBeziersegment(p,s)),l.length>k))return l[k][0];return l.length>k?l[k][0]:[0,0/0,0/0]},bezierSegmentEval:function(b,
a){var k,c,f,n=1-b;return c=0,f=0,k=n*n*n,c+=k*a[0][0],f+=k*a[0][1],k=3*b*n*n,c+=k*a[1][0],f+=k*a[1][1],k=3*b*b*n,c+=k*a[2][0],f+=k*a[2][1],k=b*b*b,c+=k*a[3][0],f+=k*a[3][1],[1,c,f]},bezierArc:function(b,a,k,c,f){var n,p,s,d,g,h,l,m=.5*Math.PI,t=a[1],w=a[2];n=a[0];var z=[],q=[];p=this.distance(a,b);t/=n;w/=n;a=this.rad(b.slice(1),a.slice(1),k.slice(1));-1===f&&(a=2*Math.PI-a);b[1]/=b[0];b[2]/=b[0];b[0]/=b[0];k=b.slice(0);for(c?(z=[t,t+.333*(b[1]-t),t+.666*(b[1]-t),b[1]],q=[w,w+.333*(b[2]-w),w+.666*
(b[2]-w),b[2]]):(z=[b[1]],q=[b[2]]);a>e.eps;)a>m?(s=m,a-=m):(s=a,a=0),k=Math.cos(f*s),n=Math.sin(f*s),k=[[1,0,0],[t*(1-k)+w*n,k,-n],[w*(1-k)-t*n,n,k]],k=e.matVecMult(k,b),k=[k[0]/k[0],k[1]/k[0],k[2]/k[0]],d=b[1]-t,g=b[2]-w,n=k[1]-t,h=k[2]-w,l=Math.sqrt((d+n)*(d+n)+(g+h)*(g+h)),l=Math.abs(h-g)>e.eps?(d+n)*(p/l-.5)/(h-g)*8/3:(g+h)*(p/l-.5)/(d-n)*8/3,b=[1,b[1]-l*g,b[2]+l*d],n=[1,k[1]+l*h,k[2]-l*n],z=z.concat([b[1],n[1],k[1]]),q=q.concat([b[2],n[2],k[2]]),b=k.slice(0);return c&&(z=z.concat([k[1]+.333*
(t-k[1]),k[1]+.666*(t-k[1]),t]),q=q.concat([k[2]+.333*(w-k[2]),k[2]+.666*(w-k[2]),w])),[z,q]},projectPointToCircle:function(b,a,k){var c,f,n,p,d,h=a.center.coords.usrCoords;return g.exists(k)||(k=b.board),g.isPoint(b)?(c=b.coords.distance(q.COORDS_BY_USER,a.center.coords),f=b.coords.usrCoords):(c=b.distance(q.COORDS_BY_USER,a.center.coords),f=b.usrCoords),Math.abs(c)<e.eps&&(c=e.eps),d=a.Radius()/c,n=h[1]+d*(f[1]-h[1]),p=h[2]+d*(f[2]-h[2]),new l(q.COORDS_BY_USER,[n,p],k)},projectPointToLine:function(b,
a,k){var c=[0,a.stdform[1],a.stdform[2]];return g.exists(k)||(k=b.board),c=e.crossProduct(c,b.coords.usrCoords),this.meetLineLine(c,a.stdform,0,k)},projectCoordsToSegment:function(b,a,k){var c,f;k=[k[1]-a[1],k[2]-a[2]];b=[b[1]-a[1],b[2]-a[2]];return Math.abs(k[0])<e.eps&&Math.abs(k[1])<e.eps?[a,0]:(c=e.innerProduct(b,k),f=e.innerProduct(k,k),c/=f,[[1,c*k[0]+a[1],c*k[1]+a[2]],c])},projectCoordsToBeziersegment:function(b,a,k){var c;return c=m.Math.Numerics.fminbr(function(f){f=[1,a.X(k+f),a.Y(k+f)];
return f[1]-=b[1],f[2]-=b[2],f[1]*f[1]+f[2]*f[2]},[0,1]),[[1,a.X(c+k),a.Y(c+k)],c]},projectPointToCurve:function(b,a,k){g.exists(k)||(k=b.board);var c=b.X(),f=b.Y();a=this.projectCoordsToCurve(c,f,b.position||0,a,k);return b.position=a[1],a[0]},projectCoordsToCurve:function(b,a,k,c,f){var n,p,d,e,r,m,x,u,t,w,z,B;p=Number.POSITIVE_INFINITY;if(g.exists(f)||(f=c.board),"plot"===c.visProp.curvetype){if(k=0,e=p,n=0===c.numberPoints?[0,1,1]:[c.Z(0),c.X(0),c.Y(0)],1<c.numberPoints)for(x=[1,b,a],3===c.bezierDegree?
d=0:w=[c.Z(0),c.X(0),c.Y(0)],p=0;p<c.numberPoints-1;p++)3===c.bezierDegree?B=this.projectCoordsToBeziersegment(x,c,d):(z=[c.Z(p+1),c.X(p+1),c.Y(p+1)],B=this.projectCoordsToSegment(x,w,z)),m=B[1],u=B[0],0<=m&&1>=m?(r=this.distance(u,x),t=p+m):0>m?(u=w,r=this.distance(w,x),t=p):1<m&&p===c.numberPoints-2&&(u=z,r=this.distance(u,x),t=c.numberPoints-1),e>r&&(e=r,k=t,n=u),3===c.bezierDegree?(d++,p+=2):w=z;f=new l(q.COORDS_BY_USER,n,f)}else{d=function(f){var n=b-c.X(f);f=a-c.Y(f);return n*n+f*f};w=d(k);
z=(c.maxX()-c.minX())/50;r=c.minX();for(p=0;50>p;p++)t=d(r),w>t&&(k=r,w=t),r+=z;k=h.fminbr(d,[k-z,k+z]);k<c.minX()&&(k=c.maxX()+k-c.minX());k>c.maxX()&&(k=c.minX()+k-c.maxX());f=new l(q.COORDS_BY_USER,[c.X(k),c.Y(k)],f)}return[c.updateTransform(f),k]},projectPointToTurtle:function(b,a,k){var c,f,n,p,d,e,h,m,x=0,u=0,t=Number.POSITIVE_INFINITY,w=a.objects.length;g.exists(k)||(k=b.board);for(d=0;w>d;d++)h=a.objects[d],h.elementClass===q.OBJECT_CLASS_CURVE&&(c=this.projectPointToCurve(b,h),e=this.distance(c.usrCoords,
b.coords.usrCoords),t>e&&(n=c.usrCoords[1],p=c.usrCoords[2],f=b.position,t=e,m=h,u=x),x+=h.numberPoints);return c=new l(q.COORDS_BY_USER,[n,p],k),b.position=f+u,m.updateTransform(c)},projectPointToPoint:function(b,a){return a.coords},projectPointToBoard:function(b,a){var k,c,f,n=a||b.board,p=[[1,1,0,0,3,0,1],[-1,2,1,0,1,2,1],[-1,1,2,2,1,2,3],[1,2,3,0,3,2,3]],d=b.coords||b,g=n.getBoundingBox();for(k=0;4>k;k++)f=p[k],f[0]*d.usrCoords[f[1]]<f[0]*g[f[2]]&&(c=e.crossProduct([1,g[f[3]],g[f[4]]],[1,g[f[5]],
g[f[6]]]),c[3]=0,c=e.normalize(c),d=this.projectPointToLine({coords:d,board:n},{stdform:c}));return d},distPointLine:function(b,a){var k,c=a[1],f=a[2],n=a[0];return Math.abs(c)+Math.abs(f)<e.eps?Number.POSITIVE_INFINITY:(k=c*b[1]+f*b[2]+n,c*=c,f*=f,Math.abs(k)/Math.sqrt(c+f))},reuleauxPolygon:function(b,a){var k,c=2*Math.PI,f=c/a,n=(a-1)/2,p=0,d=function(d,s){return function(g,h){var l=(g%c+c)%c,t=Math.floor(l/f)%a;return h||(p=b[0].Dist(b[n]),k=e.Geometry.rad([b[0].X()+1,b[0].Y()],b[0],b[n%a])),
isNaN(t)?t:(l=.5*l+.5*t*f+k,b[t][d]()+p*Math[s](l))}};return[d("X","cos"),d("Y","sin"),0,c]}}),e.Geometry});E("parser/geonext",["jxg","base/constants","utils/type"],function(m,q,l){return m.GeonextParser={replacePow:function(e){var h,g,d,b,a,k;e=e.replace(/(\s*)\^(\s*)/g,"^");for(b=e.indexOf("^");0<=b;){if(a=e.slice(0,b),k=e.slice(b+1),")"===a.charAt(a.length-1)){h=1;for(g=a.length-2;0<=g&&0<h;)d=a.charAt(g),")"===d?h++:"("===d&&(h-=1),g-=1;if(0!==h)throw Error("JSXGraph: Missing '(' in expression");
b="";h=a.substring(0,g+1);for(d=g;0<=d&&h.substr(d,1).match(/([\w\.]+)/);)b=RegExp.$1+b,d-=1;b+=a.substring(g+1,a.length);b=b.replace(/([\(\)\+\*\%\^\-\/\]\[])/g,"\\$1")}else b="[\\w\\.]+";if(k.match(/^([\w\.]*\()/)){h=1;for(g=RegExp.$1.length;g<k.length&&0<h;)d=k.charAt(g),")"===d?h-=1:"("===d&&(h+=1),g+=1;if(0!==h)throw Error("JSXGraph: Missing ')' in expression");g=k.substring(0,g);g=g.replace(/([\(\)\+\*\%\^\-\/\[\]])/g,"\\$1")}else g="[\\w\\.]+";b=new RegExp("("+b+")\\^("+g+")");e=e.replace(b,
"pow($1,$2)");b=e.indexOf("^")}return e},replaceIf:function(e){var h,g,d,b,a,k,c="";k=a=b=null;if(d=e.indexOf("If("),0>d)return e;for(e=e.replace(/""/g,"0");0<=d;){h=e.slice(0,d);g=e.slice(d+3);d=1;b=0;for(e=a=-1;b<g.length&&0<d;)k=g.charAt(b),")"===k?d-=1:"("===k?d+=1:","===k&&1===d&&(0>a?a=b:e=b),b+=1;if((d=g.slice(0,b-1),g=g.slice(b),0>a)||0>e)return"";b=d.slice(0,a);a=d.slice(a+1,e);k=d.slice(e+1);b=this.replaceIf(b);a=this.replaceIf(a);k=this.replaceIf(k);c+=h+"(("+b+")?("+a+"):("+k+"))";e=g;
d=e.indexOf("If(")}return c+g},replaceNameById:function(e,h,g){var d,b,a,k,c=0,f=["X","Y","L","V"],n=function(a){return g?"$('"+a+"')":a};for(k=0;k<f.length;k++)for(c=e.indexOf(f[k]+"(");0<=c;)0<=c&&(d=e.indexOf(")",c+2),0<=d&&(b=e.slice(c+2,d),b=b.replace(/\\(['"])?/g,"$1"),a=h.elementsByName[b],a&&(e=e.slice(0,c+2)+(g?"$('":"")+n(a.id)+e.slice(d)))),d=e.indexOf(")",c+2),c=e.indexOf(f[k]+"(",d);for(c=e.indexOf("Dist(");0<=c;)0<=c&&(d=e.indexOf(",",c+5),0<=d&&(b=e.slice(c+5,d),b=b.replace(/\\(['"])?/g,
"$1"),a=h.elementsByName[b],a&&(e=e.slice(0,c+5)+n(a.id)+e.slice(d)))),d=e.indexOf(",",c+5),c=e.indexOf(",",d),d=e.indexOf(")",c+1),0<=d&&(b=e.slice(c+1,d),b=b.replace(/\\(['"])?/g,"$1"),a=h.elementsByName[b],a&&(e=e.slice(0,c+1)+n(a.id)+e.slice(d))),d=e.indexOf(")",c+1),c=e.indexOf("Dist(",d);f=["Deg","Rad"];for(k=0;k<f.length;k++)for(c=e.indexOf(f[k]+"(");0<=c;)0<=c&&(d=e.indexOf(",",c+4),0<=d&&(b=e.slice(c+4,d),b=b.replace(/\\(['"])?/g,"$1"),a=h.elementsByName[b],a&&(e=e.slice(0,c+4)+n(a.id)+e.slice(d)))),
d=e.indexOf(",",c+4),c=e.indexOf(",",d),d=e.indexOf(",",c+1),0<=d&&(b=e.slice(c+1,d),b=b.replace(/\\(['"])?/g,"$1"),a=h.elementsByName[b],a&&(e=e.slice(0,c+1)+n(a.id)+e.slice(d))),d=e.indexOf(",",c+1),c=e.indexOf(",",d),d=e.indexOf(")",c+1),0<=d&&(b=e.slice(c+1,d),b=b.replace(/\\(['"])?/g,"$1"),a=h.elementsByName[b],a&&(e=e.slice(0,c+1)+n(a.id)+e.slice(d))),d=e.indexOf(")",c+1),c=e.indexOf(f[k]+"(",d);return e},replaceIdByObj:function(e){var h=/(X|Y|L)\(([\w_]+)\)/g;return e=e.replace(h,"$('$2').$1()"),
h=/(V)\(([\w_]+)\)/g,e=e.replace(h,"$('$2').Value()"),h=/(Dist)\(([\w_]+),([\w_]+)\)/g,e=e.replace(h,"dist($('$2'), $('$3'))"),h=/(Deg)\(([\w_]+),([ \w\[\w_]+),([\w_]+)\)/g,e=e.replace(h,"deg($('$2'),$('$3'),$('$4'))"),h=/Rad\(([\w_]+),([\w_]+),([\w_]+)\)/g,e=e.replace(h,"rad($('$1'),$('$2'),$('$3'))"),h=/N\((.+)\)/g,e.replace(h,"($1)")},geonext2JS:function(e,h){var g,d,b,a="Abs ACos ASin ATan Ceil Cos Exp Factorial Floor Log Max Min Random Round Sin Sqrt Tan Trunc".split(" "),k="abs acos asin atan ceil cos exp factorial floor log max min random round sin sqrt tan ceil".split(" ");
e=e.replace(/&lt;/g,"<");e=e.replace(/&gt;/g,">");e=e.replace(/&amp;/g,"&");d=this.replaceNameById(e,h);d=this.replaceIf(d);d=this.replacePow(d);d=this.replaceIdByObj(d);for(b=0;b<a.length;b++)g=new RegExp(["(\\W|^)(",a[b],")"].join(""),"ig"),d=d.replace(g,["$1",k[b]].join(""));return d=d.replace(/True/g,"true"),d=d.replace(/False/g,"false"),d=d.replace(/fasle/g,"false"),d=d.replace(/Pi/g,"PI"),d.replace(/"/g,"'")},findDependencies:function(e,h,g){var d,b,a;l.exists(g)||(g=e.board);g=g.elementsByName;
for(d in g)g.hasOwnProperty(d)&&d!==e.name&&(g[d].type===q.OBJECT_TYPE_TEXT?g[d].visProp.islabel||(a=d.replace(/\[/g,"\\["),a=a.replace(/\]/g,"\\]"),b=new RegExp("\\(([\\w\\[\\]'_ ]+,)*("+a+")(,[\\w\\[\\]'_ ]+)*\\)","g"),0<=h.search(b)&&g[d].addChild(e)):(a=d.replace(/\[/g,"\\["),a=a.replace(/\]/g,"\\]"),b=new RegExp("\\(([\\w\\[\\]'_ ]+,)*("+a+")(,[\\w\\[\\]'_ ]+)*\\)","g"),0<=h.search(b)&&g[d].addChild(e)))},gxt2jc:function(e,h){var g;return e=e.replace(/&lt;/g,"<"),e=e.replace(/&gt;/g,">"),e=e.replace(/&amp;/g,
"&"),g=e,g=this.replaceNameById(g,h,!0),g=g.replace(/True/g,"true"),g=g.replace(/False/g,"false"),g.replace(/fasle/g,"false")}},m.GeonextParser});E("base/element","jxg base/constants base/coords math/math options parser/geonext utils/event utils/color utils/type".split(" "),function(m,q,l,e,h,g,d,b,a){return m.GeometryElement=function(k,c,f,n){var p,b;if(this.needsUpdate=!0,this.isDraggable=!1,this.isReal=!0,this.childElements={},this.hasLabel=!1,this.highlighted=!1,this.notExistingParents={},this.traces=
{},this.numTraces=0,this.transformations=[],this.baseElement=null,this.descendants={},this.ancestors={},this.symbolic={},this.rendNode=null,this.elType="",this.dump=!0,this.subs={},this._pos=-1,this.stdform=[1,0,0,0,1,1,0,0],this.methodMap={setLabel:"setLabelText",label:"label",setName:"setName",getName:"getName",addTransform:"addTransform",setProperty:"setAttribute",setAttribute:"setAttribute",animate:"animate",on:"on",off:"off",trigger:"trigger"},this.quadraticform=[[1,0,0],[0,1,0],[0,0,1]],this.visProp=
{},d.eventify(this),this.mouseover=!1,this.lastDragTime=new Date,0<arguments.length){this.board=k;this.type=f;this.elementClass=n||q.OBJECT_CLASS_OTHER;this.id=c.id;p=c.name;a.exists(p)||(p=this.board.generateName(this));""!==p&&(this.board.elementsByName[p]=this);this.name=p;this.needsRegularUpdate=c.needsregularupdate;a.clearVisPropOld(this);p=this.resolveShortcuts(c);for(b in p)p.hasOwnProperty(b)&&this._set(b,p[b]);this.visProp.draft=p.draft&&p.draft.draft;this.visProp.gradientangle="270";this.visProp.gradientsecondopacity=
this.visProp.fillopacity;this.visProp.gradientpositionx=.5;this.visProp.gradientpositiony=.5}},m.extend(m.GeometryElement.prototype,{addChild:function(a){var c,f;this.childElements[a.id]=a;this.addDescendants(a);a.ancestors[this.id]=this;for(c in this.descendants)if(this.descendants.hasOwnProperty(c))for(f in this.descendants[c].ancestors[this.id]=this,this.ancestors)this.ancestors.hasOwnProperty(f)&&(this.descendants[c].ancestors[this.ancestors[f].id]=this.ancestors[f]);for(c in this.ancestors)if(this.ancestors.hasOwnProperty(c))for(f in this.descendants)this.descendants.hasOwnProperty(f)&&
(this.ancestors[c].descendants[this.descendants[f].id]=this.descendants[f]);return this},addDescendants:function(a){var c;this.descendants[a.id]=a;for(c in a.childElements)a.childElements.hasOwnProperty(c)&&this.addDescendants(a.childElements[c]);return this},removeChild:function(a){return delete this.childElements[a.id],this.removeDescendants(a),delete a.ancestors[this.id],this},removeDescendants:function(a){var c;delete this.descendants[a.id];for(c in a.childElements)a.childElements.hasOwnProperty(c)&&
this.removeDescendants(a.childElements[c]);return this},countChildren:function(){var a,c,f=0;c=this.childElements;for(a in c)c.hasOwnProperty(a)&&0>a.indexOf("Label")&&f++;return f},getName:function(){return this.name},addTransform:function(){return this},draggable:function(){return this.isDraggable&&!this.visProp.fixed&&!this.visProp.frozen&&this.type!==q.OBJECT_TYPE_GLIDER},generatePolynomial:function(){return[]},animate:function(a,c,f){f=f||{};var n,p,d=Math.ceil(c/this.board.attr.animationdelay),
e=this,g=function(a,f,n){var c,k;a=b.rgb2hsv(a);c=b.rgb2hsv(f);f=(c[0]-a[0])/d;k=(c[1]-a[1])/d;c=(c[2]-a[2])/d;e.animationData[n]=[];for(p=0;d>p;p++)e.animationData[n][d-p-1]=b.hsv2rgb(a[0]+(p+1)*f,a[1]+(p+1)*k,a[2]+(p+1)*c)},h=function(a,f,n,c){var k;if(a=parseFloat(a),f=parseFloat(f),!isNaN(a)&&!isNaN(f))for(k=(f-a)/d,e.animationData[n]=[],p=0;d>p;p++)f=a+(p+1)*k,e.animationData[n][d-p-1]=c?Math.floor(f):f};this.animationData={};for(n in a)if(a.hasOwnProperty(n))switch(c=n.toLowerCase()){case "strokecolor":case "fillcolor":g(this.visProp[c],
a[n],c);break;case "size":if(this.elementClass!==q.OBJECT_CLASS_POINT)break;h(this.visProp[c],a[n],c,!0);break;case "strokeopacity":case "strokewidth":case "fillopacity":h(this.visProp[c],a[n],c,!1)}return this.animationCallback=f.callback,this.board.addAnimation(this),this},update:function(){return this.visProp.trace&&this.cloneToBackground(),this},updateRenderer:function(){return this},hideElement:function(){return this.visProp.visible=!1,this.board.renderer.hide(this),a.exists(this.label)&&this.hasLabel&&
(this.label.hiddenByParent=!0,this.label.visProp.visible&&this.label.hideElement()),this},showElement:function(){return this.visProp.visible=!0,this.board.renderer.show(this),a.exists(this.label)&&this.hasLabel&&this.label.hiddenByParent&&(this.label.hiddenByParent=!1,this.label.visProp.visible||this.label.showElement().updateRenderer()),this},_set:function(k,c){k=k.toLocaleLowerCase();this.visProp.hasOwnProperty(k)&&0<=k.indexOf("color")&&a.isString(c)&&9===c.length&&"#"===c.charAt(0)?(c=b.rgba2rgbo(c),
this.visProp[k]=c[0],this.visProp[k.replace("color","opacity")]=c[1]):this.visProp[k]=c},resolveShortcuts:function(k){var c,f;for(c in h.shortcuts)if(h.shortcuts.hasOwnProperty(c)&&a.exists(k[c]))for(f=0;f<h.shortcuts[c].length;f++)a.exists(k[h.shortcuts[c][f]])||(k[h.shortcuts[c][f]]=k[c]);return k},setLabelText:function(k){return a.exists(this.label)&&(k=k.replace(/</g,"&lt;").replace(/>/g,"&gt;"),this.label.setText(k)),this},setName:function(a){a=a.replace(/</g,"&lt;").replace(/>/g,"&gt;");this.setLabelText(a);
this.setAttribute({name:a})},setProperty:m.shortcut(m.GeometryElement.prototype,"setAttribute"),setAttribute:function(){var k,c,f,n,p,d={},e=function(a){return function(){return a}};for(k=0;k<arguments.length;k++)f=arguments[k],a.isString(f)?(n=f.split(":"),d[a.trim(n[0])]=a.trim(n[1])):a.isArray(f)?d[f[0]]=f[1]:m.extend(d,f);d=this.resolveShortcuts(d);for(k in d)if(d.hasOwnProperty(k)){switch(c=k.replace(/\s+/g,"").toLowerCase(),f=d[k],p=this.visProp[c],c){case "name":p=this.name;delete this.board.elementsByName[this.name];
this.name=f;this.board.elementsByName[this.name]=this;break;case "needsregularupdate":this.needsRegularUpdate=!("false"===f||!1===f);this.board.renderer.setBuffering(this,this.needsRegularUpdate?"auto":"static");break;case "labelcolor":f=b.rgba2rgbo(f);n=f[1];f=f[0];0===n&&a.exists(this.label)&&this.hasLabel&&this.label.hideElement();a.exists(this.label)&&this.hasLabel&&(this.label.visProp.strokecolor=f,this.board.renderer.setObjectStrokeColor(this.label,f,n));this.type===q.OBJECT_TYPE_TEXT&&(this.visProp.strokecolor=
f,this.visProp.strokeopacity=n,this.board.renderer.setObjectStrokeColor(this,this.visProp.strokecolor,this.visProp.strokeopacity));break;case "infoboxtext":this.infoboxText="string"==typeof f?f:!1;break;case "visible":"false"===f||!1===f?(this.visProp.visible=!1,this.hideElement()):("true"===f||!0===f)&&(this.visProp.visible=!0,this.showElement());break;case "face":this.elementClass===q.OBJECT_CLASS_POINT&&(this.visProp.face=f,this.board.renderer.changePointStyle(this));break;case "trace":"false"===
f||!1===f?(this.clearTrace(),this.visProp.trace=!1):this.visProp.trace=!0;break;case "gradient":this.visProp.gradient=f;this.board.renderer.setGradient(this);break;case "gradientsecondcolor":f=b.rgba2rgbo(f);this.visProp.gradientsecondcolor=f[0];this.visProp.gradientsecondopacity=f[1];this.board.renderer.updateGradient(this);break;case "gradientsecondopacity":this.visProp.gradientsecondopacity=f;this.board.renderer.updateGradient(this);break;case "withlabel":(this.visProp.withlabel=f)?this.label?
this.visProp.visible&&this.label.showElement():(this.createLabel(),this.visProp.visible||this.label.hideElement()):this.label&&this.hasLabel&&this.label.hideElement();this.hasLabel=f;break;case "radius":this.type!==q.OBJECT_TYPE_ANGLE&&this.type!==q.OBJECT_TYPE_SECTOR||this.setRadius(f);break;case "rotate":(this.type===q.OBJECT_TYPE_TEXT&&"internal"===this.visProp.display||this.type===q.OBJECT_TYPE_IMAGE)&&this.addRotation(f);break;case "ticksdistance":this.type===q.OBJECT_TYPE_TICKS&&"number"==typeof f&&
(this.ticksFunction=e(f));break;case "generatelabelvalue":this.type===q.OBJECT_TYPE_TICKS&&"function"==typeof f&&(this.generateLabelValue=f);break;case "onpolygon":this.type===q.OBJECT_TYPE_GLIDER&&(this.onPolygon=!!f);break;default:a.exists(this.visProp[c])&&(!m.Validator[c]||m.Validator[c]&&m.Validator[c](f)||m.Validator[c]&&a.isFunction(f)&&m.Validator[c](f()))&&(f=f.toLowerCase&&"false"===f.toLowerCase()?!1:f,this._set(c,f))}this.triggerEventHandlers(["attribute:"+c],[p,f,this])}return this.triggerEventHandlers(["attribute"],
[d,this]),this.visProp.needsregularupdate?this.board.update(this):this.board.fullUpdate(),this},getProperty:m.shortcut(m.GeometryElement.prototype,"getAttribute"),getAttribute:function(a){switch(a=a.toLowerCase()){case "needsregularupdate":a=this.needsRegularUpdate;break;case "labelcolor":a=this.label.visProp.strokecolor;break;case "infoboxtext":a=this.infoboxText;break;case "withlabel":a=this.hasLabel;break;default:a=this.visProp[a]}return a},setDash:function(a){return this.setAttribute({dash:a}),
this},prepareUpdate:function(){return this.needsUpdate=!0,this},remove:function(){return this.board.renderer.remove(this.board.renderer.getElementById(this.id)),this.hasLabel&&this.board.renderer.remove(this.board.renderer.getElementById(this.label.id)),this},getTextAnchor:function(){return new l(q.COORDS_BY_USER,[0,0],this.board)},getLabelAnchor:function(){return new l(q.COORDS_BY_USER,[0,0],this.board)},setArrow:function(a,c){return this.visProp.firstarrow=a,this.visProp.lastarrow=c,this.prepareUpdate().update(),
this},createGradient:function(){"linear"!==this.visProp.gradient&&"radial"!==this.visProp.gradient||this.board.renderer.setGradient(this)},createLabel:function(){var b,c=this;return m.elements.text?(b=a.deepCopy(this.visProp.label,null),b.id=this.id+"Label",b.isLabel=!0,b.visible=this.visProp.visible,b.anchor=this,b.priv=this.visProp.priv,this.visProp.withlabel&&(this.label=m.elements.text(this.board,[0,0,function(){return"function"==typeof c.name?c.name():c.name}],b),this.label.needsUpdate=!0,this.label.update(),
this.label.dump=!1,this.visProp.visible||(this.label.hiddenByParent=!0,this.label.visProp.visible=!1),this.hasLabel=!0)):m.debug("JSXGraph: Can't create label: text element is not available. Make sure you include base/text"),this},highlight:function(b){return b=a.def(b,!1),!this.visProp.highlight||this.highlighted&&!b||(this.highlighted=!0,this.board.highlightedObjects[this.id]=this,this.board.renderer.highlight(this)),this},noHighlight:function(){return this.highlighted&&(this.highlighted=!1,delete this.board.highlightedObjects[this.id],
this.board.renderer.noHighlight(this)),this},clearTrace:function(){for(var a in this.traces)this.traces.hasOwnProperty(a)&&this.board.renderer.remove(this.traces[a]);return this.numTraces=0,this},cloneToBackground:function(){return this},bounds:function(){return[0,0,0,0]},normalize:function(){return this.stdform=e.normalize(this.stdform),this},toJSON:function(){var b,c,f=['{"name":',this.name];f.push(', "id":'+this.id);b=[];for(c in this.visProp)this.visProp.hasOwnProperty(c)&&a.exists(this.visProp[c])&&
b.push('"'+c+'":'+this.visProp[c]);return f.push(', "visProp":{'+b.toString()+"}"),f.push("}"),f.join("")},addRotation:function(a){var c,f,n,p,b,d=this;return(this.type===q.OBJECT_TYPE_TEXT&&"internal"===this.visProp.display||this.type===q.OBJECT_TYPE_IMAGE)&&0!==a&&(c=this.board.create("transform",[function(){return-d.X()},function(){return-d.Y()}],{type:"translate"}),f=this.board.create("transform",[function(){return d.X()},function(){return d.Y()}],{type:"translate"}),n=this.board.create("transform",
[function(){return d.board.unitX/d.board.unitY},function(){return 1}],{type:"scale"}),p=this.board.create("transform",[function(){return d.board.unitY/d.board.unitX},function(){return 1}],{type:"scale"}),b=this.board.create("transform",[a*Math.PI/180],{type:"rotate"}),c.bindTo(this),n.bindTo(this),b.bindTo(this),p.bindTo(this),f.bindTo(this)),this},highlightStrokeColor:function(a){return this.setAttribute({highlightStrokeColor:a}),this},strokeColor:function(a){return this.setAttribute({strokeColor:a}),
this},strokeWidth:function(a){return this.setAttribute({strokeWidth:a}),this},fillColor:function(a){return this.setAttribute({fillColor:a}),this},highlightFillColor:function(a){return this.setAttribute({highlightFillColor:a}),this},labelColor:function(a){return this.setAttribute({labelColor:a}),this},dash:function(a){return this.setAttribute({dash:a}),this},visible:function(a){return this.setAttribute({visible:a}),this},shadow:function(a){return this.setAttribute({shadow:a}),this},getType:function(){return this.elType},
getParents:function(){return a.isArray(this.parents)?this.parents:[]},snapToGrid:function(){return this},snapToPoints:function(){return this},getAttributes:function(){var b,c=a.deepCopy(this.visProp),f="attractors snatchdistance traceattributes frozen shadow gradientangle gradientsecondopacity gradientpositionx gradientpositiony needsregularupdate zoom layer offset".split(" ");c.id=this.id;c.name=this.name;for(b=0;b<f.length;b++)delete c[f[b]];return c},hasPoint:function(){return!1},handleSnapToGrid:function(a){var c,
f,n,p=this.visProp.snapsizex,b=this.visProp.snapsizey;return m.exists(this.coords)?((this.visProp.snaptogrid||!0===a)&&(c=this.coords.usrCoords[1],f=this.coords.usrCoords[2],0>=p&&this.board.defaultAxes&&this.board.defaultAxes.x.defaultTicks&&(n=this.board.defaultAxes.x.defaultTicks,p=n.ticksDelta*(n.visProp.minorticks+1)),0>=b&&this.board.defaultAxes&&this.board.defaultAxes.y.defaultTicks&&(n=this.board.defaultAxes.y.defaultTicks,b=n.ticksDelta*(n.visProp.minorticks+1)),0<p&&0<b&&this.coords.setCoordinates(q.COORDS_BY_USER,
[Math.round(c/p)*p,Math.round(f/b)*b])),this):this},addEvent:m.shortcut(m.GeometryElement.prototype,"on"),removeEvent:m.shortcut(m.GeometryElement.prototype,"off"),__evt__over:function(){},__evt__mouseover:function(){},__evt__out:function(){},__evt__mouseout:function(){},__evt__move:function(){},__evt__mousemove:function(){},__evt__drag:function(){},__evt__mousedrag:function(){},__evt__touchdrag:function(){},__evt__down:function(){},__evt__mousedown:function(){},__evt__touchdown:function(){},__evt__up:function(){},
__evt__mouseup:function(){},__evt__touchup:function(){},__evt__attribute:function(){},__evt__attribute_:function(){},__evt:function(){}}),m.GeometryElement});E("base/transformation",["jxg","base/constants","math/math","utils/type"],function(m,q,l,e){return m.Transformation=function(e,g,d){this.elementClass=q.OBJECT_CLASS_OTHER;this.matrix=[[1,0,0],[0,1,0],[0,0,1]];this.board=e;this.isNumericMatrix=!1;this.setMatrix(e,g,d);this.methodMap={apply:"apply",applyOnce:"applyOnce",bindTo:"bindTo",bind:"bind",
melt:"melt"}},m.Transformation.prototype={},m.extend(m.Transformation.prototype,{update:function(){return this},setMatrix:function(h,g,d){var b;this.isNumericMatrix=!0;for(b=0;b<d.length;b++)if("number"!=typeof d[b]){this.isNumericMatrix=!1;break}if("translate"===g){if(2!==d.length)throw Error("JSXGraph: translate transformation needs 2 parameters.");this.evalParam=e.createEvalFunction(h,d,2);this.update=function(){this.matrix[1][0]=this.evalParam(0);this.matrix[2][0]=this.evalParam(1)}}else if("scale"===
g){if(2!==d.length)throw Error("JSXGraph: scale transformation needs 2 parameters.");this.evalParam=e.createEvalFunction(h,d,2);this.update=function(){this.matrix[1][1]=this.evalParam(0);this.matrix[2][2]=this.evalParam(1)}}else if("reflect"===g)4>d.length&&(d[0]=h.select(d[0])),2===d.length&&(d[1]=h.select(d[1])),4===d.length&&(this.evalParam=e.createEvalFunction(h,d,4)),this.update=function(){var a,b,c,f,n,p;1===d.length?p=d[0].stdform:2===d.length?p=l.crossProduct(d[1].coords.usrCoords,d[0].coords.usrCoords):
4===d.length&&(p=l.crossProduct([1,this.evalParam(2),this.evalParam(3)],[1,this.evalParam(0),this.evalParam(1)]));a=p[1];b=p[2];c=p[0];a=[-c*a,-c*b,a*a+b*b];n=a[2];c=a[0]/a[2];f=a[1]/a[2];a=-p[2];b=p[1];this.matrix[1][1]=(a*a-b*b)/n;this.matrix[1][2]=2*a*b/n;this.matrix[2][1]=this.matrix[1][2];this.matrix[2][2]=-this.matrix[1][1];this.matrix[1][0]=c*(1-this.matrix[1][1])-f*this.matrix[1][2];this.matrix[2][0]=f*(1-this.matrix[2][2])-c*this.matrix[2][1]};else if("rotate"===g)3===d.length?this.evalParam=
e.createEvalFunction(h,d,3):0<d.length&&2>=d.length&&(this.evalParam=e.createEvalFunction(h,d,1),2===d.length&&(d[1]=h.select(d[1]))),this.update=function(){var a,b,c=this.evalParam(0),f=Math.cos(c),c=Math.sin(c);this.matrix[1][1]=f;this.matrix[1][2]=-c;this.matrix[2][1]=c;this.matrix[2][2]=f;1<d.length&&(3===d.length?(a=this.evalParam(1),b=this.evalParam(2)):(a=d[1].X(),b=d[1].Y()),this.matrix[1][0]=a*(1-f)+b*c,this.matrix[2][0]=b*(1-f)-a*c)};else if("shear"===g){if(2!==d.length)throw Error("JSXGraph: shear transformation needs 2 parameters.");
this.evalParam=e.createEvalFunction(h,d,2);this.update=function(){this.matrix[1][2]=this.evalParam(0);this.matrix[2][1]=this.evalParam(1)}}else if("generic"===g){if(9!==d.length)throw Error("JSXGraph: generic transformation needs 9 parameters.");this.evalParam=e.createEvalFunction(h,d,9);this.update=function(){this.matrix[0][0]=this.evalParam(0);this.matrix[0][1]=this.evalParam(1);this.matrix[0][2]=this.evalParam(2);this.matrix[1][0]=this.evalParam(3);this.matrix[1][1]=this.evalParam(4);this.matrix[1][2]=
this.evalParam(5);this.matrix[2][0]=this.evalParam(6);this.matrix[2][1]=this.evalParam(7);this.matrix[2][2]=this.evalParam(8)}}},apply:function(h,g){return this.update(),e.exists(g)?l.matVecMult(this.matrix,h.initialCoords.usrCoords):l.matVecMult(this.matrix,h.coords.usrCoords)},applyOnce:function(h){var g,d,b;e.isArray(h)||(h=[h]);d=h.length;for(b=0;d>b;b++)this.update(),g=l.matVecMult(this.matrix,h[b].coords.usrCoords),h[b].coords.setCoordinates(q.COORDS_BY_USER,g)},bindTo:function(h){var g,d;if(e.isArray(h))for(d=
h.length,g=0;d>g;g++)h[g].transformations.push(this);else h.transformations.push(this)},setProperty:function(){},setAttribute:function(){},melt:function(e){var g,d,b,a,k,c,f=[];d=e.matrix.length;b=this.matrix[0].length;for(g=0;d>g;g++)f[g]=[];this.update();e.update();for(g=0;d>g;g++)for(c=0;b>c;c++){for(a=k=0;d>a;a++)k+=e.matrix[g][a]*this.matrix[a][c];f[g][c]=k}return this.update=function(){var a=this.matrix.length,p=this.matrix[0].length;for(g=0;a>g;g++)for(c=0;p>c;c++)this.matrix[g][c]=f[g][c]},
this}}),m.createTransform=function(e,g,d){return new m.Transformation(e,d.type,g)},m.registerElement("transform",m.createTransform),{Transformation:m.Transformation,createTransform:m.createTransform}});E("base/point","jxg options math/math math/geometry math/numerics base/coords base/constants base/element parser/geonext utils/type base/transformation".split(" "),function(m,q,l,e,h,g,d,b,a,k){return m.Point=function(a,f,n){this.constructor(a,n,d.OBJECT_TYPE_POINT,d.OBJECT_CLASS_POINT);k.exists(f)||
(f=[0,0]);this.coords=new g(d.COORDS_BY_USER,f,this.board);this.initialCoords=new g(d.COORDS_BY_USER,f,this.board);this.position=null;this.onPolygon=!1;this.slideObject=null;this.slideObjects=[];this.needsUpdateFromParent=!0;this.Yjc=this.Xjc=null;this.methodMap=k.deepCopy(this.methodMap,{move:"moveTo",moveTo:"moveTo",moveAlong:"moveAlong",visit:"visit",glide:"makeGlider",makeGlider:"makeGlider",X:"X",Y:"Y",free:"free",setPosition:"setGliderPosition",setGliderPosition:"setGliderPosition",addConstraint:"addConstraint",
dist:"Dist",onPolygon:"onPolygon"});this.group=[];this.elType="point";this.id=this.board.setId(this,"P");this.board.renderer.drawPoint(this);this.board.finalizeAdding(this);this.createLabel()},m.Point.prototype=new b,m.extend(m.Point.prototype,{hasPoint:function(a,f){var n,p=this.coords.scrCoords;return n=parseFloat(this.visProp.size)+.5*parseFloat(this.visProp.strokewidth),n<this.board.options.precision.hasPoint&&(n=this.board.options.precision.hasPoint),Math.abs(p[1]-a)<n+2&&Math.abs(p[2]-f)<n+
2},updateConstraint:function(){return this},update:function(a){return this.needsUpdate?(k.exists(a)||(a=!1),this.type===d.OBJECT_TYPE_GLIDER&&(a?this.updateGliderFromParent():this.updateGlider()),(this.type===d.OBJECT_TYPE_CAS||this.type===d.OBJECT_TYPE_INTERSECTION||this.type===d.OBJECT_TYPE_AXISPOINT)&&this.updateConstraint(),this.updateTransform(),this.visProp.trace&&this.cloneToBackground(!0),this):this},updateGlider:function(){var a,f,n,p,b,k,h,m,x,u,t,w,z,q,A,C,F=!1,D=this.slideObject;if(this.needsUpdateFromParent=
!1,D.elementClass===d.OBJECT_CLASS_CIRCLE)A=e.projectPointToCircle(this,D,this.board),C=e.rad([D.center.X()+1,D.center.Y()],D.center,this);else if(D.elementClass===d.OBJECT_CLASS_LINE){if(this.onPolygon){if(f=D.point1.coords.usrCoords,n=D.point2.coords.usrCoords,a=1,p=n[a]-f[a],Math.abs(p)<l.eps&&(a=2,p=n[a]-f[a]),h=e.projectPointToLine(this,D,this.board),m=(h.usrCoords[a]-f[a])/p,k=D.parentPolygon,0>m)for(a=0;a<k.borders.length;a++){if(D===k.borders[a]){D=k.borders[(a-1+k.borders.length)%k.borders.length];
break}}else if(1<m)for(a=0;a<k.borders.length;a++)if(D===k.borders[a]){D=k.borders[(a+1+k.borders.length)%k.borders.length];break}D.id!==this.slideObject.id&&(this.slideObject=D)}f=D.point1.coords;n=D.point2.coords;p=f.distance(d.COORDS_BY_USER,n);p<l.eps?(A=f,F=!0,C=0):(A=e.projectPointToLine(this,D,this.board),f=f.usrCoords.slice(0),n=n.usrCoords.slice(0),Math.abs(n[0])<l.eps?(a=1,p=n[a],Math.abs(p)<l.eps&&(a=2,p=n[a]),p=(A.usrCoords[a]-f[a])/p,x=0<=p?1:-1,p=Math.abs(p),C=x*p/(p+1)):Math.abs(f[0])<
l.eps?(a=1,p=f[a],Math.abs(p)<l.eps&&(a=2,p=f[a]),p=(A.usrCoords[a]-n[a])/p,C=0>p?(1-2*p)/(1-p):1/(p+1)):(a=1,p=n[a]-f[a],Math.abs(p)<l.eps&&(a=2,p=n[a]-f[a]),C=(A.usrCoords[a]-f[a])/p));0<this.visProp.snapwidth&&Math.abs(this._smax-this._smin)>=l.eps&&(C=Math.max(Math.min(C,1),0),b=C*(this._smax-this._smin)+this._smin,b=Math.round(b/this.visProp.snapwidth)*this.visProp.snapwidth,C=(b-this._smin)/(this._smax-this._smin),this.update(!0));f=D.point1.coords;!D.visProp.straightfirst&&Math.abs(f.usrCoords[0])>
l.eps&&0>C&&(A=f,F=!0,C=0);n=D.point2.coords;!D.visProp.straightlast&&Math.abs(n.usrCoords[0])>l.eps&&1<C&&(A=n,F=!0,C=1)}else D.type===d.OBJECT_TYPE_TURTLE?(this.updateConstraint(),A=e.projectPointToTurtle(this,D,this.board),C=this.position):D.elementClass===d.OBJECT_CLASS_CURVE?D.type===d.OBJECT_TYPE_ARC||D.type===d.OBJECT_TYPE_SECTOR?(A=e.projectPointToCircle(this,D,this.board),t=e.rad(D.radiuspoint,D.center,this),k=0,u=e.rad(D.radiuspoint,D.center,D.anglepoint),C=t,("minor"===D.visProp.type&&
u>Math.PI||"major"===D.visProp.type&&u<Math.PI)&&(k=u,u=2*Math.PI),(k>t||t>u)&&(C=u,(k>t&&t>.5*k||t>u&&t>.5*u+Math.PI)&&(C=k),this.needsUpdateFromParent=!0,this.updateGliderFromParent())):(this.updateConstraint(),0<D.transformations.length?(D.updateTransformMatrix(),q=l.inverse(D.transformMat),z=l.matVecMult(q,this.coords.usrCoords),w=(new g(d.COORDS_BY_USER,z,this.board)).usrCoords,z=e.projectCoordsToCurve(w[1],w[2],this.position||0,D,this.board),A=z[0],C=z[1]):(A=e.projectPointToCurve(this,D,this.board),
C=this.position)):D.elementClass===d.OBJECT_CLASS_POINT&&(A=e.projectPointToPoint(this,D,this.board),C=this.position);this.coords.setCoordinates(d.COORDS_BY_USER,A.usrCoords,F);this.position=C},updateGliderFromParent:function(){var a,f,n,p,b,k,g,h,m=this.slideObject;return this.needsUpdateFromParent?(m.elementClass===d.OBJECT_CLASS_CIRCLE?(n=m.Radius(),b=[m.center.X()+n*Math.cos(this.position),m.center.Y()+n*Math.sin(this.position)]):m.elementClass===d.OBJECT_CLASS_LINE?(a=m.point1.coords.usrCoords,
f=m.point2.coords.usrCoords,Math.abs(f[0])<l.eps?(p=Math.min(Math.abs(this.position),1-l.eps),p/=1-p,0>this.position&&(p=-p),b=[a[0]+p*f[0],a[1]+p*f[1],a[2]+p*f[2]]):Math.abs(a[0])<l.eps?(p=Math.max(this.position,l.eps),p=Math.min(p,2-l.eps),p=1<p?(p-1)/(p-2):(1-p)/p,b=[f[0]+p*a[0],f[1]+p*a[1],f[2]+p*a[2]]):(p=this.position,b=[a[0]+p*(f[0]-a[0]),a[1]+p*(f[1]-a[1]),a[2]+p*(f[2]-a[2])])):m.type===d.OBJECT_TYPE_TURTLE?(this.coords.setCoordinates(d.COORDS_BY_USER,[m.Z(this.position),m.X(this.position),
m.Y(this.position)]),this.updateConstraint(),b=e.projectPointToTurtle(this,m,this.board).usrCoords):m.elementClass===d.OBJECT_CLASS_CURVE?(this.coords.setCoordinates(d.COORDS_BY_USER,[m.Z(this.position),m.X(this.position),m.Y(this.position)]),m.type===d.OBJECT_TYPE_ARC||m.type===d.OBJECT_TYPE_SECTOR?(k=e.rad([m.center.X()+1,m.center.Y()],m.center,m.radiuspoint),g=0,h=e.rad(m.radiuspoint,m.center,m.anglepoint),("minor"===m.visProp.type&&h>Math.PI||"major"===m.visProp.type&&h<Math.PI)&&(g=h,h=2*Math.PI),
(this.position<g||this.position>h)&&(this.position=h,(this.position<g&&this.position>.5*g||this.position>h&&this.position>.5*h+Math.PI)&&(this.position=g)),n=m.Radius(),b=[m.center.X()+n*Math.cos(this.position+k),m.center.Y()+n*Math.sin(this.position+k)]):(this.updateConstraint(),b=e.projectPointToCurve(this,m,this.board).usrCoords)):m.elementClass===d.OBJECT_CLASS_POINT&&(b=e.projectPointToPoint(this,m,this.board).usrCoords),this.coords.setCoordinates(d.COORDS_BY_USER,b,!1),void 0):(this.needsUpdateFromParent=
!0,void 0)},updateRenderer:function(){var a;return this.needsUpdate?(this.visProp.visible&&0<this.visProp.size&&(a=this.isReal,this.isReal=!isNaN(this.coords.usrCoords[1]+this.coords.usrCoords[2]),this.isReal=Math.abs(this.coords.usrCoords[0])>l.eps?this.isReal:!1,this.isReal?(a!==this.isReal&&(this.board.renderer.show(this),this.hasLabel&&this.label.visProp.visible&&this.board.renderer.show(this.label)),this.board.renderer.updatePoint(this)):a!==this.isReal&&(this.board.renderer.hide(this),this.hasLabel&&
this.label.visProp.visible&&this.board.renderer.hide(this.label))),this.hasLabel&&this.visProp.visible&&this.label&&this.label.visProp.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.needsUpdate=!1,this):this},X:function(){return this.coords.usrCoords[1]},Y:function(){return this.coords.usrCoords[2]},Z:function(){return this.coords.usrCoords[0]},XEval:function(){return this.coords.usrCoords[1]},YEval:function(){return this.coords.usrCoords[2]},ZEval:function(){return this.coords.usrCoords[0]},
bounds:function(){return this.coords.usrCoords.slice(1).concat(this.coords.usrCoords.slice(1))},Dist:function(a){var f,n,b=0/0,k=a.coords.usrCoords,d=this.coords.usrCoords;return this.isReal&&a.isReal&&(n=d[0]-k[0],f=n*n,n=d[1]-k[1],f+=n*n,n=d[2]-k[2],f+=n*n,b=Math.sqrt(f)),b},snapToGrid:function(a){return this.handleSnapToGrid(a)},handleSnapToPoints:function(a){var f,n,b=0,k=1/0,g=null;if(this.visProp.snaptopoints||a){for(a=0;a<this.board.objectsList.length;a++)f=this.board.objectsList[a],f.elementClass===
d.OBJECT_CLASS_POINT&&f!==this&&f.visProp.visible&&(n=e.projectPointToPoint(this,f,this.board),b="screen"===this.visProp.attractorunit?n.distance(d.COORDS_BY_SCREEN,this.coords):n.distance(d.COORDS_BY_USER,this.coords),b<this.visProp.attractordistance&&k>b&&(k=b,g=n));null!==g&&this.coords.setCoordinates(d.COORDS_BY_USER,g.usrCoords)}return this},snapToPoints:function(a){return this.handleSnapToPoints(a)},handleAttractors:function(){var a,f,n,b=0,s=this.visProp.attractors.length;if(0!==this.visProp.attractordistance){for(a=
0;s>a;a++)if(f=this.board.select(this.visProp.attractors[a]),k.exists(f)&&f!==this){if(f.elementClass===d.OBJECT_CLASS_POINT?n=e.projectPointToPoint(this,f,this.board):f.elementClass===d.OBJECT_CLASS_LINE?n=e.projectPointToLine(this,f,this.board):f.elementClass===d.OBJECT_CLASS_CIRCLE?n=e.projectPointToCircle(this,f,this.board):f.elementClass===d.OBJECT_CLASS_CURVE?n=e.projectPointToCurve(this,f,this.board):f.type===d.OBJECT_TYPE_TURTLE&&(n=e.projectPointToTurtle(this,f,this.board)),b="screen"===
this.visProp.attractorunit?n.distance(d.COORDS_BY_SCREEN,this.coords):n.distance(d.COORDS_BY_USER,this.coords),b<this.visProp.attractordistance){this.type===d.OBJECT_TYPE_GLIDER&&this.slideObject===f||this.makeGlider(f);break}f===this.slideObject&&b>=this.visProp.snatchdistance&&this.popSlideObject()}return this}},setPositionDirectly:function(a,f){var n,b;if(this.coords,this.coords.setCoordinates(a,f),this.handleSnapToGrid(),this.handleSnapToPoints(),this.handleAttractors(),0===this.group.length){for(n=
this.transformations.length-1;0<=n;n--)a===d.COORDS_BY_SCREEN?b=(new g(a,f,this.board)).usrCoords:(2===f.length&&(f=[1].concat(f)),b=f),this.initialCoords.setCoordinates(d.COORDS_BY_USER,l.matVecMult(l.inverse(this.transformations[n].matrix),b));this.update()}return this.board.isSuspendedUpdate&&this.type===d.OBJECT_TYPE_GLIDER&&this.updateGlider(),f},setPositionByTransform:function(a,f){var n;return f=new g(a,f,this.board),n=this.board.create("transform",f.usrCoords.slice(1),{type:"translate"}),
0<this.transformations.length&&this.transformations[this.transformations.length-1].isNumericMatrix?this.transformations[this.transformations.length-1].melt(n):this.addTransform(this,n),this.update(),this},setPosition:function(a,f){return this.setPositionDirectly(a,f)},setGliderPosition:function(a){return this.type===d.OBJECT_TYPE_GLIDER&&(this.position=a,this.board.update()),this},makeGlider:function(a){var f=this.board.select(a);if(!k.exists(f))throw Error("JSXGraph: slide object undefined.");if(f.type===
d.OBJECT_TYPE_TICKS)throw Error("JSXGraph: gliders on ticks are not possible.");return this.slideObject=this.board.select(a),this.slideObjects.push(this.slideObject),this.type=d.OBJECT_TYPE_GLIDER,this.elType="glider",this.visProp.snapwidth=-1,this.slideObject.addChild(this),this.isDraggable=!0,this.generatePolynomial=function(){return this.slideObject.generatePolynomial(this)},this.updateGlider(),this.needsUpdateFromParent=!0,this.updateGliderFromParent(),this},popSlideObject:function(){0<this.slideObjects.length&&
(this.slideObjects.pop(),this.slideObject.removeChild(this),0===this.slideObjects.length?(this.elType="point",this.type=d.OBJECT_TYPE_POINT,this.slideObject=null):this.slideObject=this.slideObjects[this.slideObjects.length-1])},free:function(){var a,f;if(this.type!==d.OBJECT_TYPE_GLIDER){if(this.transformations.length=0,this.isDraggable)return;this.isDraggable=!0;this.type=d.OBJECT_TYPE_POINT;this.XEval=function(){return this.coords.usrCoords[1]};this.YEval=function(){return this.coords.usrCoords[2]};
this.ZEval=function(){return this.coords.usrCoords[0]};this.Yjc=this.Xjc=null}for(a in this.board.objects)this.board.objects.hasOwnProperty(a)&&(f=this.board.objects[a],f.descendants&&(delete f.descendants[this.id],delete f.childElements[this.id],this.hasLabel&&(delete f.descendants[this.label.id],delete f.childElements[this.label.id])));this.ancestors={};this.slideObject=null;this.slideObjects=[];this.elType="point";this.type=d.OBJECT_TYPE_POINT},addConstraint:function(a){var f,n,b=[],s=["X","Y"],
e=function(a){return function(){return a}},g=function(a){return function(){return a.Value()}};this.type=d.OBJECT_TYPE_CAS;this.isDraggable=!1;for(f=0;f<a.length;f++)n=a[f],"string"==typeof n?(b[f]=this.board.jc.snippet(n,!0,null,!0),2===a.length&&(this[s[f]+"jc"]=a[f])):"function"==typeof n?b[f]=n:"number"==typeof n?b[f]=e(n):"object"==typeof n&&"function"==typeof n.Value&&(b[f]=g(n)),b[f].origin=n;return 1===a.length?this.updateConstraint=function(){var a=b[0]();k.isArray(a)?this.coords.setCoordinates(d.COORDS_BY_USER,
a):this.coords=a}:2===a.length?(this.XEval=b[0],this.YEval=b[1],this.parents=[b[0].origin,b[1].origin],this.updateConstraint=function(){this.coords.setCoordinates(d.COORDS_BY_USER,[this.XEval(),this.YEval()])}):(this.ZEval=b[0],this.XEval=b[1],this.YEval=b[2],this.parents=[b[0].origin,b[1].origin,b[2].origin],this.updateConstraint=function(){this.coords.setCoordinates(d.COORDS_BY_USER,[this.ZEval(),this.XEval(),this.YEval()])}),this.update(),this.board.isSuspendedUpdate||this.updateRenderer(),this},
updateTransform:function(){var a;if(0===this.transformations.length||null===this.baseElement)return this;a=this===this.baseElement?this.transformations[0].apply(this.baseElement,"self"):this.transformations[0].apply(this.baseElement);this.coords.setCoordinates(d.COORDS_BY_USER,a);for(a=1;a<this.transformations.length;a++)this.coords.setCoordinates(d.COORDS_BY_USER,this.transformations[a].apply(this));return this},addTransform:function(a,f){var n,b=k.isArray(f)?f:[f],d=b.length;0===this.transformations.length&&
(this.baseElement=a);for(n=0;d>n;n++)this.transformations.push(b[n]);return this},startAnimation:function(a,f){var n=this;return this.type!==d.OBJECT_TYPE_GLIDER||k.exists(this.intervalCode)||(this.intervalCode=window.setInterval(function(){n._anim(a,f)},250),k.exists(this.intervalCount)||(this.intervalCount=0)),this},stopAnimation:function(){return k.exists(this.intervalCode)&&(window.clearInterval(this.intervalCode),delete this.intervalCode),this},moveAlong:function(a,f,n){n=n||{};var b,s=[],e=
[],g=f/this.board.attr.animationdelay,l=function(f,n){return function(){return a[f][n]}};if(k.isArray(a)){for(b=0;b<a.length;b++)e[b]=k.isPoint(a[b])?a[b]:{elementClass:d.OBJECT_CLASS_POINT,X:l(b,0),Y:l(b,1)};if(f=f||0,0===f)return this.setPosition(d.COORDS_BY_USER,[e[e.length-1].X(),e[e.length-1].Y()]),this.board.update(this);if(!k.exists(n.interpolate)||n.interpolate)for(f=h.Neville(e),b=0;g>b;b++)s[b]=[],s[b][0]=f[0]((g-b)/g*f[3]()),s[b][1]=f[1]((g-b)/g*f[3]());else for(b=0;g>b;b++)s[b]=[],s[b][0]=
a[Math.floor((g-b)/g*(a.length-1))][0],s[b][1]=a[Math.floor((g-b)/g*(a.length-1))][1];this.animationPath=s}else k.isFunction(a)&&(this.animationPath=a,this.animationStart=(new Date).getTime());return this.animationCallback=n.callback,this.board.addAnimation(this),this},moveTo:function(a,f,n){n=n||{};a=new g(d.COORDS_BY_USER,a,this.board);var b=Math.ceil(f/this.board.attr.animationdelay),s=[],e=this.coords.usrCoords[1],h=this.coords.usrCoords[2],m=a.usrCoords[1]-e,x=a.usrCoords[2]-h,u=function(a){return n.effect&&
"<>"===n.effect?Math.pow(Math.sin(a/b*Math.PI/2),2):a/b};if(!k.exists(f)||0===f||Math.abs(a.usrCoords[0]-this.coords.usrCoords[0])>l.eps)return this.setPosition(d.COORDS_BY_USER,a.usrCoords),this.board.update(this);if(Math.abs(m)<l.eps&&Math.abs(x)<l.eps)return this;for(f=b;0<=f;f--)s[b-f]=[a.usrCoords[0],e+m*u(f),h+x*u(f)];return this.animationPath=s,this.animationCallback=n.callback,this.board.addAnimation(this),this},visit:function(a,f,n){a=new g(d.COORDS_BY_USER,a,this.board);var b,s;b=this.board.attr.animationdelay;
var e=[],h=this.coords.usrCoords[1],l=this.coords.usrCoords[2],m=a.usrCoords[1]-h,u=a.usrCoords[2]-l,t=function(a){a=s/2>a?2*a/s:2*(s-a)/s;return n.effect&&"<>"===n.effect?Math.pow(Math.sin(a*Math.PI/2),2):a};"number"==typeof n?n={repeat:n}:(n=n||{},k.exists(n.repeat)||(n.repeat=1));s=Math.ceil(f/(b*n.repeat));for(b=0;b<n.repeat;b++)for(f=s;0<=f;f--)e[b*(s+1)+s-f]=[a.usrCoords[0],h+m*t(f),l+u*t(f)];return this.animationPath=e,this.animationCallback=n.callback,this.board.addAnimation(this),this},_anim:function(a,
f){var n,b,k,g,h,l,m,u,t=1;return this.intervalCount+=1,this.intervalCount>f&&(this.intervalCount=0),this.slideObject.elementClass===d.OBJECT_CLASS_LINE?(n=this.slideObject.point1.coords.distance(d.COORDS_BY_SCREEN,this.slideObject.point2.coords),b=this.slideObject.getSlope(),1/0!==b?(h=Math.atan(b),k=Math.round(this.intervalCount/f*n*Math.cos(h)),g=Math.round(this.intervalCount/f*n*Math.sin(h))):(k=0,g=Math.round(this.intervalCount/f*n)),0>a?(l=this.slideObject.point2,0<this.slideObject.point2.coords.scrCoords[1]-
this.slideObject.point1.coords.scrCoords[1]?t=-1:0===this.slideObject.point2.coords.scrCoords[1]-this.slideObject.point1.coords.scrCoords[1]&&0<this.slideObject.point2.coords.scrCoords[2]-this.slideObject.point1.coords.scrCoords[2]&&(t=-1)):(l=this.slideObject.point1,0<this.slideObject.point1.coords.scrCoords[1]-this.slideObject.point2.coords.scrCoords[1]?t=-1:0===this.slideObject.point1.coords.scrCoords[1]-this.slideObject.point2.coords.scrCoords[1]&&0<this.slideObject.point1.coords.scrCoords[2]-
this.slideObject.point2.coords.scrCoords[2]&&(t=-1)),this.coords.setCoordinates(d.COORDS_BY_SCREEN,[l.coords.scrCoords[1]+t*k,l.coords.scrCoords[2]+t*g])):this.slideObject.elementClass===d.OBJECT_CLASS_CURVE?(m=0<a?Math.round(this.intervalCount/f*this.board.canvasWidth):Math.round((f-this.intervalCount)/f*this.board.canvasWidth),this.coords.setCoordinates(d.COORDS_BY_SCREEN,[m,0]),this.coords=e.projectPointToCurve(this,this.slideObject,this.board)):this.slideObject.elementClass===d.OBJECT_CLASS_CIRCLE&&
(h=0>a?this.intervalCount/f*2*Math.PI:(f-this.intervalCount)/f*2*Math.PI,u=this.slideObject.Radius(),this.coords.setCoordinates(d.COORDS_BY_USER,[this.slideObject.center.coords.usrCoords[1]+u*Math.cos(h),this.slideObject.center.coords.usrCoords[2]+u*Math.sin(h)])),this.board.update(this),this},setStyle:function(a){return this.visProp.face="cross cross cross circle circle circle circle square square square plus plus plus".split(" ")[a],this.visProp.size=[2,3,4,1,2,3,4,2,3,4,2,3,4][a],this.board.renderer.changePointStyle(this),
this},normalizeFace:function(a){return q.normalizePointFace(a)},remove:function(){this.hasLabel&&this.board.renderer.remove(this.board.renderer.getElementById(this.label.id));this.board.renderer.remove(this.board.renderer.getElementById(this.id))},getTextAnchor:function(){return this.coords},getLabelAnchor:function(){return this.coords},face:function(a){this.setAttribute({face:a})},size:function(a){this.setAttribute({size:a})},cloneToBackground:function(){var a={};return a.id=this.id+"T"+this.numTraces,
this.numTraces+=1,a.coords=this.coords,a.visProp=k.deepCopy(this.visProp,this.visProp.traceattributes,!0),a.visProp.layer=this.board.options.layer.trace,a.elementClass=d.OBJECT_CLASS_POINT,a.board=this.board,k.clearVisPropOld(a),this.board.renderer.drawPoint(a),this.traces[a.id]=a.rendNode,this},getParents:function(){var a=[this.Z(),this.X(),this.Y()];return this.parents&&(a=this.parents),this.type===d.OBJECT_TYPE_GLIDER&&(a=[this.X(),this.Y(),this.slideObject.id]),a}}),m.createPoint=function(a,f,
n){var b,d;b=!1;n=k.copyAttributes(n,a.options,"point");1===f.length&&k.isArray(f[0])&&1<f[0].length&&4>f[0].length&&(f=f[0]);for(d=0;d<f.length;d++)"function"!=typeof f[d]&&"string"!=typeof f[d]||(b=!0);if(b)b=new m.Point(a,[0/0,0/0],n),b.addConstraint(f);else if(k.isNumber(f[0])&&k.isNumber(f[1]))b=new m.Point(a,f,n),k.exists(n.slideobject)?b.makeGlider(n.slideobject):b.baseElement=b,b.isDraggable=!0;else{if("object"!=typeof f[0]||"object"!=typeof f[1])throw Error("JSXGraph: Can't create point with parent types '"+
typeof f[0]+"' and '"+typeof f[1]+"'.\nPossible parent types: [x,y], [z,x,y], [point,transformation]");b=new m.Point(a,[0,0],n);b.addTransform(f[0],f[1]);b.isDraggable=!1;b.parents=[f[0].id]}return a.isSuspendedUpdate||(b.handleSnapToGrid(),b.handleSnapToPoints(),b.handleAttractors()),b},m.createGlider=function(a,f,n){var b;n=k.copyAttributes(n,a.options,"glider");return b=1===f.length?a.create("point",[0,0],n):a.create("point",f.slice(0,2),n),b.makeGlider(f[f.length-1]),b},m.createIntersectionPoint=
function(a,f,n){var b,s,h,r,l;n=k.copyAttributes(n,a.options,"intersection");f.push(0,0);b=a.create("point",[0,0,0],n);s=a.select(f[0]);h=a.select(f[1]);r=f[2]||0;l=f[3]||0;b.addConstraint([s.elementClass===d.OBJECT_CLASS_CURVE&&h.elementClass===d.OBJECT_CLASS_CURVE?function(){return e.meetCurveCurve(s,h,r,l,s.board)}:s.elementClass===d.OBJECT_CLASS_CURVE&&h.elementClass===d.OBJECT_CLASS_LINE||h.elementClass===d.OBJECT_CLASS_CURVE&&s.elementClass===d.OBJECT_CLASS_LINE?function(){return e.meetCurveLine(s,
h,r,s.board,b.visProp.alwaysintersect)}:s.elementClass===d.OBJECT_CLASS_LINE&&h.elementClass===d.OBJECT_CLASS_LINE?function(){var a,f,n=s.visProp.straightfirst,k=h.visProp.straightfirst,c=s.visProp.straightlast,l=h.visProp.straightlast;return b.visProp.alwaysintersect||n&&c&&k&&l?e.meet(s.stdform,h.stdform,r,s.board):(a=e.meetSegmentSegment(s.point1.coords.usrCoords,s.point2.coords.usrCoords,h.point1.coords.usrCoords,h.point2.coords.usrCoords,s.board),f=!n&&0>a[1]||!c&&1<a[1]||!k&&0>a[2]||!l&&1<a[2]?
[0,0/0,0/0]:a[0],new g(d.COORDS_BY_USER,f,s.board))}:function(){return e.meet(s.stdform,h.stdform,r,s.board)}]);try{s.addChild(b),h.addChild(b)}catch(m){throw Error("JSXGraph: Can't create 'intersection' with parent types '"+typeof f[0]+"' and '"+typeof f[1]+"'.");}return b.type=d.OBJECT_TYPE_INTERSECTION,b.elType="intersection",b.parents=[s.id,h.id,r,l],b.generatePolynomial=function(){var a=s.generatePolynomial(b),f=h.generatePolynomial(b);return 0===a.length||0===f.length?[]:[a[0],f[0]]},b},m.createOtherIntersectionPoint=
function(a,f,n){var b,s,g,h;if(3!==f.length||!k.isPoint(f[2])||f[0].elementClass!==d.OBJECT_CLASS_LINE&&f[0].elementClass!==d.OBJECT_CLASS_CIRCLE||f[1].elementClass!==d.OBJECT_CLASS_LINE&&f[1].elementClass!==d.OBJECT_CLASS_CIRCLE)throw Error("JSXGraph: Can't create 'other intersection point' with parent types '"+typeof f[0]+"',  '"+typeof f[1]+"'and  '"+typeof f[2]+"'.\nPossible parent types: [circle|line,circle|line,point]");return s=a.select(f[0]),g=a.select(f[1]),h=a.select(f[2]),b=a.create("point",
[function(){var a=e.meet(s.stdform,g.stdform,0,s.board);return Math.abs(h.X()-a.usrCoords[1])>l.eps||Math.abs(h.Y()-a.usrCoords[2])>l.eps||Math.abs(h.Z()-a.usrCoords[0])>l.eps?a:e.meet(s.stdform,g.stdform,1,s.board)}],n),b.type=d.OBJECT_TYPE_INTERSECTION,b.elType="otherintersection",b.parents=[s.id,g.id,h],s.addChild(b),g.addChild(b),b.generatePolynomial=function(){var a=s.generatePolynomial(b),f=g.generatePolynomial(b);return 0===a.length||0===f.length?[]:[a[0],f[0]]},b},m.createPolePoint=function(a,
f,n){var b,k,e;if(2!==f.length||(f[0].type!==d.OBJECT_TYPE_CONIC&&f[0].elementClass!==d.OBJECT_CLASS_CIRCLE||f[1].elementClass!==d.OBJECT_CLASS_LINE)&&(f[0].elementClass!==d.OBJECT_CLASS_LINE||f[1].type!==d.OBJECT_TYPE_CONIC&&f[1].elementClass!==d.OBJECT_CLASS_CIRCLE))throw Error("JSXGraph: Can't create 'pole point' with parent types '"+typeof f[0]+"' and '"+typeof f[1]+"'.\nPossible parent type: [conic|circle,line], [line,conic|circle]");return f[1].elementClass===d.OBJECT_CLASS_LINE?(k=a.select(f[0]),
e=a.select(f[1])):(k=a.select(f[1]),e=a.select(f[0])),b=a.create("point",[function(){var a=k.quadraticform,f=e.stdform.slice(0,3);return[m.Math.Numerics.det([f,a[1],a[2]]),m.Math.Numerics.det([a[0],f,a[2]]),m.Math.Numerics.det([a[0],a[1],f])]}],n),b.elType="polepoint",b.parents=[k.id,e.id],k.addChild(b),e.addChild(b),b},m.registerElement("point",m.createPoint),m.registerElement("glider",m.createGlider),m.registerElement("intersection",m.createIntersectionPoint),m.registerElement("otherintersection",
m.createOtherIntersectionPoint),m.registerElement("polepoint",m.createPolePoint),{Point:m.Point,createPoint:m.createPoint,createGlider:m.createGlider,createIntersection:m.createIntersectionPoint,createOtherIntersection:m.createOtherIntersectionPoint,createPolePoint:m.createPolePoint}});E("utils/expect",["jxg","utils/type","base/constants","base/coords","base/point"],function(m,q,l,e){var h={each:function(e,d,b){var a,k=[];for(a=0;a<e.length;a++)k.push(d.call(this,e[a],b));return k},coords:function(h,
d){var b=h;return h&&h.elementClass===l.OBJECT_CLASS_POINT?b=h.coords:h.usrCoords&&h.scrCoords&&h.usr2screen&&(b=h),d&&(b=new e(l.COORDS_BY_USER,b.usrCoords,b.board)),b},coordsArray:function(e,d){var b;return b=q.isArray(e)?e:this.coords(e).usrCoords,3>b.length&&b.unshift(1),d&&(b=[b[0],b[1],b[2]]),b}};return m.Expect=h,h});E("math/qdt",["math/math","utils/type"],function(m,q){var l=function(e){this.capacity=10;this.points=[];this.xlb=e[0];this.xub=e[2];this.ylb=e[3];this.yub=e[1];this.southWest=
this.southEast=this.northEast=this.northWest=null};return q.extend(l.prototype,{contains:function(e,h){return this.xlb<e&&e<=this.xub&&this.ylb<h&&h<=this.yub},insert:function(e){return this.contains(e.usrCoords[1],e.usrCoords[2])?this.points.length<this.capacity?(this.points.push(e),!0):(null===this.northWest&&this.subdivide(),this.northWest.insert(e)?!0:this.northEast.insert(e)?!0:this.southEast.insert(e)?!0:this.southWest.insert(e)?!0:!1):!1},subdivide:function(){var e,h=this.points.length;e=this.xlb+
(this.xub-this.xlb)/2;var g=this.ylb+(this.yub-this.ylb)/2;this.northWest=new l([this.xlb,this.yub,e,g]);this.northEast=new l([e,this.yub,this.xub,g]);this.southEast=new l([this.xlb,g,e,this.ylb]);this.southWest=new l([e,g,this.xub,this.ylb]);for(e=0;h>e;e+=1)this.northWest.insert(this.points[e]),this.northEast.insert(this.points[e]),this.southEast.insert(this.points[e]),this.southWest.insert(this.points[e])},_query:function(e,h){var g;if(this.contains(e,h)){if(null===this.northWest)return this;if((g=
this.northWest._query(e,h))||(g=this.northEast._query(e,h))||(g=this.southEast._query(e,h))||(g=this.southWest._query(e,h)))return g}return!1},query:function(e,h){var g,d;return q.exists(h)?(g=e,d=h):(g=e.usrCoords[1],d=e.usrCoords[2]),this._query(g,d)}}),m.Quadtree=l,l});E("math/statistics",["jxg","base/constants","math/math","utils/type"],function(m,q,l,e){return l.Statistics={sum:function(e){var g,d=e.length,b=0;for(g=0;d>g;g++)b+=e[g];return b},prod:function(e){var g,d=e.length,b=1;for(g=0;d>
g;g++)b*=e[g];return b},mean:function(e){return 0<e.length?this.sum(e)/e.length:0},median:function(e){var g,d;return 0<e.length?(g=e.slice(0),g.sort(function(b,a){return b-a}),d=g.length,1===d%2?g[parseInt(.5*d,10)]:.5*(g[.5*d-1]+g[.5*d])):0},variance:function(e){var g,d,b,a=e.length;if(1<a){g=this.mean(e);for(b=d=0;a>b;b++)d+=(e[b]-g)*(e[b]-g);return d/(e.length-1)}return 0},sd:function(e){return Math.sqrt(this.variance(e))},weightedMean:function(e,g){if(e.length!==g.length)throw Error("JSXGraph error (Math.Statistics.weightedMean): Array dimension mismatch.");
return 0<e.length?this.mean(this.multiply(e,g)):0},max:function(e){return Math.max.apply(this,e)},min:function(e){return Math.min.apply(this,e)},range:function(e){return[this.min(e),this.max(e)]},abs:function(h){var g,d,b;if(e.isArray(h))for(d=h.length,b=[],g=0;d>g;g++)b[g]=Math.abs(h[g]);else b=Math.abs(h);return b},add:function(h,g){var d,b,a=[];if(h=e.evalSlider(h),g=e.evalSlider(g),e.isArray(h)&&e.isNumber(g))for(b=h.length,d=0;b>d;d++)a[d]=h[d]+g;else if(e.isNumber(h)&&e.isArray(g))for(b=g.length,
d=0;b>d;d++)a[d]=h+g[d];else if(e.isArray(h)&&e.isArray(g))for(b=Math.min(h.length,g.length),d=0;b>d;d++)a[d]=h[d]+g[d];else a=h+g;return a},div:function(h,g){var d,b,a=[];if(h=e.evalSlider(h),g=e.evalSlider(g),e.isArray(h)&&e.isNumber(g))for(b=h.length,d=0;b>d;d++)a[d]=h[d]/g;else if(e.isNumber(h)&&e.isArray(g))for(b=g.length,d=0;b>d;d++)a[d]=h/g[d];else if(e.isArray(h)&&e.isArray(g))for(b=Math.min(h.length,g.length),d=0;b>d;d++)a[d]=h[d]/g[d];else a=h/g;return a},divide:m.shortcut(l.Statistics,
"div"),mod:function(h,g,d){var b,a=[],k=function(a,f){return a%f};if(d=e.def(d,!1),d&&(k=l.mod),h=e.evalSlider(h),g=e.evalSlider(g),e.isArray(h)&&e.isNumber(g))for(b=h.length,d=0;b>d;d++)a[d]=k(h[d],g);else if(e.isNumber(h)&&e.isArray(g))for(b=g.length,d=0;b>d;d++)a[d]=k(h,g[d]);else if(e.isArray(h)&&e.isArray(g))for(b=Math.min(h.length,g.length),d=0;b>d;d++)a[d]=k(h[d],g[d]);else a=k(h,g);return a},multiply:function(h,g){var d,b,a=[];if(h=e.evalSlider(h),g=e.evalSlider(g),e.isArray(h)&&e.isNumber(g))for(b=
h.length,d=0;b>d;d++)a[d]=h[d]*g;else if(e.isNumber(h)&&e.isArray(g))for(b=g.length,d=0;b>d;d++)a[d]=h*g[d];else if(e.isArray(h)&&e.isArray(g))for(b=Math.min(h.length,g.length),d=0;b>d;d++)a[d]=h[d]*g[d];else a=h*g;return a},subtract:function(h,g){var d,b,a=[];if(h=e.evalSlider(h),g=e.evalSlider(g),e.isArray(h)&&e.isNumber(g))for(b=h.length,d=0;b>d;d++)a[d]=h[d]-g;else if(e.isNumber(h)&&e.isArray(g))for(b=g.length,d=0;b>d;d++)a[d]=h-g[d];else if(e.isArray(h)&&e.isArray(g))for(b=Math.min(h.length,
g.length),d=0;b>d;d++)a[d]=h[d]-g[d];else a=h-g;return a},TheilSenRegression:function(e){var g,d,b=[],a=[],k=[];for(g=0;g<e.length;g++){for(d=a.length=0;d<e.length;d++)Math.abs(e[d].usrCoords[1]-e[g].usrCoords[1])>l.eps&&(a[d]=(e[d].usrCoords[2]-e[g].usrCoords[2])/(e[d].usrCoords[1]-e[g].usrCoords[1]));b[g]=this.median(a);k.push(e[g].usrCoords[2]-b[g]*e[g].usrCoords[1])}return[this.median(k),this.median(b),-1]}},l.Statistics});E("utils/zip",["jxg"],function(m){var q=[0,128,64,192,32,160,96,224,16,
144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,
105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,3,131,67,195,35,163,99,227,19,147,83,211,51,179,115,243,11,139,75,203,43,171,107,235,27,155,91,219,59,187,123,251,7,135,71,199,39,167,103,231,23,151,87,215,55,183,119,247,15,143,79,207,47,175,111,239,31,159,95,223,63,191,127,255],l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],e=[0,0,0,0,0,0,0,0,1,1,1,
1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,99,99],h=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],g=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],d=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];return m.Util=m.Util||{},m.Util.Unzip=function(b){function a(){return I+=8,N>M?b[M++]:-1}function k(){var f;try{return I++,f=1&H,H>>=1,0===H&&(H=a(),f=1&H,H=128|H>>1),f}catch(b){throw b;}}function c(a){var f=0,b=a;try{for(;b--;)f=
f<<1|k();a&&(f=q[f]>>8-a)}catch(n){throw n;}return f}function f(a){t++;J[G++]=a;C.push(String.fromCharCode(a));32768===G&&(G=0)}function n(){this.b1=this.b0=0;this.jump=null;this.jumppos=-1}function p(){for(;;){if(S[O]>=B)return-1;if(z[S[O]]===O)return S[O]++;S[O]++}}function s(){var a,f=T[R];if(17===O)return-1;if(R++,O++,a=p(),0<=a)f.b0=a;else if(f.b0=32768,s())return-1;if(a=p(),0<=a)f.b1=a,f.jump=null;else if(f.b1=32768,f.jump=T[R],f.jumppos=R,s())return-1;return O--,0}function v(a,f,b){T=a;R=0;
z=b;B=f;for(a=0;17>a;a++)S[a]=0;return O=0,s()?-1:0}function r(a){for(var f,b,n=0,c=a[n];;)if(k()){if(!(32768&c.b1))return c.b1;c=c.jump;f=a.length;for(b=0;f>b;b++)if(a[b]===c){n=b;break}}else{if(!(32768&c.b0))return c.b0;n++;c=a[n]}}function y(){var b,p,s,t,w,z,y,x,u,B,A;do if(b=k(),s=c(2),0===s)for(H=1,y=a(),y|=a()<<8,p=a(),p|=a()<<8,65535&(y^~p)&&m.debug("BlockLen checksum mismatch\n");y--;)p=a(),f(p);else if(1===s)for(;;)if(w=q[c(7)]>>1,23<w?(w=w<<1|k(),199<w?(w-=128,w=w<<1|k()):(w-=48,143<w&&
(w+=136))):w+=256,256>w)f(w);else{if(256===w)break;w-=257;z=c(e[w])+l[w];w=q[c(5)]>>3;8<g[w]?(x=c(8),x|=c(g[w]-8)<<8):x=c(g[w]);x+=h[w];for(w=0;z>w;w++)p=J[32767&G-x],f(p)}else if(2===s){p=Array(320);y=257+c(5);B=1+c(5);t=4+c(4);for(w=0;19>w;w++)p[w]=0;for(w=0;t>w;w++)p[d[w]]=c(3);z=K.length;for(t=0;z>t;t++)K[t]=new n;if(v(K,19,p,0))return G=0,1;u=y+B;t=0;for(A=-1;u>t;)if(A++,w=r(K),16>w)p[t++]=w;else if(16===w){if(w=3+c(2),t+w>u)return G=0,1;for(z=t?p[t-1]:0;w--;)p[t++]=z}else{if(w=17===w?3+c(3):
11+c(7),t+w>u)return G=0,1;for(;w--;)p[t++]=0}z=E.length;for(t=0;z>t;t++)E[t]=new n;if(v(E,y,p,0))return G=0,1;z=E.length;for(t=0;z>t;t++)K[t]=new n;z=[];for(t=y;t<p.length;t++)z[t-y]=p[t];if(v(K,B,z,0))return G=0,1;for(;;)if(w=r(E),256<=w){if(w-=256,0===w)break;w-=1;z=c(e[w])+l[w];w=r(K);8<g[w]?(x=c(8),x|=c(g[w]-8)<<8):x=c(g[w]);for(x+=h[w];z--;)p=J[32767&G-x],f(p)}else f(w)}while(!b);G=0;H=1;return 0}function x(){var f,b,n,k,p,c=[];try{if(C=[],L=!1,c[0]=a(),c[1]=a(),120===c[0]&&218===c[1]&&(y(),
D[F]=[C.join(""),"geonext.gxt"],F++),31===c[0]&&139===c[1]&&(A(),D[F]=[C.join(""),"file"],F++),80===c[0]&&75===c[1]&&(L=!0,c[2]=a(),c[3]=a(),3===c[2]&&4===c[3])){c[0]=a();c[1]=a();u=a();u|=a()<<8;p=a();p|=a()<<8;a();a();a();a();a();a();a();a();a();a();a();a();a();a();a();a();k=a();k|=a()<<8;n=a();n|=a()<<8;f=0;for(Q=[];k--;)b=a(),"/"===b|":"===b?f=0:255>f&&(Q[f++]=String.fromCharCode(b));w||(w=Q);for(f=0;n>f;)a(),f++;t=0;8===p&&(y(),D[F]=Array(2),D[F][0]=C.join(""),D[F][1]=Q.join(""),F++);A()}}catch(d){throw d;
}}var u,t,w,z,B,A,C=[],F=0,D=[],J=Array(32768),G=0,L=!1,N=b.length,M=0,H=1,I=0,E=Array(288),K=Array(32),R=0,T=null,O=(Array(64),Array(64),0),S=Array(17),Q=[];S[0]=0;A=function(){var f,b;f=[];if(8&u&&(f[0]=a(),f[1]=a(),f[2]=a(),f[3]=a(),80===f[0]&&75===f[1]&&7===f[2]&&8===f[3]&&(a(),a(),a(),a()),a(),a(),a(),a(),a(),a(),a(),a()),L&&x(),f[0]=a(),8===f[0]){if(u=a(),a(),a(),a(),a(),a(),a(),4&u)for(f[0]=a(),f[2]=a(),O=f[0]+256*f[1],f=0;O>f;f++)a();if(8&u)for(f=0,Q=[],b=a();b;)"7"!==b&&":"!==b||(f=0),255>
f&&(Q[f++]=b),b=a();if(16&u)for(b=a();b;)b=a();2&u&&(a(),a());y();a();a();a();a();a();a();a();a();L&&x()}};m.Util.Unzip.prototype.unzipFile=function(a){var f;this.unzip();for(f=0;f<D.length;f++)if(D[f][1]===a)return D[f][0];return""};m.Util.Unzip.prototype.unzip=function(){return x(),D}},m.Util});E("utils/encoding",["jxg"],function(m){var q=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,10,3,3,3,3,3,3,3,3,3,3,3,3,4,3,3,11,6,6,6,5,8,8,8,8,8,8,8,8,8,8,8,0,12,24,36,60,96,84,12,12,12,48,72,12,12,12,12,12,12,12,12,12,12,12,12,12,0,12,12,12,12,12,0,12,0,12,12,12,24,12,12,12,12,12,24,12,24,12,12,12,12,
12,12,12,12,12,24,12,12,12,12,12,24,12,12,12,12,12,12,12,24,12,12,12,12,12,12,12,12,12,36,12,36,12,12,12,36,12,12,12,12,12,36,12,36,12,12,12,36,12,12,12,12,12,12,12,12,12,12];return m.Util=m.Util||{},m.Util.UTF8={encode:function(l){var e,h,g="",d=l.length;if(l=l.replace(/\r\n/g,"\n"),"function"==typeof unescape&&"function"==typeof encodeURIComponent)return unescape(encodeURIComponent(l));for(e=0;d>e;e++)h=l.charCodeAt(e),128>h?g+=String.fromCharCode(h):127<h&&2048>h?(g+=String.fromCharCode(192|h>>
6),g+=String.fromCharCode(128|63&h)):(g+=String.fromCharCode(224|h>>12),g+=String.fromCharCode(128|63&h>>6),g+=String.fromCharCode(128|63&h));return g},decode:function(l){var e,h,g,d=0,b=0,a=0,k=[],c=l.length,f=[];for(e=0;c>e;e++)h=l.charCodeAt(e),g=q[h],b=0!==a?63&h|b<<6:255>>g&h,a=q[256+a+g],0===a&&(65535<b?k.push(55232+(b>>10),56320+(1023&b)):k.push(b),d++,0===d%1E4&&(f.push(String.fromCharCode.apply(null,k)),k=[]));return f.push(String.fromCharCode.apply(null,k)),f.join("")},asciiCharCodeAt:function(l,
e){var h=l.charCodeAt(e);if(255<h)switch(h){case 8364:h=128;break;case 8218:h=130;break;case 402:h=131;break;case 8222:h=132;break;case 8230:h=133;break;case 8224:h=134;break;case 8225:h=135;break;case 710:h=136;break;case 8240:h=137;break;case 352:h=138;break;case 8249:h=139;break;case 338:h=140;break;case 381:h=142;break;case 8216:h=145;break;case 8217:h=146;break;case 8220:h=147;break;case 8221:h=148;break;case 8226:h=149;break;case 8211:h=150;break;case 8212:h=151;break;case 732:h=152;break;case 8482:h=
153;break;case 353:h=154;break;case 8250:h=155;break;case 339:h=156;break;case 382:h=158;break;case 376:h=159}return h}},m.Util.UTF8});E("utils/base64",["jxg","utils/encoding"],function(m,q){function l(h,g){var d=e.indexOf(h.charAt(g));if(-1===d)throw Error("JSXGraph/utils/base64: Can't decode string (invalid character).");return d}var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";return m.Util=m.Util||{},m.Util.Base64={encode:function(h){var g,d,b,a,k=[];a=q.encode(h);d=a.length;
b=d%3;for(h=0;d-b>h;h+=3)g=(255&a.charCodeAt(h))<<16|(255&a.charCodeAt(h+1))<<8|255&a.charCodeAt(h+2),k.push(e.charAt(g>>18),e.charAt(63&g>>12),e.charAt(63&g>>6),e.charAt(63&g));switch(b){case 1:g=255&a.charCodeAt(d-1);k.push(e.charAt(g>>2),e.charAt(63&g<<4),"=","=");break;case 2:g=(255&a.charCodeAt(d-2))<<8|255&a.charCodeAt(d-1),k.push(e.charAt(g>>10),e.charAt(63&g>>4),e.charAt(63&g<<2),"=")}return k.join("")},decode:function(e,g){var d,b,a,k,c,f,n=[],p=[];if(d=e.replace(/[^A-Za-z0-9\+\/=]/g,""),
a=d.length,0!==a%4)throw Error("JSXGraph/utils/base64: Can't decode string (invalid input length).");"="===d.charAt(a-1)&&(k=1,"="===d.charAt(a-2)&&(k=2),a-=4);for(b=0;a>b;b+=4)c=l(d,b)<<18|l(d,b+1)<<12|l(d,b+2)<<6|l(d,b+3),p.push(c>>16,255&c>>8,255&c),0===b%1E4&&(n.push(String.fromCharCode.apply(null,p)),p=[]);switch(k){case 1:c=l(d,a)<<12|l(d,a+1)<<6|l(d,a+2);p.push(c>>10,255&c>>2);break;case 2:c=l(d,b)<<6|l(d,b+1),p.push(c>>4)}return n.push(String.fromCharCode.apply(null,p)),f=n.join(""),g&&(f=
q.decode(f)),f},decodeAsArray:function(e){var g=this.decode(e),d=[],b=g.length;for(e=0;b>e;e++)d[e]=g.charCodeAt(e);return d}},m.Util.Base64});E("server/server",["jxg","utils/zip","utils/base64","utils/type"],function(m,q,l,e){return m.Server={modules:{},runningCalls:{},handleError:function(e){m.debug("error occured, server says: "+e.message)},callServer:function(h,g,d,b){var a,k,c,f,n;b=b||!1;f="";for(n in d)d.hasOwnProperty(n)&&(f+="&"+escape(n)+"="+escape(d[n]));n=e.toJSON(d);do f=h+Math.floor(4096*
Math.random());while(e.exists(this.runningCalls[f]));return this.runningCalls[f]={action:h},e.exists(d.module)&&(this.runningCalls[f].module=d.module),a=m.serverBase+"JXGServer.py",k="action="+escape(h)+"&id="+f+"&dataJSON="+escape(l.encode(n)),this.cbp=function(a){var f,b,n,k,c;if(f=(new q.Unzip(l.decodeAsArray(a))).unzip(),e.isArray(f)&&0<f.length&&(f=f[0][0]),e.exists(f))if(b=window.JSON&&window.JSON.parse?window.JSON.parse(f):(new Function("return "+f))(),"error"===b.type)this.handleError(b);
else if("response"===b.type){k=b.id;for(c=0;c<b.fields.length;c++)a=b.fields[c],n=a.namespace+("object"==typeof(new Function("return "+a.namespace))()?".":".prototype.")+a.name+" = "+a.value,(new Function(n))();for(c=0;c<b.handler.length;c++){a=b.handler[c];f=[];for(n=0;n<a.parameters.length;n++)f[n]='"'+a.parameters[n]+'": '+a.parameters[n];n="if(typeof JXG.Server.modules."+this.runningCalls[k].module+' == "undefined")JXG.Server.modules.'+this.runningCalls[k].module+" = {};";n+="JXG.Server.modules."+
this.runningCalls[k].module+"."+a.name+"_cb = "+a.callback+";";n+="JXG.Server.modules."+this.runningCalls[k].module+"."+a.name+" = function ("+a.parameters.join(",")+', __JXGSERVER_CB__, __JXGSERVER_SYNC) {if(typeof __JXGSERVER_CB__ == "undefined") __JXGSERVER_CB__ = JXG.Server.modules.'+this.runningCalls[k].module+"."+a.name+"_cb;var __JXGSERVER_PAR__ = {"+f.join(",")+', "module": "'+this.runningCalls[k].module+'", "handler": "'+a.name+'" };JXG.Server.callServer("exec", __JXGSERVER_CB__, __JXGSERVER_PAR__, __JXGSERVER_SYNC);};';
(new Function(n))()}delete this.runningCalls[k];g(b.data)}},this.cb=m.bind(this.cbp,this),window.XMLHttpRequest?(c=new XMLHttpRequest,c.overrideMimeType("text/plain; charset=iso-8859-1")):c=new ActiveXObject("Microsoft.XMLHTTP"),c&&(c.open("POST",a,!b),c.setRequestHeader("Content-type","application/x-www-form-urlencoded"),b||(c.onreadystatechange=function(a){return function(){return 4===c.readyState&&200===c.status?(a(c.responseText),!0):!1}}(this.cb)),c.send(k),b)?(this.cb(c.responseText),!0):!1},
loadModule_cb:function(e){var g;for(g=0;g<e.length;g++)m.debug(e[g].name+": "+e[g].value)},loadModule:function(e){return m.Server.callServer("load",m.Server.loadModule_cb,{module:e},!0)}},m.Server.load=m.Server.loadModule,m.Server});E("math/symbolic","jxg base/constants base/coords math/math math/geometry server/server utils/type".split(" "),function(m,q,l,e,h,g,d){return e.Symbolic={generateSymbolicCoordinatesPartial:function(b,a,k,c){var f,n,p,e=a.ancestors,g=0,h=function(a){return"underscore"===
c?k+"_{"+a+"}":"brace"===c?k+"["+a+"]":k+a};b.listOfFreePoints=[];b.listOfDependantPoints=[];for(n in e)if(e.hasOwnProperty(n)&&(f=0,d.isPoint(e[n]))){for(p in e[n].ancestors)e[n].ancestors.hasOwnProperty(p)&&f++;0===f?(e[n].symbolic.x=e[n].coords.usrCoords[1],e[n].symbolic.y=e[n].coords.usrCoords[2],b.listOfFreePoints.push(e[n])):(g+=1,e[n].symbolic.x=h(g),g+=1,e[n].symbolic.y=h(g),b.listOfDependantPoints.push(e[n]))}return d.isPoint(a)&&(a.symbolic.x="x",a.symbolic.y="y"),g},clearSymbolicCoordinates:function(b){var a=
function(a){var b,f=a&&a.length||0;for(b=0;f>b;b++)d.isPoint(a[b])&&(a[b].symbolic.x="",a[b].symbolic.y="")};a(b.listOfFreePoints);a(b.listOfDependantPoints);delete b.listOfFreePoints;delete b.listOfDependantPoints},generatePolynomials:function(b,a,k){var c,f,n,p=a.ancestors,e=[],g=[];k&&this.generateSymbolicCoordinatesPartial(b,a,"u","brace");p[a.id]=a;for(c in p)if(p.hasOwnProperty(c)&&(n=0,d.isPoint(p[c]))){for(f in p[c].ancestors)p[c].ancestors.hasOwnProperty(f)&&n++;if(0<n)for(e=p[c].generatePolynomial(),
a=0;a<e.length;a++)g.push(e[a])}return k&&this.clearSymbolicCoordinates(b),g},geometricLocusByGroebnerBase:function(b,a){var k,c,f,n,p,s,m,r,y,x,u=b.options.locus,t={},w=this.generateSymbolicCoordinatesPartial(b,a,"u","brace");r=new l(q.COORDS_BY_USR,[0,0],b);m=new l(q.COORDS_BY_USR,[b.canvasWidth,b.canvasHeight],b);var z=1,B=0,A=0,C=0;if(void 0===g.modules.geoloci&&g.loadModule("geoloci"),void 0===g.modules.geoloci)throw Error("JSXGraph: Unable to load JXG.Server module 'geoloci.py'.");if(p=r.usrCoords[1],
s=m.usrCoords[1],m=m.usrCoords[2],r=r.usrCoords[2],u.translateToOrigin&&0<b.listOfFreePoints.length){f=void 0!==u.toOrigin&&null!==u.toOrigin&&d.isInArray(b.listOfFreePoints,u.toOrigin.id)?u.toOrigin:b.listOfFreePoints[0];B=f.symbolic.x;A=f.symbolic.y;for(n=0;n<b.listOfFreePoints.length;n++)b.listOfFreePoints[n].symbolic.x-=B,b.listOfFreePoints[n].symbolic.y-=A;if(p-=B,s-=B,m-=A,r-=A,u.translateTo10&&1<b.listOfFreePoints.length){f=void 0!==u.to10&&null!==u.to10&&u.to10.id!==u.toOrigin.id&&d.isInArray(b.listOfFreePoints,
u.to10.id)?u.to10:b.listOfFreePoints[0].id===f.id?b.listOfFreePoints[1]:b.listOfFreePoints[0];C=h.rad([1,0],[0,0],[f.symbolic.x,f.symbolic.y]);y=Math.cos(-C);x=Math.sin(-C);for(n=0;n<b.listOfFreePoints.length;n++)k=b.listOfFreePoints[n].symbolic.x,b.listOfFreePoints[n].symbolic.x=y*b.listOfFreePoints[n].symbolic.x-x*b.listOfFreePoints[n].symbolic.y,b.listOfFreePoints[n].symbolic.y=x*k+y*b.listOfFreePoints[n].symbolic.y;if(f.symbolic.y=0,k=p,p=y*p-x*m,m=x*k+y*m,k=s,s=y*s-x*r,r=x*k+y*r,u.stretch&&Math.abs(f.symbolic.x)>
e.eps){z=f.symbolic.x;for(n=0;n<b.listOfFreePoints.length;n++)b.listOfFreePoints[n].symbolic.x/=z,b.listOfFreePoints[n].symbolic.y/=z;for(n=0;n<b.objectsList.length;n++)b.objectsList[n].elementClass===q.OBJECT_CLASS_CIRCLE&&"pointRadius"===b.objectsList[n].method&&(t[n]=b.objectsList[n].radius,b.objectsList[n].radius/=z);p/=z;s/=z;m/=z;r/=z;f.symbolic.x=1}}for(n=0;n<b.listOfFreePoints.length;n++)k=b.listOfFreePoints[n].symbolic.x,Math.abs(k)<e.eps&&(b.listOfFreePoints[n].symbolic.x=0),Math.abs(k-
Math.round(k))<e.eps&&(b.listOfFreePoints[n].symbolic.x=Math.round(k)),k=b.listOfFreePoints[n].symbolic.y,Math.abs(k)<e.eps&&(b.listOfFreePoints[n].symbolic.y=0),Math.abs(k-Math.round(k))<e.eps&&(b.listOfFreePoints[n].symbolic.y=Math.round(k))}k=this.generatePolynomials(b,a).join(",");this.cbp=function(a){c=a};this.cb=d.bind(this.cbp,this);g.modules.geoloci.lociCoCoA(p,s,m,r,w,k,z,C,B,A,this.cb,!0);this.clearSymbolicCoordinates(b);for(n in t)t.hasOwnProperty(n)&&(b.objects[n].radius=t[n]);return c}},
e.Symbolic});E("math/poly",["jxg","math/math","utils/type"],function(m,q,l){return q.Poly={},q.Poly.Ring=function(e){this.vars=e},m.extend(q.Poly.Ring.prototype,{}),q.Poly.Monomial=function(e,h,g){var d;if(!l.exists(e))throw Error("JSXGraph error: In JXG.Math.Poly.monomial missing parameter 'ring'.");l.isArray(g)||(g=[]);g=g.slice(0,e.vars.length);for(d=g.length;d<e.vars.length;d++)g.push(0);this.ring=e;this.coefficient=h||0;this.exponents=l.deepCopy(g)},m.extend(q.Poly.Monomial.prototype,{copy:function(){return new q.Poly.Monomial(this.ring,
this.coefficient,this.exponents)},print:function(){var e,h=[];for(e=0;e<this.ring.vars.length;e++)h.push(this.ring.vars[e]+"^"+this.exponents[e]);return this.coefficient+"*"+h.join("*")}}),q.Poly.Polynomial=function(e,h){var g;if(!l.exists(e))throw Error("JSXGraph error: In JXG.Math.Poly.polynomial missing parameter 'ring'.");g=l.exists(h)&&"string"==typeof h?void 0:[];this.ring=e;this.monomials=g},m.extend(q.Poly.Polynomial.prototype,{findSignature:function(e){var h;for(h=0;h<this.monomials.length;h++)if(l.cmpArrays(this.monomials[h].exponents,
e))return h;return-1},addSubMonomial:function(e,h){var g;g=this.findSignature(e.exponents);-1<g?this.monomials[g].coefficient+=h*e.coefficient:(e.coefficient*=h,this.monomials.push(e))},add:function(e){var h;if(!l.exists(e)||e.ring!==this.ring)throw Error("JSXGraph error: In JXG.Math.Poly.polynomial.add either summand is undefined or rings don't match.");if(l.isArray(e.exponents))this.addSubMonomial(e,1);else for(h=0;h<e.monomials.length;h++)this.addSubMonomial(e.monomials[h],1)},sub:function(e){var h;
if(!l.exists(e)||e.ring!==this.ring)throw Error("JSXGraph error: In JXG.Math.Poly.polynomial.sub either summand is undefined or rings don't match.");if(l.isArray(e.exponents))this.addSubMonomial(e,-1);else for(h=0;h<e.monomials.length;h++)this.addSubMonomial(e.monomials[h],-1)},copy:function(){var e,h;h=new q.Poly.Polynomial(this.ring);for(e=0;e<this.monomials.length;e++)h.monomials.push(this.monomials[e].copy());return h},print:function(){var e,h=[];for(e=0;e<this.monomials.length;e++)h.push("("+
this.monomials[e].print()+")");return h.join("+")}}),q.Poly});E("math/complex",["jxg","math/math"],function(m){return m.Complex=function(m,l){this.isComplex=!0;m&&m.isComplex&&(l=m.imaginary,m=m.real);this.real=m||0;this.imaginary=l||0;this.angle=this.absval=0},m.extend(m.Complex.prototype,{toString:function(){return this.real+" + "+this.imaginary+"i"},add:function(m){return"number"==typeof m?this.real+=m:(this.real+=m.real,this.imaginary+=m.imaginary),this},sub:function(m){return"number"==typeof m?
this.real-=m:(this.real-=m.real,this.imaginary-=m.imaginary),this},mult:function(m){var l,e;return"number"==typeof m?(this.real*=m,this.imaginary*=m):(l=this.real,e=this.imaginary,this.real=l*m.real-e*m.imaginary,this.imaginary=l*m.imaginary+e*m.real),this},div:function(m){var l,e,h;if("number"==typeof m){if(Math.abs(m)<Math.eps)return this.real=1/0,this.imaginary=1/0,this;this.real/=m;this.imaginary/=m}else{if(Math.abs(m.real)<Math.eps&&Math.abs(m.imaginary)<Math.eps)return this.real=1/0,this.imaginary=
1/0,this;l=m.real*m.real+m.imaginary*m.imaginary;h=this.real;e=this.imaginary;this.real=(h*m.real+e*m.imaginary)/l;this.imaginary=(e*m.real-h*m.imaginary)/l}return this},conj:function(){return this.imaginary*=-1,this}}),m.C={},m.C.add=function(q,l){var e=new m.Complex(q);return e.add(l),e},m.C.sub=function(q,l){var e=new m.Complex(q);return e.sub(l),e},m.C.mult=function(q,l){var e=new m.Complex(q);return e.mult(l),e},m.C.div=function(q,l){var e=new m.Complex(q);return e.div(l),e},m.C.conj=function(q){q=
new m.Complex(q);return q.conj(),q},m.C.abs=function(q){var l=new m.Complex(q);return l.conj(),l.mult(q),Math.sqrt(l.real)},m.Complex.C=m.C,m.Complex});E("renderer/abstract","jxg options base/coords base/constants math/math math/geometry utils/type utils/env".split(" "),function(m,q,l,e,h,g,d,b){return m.AbstractRenderer=function(){this.vOffsetText=0;this.enhancedRendering=!0;this.container=null;this.type=""},m.extend(m.AbstractRenderer.prototype,{_updateVisual:function(a,b,c){(c||this.enhancedRendering)&&
(b=b||{},a.visProp.draft?this.setDraft(a):(b.stroke||(this.setObjectStrokeColor(a,a.visProp.strokecolor,a.visProp.strokeopacity),this.setObjectStrokeWidth(a,a.visProp.strokewidth)),b.fill||this.setObjectFillColor(a,a.visProp.fillcolor,a.visProp.fillopacity),b.dash||this.setDashStyle(a,a.visProp),b.shadow||this.setShadow(a),b.gradient||this.setShadow(a)))},drawPoint:function(a){var b;b=q.normalizePointFace(a.visProp.face);b="o"===b?"ellipse":"[]"===b?"rect":"path";a.rendNode=this.appendChildPrim(this.createPrim(b,
a.id),a.visProp.layer);this.appendNodesToElement(a,b);this._updateVisual(a,{dash:!0,shadow:!0},!0);this.updatePoint(a)},updatePoint:function(a){var b=a.visProp.size,c=q.normalizePointFace(a.visProp.face);isNaN(a.coords.scrCoords[2]+a.coords.scrCoords[1])||(this._updateVisual(a,{dash:!1,shadow:!1}),b*=a.board&&a.board.options.point.zoom?Math.sqrt(a.board.zoomX*a.board.zoomY):1,"o"===c?this.updateEllipsePrim(a.rendNode,a.coords.scrCoords[1],a.coords.scrCoords[2],b+1,b+1):"[]"===c?this.updateRectPrim(a.rendNode,
a.coords.scrCoords[1]-b,a.coords.scrCoords[2]-b,2*b,2*b):this.updatePathPrim(a.rendNode,this.updatePathStringPoint(a,b,c),a.board),this.setShadow(a))},changePointStyle:function(a){var b=this.getElementById(a.id);d.exists(b)&&this.remove(b);this.drawPoint(a);d.clearVisPropOld(a);a.visProp.visible||this.hide(a);a.visProp.draft&&this.setDraft(a)},drawLine:function(a){a.rendNode=this.appendChildPrim(this.createPrim("line",a.id),a.visProp.layer);this.appendNodesToElement(a,"lines");this.updateLine(a)},
updateLine:function(a){var b,c,f,n,p,d,h=new l(e.COORDS_BY_USER,a.point1.coords.usrCoords,a.board),r=new l(e.COORDS_BY_USER,a.point2.coords.usrCoords,a.board);b=null;(a.visProp.firstarrow||a.visProp.lastarrow)&&(b=-4);g.calcStraight(a,h,r,b);f=n=p=d=0;b=Math.max(3*parseInt(a.visProp.strokewidth,10),10);c=h.distance(e.COORDS_BY_SCREEN,r);a.visProp.lastarrow&&"vml"!==a.board.renderer.type&&10<=c&&(p=(r.scrCoords[1]-h.scrCoords[1])*b/c,d=(r.scrCoords[2]-h.scrCoords[2])*b/c);a.visProp.firstarrow&&"vml"!==
a.board.renderer.type&&10<=c&&(f=(r.scrCoords[1]-h.scrCoords[1])*b/c,n=(r.scrCoords[2]-h.scrCoords[2])*b/c);this.updateLinePrim(a.rendNode,h.scrCoords[1]+f,h.scrCoords[2]+n,r.scrCoords[1]-p,r.scrCoords[2]-d,a.board);this.makeArrows(a);this._updateVisual(a)},drawTicks:function(a){a.rendNode=this.appendChildPrim(this.createPrim("path",a.id),a.visProp.layer);this.appendNodesToElement(a,"path")},updateTicks:function(){},drawCurve:function(a){a.rendNode=this.appendChildPrim(this.createPrim("path",a.id),
a.visProp.layer);this.appendNodesToElement(a,"path");this._updateVisual(a,{shadow:!0},!0);this.updateCurve(a)},updateCurve:function(a){this._updateVisual(a);a.visProp.handdrawing?this.updatePathPrim(a.rendNode,this.updatePathStringBezierPrim(a),a.board):this.updatePathPrim(a.rendNode,this.updatePathStringPrim(a),a.board);1<a.numberPoints&&this.makeArrows(a)},drawEllipse:function(a){a.rendNode=this.appendChildPrim(this.createPrim("ellipse",a.id),a.visProp.layer);this.appendNodesToElement(a,"ellipse");
this.updateEllipse(a)},updateEllipse:function(a){this._updateVisual(a);var b=a.Radius();0<b&&Math.abs(a.center.coords.usrCoords[0])>h.eps&&!isNaN(b+a.center.coords.scrCoords[1]+a.center.coords.scrCoords[2])&&2E6>b*a.board.unitX&&this.updateEllipsePrim(a.rendNode,a.center.coords.scrCoords[1],a.center.coords.scrCoords[2],b*a.board.unitX,b*a.board.unitY)},drawPolygon:function(a){a.rendNode=this.appendChildPrim(this.createPrim("polygon",a.id),a.visProp.layer);this.appendNodesToElement(a,"polygon");this.updatePolygon(a)},
updatePolygon:function(a){this._updateVisual(a,{stroke:!0,dash:!0});this.updatePolygonPrim(a.rendNode,a)},displayCopyright:function(){},drawInternalText:function(){},updateInternalText:function(){},drawText:function(a){var k,c;"html"===a.visProp.display&&b.isBrowser?(k=this.container.ownerDocument.createElement("div"),k.style.position="absolute",k.className=a.visProp.cssclass,c=""===this.container.style.zIndex?0:parseInt(this.container.style.zIndex,10),k.style.zIndex=c+a.board.options.layer.text,
this.container.appendChild(k),k.setAttribute("id",this.container.id+"_"+a.id)):k=this.drawInternalText(a);a.rendNode=k;a.htmlStr="";this.updateText(a)},updateText:function(a){var b,c,f=a.plaintext;a.visProp.visible&&(this.updateTextStyle(a,!1),"html"===a.visProp.display?(isNaN(a.coords.scrCoords[1]+a.coords.scrCoords[2])||(c=a.coords.scrCoords[1],c=1E6>Math.abs(c)?c:1E6,b="right"===a.visProp.anchorx?Math.floor(a.board.canvasWidth-c):"middle"===a.visProp.anchorx?Math.floor(c-.5*a.size[0]):Math.floor(c),
a.visPropOld.left!==a.visProp.anchorx+b&&("right"===a.visProp.anchorx?(a.rendNode.style.right=b+"px",a.rendNode.style.left="auto"):(a.rendNode.style.left=b+"px",a.rendNode.style.right="auto"),a.visPropOld.left=a.visProp.anchorx+b),c=a.coords.scrCoords[2]+this.vOffsetText,c=1E6>Math.abs(c)?c:1E6,b="bottom"===a.visProp.anchory?Math.floor(a.board.canvasHeight-c):"middle"===a.visProp.anchory?Math.floor(c-.5*a.size[1]):Math.floor(c),a.visPropOld.top!==a.visProp.anchory+b&&("bottom"===a.visProp.anchory?
(a.rendNode.style.top="auto",a.rendNode.style.bottom=b+"px"):(a.rendNode.style.bottom="auto",a.rendNode.style.top=b+"px"),a.visPropOld.top=a.visProp.anchory+b)),a.htmlStr!==f&&(a.rendNode.innerHTML=f,a.htmlStr=f,a.visProp.usemathjax?MathJax.Hub.Queue(["Typeset",MathJax.Hub,a.rendNode]):a.visProp.useasciimathml&&AMprocessNode(a.rendNode,!1)),this.transformImage(a,a.transformations)):this.updateInternalText(a))},updateTextStyle:function(a,k){var c,f,n,p,e=a.visProp,g=b.isBrowser?e.display:"internal";
if(k?(n=e.highlightstrokecolor,f=e.highlightstrokeopacity,p=e.highlightcssclass):(n=e.strokecolor,f=e.strokeopacity,p=e.cssclass),("html"===g||"canvas"!==this.type&&"no"!==this.type)&&(c=d.evaluate(a.visProp.fontsize),a.visPropOld.fontsize!==c)){a.needsSizeUpdate=!0;try{a.rendNode.style.fontSize=c+"px"}catch(h){a.rendNode.style.fontSize=c}a.visPropOld.fontsize=c}return"html"===g?(a.visPropOld.cssclass!==p&&(a.rendNode.className=p,a.visPropOld.cssclass=p,a.needsSizeUpdate=!0),this.setObjectStrokeColor(a,
n,f)):this.updateInternalTextStyle(a,n,f),this},updateInternalTextStyle:function(a,b,c){this.setObjectStrokeColor(a,b,c)},drawImage:function(){},updateImage:function(a){this.updateRectPrim(a.rendNode,a.coords.scrCoords[1],a.coords.scrCoords[2]-a.size[1],a.size[0],a.size[1]);this.updateImageURL(a);this.transformImage(a,a.transformations);this._updateVisual(a,{stroke:!0,dash:!0},!0)},joinTransforms:function(a,b){var c,f=[[1,0,0],[0,1,0],[0,0,1]];c=a.board.origin.scrCoords[1];var n=a.board.origin.scrCoords[2],
p=a.board.unitX,d=a.board.unitY,e=[[1,0,0],[-c,1,0],[-n,0,1]],g=[[1,0,0],[0,1/p,0],[0,0,-1/d]],p=[[1,0,0],[0,p,0],[0,0,-d]],n=[[1,0,0],[c,1,0],[n,0,1]],d=b.length;for(c=0;d>c;c++)f=h.matMatMult(e,f),f=h.matMatMult(g,f),f=h.matMatMult(b[c].matrix,f),f=h.matMatMult(p,f),f=h.matMatMult(n,f);return f},transformImage:function(){},updateImageURL:function(){},updateImageStyle:function(a,b){a.rendNode.className=b?a.visProp.highlightcssclass:a.visProp.cssclass},appendChildPrim:function(){},appendNodesToElement:function(){},
createPrim:function(){return null},remove:function(){},makeArrows:function(){},updateEllipsePrim:function(){},updateLinePrim:function(){},updatePathPrim:function(){},updatePathStringPoint:function(){},updatePathStringPrim:function(){},updatePathStringBezierPrim:function(){},updatePolygonPrim:function(){},updateRectPrim:function(){},setPropertyPrim:function(){},show:function(){},hide:function(){},setBuffering:function(){},setDashStyle:function(){},setDraft:function(a){if(a.visProp.draft){var b=a.board.options.elements.draft.color,
c=a.board.options.elements.draft.opacity;a.type===e.OBJECT_TYPE_POLYGON?this.setObjectFillColor(a,b,c):(a.elementClass===e.OBJECT_CLASS_POINT?this.setObjectFillColor(a,b,c):this.setObjectFillColor(a,"none",0),this.setObjectStrokeColor(a,b,c),this.setObjectStrokeWidth(a,a.board.options.elements.draft.strokeWidth))}},removeDraft:function(a){a.type===e.OBJECT_TYPE_POLYGON?this.setObjectFillColor(a,a.visProp.fillcolor,a.visProp.fillopacity):(a.type===e.OBJECT_CLASS_POINT&&this.setObjectFillColor(a,a.visProp.fillcolor,
a.visProp.fillopacity),this.setObjectStrokeColor(a,a.visProp.strokecolor,a.visProp.strokeopacity),this.setObjectStrokeWidth(a,a.visProp.strokewidth))},setGradient:function(){},updateGradient:function(){},setObjectFillColor:function(){},setObjectStrokeColor:function(){},setObjectStrokeWidth:function(){},setShadow:function(){},highlight:function(a){var b,c=a.visProp;if(!c.draft){if(a.type===e.OBJECT_TYPE_POLYGON)for(this.setObjectFillColor(a,c.highlightfillcolor,c.highlightfillopacity),b=0;b<a.borders.length;b++)this.setObjectStrokeColor(a.borders[b],
a.borders[b].visProp.highlightstrokecolor,a.borders[b].visProp.highlightstrokeopacity);else a.type===e.OBJECT_TYPE_TEXT?this.updateTextStyle(a,!0):a.type===e.OBJECT_TYPE_IMAGE?this.updateImageStyle(a,!0):(this.setObjectStrokeColor(a,c.highlightstrokecolor,c.highlightstrokeopacity),this.setObjectFillColor(a,c.highlightfillcolor,c.highlightfillopacity));c.highlightstrokewidth&&this.setObjectStrokeWidth(a,Math.max(c.highlightstrokewidth,c.strokewidth))}return this},noHighlight:function(a){var b,c=a.visProp;
if(!a.visProp.draft){if(a.type===e.OBJECT_TYPE_POLYGON)for(this.setObjectFillColor(a,c.fillcolor,c.fillopacity),b=0;b<a.borders.length;b++)this.setObjectStrokeColor(a.borders[b],a.borders[b].visProp.strokecolor,a.borders[b].visProp.strokeopacity);else a.type===e.OBJECT_TYPE_TEXT?this.updateTextStyle(a,!1):a.type===e.OBJECT_TYPE_IMAGE?this.updateImageStyle(a,!1):(this.setObjectStrokeColor(a,c.strokecolor,c.strokeopacity),this.setObjectFillColor(a,c.fillcolor,c.fillopacity));this.setObjectStrokeWidth(a,
c.strokewidth)}return this},suspendRedraw:function(){},unsuspendRedraw:function(){},drawZoomBar:function(a){var d,c,f=function(a){a||(a=window.event);a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},n=function(n,e){var g;g=d.createElement("span");c.appendChild(g);g.appendChild(a.containerObj.ownerDocument.createTextNode(n));b.addEvent(g,"mouseover",function(){this.style.backgroundColor=a.options.navbar.highlightFillColor},g);b.addEvent(g,"mouseover",function(){this.style.backgroundColor=a.options.navbar.highlightFillColor},
g);b.addEvent(g,"mouseout",function(){this.style.backgroundColor=a.options.navbar.fillColor},g);b.addEvent(g,"click",e,a);b.addEvent(g,"mouseup",f,a);b.addEvent(g,"mousedown",f,a);b.addEvent(g,"touchend",f,a);b.addEvent(g,"touchstart",f,a)};b.isBrowser&&(d=a.containerObj.ownerDocument,c=d.createElement("div"),c.setAttribute("id",a.containerObj.id+"_navigationbar"),c.style.color=a.options.navbar.strokeColor,c.style.backgroundColor=a.options.navbar.fillColor,c.style.padding=a.options.navbar.padding,
c.style.position=a.options.navbar.position,c.style.fontSize=a.options.navbar.fontSize,c.style.cursor=a.options.navbar.cursor,c.style.zIndex=a.options.navbar.zIndex,a.containerObj.appendChild(c),c.style.right=a.options.navbar.right,c.style.bottom=a.options.navbar.bottom,a.attr.showreload&&n("\u00a0\u21bb\u00a0",function(){a.reload()}),a.attr.showcleartraces&&n("\u00a0\u2297\u00a0",function(){a.clearTraces()}),a.attr.shownavigation&&(n("\u00a0\u2013\u00a0",a.zoomOut),n("\u00a0o\u00a0",a.zoom100),n("\u00a0+\u00a0",
a.zoomIn),n("\u00a0\u2190\u00a0",a.clickLeftArrow),n("\u00a0\u2193\u00a0",a.clickUpArrow),n("\u00a0\u2191\u00a0",a.clickDownArrow),n("\u00a0\u2192\u00a0",a.clickRightArrow)))},getElementById:function(a){return this.container.ownerDocument.getElementById(this.container.id+"_"+a)},removeToInsertLater:function(a){var b=a.parentNode,c=a.nextSibling;return b.removeChild(a),function(){c?b.insertBefore(a,c):b.appendChild(a)}},resize:function(){},createTouchpoints:function(){},showTouchpoint:function(){},
hideTouchpoint:function(){},updateTouchpoint:function(){}}),m.AbstractRenderer});E("renderer/no",["jxg","renderer/abstract"],function(m,q){return m.NoRenderer=function(){this.enhancedRendering=!1;this.type="no"},m.extend(m.NoRenderer.prototype,{drawPoint:function(){},updatePoint:function(){},changePointStyle:function(){},drawLine:function(){},updateLine:function(){},drawTicks:function(){},updateTicks:function(){},drawCurve:function(){},updateCurve:function(){},drawEllipse:function(){},updateEllipse:function(){},
drawPolygon:function(){},updatePolygon:function(){},displayCopyright:function(){},drawInternalText:function(){},updateInternalText:function(){},drawText:function(){},updateText:function(){},updateTextStyle:function(){},updateInternalTextStyle:function(){},drawImage:function(){},updateImage:function(){},transformImage:function(){},updateImageURL:function(){},appendChildPrim:function(){},appendNodesToElement:function(){},createPrim:function(){return null},remove:function(){},makeArrows:function(){},
updateEllipsePrim:function(){},updateLinePrim:function(){},updatePathPrim:function(){},updatePathStringPoint:function(){},updatePathStringPrim:function(){},updatePathStringBezierPrim:function(){},updatePolygonPrim:function(){},updateRectPrim:function(){},setPropertyPrim:function(){},show:function(){},hide:function(){},setBuffering:function(){},setDashStyle:function(){},setDraft:function(){},removeDraft:function(){},setGradient:function(){},updateGradient:function(){},setObjectFillColor:function(){},
setObjectStrokeColor:function(){},setObjectStrokeWidth:function(){},setShadow:function(){},highlight:function(){},noHighlight:function(){},suspendRedraw:function(){},unsuspendRedraw:function(){},drawZoomBar:function(){},getElementById:function(){return null},resize:function(){},removeToInsertLater:function(){return function(){}}}),m.NoRenderer.prototype=new q,m.NoRenderer});E("reader/file",["jxg","utils/env","utils/type","utils/encoding","utils/base64"],function(m,q,l,e,h){return m.FileReader={parseFileContent:function(g,
d,b,a,k){var c=!1;l.exists(a)||(a=!0);try{c=new XMLHttpRequest,"raw"===b.toLowerCase()?c.overrideMimeType("text/plain; charset=iso-8859-1"):c.overrideMimeType("text/xml; charset=iso-8859-1")}catch(f){try{c=new ActiveXObject("Msxml2.XMLHTTP")}catch(n){try{c=new ActiveXObject("Microsoft.XMLHTTP")}catch(p){c=!1}}}if(!c)return m.debug("AJAX not activated!"),void 0;c.open("GET",g,a);this.cbp="raw"===b.toLowerCase()?function(){var a=c;4===a.readyState&&d(a.responseText)}:function(){var a=c,f="";4===a.readyState&&
(f=!l.exists(a.responseStream)||"PK"!==a.responseText.slice(0,2)&&31!==e.asciiCharCodeAt(a.responseText.slice(0,1),0)?a.responseText:h.decode(jxgBinFileReader(a)),this.parseString(f,d,b,k))};this.cb=l.bind(this.cbp,this);c.onreadystatechange=this.cb;try{c.send(null)}catch(s){throw Error("JSXGraph: A problem occurred while trying to read '"+g+"'.");}},parseString:function(e,d,b,a){var k;if(b=b.toLowerCase(),k=m.readers[b],!l.exists(k))throw Error("JSXGraph: There is no reader available for '"+b+"'.");
(new k(d,e)).read();"function"==typeof a&&a(d)}},!q.isMetroApp()&&q.isBrowser&&"object"==typeof navigator&&/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent)&&document&&document.write&&document.write('<script type="text/vbscript">\nFunction Base64Encode(inData)\n  Const Base64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"\n  Dim cOut, sOut, I\n  For I = 1 To LenB(inData) Step 3\n    Dim nGroup, pOut, sGroup\n    nGroup = &H10000 * AscB(MidB(inData, I, 1)) + _\n      &H100 * MyASC(MidB(inData, I + 1, 1)) + MyASC(MidB(inData, I + 2, 1))\n    nGroup = Oct(nGroup)\n    nGroup = String(8 - Len(nGroup), "0") & nGroup\n    pOut = Mid(Base64, CLng("&o" & Mid(nGroup, 1, 2)) + 1, 1) + _\n      Mid(Base64, CLng("&o" & Mid(nGroup, 3, 2)) + 1, 1) + _\n      Mid(Base64, CLng("&o" & Mid(nGroup, 5, 2)) + 1, 1) + _\n      Mid(Base64, CLng("&o" & Mid(nGroup, 7, 2)) + 1, 1)\n    sOut = sOut + pOut\n  Next\n  Select Case LenB(inData) Mod 3\n    Case 1: \'8 bit final\n      sOut = Left(sOut, Len(sOut) - 2) + "=="\n    Case 2: \'16 bit final\n      sOut = Left(sOut, Len(sOut) - 1) + "="\n  End Select\n  Base64Encode = sOut\nEnd Function\n\nFunction MyASC(OneChar)\n  If OneChar = "" Then MyASC = 0 Else MyASC = AscB(OneChar)\nEnd Function\n\nFunction jxgBinFileReader(xhr)\n    Dim byteString\n    Dim b64String\n    Dim i\n    byteString = xhr.responseBody\n    ReDim byteArray(LenB(byteString))\n    For i = 1 To LenB(byteString)\n        byteArray(i-1) = AscB(MidB(byteString, i, 1))\n    Next\n    b64String = Base64Encode(byteString)\n    jxgBinFileReader = b64String\nEnd Function\n\x3c/script>\n'),
m.FileReader});E("base/text","jxg base/constants base/coords base/element parser/geonext math/statistics utils/env utils/type".split(" "),function(m,q,l,e,h,g,d,b){return m.Text=function(a,d,c,f){return this.constructor(a,f,q.OBJECT_TYPE_TEXT,q.OBJECT_CLASS_OTHER),this.content="",this.plaintext="",this.plaintextOld=null,this.isDraggable=!1,this.needsSizeUpdate=!1,this.element=this.board.select(f.anchor),this.hiddenByParent=!1,this.element?(this.relativeCoords=this.visProp.islabel?new l(q.COORDS_BY_SCREEN,
[parseFloat(c[0]),parseFloat(c[1])],this.board):new l(q.COORDS_BY_USER,[parseFloat(c[0]),parseFloat(c[1])],this.board),this.element.addChild(this),this.X=function(){var a,f,b;return this.visProp.islabel?(a=parseFloat(this.visProp.offset[0]),b=this.element.getLabelAnchor(),f=new l(q.COORDS_BY_SCREEN,[a+this.relativeCoords.scrCoords[1]+b.scrCoords[1],0],this.board),f.usrCoords[1]):(b=this.element.getTextAnchor(),this.relativeCoords.usrCoords[1]+b.usrCoords[1])},this.Y=function(){var a,f,b;return this.visProp.islabel?
(a=-parseFloat(this.visProp.offset[1]),b=this.element.getLabelAnchor(),f=new l(q.COORDS_BY_SCREEN,[0,a+this.relativeCoords.scrCoords[2]+b.scrCoords[2]],this.board),f.usrCoords[2]):(b=this.element.getTextAnchor(),this.relativeCoords.usrCoords[2]+b.usrCoords[2])},this.coords=new l(q.COORDS_BY_SCREEN,[0,0],this.board),this.isDraggable=!0):(b.isNumber(c[0])&&b.isNumber(c[1])&&(this.isDraggable=!0),this.X=b.createFunction(c[0],this.board,null,!0),this.Y=b.createFunction(c[1],this.board,null,!0),this.coords=
new l(q.COORDS_BY_USER,[this.X(),this.Y()],this.board)),this.Z=b.createFunction(1,this.board,""),this.size=[1,1],this.id=this.board.setId(this,"T"),this._setUpdateText(d),this.updateText(),this.board.renderer.drawText(this),this.visProp.visible||this.board.renderer.hide(this),"string"==typeof this.content&&this.notifyParents(this.content),this.elType="text",this.methodMap=b.deepCopy(this.methodMap,{setText:"setTextJessieCode",free:"free",move:"setCoords"}),this},m.Text.prototype=new e,m.extend(m.Text.prototype,
{hasPoint:function(a,b){var c,f,n,d,e=this.board.options.precision.hasPoint;return c="right"===this.visProp.anchorx?this.coords.scrCoords[1]-this.size[0]:"middle"===this.visProp.anchorx?this.coords.scrCoords[1]-.5*this.size[0]:this.coords.scrCoords[1],f=c+this.size[0],d="top"===this.visProp.anchory?this.coords.scrCoords[2]+this.size[1]:"middle"===this.visProp.anchory?this.coords.scrCoords[2]+.5*this.size[1]:this.coords.scrCoords[2],n=d-this.size[1],"all"===this.visProp.dragarea?a>=c-e&&f+e>a&&b>=
n-e&&d+e>=b:b>=n-e&&d+e>=b&&(a>=c-e&&c+2*e>=a||a>=f-2*e&&f+e>=a)},_setUpdateText:function(a){var d;"function"==typeof a?this.updateText=function(){this.plaintext=this.convertGeonext2CSS(a())}:b.isString(a)&&!this.visProp.parse?this.updateText=function(){this.plaintext=a}:(this.content=b.isNumber(a)?a.toFixed(this.visProp.digits):this.visProp.useasciimathml?"'`"+a+"`'":this.generateTerm(a),d=this.board.jc.snippet(this.content,!0,"",!1),this.updateText=function(){this.plaintext=d()})},_setText:function(a){return this._setUpdateText(a),
this.updateText(),this.prepareUpdate().update().updateRenderer(),this.board.infobox&&this.id===this.board.infobox.id||this.updateSize(),this},setTextJessieCode:function(a){var d;return this.visProp.castext=a,d="function"==typeof a?function(){return b.sanitizeHTML(a())}:b.isNumber(a)?a:b.sanitizeHTML(a),this._setText(d)},setText:function(a){return this._setText(a)},updateSize:function(){var a,b,c;if(!d.isBrowser||"no"===this.board.renderer.type)return this;if("html"===this.visProp.display||"vml"===
this.board.renderer.type)m.exists(this.rendNode.offsetWidth)?(b=[this.rendNode.offsetWidth,this.rendNode.offsetHeight],0===b[0]&&0===b[1]?(c=this,window.setTimeout(function(){c.size=[c.rendNode.offsetWidth,c.rendNode.offsetHeight]},0)):this.size=b):this.size=this.crudeSizeEstimate();else if("internal"===this.visProp.display)if("svg"===this.board.renderer.type)try{a=this.rendNode.getBBox(),this.size=[a.width,a.height]}catch(f){}else"canvas"===this.board.renderer.type&&(this.size=this.crudeSizeEstimate());
return this},crudeSizeEstimate:function(){return[.45*parseFloat(this.visProp.fontsize)*this.plaintext.length,.9*parseFloat(this.visProp.fontsize)]},utf8_decode:function(a){return a.replace(/&#x(\w+);/g,function(a,b){return String.fromCharCode(parseInt(b,16))})},replaceSub:function(a){if(!a.indexOf)return a;var b;for(b=a.indexOf("_{");0<=b;)a=a.substr(0,b)+a.substr(b).replace(/_\{/,"<sub>"),b=a.substr(b).indexOf("}"),0<=b&&(a=a.substr(0,b)+a.substr(b).replace(/\}/,"</sub>")),b=a.indexOf("_{");for(b=
a.indexOf("_");0<=b;)a=a.substr(0,b)+a.substr(b).replace(/_(.?)/,"<sub>$1</sub>"),b=a.indexOf("_");return a},replaceSup:function(a){if(!a.indexOf)return a;var b;for(b=a.indexOf("^{");0<=b;)a=a.substr(0,b)+a.substr(b).replace(/\^\{/,"<sup>"),b=a.substr(b).indexOf("}"),0<=b&&(a=a.substr(0,b)+a.substr(b).replace(/\}/,"</sup>")),b=a.indexOf("^{");for(b=a.indexOf("^");0<=b;)a=a.substr(0,b)+a.substr(b).replace(/\^(.?)/,"<sup>$1</sup>"),b=a.indexOf("^");return a},getSize:function(){return this.size},setCoords:function(a,
d){return b.isArray(a)&&1<a.length&&(d=a[1],a=a[0]),this.X=function(){return a},this.Y=function(){return d},this.coords.setCoordinates(q.COORDS_BY_USER,[a,d]),this.prepareUpdate().update().updateRenderer(),this},free:function(){this.X=b.createFunction(this.X(),this.board,"");this.Y=b.createFunction(this.Y(),this.board,"");this.isDraggable=!0},update:function(){return this.needsUpdate&&(this.visProp.frozen||this.updateCoords(),this.updateText(),"internal"===this.visProp.display&&(this.plaintext=this.utf8_decode(this.plaintext)),
this.checkForSizeUpdate(),this.needsSizeUpdate&&this.updateSize(),this.updateTransform()),this},checkForSizeUpdate:function(){this.board.infobox&&this.id===this.board.infobox.id?this.needsSizeUpdate=!1:(this.needsSizeUpdate=this.plaintextOld!==this.plaintext,this.needsSizeUpdate&&(this.plaintextOld=this.plaintext))},updateCoords:function(){this.coords.setCoordinates(q.COORDS_BY_USER,[this.X(),this.Y()])},updateRenderer:function(){return this.needsUpdate&&(this.board.renderer.updateText(this),this.needsUpdate=
!1),this},updateTransform:function(){var a;if(0===this.transformations.length)return this;for(a=0;a<this.transformations.length;a++)this.transformations[a].update();return this},generateTerm:function(a){var d,c,f='""';if(a=a||"",a=a.replace(/\r/g,""),a=a.replace(/\n/g,""),a=a.replace(/"/g,"'"),a=a.replace(/'/g,"\\'"),a=a.replace(/&amp;arc;/g,"&ang;"),a=a.replace(/<arc\s*\/>/g,"&ang;"),a=a.replace(/&lt;arc\s*\/&gt;/g,"&ang;"),a=a.replace(/&lt;sqrt\s*\/&gt;/g,"&radic;"),a=a.replace(/&lt;value&gt;/g,
"<value>"),a=a.replace(/&lt;\/value&gt;/g,"</value>"),d=a.indexOf("<value>"),c=a.indexOf("</value>"),0<=d)for(;0<=d;)f+=' + "'+this.replaceSub(this.replaceSup(a.slice(0,d)))+'"',d=a.slice(d+7,c),d=h.geonext2JS(d,this.board),d=d.replace(/\\"/g,"'"),d=d.replace(/\\'/g,"'"),f+=0>d.indexOf("toFixed")?b.isNumber(b.bind(this.board.jc.snippet(d,!0,"",!1),this)())?"+("+d+").toFixed("+this.visProp.digits+")":"+("+d+")":"+("+d+")",a=a.slice(c+8),d=a.indexOf("<value>"),c=a.indexOf("</value>");return f+=' + "'+
this.replaceSub(this.replaceSup(a))+'"',f=this.convertGeonext2CSS(f),f=f.replace(/&amp;/g,"&"),f.replace(/"/g,"'")},convertGeonext2CSS:function(a){return"string"==typeof a&&(a=a.replace(/<overline>/g,"<span style=text-decoration:overline>"),a=a.replace(/&lt;overline&gt;/g,"<span style=text-decoration:overline>"),a=a.replace(/<\/overline>/g,"</span>"),a=a.replace(/&lt;\/overline&gt;/g,"</span>"),a=a.replace(/<arrow>/g,"<span style=text-decoration:overline>"),a=a.replace(/&lt;arrow&gt;/g,"<span style=text-decoration:overline>"),
a=a.replace(/<\/arrow>/g,"</span>"),a=a.replace(/&lt;\/arrow&gt;/g,"</span>")),a},notifyParents:function(a){var b,d=null;a=a.replace(/&lt;value&gt;/g,"<value>");a=a.replace(/&lt;\/value&gt;/g,"</value>");do b=/<value>([\w\s\*\/\^\-\+\(\)\[\],<>=!]+)<\/value>/,d=b.exec(a),null!==d&&(h.findDependencies(this,d[1],this.board),a=a.substr(d.index),a=a.replace(b,""));while(null!==d);return this},bounds:function(){var a=this.coords.usrCoords;return this.visProp.islabel?[0,0,0,0]:[a[1],a[2]+this.size[1],a[1]+
this.size[0],a[2]]},setPositionDirectly:function(a,d,c){var f,n;d=new l(a,d,this.board);a=new l(a,c,this.board);return this.relativeCoords?this.visProp.islabel?(f=g.subtract(d.scrCoords,a.scrCoords),this.relativeCoords.scrCoords[1]+=f[1],this.relativeCoords.scrCoords[2]+=f[2]):(f=g.subtract(d.usrCoords,a.usrCoords),this.relativeCoords.usrCoords[1]+=f[1],this.relativeCoords.usrCoords[2]+=f[2]):(f=g.subtract(d.usrCoords,a.usrCoords),n=[this.Z(),this.X(),this.Y()],this.X=b.createFunction(n[1]+f[1],this.board,
""),this.Y=b.createFunction(n[2]+f[2],this.board,""),this.visProp.snaptogrid&&(this.coords.setCoordinates(q.COORDS_BY_USER,d.usrCoords),this.snapToGrid(),this.X=b.createFunction(this.coords.usrCoords[1],this.board,""),this.Y=b.createFunction(this.coords.usrCoords[2],this.board,""))),this},snapToGrid:function(){return this.handleSnapToGrid()}}),m.createText=function(a,d,c){var f;c=b.copyAttributes(c,a.options,"text");return c.anchor=c.parent||c.anchor,f=new m.Text(a,d[d.length-1],d,c),"function"!=
typeof d[d.length-1]&&(f.parents=d),0!==b.evaluate(c.rotate)&&"internal"===c.display&&f.addRotation(b.evaluate(c.rotate)),f},m.registerElement("text",m.createText),m.createHTMLSlider=function(a,k,c){var f,n;c=b.copyAttributes(c,a.options,"htmlslider");if(2!==k.length||2!==k[0].length||3!==k[1].length)throw Error("JSXGraph: Can't create htmlslider with parent types '"+typeof k[0]+"' and '"+typeof k[1]+"'.\nPossible parents are: [[x,y], [min, start, max]]");return c.anchor=c.parent||c.anchor,c.fixed=
c.fixed||!0,n=[k[0][0],k[0][1],'<form style="display:inline"><input type="range" /><span></span><input type="text" /></form>'],f=m.createText(a,n,c),f.type=b.OBJECT_TYPE_HTMLSLIDER,f.rendNodeForm=f.rendNode.childNodes[0],f.rendNodeForm.id=f.rendNode.id+"_form",f.rendNodeRange=f.rendNodeForm.childNodes[0],f.rendNodeRange.id=f.rendNode.id+"_range",f.rendNodeRange.min=k[1][0],f.rendNodeRange.max=k[1][2],f.rendNodeRange.step=c.step,f.rendNodeRange.value=k[1][1],f.rendNodeLabel=f.rendNodeForm.childNodes[1],
f.rendNodeLabel.id=f.rendNode.id+"_label",c.withlabel&&(f.rendNodeLabel.innerHTML=f.name+"="),f.rendNodeOut=f.rendNodeForm.childNodes[2],f.rendNodeOut.id=f.rendNode.id+"_out",f.rendNodeOut.value=k[1][1],f.rendNodeRange.style.width=c.widthrange+"px",f.rendNodeRange.style.verticalAlign="middle",f.rendNodeOut.style.width=c.widthout+"px",f._val=k[1][1],m.supportsVML()?d.addEvent(f.rendNodeForm,"change",function(){this._val=1*this.rendNodeRange.value;this.rendNodeOut.value=this.rendNodeRange.value;this.board.update()},
f):d.addEvent(f.rendNodeForm,"input",function(){this._val=1*this.rendNodeRange.value;this.rendNodeOut.value=this.rendNodeRange.value;this.board.update()},f),f.Value=function(){return this._val},f},m.registerElement("htmlslider",m.createHTMLSlider),{Text:m.Text,createText:m.createText,createHTMLSlider:m.createHTMLSlider}});E("utils/uuid",["jxg"],function(m){var q="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");return m.Util=m.Util||{},m.Util.genUUID=function(){var l,e,h=
[],g=0;for(e=0;36>e;e++)8===e||13===e||18===e||23===e?h[e]="-":14===e?h[e]="4":(2>=g&&(g=0|33554432+16777216*Math.random()),l=15&g,g>>=4,h[e]=q[19===e?8|3&l:l]);return h.join("")},m.Util});E("parser/jessiecode","jxg base/constants base/text math/math math/geometry math/statistics utils/type utils/uuid utils/env".split(" "),function(m,q,l,e,h,g,d,b,a){var k={math:e,"math/geometry":h,"math/statistics":g,"math/numerics":e.Numerics};m.JessieCode=function(a,b){this.scope={id:0,hasChild:!0,args:[],locals:{},
context:null,previous:null};this.scopes=[];this.scopes.push(this.scope);this.dpstack=[[]];this.pscope=0;this.propstack=[{}];this.propscope=0;this.lhs=[];this.isLHS=!1;this.warnLog="jcwarn";this.$log=[];this.builtIn=this.defineBuiltIn();this.board=null;this.lineToElement={};this.parCurLine=1;this.parCurColumn=0;this.col=this.line=1;this.code="";"string"==typeof a&&this.parse(a,b)};m.extend(m.JessieCode.prototype,{node:function(a,b,d){return{type:a,value:b,children:d}},createNode:function(a,b){var d,
c=this.node(a,b,[]);for(d=2;d<arguments.length;d++)c.children.push(arguments[d]);return c.line=this.parCurLine,c.col=this.parCurColumn,c},pushScope:function(a){a={args:a,locals:{},context:null,previous:this.scope};return this.scope.hasChild=!0,this.scope=a,a.id=this.scopes.push(a)-1,a},popScope:function(){var a=this.scope.previous;return this.scope=null!==a?a:this.scope,this.scope},getElementById:function(a){return this.board.objects[a]},log:function(){this.$log.push(arguments);"object"==typeof console&&
console.log&&console.log.apply(console,arguments)},creator:function(){var a,b={};return a=function(a){var f;return"function"==typeof b[this.board.id+a]?f=b[this.board.id+a]:(f=function(f){return function(b,n){var c;return c=d.exists(n)?n:{name:0!==f.lhs[f.scope]?f.lhs[f.scope]:""},f.board.create(a,b,c)}}(this),f.creator=!0,b[this.board.id+a]=f),f},a.clearCache=function(){b={}},a}(),letvar:function(a,b){this.builtIn[a]&&this._warn('"'+a+'" is a predefined value.');this.scope.locals[a]=b},isLocalVariable:function(a){for(var b=
this.scope;null!==b;){if(d.exists(b.locals[a]))return b;b=b.previous}return null},isParameter:function(a){for(var b=this.scope;null!==b;){if(-1<d.indexOf(b.args,a))return b;b=b.previous}return null},isCreator:function(a){return!!m.elements[a]},isMathMethod:function(a){return"E"!==a&&!!Math[a]},isBuiltIn:function(a){return!!this.builtIn[a]},getvar:function(a,b){var c;return b=d.def(b,!1),c=this.isLocalVariable(a),null!==c?c.locals[a]:this.isCreator(a)?this.creator(a):this.isBuiltIn(a)?this.builtIn[a]:
this.isMathMethod(a)?Math[a]:b||(c=this.board.select(a),c===a)?void 0:c},resolve:function(a){for(var b=this.scope;null!==b;){if(d.exists(b.locals[a]))return b.locals[a];b=b.previous}},getvarJS:function(a,b,c){var k,e="";return b=d.def(b,!1),c=d.def(c,!1),k=this.isParameter(a),null!==k?a:(k=this.isLocalVariable(a),null===k||c?this.isCreator(a)?"(function () { var a = Array.prototype.slice.call(arguments, 0), props = "+(c?"a.pop()":"{}")+"; return $jc$.board.create.apply($jc$.board, ['"+a+"'].concat([a, props])); })":
(c&&this._error("Syntax error (attribute values are allowed with element creators only)"),this.isBuiltIn(a)?this.builtIn[a].src||this.builtIn[a]:this.isMathMethod(a)?"Math."+a:b?"":(d.isId(this.board,a)?e="$jc$.board.objects['"+a+"']":d.isName(this.board,a)?e="$jc$.board.elementsByName['"+a+"']":d.isGroup(this.board,a)&&(e="$jc$.board.groups['"+a+"']"),e)):"$jc$.resolve('"+a+"')")},makeMap:function(a){return a.isMap=!0,a},functionCodeJS:function(a){var b=a.children[0].join(", "),d="",c="";return"op_map"===
a.value&&(d="{ return  ",c=" }"),"function ("+b+") {\nvar $oldscope$ = $jc$.scope;\n$jc$.scope = $jc$.scopes["+this.scope.id+"];\nvar r = (function () "+d+this.compile(a.children[1],!0)+c+")();\n$jc$.scope = $oldscope$;\nreturn r;\n}"},defineFunction:function(a){var b,c=a.children[0],k=this.pushScope(c);if(this.board.options.jc.compile){this.isLHS=!1;for(b=0;b<c.length;b++)k.locals[c[b]]=c[b];this.replaceNames(a.children[1]);b=function(b,n){n.join(", ");var d="var f = "+b.functionCodeJS(a)+"; f;";
try{return eval(d)}catch(c){return b._warn("error compiling function\n\n"+d+"\n\n"+c.toString()),function(){}}}(this,c);this.popScope()}else b=function(b,n,d){return function(){var c,p;p=n.scope;n.scope=n.scopes[d];for(c=0;c<b.length;c++)n.scope.locals[b[c]]=arguments[c];return c=n.execute(a.children[1]),n.scope=p,c}}(c,this,k.id);return b.node=a,b.scope=k,b.toJS=b.toString,b.toString=function(b){return function(){return b.compile(b.replaceIDs(d.deepCopy(a)))}}(this),b.deps={},this.collectDependencies(a.children[1],
b.deps),b},mergeAttributes:function(){var a,b={};for(a=0;a<arguments.length;a++)b=d.deepCopy(b,arguments[a],!0);return b},setProp:function(a,b,c){var k,e,g={};a.elementClass!==q.OBJECT_CLASS_POINT||"X"!==b&&"Y"!==b?a.type!==q.OBJECT_TYPE_TEXT||"X"!==b&&"Y"!==b?a.type&&a.elementClass&&a.visProp?d.exists(a[a.methodMap[b]])&&"function"!=typeof a[a.methodMap[b]]?a[a.methodMap[b]]=c:(g[b]=c,a.setProperty(g)):a[b]=c:("number"==typeof c?a[b]=function(){return c}:"function"==typeof c?(a.isDraggable=!1,a[b]=
c):"string"==typeof c&&(a.isDraggable=!1,a[b]=d.createFunction(c,this.board,null,!0),a[b+"jc"]=c),a[b].origin=c,this.board.update()):(b=b.toLowerCase(),a.isDraggable&&"number"==typeof c?(k="x"===b?c:a.X(),e="y"===b?c:a.Y(),a.setPosition(q.COORDS_BY_USER,[k,e])):!a.isDraggable||"function"!=typeof c&&"string"!=typeof c?a.isDraggable||(k="x"===b?c:a.XEval.origin,e="y"===b?c:a.YEval.origin,a.addConstraint([k,e])):(k="x"===b?c:a.coords.usrCoords[1],e="y"===b?c:a.coords.usrCoords[2],a.addConstraint([k,
e])),this.board.update())},parse:function(a,b,p){var k,e,g,h,x=a.replace(/\r\n/g,"\n").split("\n"),u=[];p||(this.code+=a+"\n");l&&(e=l.Text.prototype.setText,l.Text.prototype.setText=l.Text.prototype.setTextJessieCode);try{d.exists(b)||(b=!1);for(k=0;k<x.length;k++)b&&(x[k]=m.GeonextParser.geonext2JS(x[k],this.board)),u.push(x[k]);a=u.join("\n");g=c.parse(a);h=this.execute(g)}finally{l&&(l.Text.prototype.setText=e)}return h},snippet:function(a,b,c,k){var e;return b=d.def(b,!0),c=d.def(c,""),k=d.def(k,
!1),e=(b?" function ("+c+") { return ":"")+a+(b?"; }":"")+";",this.parse(e,k,!0)},replaceIDs:function(a){var b;if(a.replaced&&(b=this.board.objects[a.children[1][0].value],d.exists(b)&&""!==b.name&&(a.type="node_var",a.value=b.name,a.children.length=0,delete a.replaced)),a.children)for(b=a.children.length;0<b;b--)d.exists(a.children[b-1])&&(a.children[b-1]=this.replaceIDs(a.children[b-1]));return a},replaceNames:function(a){var b;if(b=a.value,"node_op"===a.type&&"op_lhs"===b&&1===a.children.length?
this.isLHS=!0:"node_var"===a.type&&(this.isLHS?this.letvar(b,!0):!d.exists(this.getvar(b,!0))&&d.exists(this.board.elementsByName[b])&&(a=this.createReplacementNode(a))),a.children)for(b=a.children.length;0<b;b--)d.exists(a.children[b-1])&&(a.children[b-1]=this.replaceNames(a.children[b-1]));return"node_op"===a.type&&"op_lhs"===a.value&&1===a.children.length&&(this.isLHS=!1),a},createReplacementNode:function(a){var b=this.board.elementsByName[a.value];return a=this.createNode("node_op","op_execfun",
this.createNode("node_var","$"),[this.createNode("node_str",b.id)]),a.replaced=!0,a},collectDependencies:function(a,b){var c,k;if(c=a.value,"node_var"===a.type&&(k=this.getvar(c),k&&k.visProp&&k.type&&k.elementClass&&k.id&&(b[k.id]=k)),"node_op"===a.type&&"op_execfun"===a.value&&1<a.children.length&&"$"===a.children[0].value&&0<a.children[1].length&&(k=a.children[1][0].value,b[k]=this.board.objects[k]),a.children)for(c=a.children.length;0<c;c--)d.exists(a.children[c-1])&&this.collectDependencies(a.children[c-
1],b)},resolveProperty:function(a,b,c){return c=d.def(c,!1),a&&a.methodMap&&(d.exists(a.subs)&&d.exists(a.subs[b])?a=a.subs:d.exists(a.methodMap[b])?b=a.methodMap[b]:(a=a.visProp,b=b.toLowerCase())),d.exists(a)||this._error(a+" is not an object"),d.exists(a[b])||this._error("unknown property "+b),c&&"function"==typeof a[b]?function(){return a[b].apply(a,arguments)}:a[b]},getLHS:function(a){if("node_var"===a.type)a={o:this.scope.locals,what:a.value};else if("node_op"===a.type&&"op_property"===a.value)a=
{o:this.execute(a.children[0]),what:a.children[1]};else{if("node_op"!==a.type||"op_extvalue"!==a.value)throw Error("Syntax error: Invalid left-hand side of assignment.");a={o:this.execute(a.children[0]),what:this.execute(a.children[1])}}return a},getLHSCompiler:function(a,b){var c;if("node_var"===a.type)c=a.value;else if("node_op"===a.type&&"op_property"===a.value)c=[this.compile(a.children[0],b),"'"+a.children[1]+"'"];else{if("node_op"!==a.type||"op_extvalue"!==a.value)throw Error("Syntax error: Invalid left-hand side of assignment.");
c=[this.compile(a.children[0]),"node_const"===a.children[1].type?a.children[1].value:this.compile(a.children[1],b)]}return c},execute:function(a){var b,c,k,g,h,l,m=[];if(b=0,!a)return b;switch(this.line=a.line,this.col=a.col,a.type){case "node_op":switch(a.value){case "op_none":a.children[0]&&this.execute(a.children[0]);a.children[1]&&(b=this.execute(a.children[1]));break;case "op_assign":c=this.getLHS(a.children[0]);this.lhs[this.scope.id]=c[1];c.o.type&&c.o.elementClass&&c.o.methodMap&&"label"===
c.what&&this._error("Left-hand side of assignment is read-only.");b=this.execute(a.children[1]);c.o!==this.scope.locals||d.isArray(c.o)&&"number"==typeof c.what?this.setProp(c.o,c.what,b):this.letvar(c.what,b);this.lhs[this.scope.id]=0;break;case "op_if":this.execute(a.children[0])&&(b=this.execute(a.children[1]));break;case "op_conditional":case "op_if_else":b=this.execute(a.children[0])?this.execute(a.children[1]):this.execute(a.children[2]);break;case "op_while":for(;this.execute(a.children[0]);)this.execute(a.children[1]);
break;case "op_do":do this.execute(a.children[0]);while(this.execute(a.children[1]));break;case "op_for":for(this.execute(a.children[0]);this.execute(a.children[1]);this.execute(a.children[2]))this.execute(a.children[3]);break;case "op_proplst":a.children[0]&&this.execute(a.children[0]);a.children[1]&&this.execute(a.children[1]);break;case "op_emptyobject":b={};break;case "op_proplst_val":this.propstack.push({});this.propscope++;this.execute(a.children[0]);b=this.propstack[this.propscope];this.propstack.pop();
this.propscope--;break;case "op_prop":this.propstack[this.propscope][a.children[0]]=this.execute(a.children[1]);break;case "op_array":b=[];g=a.children[0].length;for(c=0;g>c;c++)b.push(this.execute(a.children[0][c]));break;case "op_extvalue":b=this.execute(a.children[0]);c=this.execute(a.children[1]);b="number"==typeof c&&Math.abs(Math.round(c)-c)<e.eps?b[c]:void 0;break;case "op_return":if(0!==this.scope)return this.execute(a.children[0]);this._error("Unexpected return.");break;case "op_map":a.children[1].isMath||
this._error("In a map only function calls and mathematical expressions are allowed.");h=this.defineFunction(a);h.isMap=!0;b=h;break;case "op_function":h=this.defineFunction(a);h.isMap=!1;b=h;break;case "op_execfun":if(this.dpstack.push([]),this.pscope++,k=a.children[1],d.exists(a.children[2]))if(a.children[3])for(h=a.children[2],g={},c=0;c<h.length;c++)g=d.deepCopy(g,this.execute(h[c]),!0);else g=this.execute(a.children[2]);l=(h=this.execute(a.children[0]))&&h.sc?h.sc:this;!h.creator&&d.exists(a.children[2])&&
this._error("Unexpected value. Only element creators are allowed to have a value after the function call.");for(c=0;c<k.length;c++)m[c]=this.execute(k[c]),this.dpstack[this.pscope].push({line:a.children[1][c].line,col:a.children[1][c].ecol});if("function"!=typeof h||h.creator)if("function"==typeof h&&h.creator){k=this.line;try{b=h(m,g);b.jcLineStart=k;b.jcLineEnd=a.eline;for(c=k;c<=a.line;c++)this.lineToElement[c]=b;b.debugParents=this.dpstack[this.pscope]}catch(u){this._error(u.toString())}}else this._error("Function '"+
h+"' is undefined.");else b=h.apply(l,m);this.dpstack.pop();this.pscope--;break;case "op_property":k=this.execute(a.children[0]);c=a.children[1];b=this.resolveProperty(k,c,!1);d.exists(b)&&(b.sc=k);break;case "op_use":this._warn("Use of the 'use' operator is deprecated.");this.use(a.children[0].toString());break;case "op_delete":this._warn("Use of the 'delete' operator is deprecated. Please use the remove() function.");c=this.getvar(a.children[0]);b=this.del(c);break;case "op_equ":b=this.execute(a.children[0])==
this.execute(a.children[1]);break;case "op_neq":b=this.execute(a.children[0])!=this.execute(a.children[1]);break;case "op_approx":b=Math.abs(this.execute(a.children[0])-this.execute(a.children[1]))<e.eps;break;case "op_grt":b=this.execute(a.children[0])>this.execute(a.children[1]);break;case "op_lot":b=this.execute(a.children[0])<this.execute(a.children[1]);break;case "op_gre":b=this.execute(a.children[0])>=this.execute(a.children[1]);break;case "op_loe":b=this.execute(a.children[0])<=this.execute(a.children[1]);
break;case "op_or":b=this.execute(a.children[0])||this.execute(a.children[1]);break;case "op_and":b=this.execute(a.children[0])&&this.execute(a.children[1]);break;case "op_not":b=!this.execute(a.children[0]);break;case "op_add":b=this.add(this.execute(a.children[0]),this.execute(a.children[1]));break;case "op_sub":b=this.sub(this.execute(a.children[0]),this.execute(a.children[1]));break;case "op_div":b=this.div(this.execute(a.children[0]),this.execute(a.children[1]));break;case "op_mod":b=this.mod(this.execute(a.children[0]),
this.execute(a.children[1]),!0);break;case "op_mul":b=this.mul(this.execute(a.children[0]),this.execute(a.children[1]));break;case "op_exp":b=this.pow(this.execute(a.children[0]),this.execute(a.children[1]));break;case "op_neg":b=-1*this.execute(a.children[0])}break;case "node_var":b=this.getvar(a.value);break;case "node_const":b=Number(a.value);break;case "node_const_bool":b=a.value;break;case "node_str":b=a.value.replace(/\\(.)/,"$1")}return b},compile:function(a,b){var c,k,e;k="";if(d.exists(b)||
(b=!1),!a)return k;switch(a.type){case "node_op":switch(a.value){case "op_none":a.children[0]&&(k=this.compile(a.children[0],b));a.children[1]&&(k+=this.compile(a.children[1],b));break;case "op_assign":b?(c=this.getLHSCompiler(a.children[0]),d.isArray(c)?k="$jc$.setProp("+c[0]+", "+c[1]+", "+this.compile(a.children[1],b)+");\n":(this.isLocalVariable(c)!==this.scope&&(this.scope.locals[c]=!0),k="$jc$.scopes["+this.scope.id+"].locals['"+c+"'] = "+this.compile(a.children[1],b)+";\n")):(c=this.compile(a.children[0]),
k=c+" = "+this.compile(a.children[1],b)+";\n");break;case "op_if":k=" if ("+this.compile(a.children[0],b)+") "+this.compile(a.children[1],b);break;case "op_if_else":k=" if ("+this.compile(a.children[0],b)+")"+this.compile(a.children[1],b);k+=" else "+this.compile(a.children[2],b);break;case "op_conditional":k="(("+this.compile(a.children[0],b)+")?("+this.compile(a.children[1],b);k+="):("+this.compile(a.children[2],b)+"))";break;case "op_while":k=" while ("+this.compile(a.children[0],b)+") {\n"+this.compile(a.children[1],
b)+"}\n";break;case "op_do":k=" do {\n"+this.compile(a.children[0],b)+"} while ("+this.compile(a.children[1],b)+");\n";break;case "op_for":k=" for ("+this.compile(a.children[0],b)+"; "+this.compile(a.children[1],b)+"; "+this.compile(a.children[2],b)+") {\n"+this.compile(a.children[3],b)+"\n}\n";break;case "op_proplst":a.children[0]&&(k=this.compile(a.children[0],b)+", ");k+=this.compile(a.children[1],b);break;case "op_prop":k=a.children[0]+": "+this.compile(a.children[1],b);break;case "op_emptyobject":k=
b?"{}":"<< >>";break;case "op_proplst_val":k=this.compile(a.children[0],b);break;case "op_array":e=[];for(k=0;k<a.children[0].length;k++)e.push(this.compile(a.children[0][k]),b);k="["+e.join(", ")+"]";break;case "op_extvalue":k=this.compile(a.children[0],b)+"["+this.compile(a.children[1],b)+"]";break;case "op_return":k=" return "+this.compile(a.children[0],b)+";\n";break;case "op_map":a.children[1].isMath||this._error("In a map only function calls and mathematical expressions are allowed.");e=a.children[0];
k=b?" $jc$.makeMap(function ("+e.join(", ")+") { return "+this.compile(a.children[1],b)+"; })":"map ("+e.join(", ")+") -> "+this.compile(a.children[1],b);break;case "op_function":e=a.children[0];this.pushScope(e);k=b?this.functionCodeJS(a):" function ("+e.join(", ")+") "+this.compile(a.children[1],b);this.popScope();break;case "op_execfunmath":console.log("TODO");k="-1";break;case "op_execfun":if(a.children[2]){e=[];for(k=0;k<a.children[2].length;k++)e.push(this.compile(a.children[2][k],b));b&&(c=
"$jc$.mergeAttributes("+e.join(", ")+")")}a.children[0].withProps=!!a.children[2];e=[];for(k=0;k<a.children[1].length;k++)e.push(this.compile(a.children[1][k],b));k=this.compile(a.children[0],b)+"("+e.join(", ")+(a.children[2]&&b?", "+c:"")+")"+(a.children[2]&&!b?c:"");b&&"$"===a.children[0].value&&(k="$jc$.board.objects["+this.compile(a.children[1][0],b)+"]");break;case "op_property":k=b&&"X"!==a.children[1]&&"Y"!==a.children[1]?"$jc$.resolveProperty("+this.compile(a.children[0],b)+", '"+a.children[1]+
"', true)":this.compile(a.children[0],b)+"."+a.children[1];break;case "op_use":this._warn("Use of the 'use' operator is deprecated.");k=(b?"$jc$.use('":"use('")+(a.children[0].toString()+"');");break;case "op_delete":this._warn("Use of the 'delete' operator is deprecated. Please use the remove() function.");k=(b?"$jc$.del(":"remove(")+(this.compile(a.children[0],b)+")");break;case "op_equ":k="("+this.compile(a.children[0],b)+" == "+this.compile(a.children[1],b)+")";break;case "op_neq":k="("+this.compile(a.children[0],
b)+" != "+this.compile(a.children[1],b)+")";break;case "op_approx":k="("+this.compile(a.children[0],b)+" ~= "+this.compile(a.children[1],b)+")";break;case "op_grt":k="("+this.compile(a.children[0],b)+" > "+this.compile(a.children[1],b)+")";break;case "op_lot":k="("+this.compile(a.children[0],b)+" < "+this.compile(a.children[1],b)+")";break;case "op_gre":k="("+this.compile(a.children[0],b)+" >= "+this.compile(a.children[1],b)+")";break;case "op_loe":k="("+this.compile(a.children[0],b)+" <= "+this.compile(a.children[1],
b)+")";break;case "op_or":k="("+this.compile(a.children[0],b)+" || "+this.compile(a.children[1],b)+")";break;case "op_and":k="("+this.compile(a.children[0],b)+" && "+this.compile(a.children[1],b)+")";break;case "op_not":k="!("+this.compile(a.children[0],b)+")";break;case "op_add":k=b?"$jc$.add("+this.compile(a.children[0],b)+", "+this.compile(a.children[1],b)+")":"("+this.compile(a.children[0],b)+" + "+this.compile(a.children[1],b)+")";break;case "op_sub":k=b?"$jc$.sub("+this.compile(a.children[0],
b)+", "+this.compile(a.children[1],b)+")":"("+this.compile(a.children[0],b)+" - "+this.compile(a.children[1],b)+")";break;case "op_div":k=b?"$jc$.div("+this.compile(a.children[0],b)+", "+this.compile(a.children[1],b)+")":"("+this.compile(a.children[0],b)+" / "+this.compile(a.children[1],b)+")";break;case "op_mod":k=b?"$jc$.mod("+this.compile(a.children[0],b)+", "+this.compile(a.children[1],b)+", true)":"("+this.compile(a.children[0],b)+" % "+this.compile(a.children[1],b)+")";break;case "op_mul":k=
b?"$jc$.mul("+this.compile(a.children[0],b)+", "+this.compile(a.children[1],b)+")":"("+this.compile(a.children[0],b)+" * "+this.compile(a.children[1],b)+")";break;case "op_exp":k=b?"$jc$.pow("+this.compile(a.children[0],b)+", "+this.compile(a.children[1],b)+")":"("+this.compile(a.children[0],b)+"^"+this.compile(a.children[1],b)+")";break;case "op_neg":k="(-"+this.compile(a.children[0],b)+")"}break;case "node_var":k=b?this.getvarJS(a.value,!1,a.withProps):a.value;break;case "node_const":k=a.value;
break;case "node_const_bool":k=a.value;break;case "node_str":k="'"+a.value+"'"}return a.needsBrackets&&(k="{\n"+k+"}\n"),k},X:function(a){return a.X()},Y:function(a){return a.Y()},V:function(a){return a.Value()},L:function(a){return a.L()},dist:function(a,b){return d.exists(a)&&d.exists(a.Dist)||this._error("Error: Can't calculate distance."),a.Dist(b)},add:function(a,b){var c,k,e;if(a=d.evalSlider(a),b=d.evalSlider(b),d.isArray(a)&&d.isArray(b))for(k=Math.min(a.length,b.length),e=[],c=0;k>c;c++)e[c]=
a[c]+b[c];else d.isNumber(a)&&d.isNumber(b)?e=a+b:d.isString(a)||d.isString(b)?e=a.toString()+b.toString():this._error("Operation + not defined on operands "+typeof a+" and "+typeof b);return e},sub:function(a,b){var c,k,e;if(a=d.evalSlider(a),b=d.evalSlider(b),d.isArray(a)&&d.isArray(b))for(k=Math.min(a.length,b.length),e=[],c=0;k>c;c++)e[c]=a[c]-b[c];else d.isNumber(a)&&d.isNumber(b)?e=a-b:this._error("Operation - not defined on operands "+typeof a+" and "+typeof b);return e},mul:function(a,b){var c,
k,g;if(a=d.evalSlider(a),b=d.evalSlider(b),d.isArray(a)&&d.isNumber(b)&&(a=b,b=a),d.isArray(a)&&d.isArray(b))k=Math.min(a.length,b.length),g=e.innerProduct(a,b,k);else if(d.isNumber(a)&&d.isArray(b))for(k=b.length,g=[],c=0;k>c;c++)g[c]=a*b[c];else d.isNumber(a)&&d.isNumber(b)?g=a*b:this._error("Operation * not defined on operands "+typeof a+" and "+typeof b);return g},div:function(a,b){var c,k,e;if(a=d.evalSlider(a),b=d.evalSlider(b),d.isArray(a)&&d.isNumber(b))for(k=a.length,e=[],c=0;k>c;c++)e[c]=
a[c]/b;else d.isNumber(a)&&d.isNumber(b)?e=a/b:this._error("Operation * not defined on operands "+typeof a+" and "+typeof b);return e},mod:function(a,b){var c,k,g;if(a=d.evalSlider(a),b=d.evalSlider(b),d.isArray(a)&&d.isNumber(b))for(k=a.length,g=[],c=0;k>c;c++)g[c]=e.mod(a[c],b,!0);else d.isNumber(a)&&d.isNumber(b)?g=e.mod(a,b,!0):this._error("Operation * not defined on operands "+typeof a+" and "+typeof b);return g},pow:function(a,b){return a=d.evalSlider(a),b=d.evalSlider(b),Math.pow(a,b)},ifthen:function(a,
b,c){return a?b:c},del:function(a){"object"==typeof a&&m.exists(a.type)&&m.exists(a.elementClass)&&this.board.removeObject(a)},use:function(a){var b,c,d=!1;if("string"==typeof a)for(b in m.boards){if(m.boards.hasOwnProperty(b)&&m.boards[b].container===a){c=m.boards[b];d=!0;break}}else c=a,d=!0;d?(this.board=c,this.builtIn.$board=c,this.builtIn.$board.src="$jc$.board"):this._error("Board '"+a+"' not found!")},findSymbol:function(a,b){var c,k;b=d.def(b,-1);for(k=-1===b?this.scope:this.scopes[b];null!==
k;){for(c in k.locals)if(k.locals.hasOwnProperty(c)&&k.locals[c]===a)return[c,k];k=k.previous}return[]},importModule:function(a){return k[a.toLowerCase()]},defineBuiltIn:function(){var a={PI:Math.PI,EULER:Math.E,X:this.X,Y:this.Y,V:this.V,L:this.L,dist:this.dist,rad:h.rad,deg:h.trueAngle,factorial:e.factorial,trunc:d.trunc,ln:Math.log,log10:e.log10,lg:e.log10,log2:e.log2,lb:e.log2,ld:e.log2,IfThen:this.ifthen,"import":this.importModule,use:this.use,remove:this.del,$:this.getElementById,$board:this.board,
$log:this.log};return a.rad.sc=h,a.deg.sc=h,a.factorial.sc=e,a.X.src="$jc$.X",a.Y.src="$jc$.Y",a.V.src="$jc$.V",a.L.src="$jc$.L",a.dist.src="$jc$.dist",a.rad.src="JXG.Math.Geometry.rad",a.deg.src="JXG.Math.Geometry.trueAngle",a.factorial.src="JXG.Math.factorial",a.trunc.src="JXG.trunc",a.ln.src="Math.log",a.log10.src="JXG.Math.log10",a.lg.src="JXG.Math.log10",a.log2.src="JXG.Math.log2",a.lb.src="JXG.Math.log2",a.ld.src="JXG.Math.log2",a["import"].src="$jc$.importModule",a.use.src="$jc$.use",a.remove.src=
"$jc$.del",a.IfThen.src="$jc$.ifthen",a.$.src="(function (n) { return $jc$.board.select(n); })",a.$board&&(a.$board.src="$jc$.board"),a.$log.src="$jc$.log",a},_debug:function(b){"object"==typeof console?console.log(b):a.isBrowser&&document&&null!==document.getElementById("debug")&&(document.getElementById("debug").innerHTML+=b+"<br />")},_error:function(a){a=Error("Error("+this.line+"): "+a);throw a.line=this.line,a;},_warn:function(b){"object"==typeof console?console.log("Warning("+this.line+"): "+
b):a.isBrowser&&document&&null!==document.getElementById(this.warnLog)&&(document.getElementById(this.warnLog).innerHTML+="Warning("+this.line+"): "+b+"<br />")},_log:function(a){"object"!=typeof window&&"object"==typeof self&&self.postMessage?self.postMessage({type:"log",msg:"Log: "+a.toString()}):console.log("Log: ",arguments)}});var c=function(){function a(){this.yy={}}var b={trace:function(){},yy:{},symbols_:{error:2,Program:3,StatementList:4,EOF:5,IfStatement:6,IF:7,"(":8,Expression:9,")":10,
Statement:11,ELSE:12,LoopStatement:13,WHILE:14,FOR:15,";":16,DO:17,UnaryStatement:18,USE:19,IDENTIFIER:20,DELETE:21,ReturnStatement:22,RETURN:23,EmptyStatement:24,StatementBlock:25,"{":26,"}":27,ExpressionStatement:28,AssignmentExpression:29,ConditionalExpression:30,LeftHandSideExpression:31,"=":32,LogicalORExpression:33,"?":34,":":35,LogicalANDExpression:36,"||":37,EqualityExpression:38,"&&":39,RelationalExpression:40,"==":41,"!=":42,"~=":43,AdditiveExpression:44,"<":45,">":46,"<=":47,">=":48,MultiplicativeExpression:49,
"+":50,"-":51,UnaryExpression:52,"*":53,"/":54,"%":55,ExponentExpression:56,"^":57,"!":58,MemberExpression:59,CallExpression:60,PrimaryExpression:61,FunctionExpression:62,MapExpression:63,".":64,"[":65,"]":66,BasicLiteral:67,ObjectLiteral:68,ArrayLiteral:69,NullLiteral:70,BooleanLiteral:71,StringLiteral:72,NumberLiteral:73,NULL:74,TRUE:75,FALSE:76,STRING:77,NUMBER:78,NAN:79,INFINITY:80,ElementList:81,"<<":82,">>":83,PropertyList:84,Property:85,",":86,PropertyName:87,Arguments:88,AttributeList:89,
Attribute:90,FUNCTION:91,ParameterDefinitionList:92,MAP:93,"->":94,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",7:"IF",8:"(",10:")",12:"ELSE",14:"WHILE",15:"FOR",16:";",17:"DO",19:"USE",20:"IDENTIFIER",21:"DELETE",23:"RETURN",26:"{",27:"}",32:"=",34:"?",35:":",37:"||",39:"&&",41:"==",42:"!=",43:"~=",45:"<",46:">",47:"<=",48:">=",50:"+",51:"-",53:"*",54:"/",55:"%",57:"^",58:"!",64:".",65:"[",66:"]",74:"NULL",75:"TRUE",76:"FALSE",77:"STRING",78:"NUMBER",79:"NAN",80:"INFINITY",82:"<<",83:">>",86:",",
91:"FUNCTION",93:"MAP",94:"->"},productions_:[0,[3,2],[6,5],[6,7],[13,5],[13,9],[13,7],[18,2],[18,2],[22,2],[22,3],[24,1],[25,3],[4,2],[4,0],[11,1],[11,1],[11,1],[11,1],[11,1],[11,1],[11,1],[28,2],[9,1],[29,1],[29,3],[30,1],[30,5],[33,1],[33,3],[36,1],[36,3],[38,1],[38,3],[38,3],[38,3],[40,1],[40,3],[40,3],[40,3],[40,3],[44,1],[44,3],[44,3],[49,1],[49,3],[49,3],[49,3],[56,1],[56,3],[52,1],[52,2],[52,2],[52,2],[31,1],[31,1],[59,1],[59,1],[59,1],[59,3],[59,4],[61,1],[61,1],[61,1],[61,1],[61,3],[67,
1],[67,1],[67,1],[67,1],[70,1],[71,1],[71,1],[72,1],[73,1],[73,1],[73,1],[69,2],[69,3],[68,2],[68,3],[84,1],[84,3],[85,3],[87,1],[87,1],[87,1],[60,2],[60,3],[60,2],[60,4],[60,3],[88,2],[88,3],[89,1],[89,3],[90,1],[90,1],[81,1],[81,3],[62,4],[62,5],[63,6],[92,1],[92,3]],performAction:function(a,b,f,k,n,e,g){a=e.length-1;switch(n){case 1:return e[a-1];case 2:this.$=c.createNode(d(g[a-4]),"node_op","op_if",e[a-2],e[a]);break;case 3:this.$=c.createNode(d(g[a-6]),"node_op","op_if_else",e[a-4],e[a-2],e[a]);
break;case 4:this.$=c.createNode(d(g[a-4]),"node_op","op_while",e[a-2],e[a]);break;case 5:this.$=c.createNode(d(g[a-8]),"node_op","op_for",e[a-6],e[a-4],e[a-2],e[a]);break;case 6:this.$=c.createNode(d(g[a-6]),"node_op","op_do",e[a-5],e[a-2]);break;case 7:this.$=c.createNode(d(g[a-1]),"node_op","op_use",e[a]);break;case 8:this.$=c.createNode(d(g[a-1]),"node_op","op_delete",e[a]);break;case 9:this.$=c.createNode(d(g[a-1]),"node_op","op_return",void 0);break;case 10:this.$=c.createNode(d(g[a-2]),"node_op",
"op_return",e[a-1]);break;case 11:this.$=c.createNode(d(g[a]),"node_op","op_none");break;case 12:this.$=e[a-1];this.$.needsBrackets=!0;break;case 13:this.$=c.createNode(d(g[a-1]),"node_op","op_none",e[a-1],e[a]);break;case 14:this.$=c.createNode(d(g[a]),"node_op","op_none");break;case 15:this.$=e[a];break;case 16:this.$=e[a];break;case 17:this.$=e[a];break;case 18:this.$=e[a];break;case 19:this.$=e[a];break;case 20:this.$=e[a];break;case 21:this.$=e[a];break;case 22:this.$=e[a-1];break;case 23:this.$=
e[a];break;case 24:this.$=e[a];break;case 25:this.$=c.createNode(d(g[a-2]),"node_op","op_assign",e[a-2],e[a]);this.$.isMath=!1;break;case 26:this.$=e[a];break;case 27:this.$=c.createNode(d(g[a-4]),"node_op","op_conditional",e[a-4],e[a-2],e[a]);this.$.isMath=!1;break;case 28:this.$=e[a];break;case 29:this.$=c.createNode(d(g[a-2]),"node_op","op_or",e[a-2],e[a]);this.$.isMath=!1;break;case 30:this.$=e[a];break;case 31:this.$=c.createNode(d(g[a-2]),"node_op","op_and",e[a-2],e[a]);this.$.isMath=!1;break;
case 32:this.$=e[a];break;case 33:this.$=c.createNode(d(g[a-2]),"node_op","op_equ",e[a-2],e[a]);this.$.isMath=!1;break;case 34:this.$=c.createNode(d(g[a-2]),"node_op","op_neq",e[a-2],e[a]);this.$.isMath=!1;break;case 35:this.$=c.createNode(d(g[a-2]),"node_op","op_approx",e[a-2],e[a]);this.$.isMath=!1;break;case 36:this.$=e[a];break;case 37:this.$=c.createNode(d(g[a-2]),"node_op","op_lot",e[a-2],e[a]);this.$.isMath=!1;break;case 38:this.$=c.createNode(d(g[a-2]),"node_op","op_grt",e[a-2],e[a]);this.$.isMath=
!1;break;case 39:this.$=c.createNode(d(g[a-2]),"node_op","op_loe",e[a-2],e[a]);this.$.isMath=!1;break;case 40:this.$=c.createNode(d(g[a-2]),"node_op","op_gre",e[a-2],e[a]);this.$.isMath=!1;break;case 41:this.$=e[a];break;case 42:this.$=c.createNode(d(g[a-2]),"node_op","op_add",e[a-2],e[a]);this.$.isMath=!0;break;case 43:this.$=c.createNode(d(g[a-2]),"node_op","op_sub",e[a-2],e[a]);this.$.isMath=!0;break;case 44:this.$=e[a];break;case 45:this.$=c.createNode(d(g[a-2]),"node_op","op_mul",e[a-2],e[a]);
this.$.isMath=!0;break;case 46:this.$=c.createNode(d(g[a-2]),"node_op","op_div",e[a-2],e[a]);this.$.isMath=!0;break;case 47:this.$=c.createNode(d(g[a-2]),"node_op","op_mod",e[a-2],e[a]);this.$.isMath=!0;break;case 48:this.$=e[a];break;case 49:this.$=c.createNode(d(g[a-2]),"node_op","op_exp",e[a-2],e[a]);this.$.isMath=!0;break;case 50:this.$=e[a];break;case 51:this.$=c.createNode(d(g[a-1]),"node_op","op_not",e[a]);this.$.isMath=!1;break;case 52:this.$=e[a];break;case 53:this.$=c.createNode(d(g[a-1]),
"node_op","op_neg",e[a]);this.$.isMath=!0;break;case 54:this.$=e[a];break;case 55:this.$=e[a];break;case 56:this.$=e[a];break;case 57:this.$=e[a];this.$.isMath=!1;break;case 58:this.$=e[a];break;case 59:this.$=c.createNode(d(g[a-2]),"node_op","op_property",e[a-2],e[a]);this.$.isMath=!0;break;case 60:this.$=c.createNode(d(g[a-3]),"node_op","op_extvalue",e[a-3],e[a-1]);this.$.isMath=!0;break;case 61:this.$=c.createNode(d(g[a]),"node_var",e[a]);break;case 62:this.$=e[a];break;case 63:this.$=e[a];this.$.isMath=
!1;break;case 64:this.$=e[a];this.$.isMath=!1;break;case 65:this.$=e[a-1];break;case 66:this.$=e[a];this.$.isMath=!1;break;case 67:this.$=e[a];this.$.isMath=!1;break;case 68:this.$=e[a];this.$.isMath=!1;break;case 69:this.$=e[a];this.$.isMath=!0;break;case 70:this.$=c.createNode(d(g[a]),"node_const",null);break;case 71:this.$=c.createNode(d(g[a]),"node_const_bool",!0);break;case 72:this.$=c.createNode(d(g[a]),"node_const_bool",!1);break;case 73:this.$=c.createNode(d(g[a]),"node_str",e[a].substring(1,
e[a].length-1));break;case 74:this.$=c.createNode(d(g[a]),"node_const",parseFloat(e[a]));break;case 75:this.$=c.createNode(d(g[a]),"node_const",0/0);break;case 76:this.$=c.createNode(d(g[a]),"node_const",1/0);break;case 77:this.$=c.createNode(d(g[a-1]),"node_op","op_array",[]);break;case 78:this.$=c.createNode(d(g[a-2]),"node_op","op_array",e[a-1]);break;case 79:this.$=c.createNode(d(g[a-1]),"node_op","op_emptyobject",{});break;case 80:this.$=c.createNode(d(g[a-2]),"node_op","op_proplst_val",e[a-
1]);break;case 81:this.$=e[a];break;case 82:this.$=c.createNode(d(g[a-2]),"node_op","op_proplst",e[a-2],e[a]);break;case 83:this.$=c.createNode(d(g[a-2]),"node_op","op_prop",e[a-2],e[a]);break;case 84:this.$=e[a];break;case 85:this.$=e[a];break;case 86:this.$=e[a];break;case 87:this.$=c.createNode(d(g[a-1]),"node_op","op_execfun",e[a-1],e[a]);this.$.isMath=!0;break;case 88:this.$=c.createNode(d(g[a-2]),"node_op","op_execfun",e[a-2],e[a-1],e[a],!0);this.$.isMath=!1;break;case 89:this.$=c.createNode(d(g[a-
1]),"node_op","op_execfun",e[a-1],e[a]);this.$.isMath=!0;break;case 90:this.$=c.createNode(d(g[a-3]),"node_op","op_extvalue",e[a-3],e[a-1]);this.$.isMath=!0;break;case 91:this.$=c.createNode(d(g[a-2]),"node_op","op_property",e[a-2],e[a]);this.$.isMath=!0;break;case 92:this.$=[];break;case 93:this.$=e[a-1];break;case 94:this.$=[e[a]];break;case 95:this.$=e[a-2].concat(e[a]);break;case 96:this.$=c.createNode(d(g[a]),"node_var",e[a]);this.$.isMath=!0;break;case 97:this.$=e[a];this.$.isMath=!1;break;
case 98:this.$=[e[a]];break;case 99:this.$=e[a-2].concat(e[a]);break;case 100:this.$=c.createNode(d(g[a-3]),"node_op","op_function",[],e[a]);this.$.isMath=!1;break;case 101:this.$=c.createNode(d(g[a-4]),"node_op","op_function",e[a-2],e[a]);this.$.isMath=!1;break;case 102:this.$=c.createNode(d(g[a-5]),"node_op","op_map",e[a-3],e[a]);break;case 103:this.$=[e[a]];break;case 104:this.$=e[a-2].concat(e[a])}},table:[{3:1,4:2,5:[2,14],7:[2,14],8:[2,14],14:[2,14],15:[2,14],16:[2,14],17:[2,14],19:[2,14],20:[2,
14],21:[2,14],23:[2,14],26:[2,14],50:[2,14],51:[2,14],58:[2,14],65:[2,14],74:[2,14],75:[2,14],76:[2,14],77:[2,14],78:[2,14],79:[2,14],80:[2,14],82:[2,14],91:[2,14],93:[2,14]},{1:[3]},{5:[1,3],6:6,7:[1,13],8:[1,37],9:20,11:4,13:7,14:[1,14],15:[1,15],16:[1,21],17:[1,16],18:8,19:[1,17],20:[1,33],21:[1,18],22:9,23:[1,19],24:11,25:5,26:[1,12],28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:[1,59],51:[1,60],52:56,56:57,58:[1,58],59:26,60:27,61:29,62:30,63:31,65:[1,46],67:34,68:35,69:36,70:41,
71:42,72:43,73:44,74:[1,48],75:[1,49],76:[1,50],77:[1,51],78:[1,52],79:[1,53],80:[1,54],82:[1,45],91:[1,38],93:[1,39]},{1:[2,1]},{5:[2,13],7:[2,13],8:[2,13],14:[2,13],15:[2,13],16:[2,13],17:[2,13],19:[2,13],20:[2,13],21:[2,13],23:[2,13],26:[2,13],27:[2,13],50:[2,13],51:[2,13],58:[2,13],65:[2,13],74:[2,13],75:[2,13],76:[2,13],77:[2,13],78:[2,13],79:[2,13],80:[2,13],82:[2,13],91:[2,13],93:[2,13]},{5:[2,15],7:[2,15],8:[2,15],12:[2,15],14:[2,15],15:[2,15],16:[2,15],17:[2,15],19:[2,15],20:[2,15],21:[2,
15],23:[2,15],26:[2,15],27:[2,15],50:[2,15],51:[2,15],58:[2,15],65:[2,15],74:[2,15],75:[2,15],76:[2,15],77:[2,15],78:[2,15],79:[2,15],80:[2,15],82:[2,15],91:[2,15],93:[2,15]},{5:[2,16],7:[2,16],8:[2,16],12:[2,16],14:[2,16],15:[2,16],16:[2,16],17:[2,16],19:[2,16],20:[2,16],21:[2,16],23:[2,16],26:[2,16],27:[2,16],50:[2,16],51:[2,16],58:[2,16],65:[2,16],74:[2,16],75:[2,16],76:[2,16],77:[2,16],78:[2,16],79:[2,16],80:[2,16],82:[2,16],91:[2,16],93:[2,16]},{5:[2,17],7:[2,17],8:[2,17],12:[2,17],14:[2,17],
15:[2,17],16:[2,17],17:[2,17],19:[2,17],20:[2,17],21:[2,17],23:[2,17],26:[2,17],27:[2,17],50:[2,17],51:[2,17],58:[2,17],65:[2,17],74:[2,17],75:[2,17],76:[2,17],77:[2,17],78:[2,17],79:[2,17],80:[2,17],82:[2,17],91:[2,17],93:[2,17]},{5:[2,18],7:[2,18],8:[2,18],12:[2,18],14:[2,18],15:[2,18],16:[2,18],17:[2,18],19:[2,18],20:[2,18],21:[2,18],23:[2,18],26:[2,18],27:[2,18],50:[2,18],51:[2,18],58:[2,18],65:[2,18],74:[2,18],75:[2,18],76:[2,18],77:[2,18],78:[2,18],79:[2,18],80:[2,18],82:[2,18],91:[2,18],93:[2,
18]},{5:[2,19],7:[2,19],8:[2,19],12:[2,19],14:[2,19],15:[2,19],16:[2,19],17:[2,19],19:[2,19],20:[2,19],21:[2,19],23:[2,19],26:[2,19],27:[2,19],50:[2,19],51:[2,19],58:[2,19],65:[2,19],74:[2,19],75:[2,19],76:[2,19],77:[2,19],78:[2,19],79:[2,19],80:[2,19],82:[2,19],91:[2,19],93:[2,19]},{5:[2,20],7:[2,20],8:[2,20],12:[2,20],14:[2,20],15:[2,20],16:[2,20],17:[2,20],19:[2,20],20:[2,20],21:[2,20],23:[2,20],26:[2,20],27:[2,20],50:[2,20],51:[2,20],58:[2,20],65:[2,20],74:[2,20],75:[2,20],76:[2,20],77:[2,20],
78:[2,20],79:[2,20],80:[2,20],82:[2,20],91:[2,20],93:[2,20]},{5:[2,21],7:[2,21],8:[2,21],12:[2,21],14:[2,21],15:[2,21],16:[2,21],17:[2,21],19:[2,21],20:[2,21],21:[2,21],23:[2,21],26:[2,21],27:[2,21],50:[2,21],51:[2,21],58:[2,21],65:[2,21],74:[2,21],75:[2,21],76:[2,21],77:[2,21],78:[2,21],79:[2,21],80:[2,21],82:[2,21],91:[2,21],93:[2,21]},{4:61,7:[2,14],8:[2,14],14:[2,14],15:[2,14],16:[2,14],17:[2,14],19:[2,14],20:[2,14],21:[2,14],23:[2,14],26:[2,14],27:[2,14],50:[2,14],51:[2,14],58:[2,14],65:[2,14],
74:[2,14],75:[2,14],76:[2,14],77:[2,14],78:[2,14],79:[2,14],80:[2,14],82:[2,14],91:[2,14],93:[2,14]},{8:[1,62]},{8:[1,63]},{8:[1,64]},{6:6,7:[1,13],8:[1,37],9:20,11:65,13:7,14:[1,14],15:[1,15],16:[1,21],17:[1,16],18:8,19:[1,17],20:[1,33],21:[1,18],22:9,23:[1,19],24:11,25:5,26:[1,12],28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:[1,59],51:[1,60],52:56,56:57,58:[1,58],59:26,60:27,61:29,62:30,63:31,65:[1,46],67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:[1,48],75:[1,49],76:[1,50],77:[1,
51],78:[1,52],79:[1,53],80:[1,54],82:[1,45],91:[1,38],93:[1,39]},{20:[1,66]},{20:[1,67]},{8:[1,37],9:69,16:[1,68],20:[1,33],29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:[1,59],51:[1,60],52:56,56:57,58:[1,58],59:26,60:27,61:29,62:30,63:31,65:[1,46],67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:[1,48],75:[1,49],76:[1,50],77:[1,51],78:[1,52],79:[1,53],80:[1,54],82:[1,45],91:[1,38],93:[1,39]},{16:[1,70]},{5:[2,11],7:[2,11],8:[2,11],12:[2,11],14:[2,11],15:[2,11],16:[2,11],17:[2,11],19:[2,11],
20:[2,11],21:[2,11],23:[2,11],26:[2,11],27:[2,11],50:[2,11],51:[2,11],58:[2,11],65:[2,11],74:[2,11],75:[2,11],76:[2,11],77:[2,11],78:[2,11],79:[2,11],80:[2,11],82:[2,11],91:[2,11],93:[2,11]},{8:[2,23],10:[2,23],16:[2,23],32:[2,23],34:[2,23],35:[2,23],37:[2,23],39:[2,23],41:[2,23],42:[2,23],43:[2,23],45:[2,23],46:[2,23],47:[2,23],48:[2,23],50:[2,23],51:[2,23],53:[2,23],54:[2,23],55:[2,23],57:[2,23],64:[2,23],65:[2,23],66:[2,23],83:[2,23],86:[2,23]},{8:[2,24],10:[2,24],16:[2,24],32:[2,24],34:[2,24],
35:[2,24],37:[2,24],39:[2,24],41:[2,24],42:[2,24],43:[2,24],45:[2,24],46:[2,24],47:[2,24],48:[2,24],50:[2,24],51:[2,24],53:[2,24],54:[2,24],55:[2,24],57:[2,24],64:[2,24],65:[2,24],66:[2,24],83:[2,24],86:[2,24]},{8:[2,48],10:[2,48],16:[2,48],32:[1,71],34:[2,48],35:[2,48],37:[2,48],39:[2,48],41:[2,48],42:[2,48],43:[2,48],45:[2,48],46:[2,48],47:[2,48],48:[2,48],50:[2,48],51:[2,48],53:[2,48],54:[2,48],55:[2,48],57:[1,72],64:[2,48],65:[2,48],66:[2,48],83:[2,48],86:[2,48]},{8:[2,26],10:[2,26],16:[2,26],
32:[2,26],34:[1,73],35:[2,26],37:[1,74],39:[2,26],41:[2,26],42:[2,26],43:[2,26],45:[2,26],46:[2,26],47:[2,26],48:[2,26],50:[2,26],51:[2,26],53:[2,26],54:[2,26],55:[2,26],57:[2,26],64:[2,26],65:[2,26],66:[2,26],83:[2,26],86:[2,26]},{8:[1,78],10:[2,54],16:[2,54],32:[2,54],34:[2,54],35:[2,54],37:[2,54],39:[2,54],41:[2,54],42:[2,54],43:[2,54],45:[2,54],46:[2,54],47:[2,54],48:[2,54],50:[2,54],51:[2,54],53:[2,54],54:[2,54],55:[2,54],57:[2,54],64:[1,75],65:[1,76],66:[2,54],83:[2,54],86:[2,54],88:77},{8:[1,
78],10:[2,55],16:[2,55],32:[2,55],34:[2,55],35:[2,55],37:[2,55],39:[2,55],41:[2,55],42:[2,55],43:[2,55],45:[2,55],46:[2,55],47:[2,55],48:[2,55],50:[2,55],51:[2,55],53:[2,55],54:[2,55],55:[2,55],57:[2,55],64:[1,81],65:[1,80],66:[2,55],83:[2,55],86:[2,55],88:79},{8:[2,28],10:[2,28],16:[2,28],32:[2,28],34:[2,28],35:[2,28],37:[2,28],39:[1,82],41:[2,28],42:[2,28],43:[2,28],45:[2,28],46:[2,28],47:[2,28],48:[2,28],50:[2,28],51:[2,28],53:[2,28],54:[2,28],55:[2,28],57:[2,28],64:[2,28],65:[2,28],66:[2,28],
83:[2,28],86:[2,28]},{8:[2,56],10:[2,56],16:[2,56],32:[2,56],34:[2,56],35:[2,56],37:[2,56],39:[2,56],41:[2,56],42:[2,56],43:[2,56],45:[2,56],46:[2,56],47:[2,56],48:[2,56],50:[2,56],51:[2,56],53:[2,56],54:[2,56],55:[2,56],57:[2,56],64:[2,56],65:[2,56],66:[2,56],83:[2,56],86:[2,56]},{8:[2,57],10:[2,57],16:[2,57],32:[2,57],34:[2,57],35:[2,57],37:[2,57],39:[2,57],41:[2,57],42:[2,57],43:[2,57],45:[2,57],46:[2,57],47:[2,57],48:[2,57],50:[2,57],51:[2,57],53:[2,57],54:[2,57],55:[2,57],57:[2,57],64:[2,57],
65:[2,57],66:[2,57],83:[2,57],86:[2,57]},{8:[2,58],10:[2,58],16:[2,58],32:[2,58],34:[2,58],35:[2,58],37:[2,58],39:[2,58],41:[2,58],42:[2,58],43:[2,58],45:[2,58],46:[2,58],47:[2,58],48:[2,58],50:[2,58],51:[2,58],53:[2,58],54:[2,58],55:[2,58],57:[2,58],64:[2,58],65:[2,58],66:[2,58],83:[2,58],86:[2,58]},{8:[2,30],10:[2,30],16:[2,30],32:[2,30],34:[2,30],35:[2,30],37:[2,30],39:[2,30],41:[1,83],42:[1,84],43:[1,85],45:[2,30],46:[2,30],47:[2,30],48:[2,30],50:[2,30],51:[2,30],53:[2,30],54:[2,30],55:[2,30],
57:[2,30],64:[2,30],65:[2,30],66:[2,30],83:[2,30],86:[2,30]},{8:[2,61],10:[2,61],16:[2,61],32:[2,61],34:[2,61],35:[2,61],37:[2,61],39:[2,61],41:[2,61],42:[2,61],43:[2,61],45:[2,61],46:[2,61],47:[2,61],48:[2,61],50:[2,61],51:[2,61],53:[2,61],54:[2,61],55:[2,61],57:[2,61],64:[2,61],65:[2,61],66:[2,61],83:[2,61],86:[2,61]},{8:[2,62],10:[2,62],16:[2,62],32:[2,62],34:[2,62],35:[2,62],37:[2,62],39:[2,62],41:[2,62],42:[2,62],43:[2,62],45:[2,62],46:[2,62],47:[2,62],48:[2,62],50:[2,62],51:[2,62],53:[2,62],
54:[2,62],55:[2,62],57:[2,62],64:[2,62],65:[2,62],66:[2,62],83:[2,62],86:[2,62]},{8:[2,63],10:[2,63],16:[2,63],32:[2,63],34:[2,63],35:[2,63],37:[2,63],39:[2,63],41:[2,63],42:[2,63],43:[2,63],45:[2,63],46:[2,63],47:[2,63],48:[2,63],50:[2,63],51:[2,63],53:[2,63],54:[2,63],55:[2,63],57:[2,63],64:[2,63],65:[2,63],66:[2,63],83:[2,63],86:[2,63]},{8:[2,64],10:[2,64],16:[2,64],32:[2,64],34:[2,64],35:[2,64],37:[2,64],39:[2,64],41:[2,64],42:[2,64],43:[2,64],45:[2,64],46:[2,64],47:[2,64],48:[2,64],50:[2,64],
51:[2,64],53:[2,64],54:[2,64],55:[2,64],57:[2,64],64:[2,64],65:[2,64],66:[2,64],83:[2,64],86:[2,64]},{8:[1,37],9:86,20:[1,33],29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:[1,59],51:[1,60],52:56,56:57,58:[1,58],59:26,60:27,61:29,62:30,63:31,65:[1,46],67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:[1,48],75:[1,49],76:[1,50],77:[1,51],78:[1,52],79:[1,53],80:[1,54],82:[1,45],91:[1,38],93:[1,39]},{8:[1,87]},{8:[1,88]},{8:[2,32],10:[2,32],16:[2,32],32:[2,32],34:[2,32],35:[2,32],37:[2,32],39:[2,
32],41:[2,32],42:[2,32],43:[2,32],45:[1,89],46:[1,90],47:[1,91],48:[1,92],50:[2,32],51:[2,32],53:[2,32],54:[2,32],55:[2,32],57:[2,32],64:[2,32],65:[2,32],66:[2,32],83:[2,32],86:[2,32]},{8:[2,66],10:[2,66],16:[2,66],32:[2,66],34:[2,66],35:[2,66],37:[2,66],39:[2,66],41:[2,66],42:[2,66],43:[2,66],45:[2,66],46:[2,66],47:[2,66],48:[2,66],50:[2,66],51:[2,66],53:[2,66],54:[2,66],55:[2,66],57:[2,66],64:[2,66],65:[2,66],66:[2,66],83:[2,66],86:[2,66]},{8:[2,67],10:[2,67],16:[2,67],32:[2,67],34:[2,67],35:[2,
67],37:[2,67],39:[2,67],41:[2,67],42:[2,67],43:[2,67],45:[2,67],46:[2,67],47:[2,67],48:[2,67],50:[2,67],51:[2,67],53:[2,67],54:[2,67],55:[2,67],57:[2,67],64:[2,67],65:[2,67],66:[2,67],83:[2,67],86:[2,67]},{8:[2,68],10:[2,68],16:[2,68],32:[2,68],34:[2,68],35:[2,68],37:[2,68],39:[2,68],41:[2,68],42:[2,68],43:[2,68],45:[2,68],46:[2,68],47:[2,68],48:[2,68],50:[2,68],51:[2,68],53:[2,68],54:[2,68],55:[2,68],57:[2,68],64:[2,68],65:[2,68],66:[2,68],83:[2,68],86:[2,68]},{8:[2,69],10:[2,69],16:[2,69],32:[2,
69],34:[2,69],35:[2,69],37:[2,69],39:[2,69],41:[2,69],42:[2,69],43:[2,69],45:[2,69],46:[2,69],47:[2,69],48:[2,69],50:[2,69],51:[2,69],53:[2,69],54:[2,69],55:[2,69],57:[2,69],64:[2,69],65:[2,69],66:[2,69],83:[2,69],86:[2,69]},{20:[1,97],72:98,73:99,77:[1,51],78:[1,52],79:[1,53],80:[1,54],83:[1,93],84:94,85:95,87:96},{8:[1,37],20:[1,33],29:102,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:[1,59],51:[1,60],52:56,56:57,58:[1,58],59:26,60:27,61:29,62:30,63:31,65:[1,46],66:[1,100],67:34,68:35,69:36,
70:41,71:42,72:43,73:44,74:[1,48],75:[1,49],76:[1,50],77:[1,51],78:[1,52],79:[1,53],80:[1,54],81:101,82:[1,45],91:[1,38],93:[1,39]},{8:[2,36],10:[2,36],16:[2,36],32:[2,36],34:[2,36],35:[2,36],37:[2,36],39:[2,36],41:[2,36],42:[2,36],43:[2,36],45:[2,36],46:[2,36],47:[2,36],48:[2,36],50:[1,103],51:[1,104],53:[2,36],54:[2,36],55:[2,36],57:[2,36],64:[2,36],65:[2,36],66:[2,36],83:[2,36],86:[2,36]},{8:[2,70],10:[2,70],16:[2,70],32:[2,70],34:[2,70],35:[2,70],37:[2,70],39:[2,70],41:[2,70],42:[2,70],43:[2,
70],45:[2,70],46:[2,70],47:[2,70],48:[2,70],50:[2,70],51:[2,70],53:[2,70],54:[2,70],55:[2,70],57:[2,70],64:[2,70],65:[2,70],66:[2,70],83:[2,70],86:[2,70]},{8:[2,71],10:[2,71],16:[2,71],32:[2,71],34:[2,71],35:[2,71],37:[2,71],39:[2,71],41:[2,71],42:[2,71],43:[2,71],45:[2,71],46:[2,71],47:[2,71],48:[2,71],50:[2,71],51:[2,71],53:[2,71],54:[2,71],55:[2,71],57:[2,71],64:[2,71],65:[2,71],66:[2,71],83:[2,71],86:[2,71]},{8:[2,72],10:[2,72],16:[2,72],32:[2,72],34:[2,72],35:[2,72],37:[2,72],39:[2,72],41:[2,
72],42:[2,72],43:[2,72],45:[2,72],46:[2,72],47:[2,72],48:[2,72],50:[2,72],51:[2,72],53:[2,72],54:[2,72],55:[2,72],57:[2,72],64:[2,72],65:[2,72],66:[2,72],83:[2,72],86:[2,72]},{8:[2,73],10:[2,73],16:[2,73],32:[2,73],34:[2,73],35:[2,73],37:[2,73],39:[2,73],41:[2,73],42:[2,73],43:[2,73],45:[2,73],46:[2,73],47:[2,73],48:[2,73],50:[2,73],51:[2,73],53:[2,73],54:[2,73],55:[2,73],57:[2,73],64:[2,73],65:[2,73],66:[2,73],83:[2,73],86:[2,73]},{8:[2,74],10:[2,74],16:[2,74],32:[2,74],34:[2,74],35:[2,74],37:[2,
74],39:[2,74],41:[2,74],42:[2,74],43:[2,74],45:[2,74],46:[2,74],47:[2,74],48:[2,74],50:[2,74],51:[2,74],53:[2,74],54:[2,74],55:[2,74],57:[2,74],64:[2,74],65:[2,74],66:[2,74],83:[2,74],86:[2,74]},{8:[2,75],10:[2,75],16:[2,75],32:[2,75],34:[2,75],35:[2,75],37:[2,75],39:[2,75],41:[2,75],42:[2,75],43:[2,75],45:[2,75],46:[2,75],47:[2,75],48:[2,75],50:[2,75],51:[2,75],53:[2,75],54:[2,75],55:[2,75],57:[2,75],64:[2,75],65:[2,75],66:[2,75],83:[2,75],86:[2,75]},{8:[2,76],10:[2,76],16:[2,76],32:[2,76],34:[2,
76],35:[2,76],37:[2,76],39:[2,76],41:[2,76],42:[2,76],43:[2,76],45:[2,76],46:[2,76],47:[2,76],48:[2,76],50:[2,76],51:[2,76],53:[2,76],54:[2,76],55:[2,76],57:[2,76],64:[2,76],65:[2,76],66:[2,76],83:[2,76],86:[2,76]},{8:[2,41],10:[2,41],16:[2,41],32:[2,41],34:[2,41],35:[2,41],37:[2,41],39:[2,41],41:[2,41],42:[2,41],43:[2,41],45:[2,41],46:[2,41],47:[2,41],48:[2,41],50:[2,41],51:[2,41],53:[1,105],54:[1,106],55:[1,107],57:[2,41],64:[2,41],65:[2,41],66:[2,41],83:[2,41],86:[2,41]},{8:[2,44],10:[2,44],16:[2,
44],32:[2,44],34:[2,44],35:[2,44],37:[2,44],39:[2,44],41:[2,44],42:[2,44],43:[2,44],45:[2,44],46:[2,44],47:[2,44],48:[2,44],50:[2,44],51:[2,44],53:[2,44],54:[2,44],55:[2,44],57:[2,44],64:[2,44],65:[2,44],66:[2,44],83:[2,44],86:[2,44]},{8:[2,50],10:[2,50],16:[2,50],32:[2,50],34:[2,50],35:[2,50],37:[2,50],39:[2,50],41:[2,50],42:[2,50],43:[2,50],45:[2,50],46:[2,50],47:[2,50],48:[2,50],50:[2,50],51:[2,50],53:[2,50],54:[2,50],55:[2,50],57:[2,50],64:[2,50],65:[2,50],66:[2,50],83:[2,50],86:[2,50]},{8:[1,
37],20:[1,33],31:109,50:[1,59],51:[1,60],52:108,56:57,58:[1,58],59:26,60:27,61:29,62:30,63:31,65:[1,46],67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:[1,48],75:[1,49],76:[1,50],77:[1,51],78:[1,52],79:[1,53],80:[1,54],82:[1,45],91:[1,38],93:[1,39]},{8:[1,37],20:[1,33],31:109,50:[1,59],51:[1,60],52:110,56:57,58:[1,58],59:26,60:27,61:29,62:30,63:31,65:[1,46],67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:[1,48],75:[1,49],76:[1,50],77:[1,51],78:[1,52],79:[1,53],80:[1,54],82:[1,45],91:[1,38],93:[1,39]},{8:[1,
37],20:[1,33],31:109,50:[1,59],51:[1,60],52:111,56:57,58:[1,58],59:26,60:27,61:29,62:30,63:31,65:[1,46],67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:[1,48],75:[1,49],76:[1,50],77:[1,51],78:[1,52],79:[1,53],80:[1,54],82:[1,45],91:[1,38],93:[1,39]},{6:6,7:[1,13],8:[1,37],9:20,11:4,13:7,14:[1,14],15:[1,15],16:[1,21],17:[1,16],18:8,19:[1,17],20:[1,33],21:[1,18],22:9,23:[1,19],24:11,25:5,26:[1,12],27:[1,112],28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:[1,59],51:[1,60],52:56,56:57,58:[1,
58],59:26,60:27,61:29,62:30,63:31,65:[1,46],67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:[1,48],75:[1,49],76:[1,50],77:[1,51],78:[1,52],79:[1,53],80:[1,54],82:[1,45],91:[1,38],93:[1,39]},{8:[1,37],9:113,20:[1,33],29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:[1,59],51:[1,60],52:56,56:57,58:[1,58],59:26,60:27,61:29,62:30,63:31,65:[1,46],67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:[1,48],75:[1,49],76:[1,50],77:[1,51],78:[1,52],79:[1,53],80:[1,54],82:[1,45],91:[1,38],93:[1,39]},{8:[1,37],
9:114,20:[1,33],29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:[1,59],51:[1,60],52:56,56:57,58:[1,58],59:26,60:27,61:29,62:30,63:31,65:[1,46],67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:[1,48],75:[1,49],76:[1,50],77:[1,51],78:[1,52],79:[1,53],80:[1,54],82:[1,45],91:[1,38],93:[1,39]},{8:[1,37],9:115,20:[1,33],29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:[1,59],51:[1,60],52:56,56:57,58:[1,58],59:26,60:27,61:29,62:30,63:31,65:[1,46],67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:[1,
48],75:[1,49],76:[1,50],77:[1,51],78:[1,52],79:[1,53],80:[1,54],82:[1,45],91:[1,38],93:[1,39]},{14:[1,116]},{5:[2,7],7:[2,7],8:[2,7],12:[2,7],14:[2,7],15:[2,7],16:[2,7],17:[2,7],19:[2,7],20:[2,7],21:[2,7],23:[2,7],26:[2,7],27:[2,7],50:[2,7],51:[2,7],58:[2,7],65:[2,7],74:[2,7],75:[2,7],76:[2,7],77:[2,7],78:[2,7],79:[2,7],80:[2,7],82:[2,7],91:[2,7],93:[2,7]},{5:[2,8],7:[2,8],8:[2,8],12:[2,8],14:[2,8],15:[2,8],16:[2,8],17:[2,8],19:[2,8],20:[2,8],21:[2,8],23:[2,8],26:[2,8],27:[2,8],50:[2,8],51:[2,8],
58:[2,8],65:[2,8],74:[2,8],75:[2,8],76:[2,8],77:[2,8],78:[2,8],79:[2,8],80:[2,8],82:[2,8],91:[2,8],93:[2,8]},{5:[2,9],7:[2,9],8:[2,9],12:[2,9],14:[2,9],15:[2,9],16:[2,9],17:[2,9],19:[2,9],20:[2,9],21:[2,9],23:[2,9],26:[2,9],27:[2,9],50:[2,9],51:[2,9],58:[2,9],65:[2,9],74:[2,9],75:[2,9],76:[2,9],77:[2,9],78:[2,9],79:[2,9],80:[2,9],82:[2,9],91:[2,9],93:[2,9]},{16:[1,117]},{5:[2,22],7:[2,22],8:[2,22],12:[2,22],14:[2,22],15:[2,22],16:[2,22],17:[2,22],19:[2,22],20:[2,22],21:[2,22],23:[2,22],26:[2,22],
27:[2,22],50:[2,22],51:[2,22],58:[2,22],65:[2,22],74:[2,22],75:[2,22],76:[2,22],77:[2,22],78:[2,22],79:[2,22],80:[2,22],82:[2,22],91:[2,22],93:[2,22]},{8:[1,37],20:[1,33],29:118,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:[1,59],51:[1,60],52:56,56:57,58:[1,58],59:26,60:27,61:29,62:30,63:31,65:[1,46],67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:[1,48],75:[1,49],76:[1,50],77:[1,51],78:[1,52],79:[1,53],80:[1,54],82:[1,45],91:[1,38],93:[1,39]},{8:[1,37],20:[1,33],31:109,50:[1,59],51:[1,60],52:119,
56:57,58:[1,58],59:26,60:27,61:29,62:30,63:31,65:[1,46],67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:[1,48],75:[1,49],76:[1,50],77:[1,51],78:[1,52],79:[1,53],80:[1,54],82:[1,45],91:[1,38],93:[1,39]},{8:[1,37],20:[1,33],29:120,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:[1,59],51:[1,60],52:56,56:57,58:[1,58],59:26,60:27,61:29,62:30,63:31,65:[1,46],67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:[1,48],75:[1,49],76:[1,50],77:[1,51],78:[1,52],79:[1,53],80:[1,54],82:[1,45],91:[1,38],93:[1,39]},{8:[1,
37],20:[1,33],31:109,36:121,38:32,40:40,44:47,49:55,50:[1,59],51:[1,60],52:56,56:57,58:[1,58],59:26,60:27,61:29,62:30,63:31,65:[1,46],67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:[1,48],75:[1,49],76:[1,50],77:[1,51],78:[1,52],79:[1,53],80:[1,54],82:[1,45],91:[1,38],93:[1,39]},{20:[1,122]},{8:[1,37],9:123,20:[1,33],29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:[1,59],51:[1,60],52:56,56:57,58:[1,58],59:26,60:27,61:29,62:30,63:31,65:[1,46],67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:[1,48],
75:[1,49],76:[1,50],77:[1,51],78:[1,52],79:[1,53],80:[1,54],82:[1,45],91:[1,38],93:[1,39]},{8:[2,87],10:[2,87],16:[2,87],20:[1,126],32:[2,87],34:[2,87],35:[2,87],37:[2,87],39:[2,87],41:[2,87],42:[2,87],43:[2,87],45:[2,87],46:[2,87],47:[2,87],48:[2,87],50:[2,87],51:[2,87],53:[2,87],54:[2,87],55:[2,87],57:[2,87],64:[2,87],65:[2,87],66:[2,87],68:127,82:[1,45],83:[2,87],86:[2,87],89:124,90:125},{8:[1,37],10:[1,128],20:[1,33],29:102,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:[1,59],51:[1,60],52:56,
56:57,58:[1,58],59:26,60:27,61:29,62:30,63:31,65:[1,46],67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:[1,48],75:[1,49],76:[1,50],77:[1,51],78:[1,52],79:[1,53],80:[1,54],81:129,82:[1,45],91:[1,38],93:[1,39]},{8:[2,89],10:[2,89],16:[2,89],32:[2,89],34:[2,89],35:[2,89],37:[2,89],39:[2,89],41:[2,89],42:[2,89],43:[2,89],45:[2,89],46:[2,89],47:[2,89],48:[2,89],50:[2,89],51:[2,89],53:[2,89],54:[2,89],55:[2,89],57:[2,89],64:[2,89],65:[2,89],66:[2,89],83:[2,89],86:[2,89]},{8:[1,37],9:130,20:[1,33],29:22,30:23,
31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:[1,59],51:[1,60],52:56,56:57,58:[1,58],59:26,60:27,61:29,62:30,63:31,65:[1,46],67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:[1,48],75:[1,49],76:[1,50],77:[1,51],78:[1,52],79:[1,53],80:[1,54],82:[1,45],91:[1,38],93:[1,39]},{20:[1,131]},{8:[1,37],20:[1,33],31:109,38:132,40:40,44:47,49:55,50:[1,59],51:[1,60],52:56,56:57,58:[1,58],59:26,60:27,61:29,62:30,63:31,65:[1,46],67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:[1,48],75:[1,49],76:[1,50],77:[1,51],78:[1,
52],79:[1,53],80:[1,54],82:[1,45],91:[1,38],93:[1,39]},{8:[1,37],20:[1,33],31:109,40:133,44:47,49:55,50:[1,59],51:[1,60],52:56,56:57,58:[1,58],59:26,60:27,61:29,62:30,63:31,65:[1,46],67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:[1,48],75:[1,49],76:[1,50],77:[1,51],78:[1,52],79:[1,53],80:[1,54],82:[1,45],91:[1,38],93:[1,39]},{8:[1,37],20:[1,33],31:109,40:134,44:47,49:55,50:[1,59],51:[1,60],52:56,56:57,58:[1,58],59:26,60:27,61:29,62:30,63:31,65:[1,46],67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:[1,
48],75:[1,49],76:[1,50],77:[1,51],78:[1,52],79:[1,53],80:[1,54],82:[1,45],91:[1,38],93:[1,39]},{8:[1,37],20:[1,33],31:109,40:135,44:47,49:55,50:[1,59],51:[1,60],52:56,56:57,58:[1,58],59:26,60:27,61:29,62:30,63:31,65:[1,46],67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:[1,48],75:[1,49],76:[1,50],77:[1,51],78:[1,52],79:[1,53],80:[1,54],82:[1,45],91:[1,38],93:[1,39]},{10:[1,136]},{10:[1,137],20:[1,139],92:138},{20:[1,139],92:140},{8:[1,37],20:[1,33],31:109,44:141,49:55,50:[1,59],51:[1,60],52:56,56:57,
58:[1,58],59:26,60:27,61:29,62:30,63:31,65:[1,46],67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:[1,48],75:[1,49],76:[1,50],77:[1,51],78:[1,52],79:[1,53],80:[1,54],82:[1,45],91:[1,38],93:[1,39]},{8:[1,37],20:[1,33],31:109,44:142,49:55,50:[1,59],51:[1,60],52:56,56:57,58:[1,58],59:26,60:27,61:29,62:30,63:31,65:[1,46],67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:[1,48],75:[1,49],76:[1,50],77:[1,51],78:[1,52],79:[1,53],80:[1,54],82:[1,45],91:[1,38],93:[1,39]},{8:[1,37],20:[1,33],31:109,44:143,49:55,50:[1,
59],51:[1,60],52:56,56:57,58:[1,58],59:26,60:27,61:29,62:30,63:31,65:[1,46],67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:[1,48],75:[1,49],76:[1,50],77:[1,51],78:[1,52],79:[1,53],80:[1,54],82:[1,45],91:[1,38],93:[1,39]},{8:[1,37],20:[1,33],31:109,44:144,49:55,50:[1,59],51:[1,60],52:56,56:57,58:[1,58],59:26,60:27,61:29,62:30,63:31,65:[1,46],67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:[1,48],75:[1,49],76:[1,50],77:[1,51],78:[1,52],79:[1,53],80:[1,54],82:[1,45],91:[1,38],93:[1,39]},{8:[2,79],10:[2,79],
16:[2,79],32:[2,79],34:[2,79],35:[2,79],37:[2,79],39:[2,79],41:[2,79],42:[2,79],43:[2,79],45:[2,79],46:[2,79],47:[2,79],48:[2,79],50:[2,79],51:[2,79],53:[2,79],54:[2,79],55:[2,79],57:[2,79],64:[2,79],65:[2,79],66:[2,79],83:[2,79],86:[2,79]},{83:[1,145],86:[1,146]},{83:[2,81],86:[2,81]},{35:[1,147]},{35:[2,84]},{35:[2,85]},{35:[2,86]},{8:[2,77],10:[2,77],16:[2,77],32:[2,77],34:[2,77],35:[2,77],37:[2,77],39:[2,77],41:[2,77],42:[2,77],43:[2,77],45:[2,77],46:[2,77],47:[2,77],48:[2,77],50:[2,77],51:[2,
77],53:[2,77],54:[2,77],55:[2,77],57:[2,77],64:[2,77],65:[2,77],66:[2,77],83:[2,77],86:[2,77]},{66:[1,148],86:[1,149]},{10:[2,98],66:[2,98],86:[2,98]},{8:[1,37],20:[1,33],31:109,49:150,50:[1,59],51:[1,60],52:56,56:57,58:[1,58],59:26,60:27,61:29,62:30,63:31,65:[1,46],67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:[1,48],75:[1,49],76:[1,50],77:[1,51],78:[1,52],79:[1,53],80:[1,54],82:[1,45],91:[1,38],93:[1,39]},{8:[1,37],20:[1,33],31:109,49:151,50:[1,59],51:[1,60],52:56,56:57,58:[1,58],59:26,60:27,61:29,
62:30,63:31,65:[1,46],67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:[1,48],75:[1,49],76:[1,50],77:[1,51],78:[1,52],79:[1,53],80:[1,54],82:[1,45],91:[1,38],93:[1,39]},{8:[1,37],20:[1,33],31:109,50:[1,59],51:[1,60],52:152,56:57,58:[1,58],59:26,60:27,61:29,62:30,63:31,65:[1,46],67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:[1,48],75:[1,49],76:[1,50],77:[1,51],78:[1,52],79:[1,53],80:[1,54],82:[1,45],91:[1,38],93:[1,39]},{8:[1,37],20:[1,33],31:109,50:[1,59],51:[1,60],52:153,56:57,58:[1,58],59:26,60:27,61:29,
62:30,63:31,65:[1,46],67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:[1,48],75:[1,49],76:[1,50],77:[1,51],78:[1,52],79:[1,53],80:[1,54],82:[1,45],91:[1,38],93:[1,39]},{8:[1,37],20:[1,33],31:109,50:[1,59],51:[1,60],52:154,56:57,58:[1,58],59:26,60:27,61:29,62:30,63:31,65:[1,46],67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:[1,48],75:[1,49],76:[1,50],77:[1,51],78:[1,52],79:[1,53],80:[1,54],82:[1,45],91:[1,38],93:[1,39]},{8:[2,51],10:[2,51],16:[2,51],32:[2,51],34:[2,51],35:[2,51],37:[2,51],39:[2,51],41:[2,
51],42:[2,51],43:[2,51],45:[2,51],46:[2,51],47:[2,51],48:[2,51],50:[2,51],51:[2,51],53:[2,51],54:[2,51],55:[2,51],57:[2,51],64:[2,51],65:[2,51],66:[2,51],83:[2,51],86:[2,51]},{8:[2,48],10:[2,48],16:[2,48],32:[2,48],34:[2,48],35:[2,48],37:[2,48],39:[2,48],41:[2,48],42:[2,48],43:[2,48],45:[2,48],46:[2,48],47:[2,48],48:[2,48],50:[2,48],51:[2,48],53:[2,48],54:[2,48],55:[2,48],57:[1,72],64:[2,48],65:[2,48],66:[2,48],83:[2,48],86:[2,48]},{8:[2,52],10:[2,52],16:[2,52],32:[2,52],34:[2,52],35:[2,52],37:[2,
52],39:[2,52],41:[2,52],42:[2,52],43:[2,52],45:[2,52],46:[2,52],47:[2,52],48:[2,52],50:[2,52],51:[2,52],53:[2,52],54:[2,52],55:[2,52],57:[2,52],64:[2,52],65:[2,52],66:[2,52],83:[2,52],86:[2,52]},{8:[2,53],10:[2,53],16:[2,53],32:[2,53],34:[2,53],35:[2,53],37:[2,53],39:[2,53],41:[2,53],42:[2,53],43:[2,53],45:[2,53],46:[2,53],47:[2,53],48:[2,53],50:[2,53],51:[2,53],53:[2,53],54:[2,53],55:[2,53],57:[2,53],64:[2,53],65:[2,53],66:[2,53],83:[2,53],86:[2,53]},{5:[2,12],7:[2,12],8:[2,12],10:[2,12],12:[2,12],
14:[2,12],15:[2,12],16:[2,12],17:[2,12],19:[2,12],20:[2,12],21:[2,12],23:[2,12],26:[2,12],27:[2,12],32:[2,12],34:[2,12],35:[2,12],37:[2,12],39:[2,12],41:[2,12],42:[2,12],43:[2,12],45:[2,12],46:[2,12],47:[2,12],48:[2,12],50:[2,12],51:[2,12],53:[2,12],54:[2,12],55:[2,12],57:[2,12],58:[2,12],64:[2,12],65:[2,12],66:[2,12],74:[2,12],75:[2,12],76:[2,12],77:[2,12],78:[2,12],79:[2,12],80:[2,12],82:[2,12],83:[2,12],86:[2,12],91:[2,12],93:[2,12]},{10:[1,155]},{10:[1,156]},{16:[1,157]},{8:[1,158]},{5:[2,10],
7:[2,10],8:[2,10],12:[2,10],14:[2,10],15:[2,10],16:[2,10],17:[2,10],19:[2,10],20:[2,10],21:[2,10],23:[2,10],26:[2,10],27:[2,10],50:[2,10],51:[2,10],58:[2,10],65:[2,10],74:[2,10],75:[2,10],76:[2,10],77:[2,10],78:[2,10],79:[2,10],80:[2,10],82:[2,10],91:[2,10],93:[2,10]},{8:[2,25],10:[2,25],16:[2,25],32:[2,25],34:[2,25],35:[2,25],37:[2,25],39:[2,25],41:[2,25],42:[2,25],43:[2,25],45:[2,25],46:[2,25],47:[2,25],48:[2,25],50:[2,25],51:[2,25],53:[2,25],54:[2,25],55:[2,25],57:[2,25],64:[2,25],65:[2,25],66:[2,
25],83:[2,25],86:[2,25]},{8:[2,49],10:[2,49],16:[2,49],32:[2,49],34:[2,49],35:[2,49],37:[2,49],39:[2,49],41:[2,49],42:[2,49],43:[2,49],45:[2,49],46:[2,49],47:[2,49],48:[2,49],50:[2,49],51:[2,49],53:[2,49],54:[2,49],55:[2,49],57:[2,49],64:[2,49],65:[2,49],66:[2,49],83:[2,49],86:[2,49]},{35:[1,159]},{8:[2,29],10:[2,29],16:[2,29],32:[2,29],34:[2,29],35:[2,29],37:[2,29],39:[1,82],41:[2,29],42:[2,29],43:[2,29],45:[2,29],46:[2,29],47:[2,29],48:[2,29],50:[2,29],51:[2,29],53:[2,29],54:[2,29],55:[2,29],57:[2,
29],64:[2,29],65:[2,29],66:[2,29],83:[2,29],86:[2,29]},{8:[2,59],10:[2,59],16:[2,59],32:[2,59],34:[2,59],35:[2,59],37:[2,59],39:[2,59],41:[2,59],42:[2,59],43:[2,59],45:[2,59],46:[2,59],47:[2,59],48:[2,59],50:[2,59],51:[2,59],53:[2,59],54:[2,59],55:[2,59],57:[2,59],64:[2,59],65:[2,59],66:[2,59],83:[2,59],86:[2,59]},{66:[1,160]},{8:[2,88],10:[2,88],16:[2,88],32:[2,88],34:[2,88],35:[2,88],37:[2,88],39:[2,88],41:[2,88],42:[2,88],43:[2,88],45:[2,88],46:[2,88],47:[2,88],48:[2,88],50:[2,88],51:[2,88],53:[2,
88],54:[2,88],55:[2,88],57:[2,88],64:[2,88],65:[2,88],66:[2,88],83:[2,88],86:[1,161]},{8:[2,94],10:[2,94],16:[2,94],32:[2,94],34:[2,94],35:[2,94],37:[2,94],39:[2,94],41:[2,94],42:[2,94],43:[2,94],45:[2,94],46:[2,94],47:[2,94],48:[2,94],50:[2,94],51:[2,94],53:[2,94],54:[2,94],55:[2,94],57:[2,94],64:[2,94],65:[2,94],66:[2,94],83:[2,94],86:[2,94]},{8:[2,96],10:[2,96],16:[2,96],32:[2,96],34:[2,96],35:[2,96],37:[2,96],39:[2,96],41:[2,96],42:[2,96],43:[2,96],45:[2,96],46:[2,96],47:[2,96],48:[2,96],50:[2,
96],51:[2,96],53:[2,96],54:[2,96],55:[2,96],57:[2,96],64:[2,96],65:[2,96],66:[2,96],83:[2,96],86:[2,96]},{8:[2,97],10:[2,97],16:[2,97],32:[2,97],34:[2,97],35:[2,97],37:[2,97],39:[2,97],41:[2,97],42:[2,97],43:[2,97],45:[2,97],46:[2,97],47:[2,97],48:[2,97],50:[2,97],51:[2,97],53:[2,97],54:[2,97],55:[2,97],57:[2,97],64:[2,97],65:[2,97],66:[2,97],83:[2,97],86:[2,97]},{8:[2,92],10:[2,92],16:[2,92],20:[2,92],32:[2,92],34:[2,92],35:[2,92],37:[2,92],39:[2,92],41:[2,92],42:[2,92],43:[2,92],45:[2,92],46:[2,
92],47:[2,92],48:[2,92],50:[2,92],51:[2,92],53:[2,92],54:[2,92],55:[2,92],57:[2,92],64:[2,92],65:[2,92],66:[2,92],82:[2,92],83:[2,92],86:[2,92]},{10:[1,162],86:[1,149]},{66:[1,163]},{8:[2,91],10:[2,91],16:[2,91],32:[2,91],34:[2,91],35:[2,91],37:[2,91],39:[2,91],41:[2,91],42:[2,91],43:[2,91],45:[2,91],46:[2,91],47:[2,91],48:[2,91],50:[2,91],51:[2,91],53:[2,91],54:[2,91],55:[2,91],57:[2,91],64:[2,91],65:[2,91],66:[2,91],83:[2,91],86:[2,91]},{8:[2,31],10:[2,31],16:[2,31],32:[2,31],34:[2,31],35:[2,31],
37:[2,31],39:[2,31],41:[1,83],42:[1,84],43:[1,85],45:[2,31],46:[2,31],47:[2,31],48:[2,31],50:[2,31],51:[2,31],53:[2,31],54:[2,31],55:[2,31],57:[2,31],64:[2,31],65:[2,31],66:[2,31],83:[2,31],86:[2,31]},{8:[2,33],10:[2,33],16:[2,33],32:[2,33],34:[2,33],35:[2,33],37:[2,33],39:[2,33],41:[2,33],42:[2,33],43:[2,33],45:[1,89],46:[1,90],47:[1,91],48:[1,92],50:[2,33],51:[2,33],53:[2,33],54:[2,33],55:[2,33],57:[2,33],64:[2,33],65:[2,33],66:[2,33],83:[2,33],86:[2,33]},{8:[2,34],10:[2,34],16:[2,34],32:[2,34],
34:[2,34],35:[2,34],37:[2,34],39:[2,34],41:[2,34],42:[2,34],43:[2,34],45:[1,89],46:[1,90],47:[1,91],48:[1,92],50:[2,34],51:[2,34],53:[2,34],54:[2,34],55:[2,34],57:[2,34],64:[2,34],65:[2,34],66:[2,34],83:[2,34],86:[2,34]},{8:[2,35],10:[2,35],16:[2,35],32:[2,35],34:[2,35],35:[2,35],37:[2,35],39:[2,35],41:[2,35],42:[2,35],43:[2,35],45:[1,89],46:[1,90],47:[1,91],48:[1,92],50:[2,35],51:[2,35],53:[2,35],54:[2,35],55:[2,35],57:[2,35],64:[2,35],65:[2,35],66:[2,35],83:[2,35],86:[2,35]},{8:[2,65],10:[2,65],
16:[2,65],32:[2,65],34:[2,65],35:[2,65],37:[2,65],39:[2,65],41:[2,65],42:[2,65],43:[2,65],45:[2,65],46:[2,65],47:[2,65],48:[2,65],50:[2,65],51:[2,65],53:[2,65],54:[2,65],55:[2,65],57:[2,65],64:[2,65],65:[2,65],66:[2,65],83:[2,65],86:[2,65]},{25:164,26:[1,12]},{10:[1,165],86:[1,166]},{10:[2,103],86:[2,103]},{10:[1,167],86:[1,166]},{8:[2,37],10:[2,37],16:[2,37],32:[2,37],34:[2,37],35:[2,37],37:[2,37],39:[2,37],41:[2,37],42:[2,37],43:[2,37],45:[2,37],46:[2,37],47:[2,37],48:[2,37],50:[1,103],51:[1,104],
53:[2,37],54:[2,37],55:[2,37],57:[2,37],64:[2,37],65:[2,37],66:[2,37],83:[2,37],86:[2,37]},{8:[2,38],10:[2,38],16:[2,38],32:[2,38],34:[2,38],35:[2,38],37:[2,38],39:[2,38],41:[2,38],42:[2,38],43:[2,38],45:[2,38],46:[2,38],47:[2,38],48:[2,38],50:[1,103],51:[1,104],53:[2,38],54:[2,38],55:[2,38],57:[2,38],64:[2,38],65:[2,38],66:[2,38],83:[2,38],86:[2,38]},{8:[2,39],10:[2,39],16:[2,39],32:[2,39],34:[2,39],35:[2,39],37:[2,39],39:[2,39],41:[2,39],42:[2,39],43:[2,39],45:[2,39],46:[2,39],47:[2,39],48:[2,39],
50:[1,103],51:[1,104],53:[2,39],54:[2,39],55:[2,39],57:[2,39],64:[2,39],65:[2,39],66:[2,39],83:[2,39],86:[2,39]},{8:[2,40],10:[2,40],16:[2,40],32:[2,40],34:[2,40],35:[2,40],37:[2,40],39:[2,40],41:[2,40],42:[2,40],43:[2,40],45:[2,40],46:[2,40],47:[2,40],48:[2,40],50:[1,103],51:[1,104],53:[2,40],54:[2,40],55:[2,40],57:[2,40],64:[2,40],65:[2,40],66:[2,40],83:[2,40],86:[2,40]},{8:[2,80],10:[2,80],16:[2,80],32:[2,80],34:[2,80],35:[2,80],37:[2,80],39:[2,80],41:[2,80],42:[2,80],43:[2,80],45:[2,80],46:[2,
80],47:[2,80],48:[2,80],50:[2,80],51:[2,80],53:[2,80],54:[2,80],55:[2,80],57:[2,80],64:[2,80],65:[2,80],66:[2,80],83:[2,80],86:[2,80]},{20:[1,97],72:98,73:99,77:[1,51],78:[1,52],79:[1,53],80:[1,54],85:168,87:96},{8:[1,37],20:[1,33],29:169,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:[1,59],51:[1,60],52:56,56:57,58:[1,58],59:26,60:27,61:29,62:30,63:31,65:[1,46],67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:[1,48],75:[1,49],76:[1,50],77:[1,51],78:[1,52],79:[1,53],80:[1,54],82:[1,45],91:[1,38],
93:[1,39]},{8:[2,78],10:[2,78],16:[2,78],32:[2,78],34:[2,78],35:[2,78],37:[2,78],39:[2,78],41:[2,78],42:[2,78],43:[2,78],45:[2,78],46:[2,78],47:[2,78],48:[2,78],50:[2,78],51:[2,78],53:[2,78],54:[2,78],55:[2,78],57:[2,78],64:[2,78],65:[2,78],66:[2,78],83:[2,78],86:[2,78]},{8:[1,37],20:[1,33],29:170,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:[1,59],51:[1,60],52:56,56:57,58:[1,58],59:26,60:27,61:29,62:30,63:31,65:[1,46],67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:[1,48],75:[1,49],76:[1,50],
77:[1,51],78:[1,52],79:[1,53],80:[1,54],82:[1,45],91:[1,38],93:[1,39]},{8:[2,42],10:[2,42],16:[2,42],32:[2,42],34:[2,42],35:[2,42],37:[2,42],39:[2,42],41:[2,42],42:[2,42],43:[2,42],45:[2,42],46:[2,42],47:[2,42],48:[2,42],50:[2,42],51:[2,42],53:[1,105],54:[1,106],55:[1,107],57:[2,42],64:[2,42],65:[2,42],66:[2,42],83:[2,42],86:[2,42]},{8:[2,43],10:[2,43],16:[2,43],32:[2,43],34:[2,43],35:[2,43],37:[2,43],39:[2,43],41:[2,43],42:[2,43],43:[2,43],45:[2,43],46:[2,43],47:[2,43],48:[2,43],50:[2,43],51:[2,
43],53:[1,105],54:[1,106],55:[1,107],57:[2,43],64:[2,43],65:[2,43],66:[2,43],83:[2,43],86:[2,43]},{8:[2,45],10:[2,45],16:[2,45],32:[2,45],34:[2,45],35:[2,45],37:[2,45],39:[2,45],41:[2,45],42:[2,45],43:[2,45],45:[2,45],46:[2,45],47:[2,45],48:[2,45],50:[2,45],51:[2,45],53:[2,45],54:[2,45],55:[2,45],57:[2,45],64:[2,45],65:[2,45],66:[2,45],83:[2,45],86:[2,45]},{8:[2,46],10:[2,46],16:[2,46],32:[2,46],34:[2,46],35:[2,46],37:[2,46],39:[2,46],41:[2,46],42:[2,46],43:[2,46],45:[2,46],46:[2,46],47:[2,46],48:[2,
46],50:[2,46],51:[2,46],53:[2,46],54:[2,46],55:[2,46],57:[2,46],64:[2,46],65:[2,46],66:[2,46],83:[2,46],86:[2,46]},{8:[2,47],10:[2,47],16:[2,47],32:[2,47],34:[2,47],35:[2,47],37:[2,47],39:[2,47],41:[2,47],42:[2,47],43:[2,47],45:[2,47],46:[2,47],47:[2,47],48:[2,47],50:[2,47],51:[2,47],53:[2,47],54:[2,47],55:[2,47],57:[2,47],64:[2,47],65:[2,47],66:[2,47],83:[2,47],86:[2,47]},{6:6,7:[1,13],8:[1,37],9:20,11:171,13:7,14:[1,14],15:[1,15],16:[1,21],17:[1,16],18:8,19:[1,17],20:[1,33],21:[1,18],22:9,23:[1,
19],24:11,25:5,26:[1,12],28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:[1,59],51:[1,60],52:56,56:57,58:[1,58],59:26,60:27,61:29,62:30,63:31,65:[1,46],67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:[1,48],75:[1,49],76:[1,50],77:[1,51],78:[1,52],79:[1,53],80:[1,54],82:[1,45],91:[1,38],93:[1,39]},{6:6,7:[1,13],8:[1,37],9:20,11:172,13:7,14:[1,14],15:[1,15],16:[1,21],17:[1,16],18:8,19:[1,17],20:[1,33],21:[1,18],22:9,23:[1,19],24:11,25:5,26:[1,12],28:10,29:22,30:23,31:24,33:25,36:28,38:32,
40:40,44:47,49:55,50:[1,59],51:[1,60],52:56,56:57,58:[1,58],59:26,60:27,61:29,62:30,63:31,65:[1,46],67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:[1,48],75:[1,49],76:[1,50],77:[1,51],78:[1,52],79:[1,53],80:[1,54],82:[1,45],91:[1,38],93:[1,39]},{8:[1,37],9:173,20:[1,33],29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:[1,59],51:[1,60],52:56,56:57,58:[1,58],59:26,60:27,61:29,62:30,63:31,65:[1,46],67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:[1,48],75:[1,49],76:[1,50],77:[1,51],78:[1,52],79:[1,
53],80:[1,54],82:[1,45],91:[1,38],93:[1,39]},{8:[1,37],9:174,20:[1,33],29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:[1,59],51:[1,60],52:56,56:57,58:[1,58],59:26,60:27,61:29,62:30,63:31,65:[1,46],67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:[1,48],75:[1,49],76:[1,50],77:[1,51],78:[1,52],79:[1,53],80:[1,54],82:[1,45],91:[1,38],93:[1,39]},{8:[1,37],20:[1,33],29:175,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:[1,59],51:[1,60],52:56,56:57,58:[1,58],59:26,60:27,61:29,62:30,63:31,65:[1,
46],67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:[1,48],75:[1,49],76:[1,50],77:[1,51],78:[1,52],79:[1,53],80:[1,54],82:[1,45],91:[1,38],93:[1,39]},{8:[2,60],10:[2,60],16:[2,60],32:[2,60],34:[2,60],35:[2,60],37:[2,60],39:[2,60],41:[2,60],42:[2,60],43:[2,60],45:[2,60],46:[2,60],47:[2,60],48:[2,60],50:[2,60],51:[2,60],53:[2,60],54:[2,60],55:[2,60],57:[2,60],64:[2,60],65:[2,60],66:[2,60],83:[2,60],86:[2,60]},{20:[1,126],68:127,82:[1,45],90:176},{8:[2,93],10:[2,93],16:[2,93],20:[2,93],32:[2,93],34:[2,
93],35:[2,93],37:[2,93],39:[2,93],41:[2,93],42:[2,93],43:[2,93],45:[2,93],46:[2,93],47:[2,93],48:[2,93],50:[2,93],51:[2,93],53:[2,93],54:[2,93],55:[2,93],57:[2,93],64:[2,93],65:[2,93],66:[2,93],82:[2,93],83:[2,93],86:[2,93]},{8:[2,90],10:[2,90],16:[2,90],32:[2,90],34:[2,90],35:[2,90],37:[2,90],39:[2,90],41:[2,90],42:[2,90],43:[2,90],45:[2,90],46:[2,90],47:[2,90],48:[2,90],50:[2,90],51:[2,90],53:[2,90],54:[2,90],55:[2,90],57:[2,90],64:[2,90],65:[2,90],66:[2,90],83:[2,90],86:[2,90]},{8:[2,100],10:[2,
100],16:[2,100],32:[2,100],34:[2,100],35:[2,100],37:[2,100],39:[2,100],41:[2,100],42:[2,100],43:[2,100],45:[2,100],46:[2,100],47:[2,100],48:[2,100],50:[2,100],51:[2,100],53:[2,100],54:[2,100],55:[2,100],57:[2,100],64:[2,100],65:[2,100],66:[2,100],83:[2,100],86:[2,100]},{25:177,26:[1,12]},{20:[1,178]},{94:[1,179]},{83:[2,82],86:[2,82]},{83:[2,83],86:[2,83]},{10:[2,99],66:[2,99],86:[2,99]},{5:[2,2],7:[2,2],8:[2,2],12:[1,180],14:[2,2],15:[2,2],16:[2,2],17:[2,2],19:[2,2],20:[2,2],21:[2,2],23:[2,2],26:[2,
2],27:[2,2],50:[2,2],51:[2,2],58:[2,2],65:[2,2],74:[2,2],75:[2,2],76:[2,2],77:[2,2],78:[2,2],79:[2,2],80:[2,2],82:[2,2],91:[2,2],93:[2,2]},{5:[2,4],7:[2,4],8:[2,4],12:[2,4],14:[2,4],15:[2,4],16:[2,4],17:[2,4],19:[2,4],20:[2,4],21:[2,4],23:[2,4],26:[2,4],27:[2,4],50:[2,4],51:[2,4],58:[2,4],65:[2,4],74:[2,4],75:[2,4],76:[2,4],77:[2,4],78:[2,4],79:[2,4],80:[2,4],82:[2,4],91:[2,4],93:[2,4]},{16:[1,181]},{10:[1,182]},{8:[2,27],10:[2,27],16:[2,27],32:[2,27],34:[2,27],35:[2,27],37:[2,27],39:[2,27],41:[2,
27],42:[2,27],43:[2,27],45:[2,27],46:[2,27],47:[2,27],48:[2,27],50:[2,27],51:[2,27],53:[2,27],54:[2,27],55:[2,27],57:[2,27],64:[2,27],65:[2,27],66:[2,27],83:[2,27],86:[2,27]},{8:[2,95],10:[2,95],16:[2,95],32:[2,95],34:[2,95],35:[2,95],37:[2,95],39:[2,95],41:[2,95],42:[2,95],43:[2,95],45:[2,95],46:[2,95],47:[2,95],48:[2,95],50:[2,95],51:[2,95],53:[2,95],54:[2,95],55:[2,95],57:[2,95],64:[2,95],65:[2,95],66:[2,95],83:[2,95],86:[2,95]},{8:[2,101],10:[2,101],16:[2,101],32:[2,101],34:[2,101],35:[2,101],
37:[2,101],39:[2,101],41:[2,101],42:[2,101],43:[2,101],45:[2,101],46:[2,101],47:[2,101],48:[2,101],50:[2,101],51:[2,101],53:[2,101],54:[2,101],55:[2,101],57:[2,101],64:[2,101],65:[2,101],66:[2,101],83:[2,101],86:[2,101]},{10:[2,104],86:[2,104]},{8:[1,37],9:183,20:[1,33],29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:[1,59],51:[1,60],52:56,56:57,58:[1,58],59:26,60:27,61:29,62:30,63:31,65:[1,46],67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:[1,48],75:[1,49],76:[1,50],77:[1,51],78:[1,52],79:[1,
53],80:[1,54],82:[1,45],91:[1,38],93:[1,39]},{6:6,7:[1,13],8:[1,37],9:20,11:184,13:7,14:[1,14],15:[1,15],16:[1,21],17:[1,16],18:8,19:[1,17],20:[1,33],21:[1,18],22:9,23:[1,19],24:11,25:5,26:[1,12],28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:[1,59],51:[1,60],52:56,56:57,58:[1,58],59:26,60:27,61:29,62:30,63:31,65:[1,46],67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:[1,48],75:[1,49],76:[1,50],77:[1,51],78:[1,52],79:[1,53],80:[1,54],82:[1,45],91:[1,38],93:[1,39]},{8:[1,37],9:185,20:[1,
33],29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:[1,59],51:[1,60],52:56,56:57,58:[1,58],59:26,60:27,61:29,62:30,63:31,65:[1,46],67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:[1,48],75:[1,49],76:[1,50],77:[1,51],78:[1,52],79:[1,53],80:[1,54],82:[1,45],91:[1,38],93:[1,39]},{16:[1,186]},{8:[2,102],10:[2,102],16:[2,102],32:[2,102],34:[2,102],35:[2,102],37:[2,102],39:[2,102],41:[2,102],42:[2,102],43:[2,102],45:[2,102],46:[2,102],47:[2,102],48:[2,102],50:[2,102],51:[2,102],53:[2,102],54:[2,102],
55:[2,102],57:[2,102],64:[2,102],65:[2,102],66:[2,102],83:[2,102],86:[2,102]},{5:[2,3],7:[2,3],8:[2,3],12:[2,3],14:[2,3],15:[2,3],16:[2,3],17:[2,3],19:[2,3],20:[2,3],21:[2,3],23:[2,3],26:[2,3],27:[2,3],50:[2,3],51:[2,3],58:[2,3],65:[2,3],74:[2,3],75:[2,3],76:[2,3],77:[2,3],78:[2,3],79:[2,3],80:[2,3],82:[2,3],91:[2,3],93:[2,3]},{10:[1,187]},{5:[2,6],7:[2,6],8:[2,6],12:[2,6],14:[2,6],15:[2,6],16:[2,6],17:[2,6],19:[2,6],20:[2,6],21:[2,6],23:[2,6],26:[2,6],27:[2,6],50:[2,6],51:[2,6],58:[2,6],65:[2,6],
74:[2,6],75:[2,6],76:[2,6],77:[2,6],78:[2,6],79:[2,6],80:[2,6],82:[2,6],91:[2,6],93:[2,6]},{6:6,7:[1,13],8:[1,37],9:20,11:188,13:7,14:[1,14],15:[1,15],16:[1,21],17:[1,16],18:8,19:[1,17],20:[1,33],21:[1,18],22:9,23:[1,19],24:11,25:5,26:[1,12],28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:[1,59],51:[1,60],52:56,56:57,58:[1,58],59:26,60:27,61:29,62:30,63:31,65:[1,46],67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:[1,48],75:[1,49],76:[1,50],77:[1,51],78:[1,52],79:[1,53],80:[1,54],82:[1,
45],91:[1,38],93:[1,39]},{5:[2,5],7:[2,5],8:[2,5],12:[2,5],14:[2,5],15:[2,5],16:[2,5],17:[2,5],19:[2,5],20:[2,5],21:[2,5],23:[2,5],26:[2,5],27:[2,5],50:[2,5],51:[2,5],58:[2,5],65:[2,5],74:[2,5],75:[2,5],76:[2,5],77:[2,5],78:[2,5],79:[2,5],80:[2,5],82:[2,5],91:[2,5],93:[2,5]}],defaultActions:{3:[2,1],97:[2,84],98:[2,85],99:[2,86]},parseError:function(a,b){if(!b.recoverable)throw Error(a);this.trace(a)},parse:function(a){var b=[0],f=[null],c=[],d=this.table,e="",k=0,n=0,p=0,g=c.slice.call(arguments,
1);this.lexer.setInput(a);this.lexer.yy=this.yy;this.yy.lexer=this.lexer;this.yy.parser=this;"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var h=this.lexer.yylloc;c.push(h);var s=this.lexer.options&&this.lexer.options.ranges;this.parseError="function"==typeof this.yy.parseError?this.yy.parseError:Object.getPrototypeOf(this).parseError;for(var l,m,v,q,M,H,I,E,K={};;){v=b[b.length-1];if(this.defaultActions[v])q=this.defaultActions[v];else{if(null===l||"undefined"==typeof l)q=void 0,
l=(q=this.lexer.lex()||1,"number"!=typeof q&&(q=this.symbols_[q]||q),q);q=d[v]&&d[v][l]}if("undefined"==typeof q||!q.length||!q[0]){var R="";E=[];for(H in d[v])this.terminals_[H]&&2<H&&E.push("'"+this.terminals_[H]+"'");R=this.lexer.showPosition?"Parse error on line "+(k+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+E.join(", ")+", got '"+(this.terminals_[l]||l)+"'":"Parse error on line "+(k+1)+": Unexpected "+(1==l?"end of input":"'"+(this.terminals_[l]||l)+"'");this.parseError(R,{text:this.lexer.match,
token:this.terminals_[l]||l,line:this.lexer.yylineno,loc:h,expected:E})}if(q[0]instanceof Array&&1<q.length)throw Error("Parse Error: multiple actions possible at state: "+v+", token: "+l);switch(q[0]){case 1:b.push(l);f.push(this.lexer.yytext);c.push(this.lexer.yylloc);b.push(q[1]);l=null;m?(l=m,m=null):(n=this.lexer.yyleng,e=this.lexer.yytext,k=this.lexer.yylineno,h=this.lexer.yylloc,0<p&&p--);break;case 2:if(I=this.productions_[q[1]][1],K.$=f[f.length-I],K._$={first_line:c[c.length-(I||1)].first_line,
last_line:c[c.length-1].last_line,first_column:c[c.length-(I||1)].first_column,last_column:c[c.length-1].last_column},s&&(K._$.range=[c[c.length-(I||1)].range[0],c[c.length-1].range[1]]),M=this.performAction.apply(K,[e,n,k,this.yy,q[1],f,c].concat(g)),"undefined"!=typeof M)return M;I&&(b=b.slice(0,-2*I),f=f.slice(0,-1*I),c=c.slice(0,-1*I));b.push(this.productions_[q[1]][0]);f.push(K.$);c.push(K._$);v=d[b[b.length-2]][b[b.length-1]];b.push(v);break;case 3:return!0}}return!0}},c={node:function(a,b,
f){return{type:a,value:b,children:f}},createNode:function(a,b,f){var c,d=this.node(b,f,[]);for(c=3;c<arguments.length;c++)d.children.push(arguments[c]);return d.line=a[0],d.col=a[1],d.eline=a[2],d.ecol=a[3],d}},d=function(a){return[a.first_line,a.first_column,a.last_line,a.last_column]},k=function(){return{EOF:1,parseError:function(a,b){if(!this.yy.parser)throw Error(a);this.yy.parser.parseError(a,b)},setInput:function(a){return this._input=a,this._more=this._backtrack=this.done=!1,this.yylineno=
this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var a=this._input[0];this.yytext+=a;this.yyleng++;this.offset++;this.match+=a;this.matched+=a;return a.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),
a},unput:function(a){var b=a.length,f=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input;this.yytext=this.yytext.substr(0,this.yytext.length-b-1);this.offset-=b;a=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1);this.matched=this.matched.substr(0,this.matched.length-1);f.length-1&&(this.yylineno-=f.length-1);var c=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:f?
(f.length===a.length?this.yylloc.first_column:0)+a[a.length-f.length].length-f[0].length:this.yylloc.first_column-b},this.options.ranges&&(this.yylloc.range=[c[0],c[0]+this.yyleng-b]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+
this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(20<a.length?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;return 20>a.length&&(a+=this._input.substr(0,20-a.length)),(a.substr(0,20)+(20<a.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),b=Array(a.length+1).join("-");return a+
this.upcomingInput()+"\n"+b+"^"},test_match:function(a,b){var f,c,d;if(this.options.backtrack_lexer&&(d={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&
(d.yylloc.range=this.yylloc.range.slice(0))),c=a[0].match(/(?:\r\n?|\n).*/g),c&&(this.yylineno+=c.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:c?c[c.length-1].length-c[c.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+a[0].length},this.yytext+=a[0],this.match+=a[0],this.matches=a,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,
this._backtrack=!1,this._input=this._input.slice(a[0].length),this.matched+=a[0],f=this.performAction.call(this,this.yy,this,b,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),f)return f;if(this._backtrack)for(var e in d)this[e]=d[e];return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,b,f,c;this._more||(this.yytext="",this.match="");for(var d=this._currentRules(),e=0;e<d.length;e++)if(f=this._input.match(this.rules[d[e]]),
f&&(!b||f[0].length>b[0].length)){if(b=f,c=e,this.options.backtrack_lexer){if(a=this.test_match(f,d[e]),!1!==a)return a;if(this._backtrack){b=!1;continue}return!1}if(!this.options.flex)break}return b?(a=this.test_match(b,d[c]),!1!==a?a:!1):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return a?a:this.lex()},begin:function(a){this.conditionStack.push(a)},
popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(a){return a=this.conditionStack.length-1-Math.abs(a||0),0<=a?this.conditionStack[a]:"INITIAL"},pushState:function(a){this.begin(a)},stateStackSize:function(){return this.conditionStack.length},
options:{},performAction:function(a,b,f,c){switch(f){case 1:return 78;case 2:return 78;case 3:return 77;case 4:return 77;case 7:return 7;case 8:return 12;case 9:return 14;case 10:return 17;case 11:return 15;case 12:return 91;case 13:return 93;case 14:return 19;case 15:return 23;case 16:return 21;case 17:return 75;case 18:return 76;case 19:return 74;case 20:return 80;case 21:return 94;case 22:return 82;case 23:return 83;case 24:return 26;case 25:return 27;case 26:return 16;case 27:return"#";case 28:return 34;
case 29:return 35;case 30:return 79;case 31:return 64;case 32:return 65;case 33:return 66;case 34:return 8;case 35:return 10;case 36:return 58;case 37:return 57;case 38:return 53;case 39:return 54;case 40:return 55;case 41:return 50;case 42:return 51;case 43:return 47;case 44:return 45;case 45:return 48;case 46:return 46;case 47:return 41;case 48:return 43;case 49:return 42;case 50:return 39;case 51:return 37;case 52:return 32;case 53:return 86;case 54:return 5;case 55:return 20;case 56:return"INVALID"}},
rules:[/^(?:\s+)/,/^(?:[0-9]+\.[0-9]*|[0-9]*\.[0-9]+\b)/,/^(?:[0-9]+)/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:\/\/.*)/,/^(?:\/\*(.|\n|\r)*?\*\/)/,/^(?:if\b)/,/^(?:else\b)/,/^(?:while\b)/,/^(?:do\b)/,/^(?:for\b)/,/^(?:function\b)/,/^(?:map\b)/,/^(?:use\b)/,/^(?:return\b)/,/^(?:delete\b)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:Infinity\b)/,/^(?:->)/,/^(?:<<)/,/^(?:>>)/,/^(?:\{)/,/^(?:\})/,/^(?:;)/,/^(?:#)/,/^(?:\?)/,/^(?::)/,/^(?:NaN\b)/,/^(?:\.)/,/^(?:\[)/,/^(?:\])/,/^(?:\()/,
/^(?:\))/,/^(?:!)/,/^(?:\^)/,/^(?:\*)/,/^(?:\/)/,/^(?:%)/,/^(?:\+)/,/^(?:-)/,/^(?:<=)/,/^(?:<)/,/^(?:>=)/,/^(?:>)/,/^(?:==)/,/^(?:~=)/,/^(?:!=)/,/^(?:&&)/,/^(?:\|\|)/,/^(?:=)/,/^(?:,)/,/^(?:$)/,/^(?:[A-Za-z_\$][A-Za-z0-9_]*)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56],inclusive:!0}}}}();return b.lexer=k,a.prototype=b,b.Parser=a,new a}();return"undefined"!=
typeof P&&"undefined"!=typeof exports&&(exports.parser=c,exports.Parser=c.Parser,exports.parse=function(){return c.parse.apply(c,arguments)},exports.main=function(a){a[1]||(console.log("Usage: "+a[0]+" FILE"),process.exit(1));a=P("fs").readFileSync(P("path").normalize(a[1]),"utf8");return exports.parser.parse(a)},"undefined"!=typeof module&&P.main===module&&exports.main(process.argv.slice(1))),c.yy.parseError=c.parseError,m.JessieCode});E("base/ticks","jxg math/math math/geometry base/constants base/element base/coords utils/type base/text".split(" "),
function(m,q,l,e,h,g,d,b){return m.Ticks=function(a,b,c){if(this.constructor(a.board,c,e.OBJECT_TYPE_TICKS,e.OBJECT_CLASS_OTHER),this.line=a,this.board=this.line.board,this.ticksFunction=null,this.fixedTicks=null,this.equidistant=!1,d.isFunction(b))throw this.ticksFunction=b,Error("Function arguments are no longer supported.");d.isArray(b)?this.fixedTicks=b:((Math.abs(b)<q.eps||0>b)&&(b=c.defaultdistance),this.ticksFunction=function(){return b},this.equidistant=!0);this.minTicksDistance=c.minticksdistance;
this.ticks=[];this.ticksDelta=1;this.labels=[];this.labelsRepo=[];this.labelCounter=0;this.id=this.line.addTicks(this);this.board.setId(this,"Ti")},m.Ticks.prototype=new h,m.extend(m.Ticks.prototype,{hasPoint:function(a,b){var c,f,d=this.ticks&&this.ticks.length||0,p=this.board.options.precision.hasPoint;if(!this.line.visProp.scalable||0!==this.line.stdform[1]&&0!==this.line.stdform[2]&&this.line.type!==e.OBJECT_TYPE_AXIS)return!1;for(c=0;d>c;c++)if(f=this.ticks[c],f[2]&&!(0===this.line.stdform[1]&&
Math.abs(f[0][0]-this.line.point1.coords.scrCoords[1])<q.eps||0===this.line.stdform[2]&&Math.abs(f[1][0]-this.line.point1.coords.scrCoords[2])<q.eps)&&(1<=Math.abs(f[0][0]-f[0][1])||1<=Math.abs(f[1][0]-f[1][1])))if(0===this.line.stdform[1]){if(Math.abs(b-.5*(f[1][0]+f[1][1]))<2*p&&f[0][0]-p<a&&a<f[0][1]+p)return!0}else if(0===this.line.stdform[2]&&Math.abs(a-.5*(f[0][0]+f[0][1]))<2*p&&f[1][0]-p<b&&b<f[1][1]+p)return!0;return!1},setPositionDirectly:function(a,b,c){var f,d;b=new g(a,b,this.board);a=
new g(a,c,this.board);c=this.board.getBoundingBox();return this.line.visProp.scalable?(Math.abs(this.line.stdform[1])<q.eps&&Math.abs(b.usrCoords[1]*a.usrCoords[1])>q.eps?(f=a.usrCoords[1]/b.usrCoords[1],c[0]*=f,c[2]*=f,this.board.setBoundingBox(c,!1)):Math.abs(this.line.stdform[2])<q.eps&&Math.abs(b.usrCoords[2]*a.usrCoords[2])>q.eps&&(d=a.usrCoords[2]/b.usrCoords[2],c[3]*=d,c[1]*=d,this.board.setBoundingBox(c,!1)),this):this},calculateTicksCoordinates:function(){var a,b,c=this.labelsRepo.length;
if(this.setTicksSizeVariables(),!(Math.abs(this.dx)<q.eps&&Math.abs(this.dy)<q.eps))for(a=this.getZeroCoordinates(),b=this.getLowerAndUpperBounds(a),this.removeTickLabels(),this.ticks=[],this.labels=[],this.equidistant?this.generateEquidistantTicks(a,b):this.generateFixedTicks(a,b),a=c;a<this.labelsRepo.length;a++)this.labelsRepo[a].setAttribute({visible:!1})},setTicksSizeVariables:function(){var a,b=.5*this.visProp.majorheight,c=.5*this.visProp.minorheight;this.dxMaj=this.line.stdform[1];this.dyMaj=
this.line.stdform[2];this.dxMin=this.dxMaj;this.dyMin=this.dyMaj;this.dx=this.dxMaj;this.dy=this.dyMaj;a=Math.sqrt(this.dxMaj*this.dxMaj*this.board.unitX*this.board.unitX+this.dyMaj*this.dyMaj*this.board.unitY*this.board.unitY);this.dxMaj=b/a*this.dxMaj*this.board.unitX;this.dyMaj=b/a*this.dyMaj*this.board.unitY;this.dxMin=c/a*this.dxMin*this.board.unitX;this.dyMin=c/a*this.dyMin*this.board.unitY;this.minStyle="finite";0>this.visProp.minorheight&&(this.minStyle="infinite");this.majStyle="finite";
0>this.visProp.majorheight&&(this.majStyle="infinite")},getZeroCoordinates:function(){return this.line.type===e.OBJECT_TYPE_AXIS?l.projectPointToLine({coords:{usrCoords:[1,0,0]}},this.line,this.board):"right"===this.visProp.anchor?this.line.point2.coords:"middle"===this.visProp.anchor?new g(e.COORDS_BY_USER,[(this.line.point1.coords.usrCoords[1]+this.line.point2.coords.usrCoords[1])/2,(this.line.point1.coords.usrCoords[2]+this.line.point2.coords.usrCoords[2])/2],this.board):this.line.point1.coords},
getLowerAndUpperBounds:function(a){var b,c,f,d,p=new g(e.COORDS_BY_USER,this.line.point1.coords.usrCoords,this.board),h=new g(e.COORDS_BY_USER,this.line.point2.coords.usrCoords,this.board),m=Math.abs(p.usrCoords[0])>=q.eps&&0<=p.scrCoords[1]&&p.scrCoords[1]<=this.board.canvasWidth&&0<=p.scrCoords[2]&&p.scrCoords[2]<=this.board.canvasHeight,r=Math.abs(h.usrCoords[0])>=q.eps&&0<=h.scrCoords[1]&&h.scrCoords[1]<=this.board.canvasWidth&&0<=h.scrCoords[2]&&h.scrCoords[2]<=this.board.canvasHeight;return l.calcLineDelimitingPoints(this.line,
p,h),f=this.getDistanceFromZero(a,p),d=this.getDistanceFromZero(a,h),d>f?(b=f,this.line.visProp.straightfirst||!m||this.visProp.includeboundaries||(b+=q.eps),c=d,this.line.visProp.straightlast||!r||this.visProp.includeboundaries||(c-=q.eps)):f>d?(b=d,this.line.visProp.straightlast||!r||this.visProp.includeboundaries||(b+=q.eps),c=f,this.line.visProp.straightfirst||!m||this.visProp.includeboundaries||(c-=q.eps)):(b=0,c=0),{lower:b,upper:c}},getDistanceFromZero:function(a,b){var c=a.distance(e.COORDS_BY_USER,
b);return this.line.type===e.OBJECT_TYPE_AXIS?(a.usrCoords[1]>b.usrCoords[1]||Math.abs(a.usrCoords[1]-b.usrCoords[1])<q.eps&&a.usrCoords[2]>b.usrCoords[2])&&(c*=-1):"right"===this.visProp.anchor?l.isSameDirection(a,this.line.point1.coords,b)&&(c*=-1):l.isSameDirection(a,this.line.point2.coords,b)||(c*=-1),c},generateEquidistantTicks:function(a,b){var c,f=this.line.point1,d=(this.line.point2,this.getXandYdeltas());c=f.coords.distance(e.COORDS_BY_SCREEN,new g(e.COORDS_BY_USER,[f.coords.usrCoords[1]+
d.x,f.coords.usrCoords[2]+d.y],this.board));f=this.equidistant?this.ticksFunction(1):this.ticksDelta;f*=this.visProp.scale;this.visProp.insertticks&&this.minTicksDistance>q.eps?f*=this.adjustTickDistance(f,c,a,d):this.visProp.insertticks||(f/=this.visProp.minorticks+1);this.ticksDelta=f;c=0;for(this.visProp.drawzero||(c=f);c<=b.upper;)c>=b.lower&&this.processTickPosition(a,c,f,d),c+=f;for(c=-f;c>=b.lower;)c<=b.upper&&this.processTickPosition(a,c,f,d),c-=f},adjustTickDistance:function(a,b,c,f){for(var d,
p=1,h=5;b>4*this.minTicksDistance;)p/=10,b=c.usrCoords[1]+f.x*a*p,d=c.usrCoords[2]+f.y*a*p,b=c.distance(e.COORDS_BY_SCREEN,new g(e.COORDS_BY_USER,[b,d],this.board));for(;b<=this.minTicksDistance;)p*=h,h=5===h?2:5,b=c.usrCoords[1]+f.x*a*p,d=c.usrCoords[2]+f.y*a*p,b=c.distance(e.COORDS_BY_SCREEN,new g(e.COORDS_BY_USER,[b,d],this.board));return p},processTickPosition:function(a,b,c,f){var d;f=new g(e.COORDS_BY_USER,[a.usrCoords[1]+b*f.x,a.usrCoords[2]+b*f.y],this.board);f.major=0===Math.round(b/c)%(this.visProp.minorticks+
1);b=this.tickEndings(f,f.major);3===b.length&&(this.ticks.push(b),f.major&&this.visProp.drawlabels?(d=this.generateLabelText(f,a),this.labels.push(this.generateLabel(d,f,this.ticks.length))):this.labels.push(null))},generateFixedTicks:function(a,b){var c,f,n,p,h=d.isArray(this.visProp.labels),l=this.getXandYdeltas();for(n=0;n<this.fixedTicks.length;n++)c=a.usrCoords[1]+this.fixedTicks[n]*l.x,p=a.usrCoords[2]+this.fixedTicks[n]*l.y,c=new g(e.COORDS_BY_USER,[c,p],this.board),p=this.tickEndings(c,!0),
3===p.length&&this.fixedTicks[n]>=b.lower&&this.fixedTicks[n]<=b.upper&&(this.ticks.push(p),!this.visProp.drawlabels||h&&!d.exists(this.visProp.labels[n])?this.labels.push(null):(f=h?this.visProp.labels[n]:this.fixedTicks[n],this.labels.push(this.generateLabel(this.generateLabelText(c,a,f),c,n))))},getXandYdeltas:function(){var a,b,c=this.line.point1.Dist(this.line.point2);return this.line.type===e.OBJECT_TYPE_AXIS?(a=this.line.point1.coords.usrCoords,b=this.line.point2.coords.usrCoords,(a[1]>b[1]||
Math.abs(a[1]-b[1])<q.eps&&a[2]>b[2])&&(a=this.line.point2.coords.usrCoords,b=this.line.point1.coords.usrCoords)):(a=this.line.point1.coords.usrCoords,b=this.line.point2.coords.usrCoords),{x:(b[1]-a[1])/c,y:(b[2]-a[2])/c}},tickEndings:function(a,b){var c,f,d,e,g,h,m=this.board.canvasWidth,y=this.board.canvasHeight,x=[-1E3*m,-1E3*y],u=[-1E3*m,-1E3*y],t=!1;return c=a.scrCoords,b?(e=this.dxMaj,g=this.dyMaj,h=this.majStyle):(e=this.dxMin,g=this.dyMin,h=this.minStyle),f=[-g*c[1]-e*c[2],g,e],"infinite"===
h?(d=l.meetLineBoard(f,this.board),x[0]=d[0].scrCoords[1],x[1]=d[1].scrCoords[1],u[0]=d[0].scrCoords[2],u[1]=d[1].scrCoords[2]):(x[0]=c[1]+e*this.visProp.tickendings[0],u[0]=c[2]-g*this.visProp.tickendings[0],x[1]=c[1]-e*this.visProp.tickendings[1],u[1]=c[2]+g*this.visProp.tickendings[1]),t=0<=x[0]&&x[0]<=m&&0<=u[0]&&u[0]<=y||0<=x[1]&&x[1]<=m&&0<=u[1]&&u[1]<=y,t?[x,u,b]:[]},generateLabelText:function(a,b,c){var f;a=this.getDistanceFromZero(b,a);return Math.abs(a)<q.eps?f="0":(d.exists(c)||(c=a/this.visProp.scale),
f=c.toString(),d.isNumber(c)&&((f.length>this.visProp.maxlabellength||-1!==f.indexOf("e"))&&(f=c.toPrecision(this.visProp.precision).toString()),-1<f.indexOf(".")&&-1===f.indexOf("e")&&(f=f.replace(/0+$/,""),f=f.replace(/\.$/,""))),0<this.visProp.scalesymbol.length&&("1"===f?f=this.visProp.scalesymbol:"-1"===f?f="-"+this.visProp.scalesymbol:"0"!==f&&(f+=this.visProp.scalesymbol))),f},generateLabel:function(a,e,c){var f,n={isLabel:!0,layer:this.board.options.layer.line,highlightStrokeColor:this.board.options.text.strokeColor,
highlightStrokeWidth:this.board.options.text.strokeWidth,highlightStrokeOpacity:this.board.options.text.strokeOpacity,visible:this.visProp.visible,priv:this.visProp.priv};return n=d.deepCopy(n,this.visProp.label),0<this.labelsRepo.length?(f=this.labelsRepo.pop(),f.setText(a),f.setAttribute(n)):(this.labelCounter+=1,n.id=this.id+c+"Label"+this.labelCounter,f=b.createText(this.board,[e.usrCoords[1],e.usrCoords[2],a],n)),f.isDraggable=!1,f.dump=!1,f.distanceX=this.visProp.label.offset[0],f.distanceY=
this.visProp.label.offset[1],f.setCoords(e.usrCoords[1]+f.distanceX/this.board.unitX,e.usrCoords[2]+f.distanceY/this.board.unitY),f},removeTickLabels:function(){var a;if(d.exists(this.labels)&&(this.board.needsFullUpdate||this.needsRegularUpdate||this.needsUpdate)&&("canvas"!==this.board.renderer.type||"internal"!==this.board.options.text.display))for(a=0;a<this.labels.length;a++)d.exists(this.labels[a])&&this.labelsRepo.push(this.labels[a])},update:function(){return this.needsUpdate&&0!==this.board.canvasWidth&&
0!==this.board.canvasHeight&&this.calculateTicksCoordinates(),this},updateRenderer:function(){return this.needsUpdate&&(this.board.renderer.updateTicks(this),this.needsUpdate=!1),this},hideElement:function(){var a;this.visProp.visible=!1;this.board.renderer.hide(this);for(a=0;a<this.labels.length;a++)d.exists(this.labels[a])&&this.labels[a].hideElement();return this},showElement:function(){var a;this.visProp.visible=!0;this.board.renderer.show(this);for(a=0;a<this.labels.length;a++)d.exists(this.labels[a])&&
this.labels[a].showElement();return this}}),m.createTicks=function(a,b,c){var f;c=d.copyAttributes(c,a.options,"ticks");if(a=2>b.length?c.ticksdistance:b[1],b[0].elementClass!==e.OBJECT_CLASS_LINE)throw Error("JSXGraph: Can't create Ticks with parent types '"+typeof b[0]+"'.");return f=new m.Ticks(b[0],a,c),"function"==typeof c.generatelabelvalue&&(f.generateLabelValue=c.generatelabelvalue),f.isDraggable=!0,f},m.createHatchmark=function(a,b,c){var f,n,p,g=[],h=d.copyAttributes(c,a.options,"hatch");
if(b[0].elementClass!==e.OBJECT_CLASS_LINE||"number"!=typeof b[1])throw Error("JSXGraph: Can't create Hatch mark with parent types '"+typeof b[0]+"' and '"+typeof b[1]+"'.");c=b[1];p=h.ticksdistance;n=-((c-1)*p)/2;for(f=0;c>f;f++)g[f]=n+f*p;a.create("ticks",[b[0],g],h).elType="hatch"},m.registerElement("ticks",m.createTicks),m.registerElement("hash",m.createHatchmark),m.registerElement("hatch",m.createHatchmark),{Ticks:m.Ticks,createTicks:m.createTicks,createHashmark:m.createHatchmark,createHatchmark:m.createHatchmark}});
E("base/line","jxg math/math math/geometry math/numerics math/statistics base/constants base/coords base/element utils/type base/transformation base/point base/ticks".split(" "),function(m,q,l,e,h,g,d,b,a,k,c){return m.Line=function(a,b,c,d){this.constructor(a,d,g.OBJECT_TYPE_LINE,g.OBJECT_CLASS_LINE);this.point1=this.board.select(b);this.point2=this.board.select(c);this.ticks=[];this.parentPolygon=this.defaultTicks=null;this.id=this.board.setId(this,"L");this.board.renderer.drawLine(this);this.board.finalizeAdding(this);
this.elType="line";this.point1.addChild(this);this.point2.addChild(this);this.updateStdform();this.createLabel();this.methodMap=m.deepCopy(this.methodMap,{point1:"point1",point2:"point2",getSlope:"getSlope",getRise:"getRise",getYIntersect:"getRise",getAngle:"getAngle",L:"L",length:"L",addTicks:"addTicks",removeTicks:"removeTicks",removeAllTicks:"removeAllTicks"})},m.Line.prototype=new b,m.extend(m.Line.prototype,{hasPoint:function(a,b){var c,e,k,h,m,x,u,t=[],w=[1,a,b];return t[0]=this.stdform[0]-
this.stdform[1]*this.board.origin.scrCoords[1]/this.board.unitX+this.stdform[2]*this.board.origin.scrCoords[2]/this.board.unitY,t[1]=this.stdform[1]/this.board.unitX,t[2]=this.stdform[2]/-this.board.unitY,c=l.distPointLine(w,t),isNaN(c)||c>this.board.options.precision.hasPoint?!1:this.visProp.straightfirst&&this.visProp.straightlast?!0:(k=this.point1.coords,h=this.point2.coords,e=[0,t[1],t[2]],e=q.crossProduct(e,w),e=q.crossProduct(e,t),e[1]/=e[0],e[2]/=e[0],e[0]=1,e=(new d(g.COORDS_BY_SCREEN,e.slice(1),
this.board)).usrCoords,m=k.distance(g.COORDS_BY_USER,h),k=k.usrCoords.slice(0),h=h.usrCoords.slice(0),m<q.eps?x=0:(m===Number.POSITIVE_INFINITY&&(m=1/q.eps,Math.abs(h[0])<q.eps?(m/=l.distance([0,0,0],h),h=[1,k[1]+h[1]*m,k[2]+h[2]*m]):(m/=l.distance([0,0,0],k),k=[1,h[1]+k[1]*m,h[2]+k[2]*m])),u=1,m=h[u]-k[u],Math.abs(m)<q.eps&&(u=2,m=h[u]-k[u]),x=(e[u]-k[u])/m),!this.visProp.straightfirst&&0>x?!1:!this.visProp.straightlast&&1<x?!1:!0)},update:function(){var b;return this.needsUpdate?(this.constrained&&
("function"==typeof this.funps?(b=this.funps(),b&&b.length&&2===b.length&&(this.point1=b[0],this.point2=b[1])):("function"==typeof this.funp1&&(b=this.funp1(),a.isPoint(b)?this.point1=b:b&&b.length&&2===b.length&&this.point1.setPositionDirectly(g.COORDS_BY_USER,b)),"function"==typeof this.funp2&&(b=this.funp2(),a.isPoint(b)?this.point2=b:b&&b.length&&2===b.length&&this.point2.setPositionDirectly(g.COORDS_BY_USER,b)))),this.updateSegmentFixedLength(),this.updateStdform(),this.visProp.trace&&this.cloneToBackground(!0),
this):this},updateSegmentFixedLength:function(){var a,b,c,d,e,k,h,l;return this.hasFixedLength?(a=this.point1.Dist(this.point2),b=this.fixedLength(),c=this.fixedLengthOldCoords[0].distance(g.COORDS_BY_USER,this.point1.coords),d=this.fixedLengthOldCoords[1].distance(g.COORDS_BY_USER,this.point2.coords),(c>q.eps||d>q.eps||a!==b)&&(e=this.point1.isDraggable&&this.point1.type!==g.OBJECT_TYPE_GLIDER&&!this.point1.visProp.fixed,k=this.point2.isDraggable&&this.point2.type!==g.OBJECT_TYPE_GLIDER&&!this.point2.visProp.fixed,
a>q.eps?c>d&&k||d>=c&&k&&!e?(this.point2.setPositionDirectly(g.COORDS_BY_USER,[this.point1.X()+(this.point2.X()-this.point1.X())*b/a,this.point1.Y()+(this.point2.Y()-this.point1.Y())*b/a]),this.point2.prepareUpdate().updateRenderer()):(d>=c&&e||c>d&&e&&!k)&&(this.point1.setPositionDirectly(g.COORDS_BY_USER,[this.point2.X()+(this.point1.X()-this.point2.X())*b/a,this.point2.Y()+(this.point1.Y()-this.point2.Y())*b/a]),this.point1.prepareUpdate().updateRenderer()):(h=Math.random()-.5,l=Math.random()-
.5,a=Math.sqrt(h*h+l*l),k?(this.point2.setPositionDirectly(g.COORDS_BY_USER,[this.point1.X()+h*b/a,this.point1.Y()+l*b/a]),this.point2.prepareUpdate().updateRenderer()):e&&(this.point1.setPositionDirectly(g.COORDS_BY_USER,[this.point2.X()+h*b/a,this.point2.Y()+l*b/a]),this.point1.prepareUpdate().updateRenderer())),this.fixedLengthOldCoords[0].setCoordinates(g.COORDS_BY_USER,this.point1.coords.usrCoords),this.fixedLengthOldCoords[1].setCoordinates(g.COORDS_BY_USER,this.point2.coords.usrCoords)),this):
this},updateStdform:function(){var a=q.crossProduct(this.point1.coords.usrCoords,this.point2.coords.usrCoords);this.stdform[0]=a[0];this.stdform[1]=a[1];this.stdform[2]=a[2];this.stdform[3]=0;this.normalize()},updateRenderer:function(){var a;return this.needsUpdate&&this.visProp.visible&&(a=this.isReal,this.isReal=!isNaN(this.point1.coords.usrCoords[1]+this.point1.coords.usrCoords[2]+this.point2.coords.usrCoords[1]+this.point2.coords.usrCoords[2])&&q.innerProduct(this.stdform,this.stdform,3)>=q.eps*
q.eps,this.isReal?(a!==this.isReal&&(this.board.renderer.show(this),this.hasLabel&&this.label.visProp.visible&&this.board.renderer.show(this.label)),this.board.renderer.updateLine(this)):a!==this.isReal&&(this.board.renderer.hide(this),this.hasLabel&&this.label.visProp.visible&&this.board.renderer.hide(this.label)),this.needsUpdate=!1),this.hasLabel&&this.label.visProp.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this},generatePolynomial:function(a){var b=
this.point1.symbolic.x,c=this.point1.symbolic.y,d=this.point2.symbolic.x,e=this.point2.symbolic.y,k=a.symbolic.x;a=a.symbolic.y;return[["(",c,")*(",k,")-(",c,")*(",d,")+(",a,")*(",d,")-(",b,")*(",a,")+(",b,")*(",e,")-(",k,")*(",e,")"].join("")]},getRise:function(){return Math.abs(this.stdform[2])>=q.eps?-this.stdform[0]/this.stdform[2]:1/0},getSlope:function(){return Math.abs(this.stdform[2])>=q.eps?-this.stdform[1]/this.stdform[2]:1/0},getAngle:function(){return Math.atan2(-this.stdform[1],this.stdform[2])},
setStraight:function(a,b){return this.visProp.straightfirst=a,this.visProp.straightlast=b,this.board.renderer.updateLine(this),this},getTextAnchor:function(){return new d(g.COORDS_BY_USER,[.5*(this.point2.X()+this.point1.X()),.5*(this.point2.Y()+this.point1.Y())],this.board)},setLabelRelativeCoords:function(b){a.exists(this.label)&&(this.label.relativeCoords=new d(g.COORDS_BY_SCREEN,[b[0],-b[1]],this.board))},getLabelAnchor:function(){var b,c,e=0,k=0,h=0,m=new d(g.COORDS_BY_USER,this.point1.coords.usrCoords,
this.board),y=new d(g.COORDS_BY_USER,this.point2.coords.usrCoords,this.board);if((this.visProp.straightfirst||this.visProp.straightlast)&&l.calcStraight(this,m,y,0),m=m.scrCoords,y=y.scrCoords,!a.exists(this.label))return new d(g.COORDS_BY_SCREEN,[0/0,0/0],this.board);switch(this.label.visProp.position){case "lft":case "llft":case "ulft":m[1]<=y[1]?(b=m[1],c=m[2]):(b=y[1],c=y[2]);break;case "rt":case "lrt":case "urt":m[1]>y[1]?(b=m[1],c=m[2]):(b=y[1],c=y[2]);break;default:b=.5*(m[1]+y[1]),c=.5*(m[2]+
y[2])}return(this.visProp.straightfirst||this.visProp.straightlast)&&(a.exists(this.label)&&(k=parseFloat(this.label.visProp.offset[0]),h=parseFloat(this.label.visProp.offset[1]),e=this.label.visProp.fontsize),Math.abs(b)<q.eps?b=k:this.board.canvasWidth+q.eps>b&&b>this.board.canvasWidth-e-q.eps&&(b=this.board.canvasWidth-k-e),q.eps+e>c&&c>-q.eps?c=h+e:this.board.canvasHeight+q.eps>c&&c>this.board.canvasHeight-e-q.eps&&(c=this.board.canvasHeight-h)),new d(g.COORDS_BY_SCREEN,[b,c],this.board)},cloneToBackground:function(){var b,
c,d,e={};return e.id=this.id+"T"+this.numTraces,e.elementClass=g.OBJECT_CLASS_LINE,this.numTraces++,e.point1=this.point1,e.point2=this.point2,e.stdform=this.stdform,e.board=this.board,e.visProp=a.deepCopy(this.visProp,this.visProp.traceattributes,!0),e.visProp.layer=this.board.options.layer.trace,a.clearVisPropOld(e),c=this.getSlope(),b=this.getRise(),e.getSlope=function(){return c},e.getRise=function(){return b},d=this.board.renderer.enhancedRendering,this.board.renderer.enhancedRendering=!0,this.board.renderer.drawLine(e),
this.board.renderer.enhancedRendering=d,this.traces[e.id]=e.rendNode,this},addTransform:function(b){var c=a.isArray(b)?b:[b],d=c.length;for(b=0;d>b;b++)this.point1.transformations.push(c[b]),this.point2.transformations.push(c[b]);return this},setPosition:function(a,b){var c;return b=new d(a,b,this.board),c=this.board.create("transform",b.usrCoords.slice(1),{type:"translate"}),0<this.point1.transformations.length&&this.point1.transformations[this.point1.transformations.length-1].isNumericMatrix?this.point1.transformations[this.point1.transformations.length-
1].melt(c):this.point1.addTransform(this.point1,c),0<this.point2.transformations.length&&this.point2.transformations[this.point2.transformations.length-1].isNumericMatrix?this.point2.transformations[this.point2.transformations.length-1].melt(c):this.point2.addTransform(this.point2,c),this},setPositionDirectly:function(a,b,c){var e,k;b=new d(a,b,this.board);a=new d(a,c,this.board);return this.point1.draggable()&&this.point2.draggable()?(e=h.subtract(b.usrCoords,a.usrCoords),k=this.board.create("transform",
e.slice(1),{type:"translate"}),k.applyOnce([this.point1,this.point2]),this):this},snapToGrid:function(a){var b,c,e,k,r,y,x,u,t,w;return this.visProp.snaptogrid?3>this.parents.length?(this.point1.handleSnapToGrid(!0),this.point2.handleSnapToGrid(!0)):m.exists(a)&&(t=this.visProp.snapsizex,w=this.visProp.snapsizey,b=new d(g.COORDS_BY_SCREEN,[a.Xprev,a.Yprev],this.board),x=b.usrCoords[1],u=b.usrCoords[2],0>=t&&this.board.defaultAxes&&this.board.defaultAxes.x.defaultTicks&&(y=this.board.defaultAxes.x.defaultTicks,
t=y.ticksDelta*(y.visProp.minorticks+1)),0>=w&&this.board.defaultAxes&&this.board.defaultAxes.y.defaultTicks&&(y=this.board.defaultAxes.y.defaultTicks,w=y.ticksDelta*(y.visProp.minorticks+1)),0<t&&0<w&&(r=[0,this.stdform[1],this.stdform[2]],r=q.crossProduct(r,b.usrCoords),c=l.meetLineLine(r,this.stdform,0,this.board),e=h.subtract([1,Math.round(x/t)*t,Math.round(u/w)*w],c.usrCoords),k=this.board.create("transform",e.slice(1),{type:"translate"}),k.applyOnce([this.point1,this.point2]))):(this.point1.snapToGrid(),
this.point2.snapToGrid()),this},snapToPoints:function(){var a=this.visProp.snaptopoints;return 3>this.parents.length&&(this.point1.handleSnapToPoints(a),this.point2.handleSnapToPoints(a)),this},X:function(a){var b,c=this.stdform[2];return b=Math.abs(this.point1.coords.usrCoords[0])>q.eps?this.point1.coords.usrCoords[1]:this.point2.coords.usrCoords[1],a=2*(a-.5),(1-Math.abs(a))*b-a*c},Y:function(a){var b,c=this.stdform[1];return b=Math.abs(this.point1.coords.usrCoords[0])>q.eps?this.point1.coords.usrCoords[2]:
this.point2.coords.usrCoords[2],a=2*(a-.5),(1-Math.abs(a))*b+a*c},Z:function(a){var b=Math.abs(this.point1.coords.usrCoords[0])>q.eps?this.point1.coords.usrCoords[0]:this.point2.coords.usrCoords[0];return a=2*(a-.5),(1-Math.abs(a))*b},L:function(){return this.point1.Dist(this.point2)},minX:function(){return 0},maxX:function(){return 1},bounds:function(){var a=this.point1.coords.usrCoords,b=this.point2.coords.usrCoords;return[Math.min(a[1],b[1]),Math.max(a[2],b[2]),Math.max(a[1],b[1]),Math.min(a[2],
b[2])]},addTicks:function(b){return""!==b.id&&a.exists(b.id)||(b.id=this.id+"_ticks_"+(this.ticks.length+1)),this.board.renderer.drawTicks(b),this.ticks.push(b),b.id},remove:function(){this.removeAllTicks();b.prototype.remove.call(this)},removeAllTicks:function(){var a;for(a=this.ticks.length;0<a;a--)this.removeTicks(this.ticks[a-1]);this.ticks=[];this.board.update()},removeTicks:function(b){var c;a.exists(this.defaultTicks)&&this.defaultTicks===b&&(this.defaultTicks=null);for(c=this.ticks.length;0<
c;c--)if(this.ticks[c-1]===b){if(this.board.removeObject(this.ticks[c-1]),this.ticks[c-1].ticks)for(b=0;b<this.ticks[c-1].ticks.length;b++)a.exists(this.ticks[c-1].labels[b])&&this.board.removeObject(this.ticks[c-1].labels[b]);delete this.ticks[c-1];break}},hideElement:function(){var a;b.prototype.hideElement.call(this);for(a=0;a<this.ticks.length;a++)this.ticks[a].hideElement()},showElement:function(){var a;b.prototype.showElement.call(this);for(a=0;a<this.ticks.length;a++)this.ticks[a].showElement()}}),
m.createLine=function(b,d,e){var k,h,l,y,x,u=[];x=!1;if(2===d.length){if(a.isArray(d[0])&&1<d[0].length)y=a.copyAttributes(e,b.options,"line","point1"),h=b.create("point",d[0],y);else if(a.isString(d[0])||d[0].elementClass===g.OBJECT_CLASS_POINT)h=b.select(d[0]);else{if("function"==typeof d[0]&&d[0]().elementClass===g.OBJECT_CLASS_POINT)h=d[0]();else{if("function"!=typeof d[0]||!d[0]().length||2!==d[0]().length)throw Error("JSXGraph: Can't create line with parent types '"+typeof d[0]+"' and '"+typeof d[1]+
"'.\nPossible parent types: [point,point], [[x1,y1],[x2,y2]], [a,b,c]");y=a.copyAttributes(e,b.options,"line","point1");h=c.createPoint(b,d[0](),y)}x=!0}if(a.isArray(d[1])&&1<d[1].length)y=a.copyAttributes(e,b.options,"line","point2"),l=b.create("point",d[1],y);else if(a.isString(d[1])||d[1].elementClass===g.OBJECT_CLASS_POINT)l=b.select(d[1]);else{if("function"==typeof d[1]&&d[1]().elementClass===g.OBJECT_CLASS_POINT)l=d[1]();else{if("function"!=typeof d[1]||!d[1]().length||2!==d[1]().length)throw Error("JSXGraph: Can't create line with parent types '"+
typeof d[0]+"' and '"+typeof d[1]+"'.\nPossible parent types: [point,point], [[x1,y1],[x2,y2]], [a,b,c]");y=a.copyAttributes(e,b.options,"line","point2");l=c.createPoint(b,d[1](),y)}x=!0}y=a.copyAttributes(e,b.options,"line");b=new m.Line(b,h,l,y);x?(b.constrained=!0,b.funp1=d[0],b.funp2=d[1]):b.isDraggable=!0;b.constrained||(b.parents=[h.id,l.id])}else if(3===d.length){x=!0;for(h=0;3>h;h++)if("number"==typeof d[h])u[h]=a.createFunction(d[h]);else{if("function"!=typeof d[h])throw Error("JSXGraph: Can't create line with parent types '"+
typeof d[0]+"' and '"+typeof d[1]+"' and '"+typeof d[2]+"'.\nPossible parent types: [point,point], [[x1,y1],[x2,y2]], [a,b,c]");u[h]=d[h];x=!1}y=a.copyAttributes(e,b.options,"line","point1");h=x?b.create("point",[u[2]()*u[2]()+u[1]()*u[1](),u[2]()-u[1]()*u[0]()+u[2](),-u[1]()-u[2]()*u[0]()-u[1]()],y):b.create("point",[function(){return.5*(u[2]()*u[2]()+u[1]()*u[1]())},function(){return.5*(u[2]()-u[1]()*u[0]()+u[2]())},function(){return.5*(-u[1]()-u[2]()*u[0]()-u[1]())}],y);y=a.copyAttributes(e,b.options,
"line","point2");l=x?b.create("point",[u[2]()*u[2]()+u[1]()*u[1](),-u[1]()*u[0]()+u[2](),-u[2]()*u[0]()-u[1]()],y):b.create("point",[function(){return u[2]()*u[2]()+u[1]()*u[1]()},function(){return-u[1]()*u[0]()+u[2]()},function(){return-u[2]()*u[0]()-u[1]()}],y);h.prepareUpdate().update();l.prepareUpdate().update();y=a.copyAttributes(e,b.options,"line");b=new m.Line(b,h,l,y);(b.isDraggable=x)&&(b.parents=[u[0](),u[1](),u[2]()])}else{if(1===d.length&&"function"==typeof d[0]&&2===d[0]().length&&d[0]()[0].elementClass===
g.OBJECT_CLASS_POINT&&d[0]()[1].elementClass===g.OBJECT_CLASS_POINT)k=d[0](),y=a.copyAttributes(e,b.options,"line"),b=new m.Line(b,k[0],k[1],y);else{if(1!==d.length||"function"!=typeof d[0]||3!==d[0]().length||"number"!=typeof d[0]()[0]||"number"!=typeof d[0]()[1]||"number"!=typeof d[0]()[2])throw Error("JSXGraph: Can't create line with parent types '"+typeof d[0]+"' and '"+typeof d[1]+"'.\nPossible parent types: [point,point], [[x1,y1],[x2,y2]], [a,b,c]");k=d[0];y=a.copyAttributes(e,b.options,"line",
"point1");h=b.create("point",[function(){var a=k();return[.5*(a[2]*a[2]+a[1]*a[1]),.5*(a[2]-a[1]*a[0]+a[2]),.5*(-a[1]-a[2]*a[0]-a[1])]}],y);y=a.copyAttributes(e,b.options,"line","point2");l=b.create("point",[function(){var a=k();return[a[2]*a[2]+a[1]*a[1],-a[1]*a[0]+a[2],-a[2]*a[0]-a[1]]}],y);y=a.copyAttributes(e,b.options,"line");b=new m.Line(b,h,l,y)}b.constrained=!0;b.funps=d[0]}return b},m.registerElement("line",m.createLine),m.createSegment=function(b,c,e){var k;if(e.straightFirst=!1,e.straightLast=
!1,k=a.copyAttributes(e,b.options,"segment"),e=b.create("line",c.slice(0,2),k),3===c.length){if(e.hasFixedLength=!0,a.isNumber(c[2]))e.fixedLength=function(){return c[2]};else{if(!a.isFunction(c[2]))throw Error("JSXGraph: Can't create segment with third parent type '"+typeof c[2]+"'.\nPossible third parent types: number or function");e.fixedLength=c[2]}e.fixedLengthOldCoords=[];e.fixedLengthOldCoords[0]=new d(g.COORDS_BY_USER,e.point1.coords.usrCoords.slice(1,3),b);e.fixedLengthOldCoords[1]=new d(g.COORDS_BY_USER,
e.point2.coords.usrCoords.slice(1,3),b)}return e.elType="segment",e},m.registerElement("segment",m.createSegment),m.createArrow=function(a,b,c){var d;return c.firstArrow=!1,c.lastArrow=!0,d=a.create("line",b,c).setStraight(!1,!1),d.type=g.OBJECT_TYPE_VECTOR,d.elType="arrow",d},m.registerElement("arrow",m.createArrow),m.createAxis=function(b,c,d){var e,k,h;if(!a.isArray(c[0])&&!a.isPoint(c[0])||!a.isArray(c[1])&&!a.isPoint(c[1]))throw Error("JSXGraph: Can't create axis with parent types '"+typeof c[0]+
"' and '"+typeof c[1]+"'.\nPossible parent types: [point,point], [[x1,y1],[x2,y2]]");e=a.copyAttributes(d,b.options,"axis");c=b.create("line",c,e);c.type=g.OBJECT_TYPE_AXIS;c.isDraggable=!1;c.point1.isDraggable=!1;c.point2.isDraggable=!1;for(k in c.ancestors)c.ancestors.hasOwnProperty(k)&&(c.ancestors[k].type=g.OBJECT_TYPE_AXISPOINT);return e=a.copyAttributes(d,b.options,"axis","ticks"),h=a.exists(e.ticksdistance)?e.ticksdistance:a.isArray(e.ticks)?e.ticks:1,c.defaultTicks=b.create("ticks",[c,h],
e),c.defaultTicks.dump=!1,c.elType="axis",c.subs={ticks:c.defaultTicks},c},m.registerElement("axis",m.createAxis),m.createTangent=function(b,c,d){var k,h,l,m,x,u,t;if(1===c.length)k=c[0],h=k.slideObject;else{if(2!==c.length)throw Error("JSXGraph: Can't create tangent with parent types '"+typeof c[0]+"' and '"+typeof c[1]+"'.\nPossible parent types: [glider], [point,line|curve|circle|conic]");if(a.isPoint(c[0]))k=c[0],h=c[1];else{if(!a.isPoint(c[1]))throw Error("JSXGraph: Can't create tangent with parent types '"+
typeof c[0]+"' and '"+typeof c[1]+"'.\nPossible parent types: [glider], [point,line|curve|circle|conic]");h=c[0];k=c[1]}}if(h.elementClass===g.OBJECT_CLASS_LINE?(t=b.create("line",[h.point1,h.point2],d),t.glider=k):h.elementClass===g.OBJECT_CLASS_CURVE&&h.type!==g.OBJECT_TYPE_CONIC?"plot"!==h.visProp.curvetype?(l=h.X,m=h.Y,t=b.create("line",[function(){return-k.X()*e.D(m)(k.position)+k.Y()*e.D(l)(k.position)},function(){return e.D(m)(k.position)},function(){return-e.D(l)(k.position)}],d),k.addChild(t),
t.glider=k):(t=b.create("line",[function(){var a=Math.floor(k.position);return a===h.numberPoints-1&&a--,0>a?1:h.Y(a)*h.X(a+1)-h.X(a)*h.Y(a+1)},function(){var a=Math.floor(k.position);return a===h.numberPoints-1&&a--,0>a?0:h.Y(a+1)-h.Y(a)},function(){var a=Math.floor(k.position);return a===h.numberPoints-1&&a--,0>a?0:h.X(a)-h.X(a+1)}],d),k.addChild(t),t.glider=k):h.type===g.OBJECT_TYPE_TURTLE?(t=b.create("line",[function(){var a=Math.floor(k.position);for(x=0;x<h.objects.length;x++)if(u=h.objects[x],
u.type===g.OBJECT_TYPE_CURVE){if(a<u.numberPoints)break;a-=u.numberPoints}return a===u.numberPoints-1&&a--,0>a?1:u.Y(a)*u.X(a+1)-u.X(a)*u.Y(a+1)},function(){var a=Math.floor(k.position);for(x=0;x<h.objects.length;x++)if(u=h.objects[x],u.type===g.OBJECT_TYPE_CURVE){if(a<u.numberPoints)break;a-=u.numberPoints}return a===u.numberPoints-1&&a--,0>a?0:u.Y(a+1)-u.Y(a)},function(){var a=Math.floor(k.position);for(x=0;x<h.objects.length;x++)if(u=h.objects[x],u.type===g.OBJECT_TYPE_CURVE){if(a<u.numberPoints)break;
a-=u.numberPoints}return a===u.numberPoints-1&&a--,0>a?0:u.X(a)-u.X(a+1)}],d),k.addChild(t),t.glider=k):(h.elementClass===g.OBJECT_CLASS_CIRCLE||h.type===g.OBJECT_TYPE_CONIC)&&(t=b.create("line",[function(){return q.matVecMult(h.quadraticform,k.coords.usrCoords)[0]},function(){return q.matVecMult(h.quadraticform,k.coords.usrCoords)[1]},function(){return q.matVecMult(h.quadraticform,k.coords.usrCoords)[2]}],d),k.addChild(t),t.glider=k),!a.exists(t))throw Error("JSXGraph: Couldn't create tangent with the given parents.");
t.elType="tangent";t.type=g.OBJECT_TYPE_TANGENT;t.parents=[];for(b=0;b<c.length;b++)t.parents.push(c[b].id);return t},m.createRadicalAxis=function(a,b,c){var d,e,k;if(2!==b.length||b[0].elementClass!==g.OBJECT_CLASS_CIRCLE||b[1].elementClass!==g.OBJECT_CLASS_CIRCLE)throw Error("JSXGraph: Can't create 'radical axis' with parent types '"+typeof b[0]+"' and '"+typeof b[1]+"'.\nPossible parent type: [circle,circle]");return e=a.select(b[0]),k=a.select(b[1]),d=a.create("line",[function(){var a=e.stdform,
b=k.stdform;return m.Math.matVecMult(m.Math.transpose([a.slice(0,3),b.slice(0,3)]),[b[3],-a[3]])}],c),d.elType="radicalaxis",d.parents=[e.id,k.id],e.addChild(d),k.addChild(d),d},m.createPolarLine=function(a,b,c){var d,e,k;if(2!==b.length||(b[0].type!==g.OBJECT_TYPE_CONIC&&b[0].elementClass!==g.OBJECT_CLASS_CIRCLE||b[1].elementClass!==g.OBJECT_CLASS_POINT)&&(b[0].elementClass!==g.OBJECT_CLASS_POINT||b[1].type!==g.OBJECT_TYPE_CONIC&&b[1].elementClass!==g.OBJECT_CLASS_CIRCLE))throw Error("JSXGraph: Can't create 'polar line' with parent types '"+
typeof b[0]+"' and '"+typeof b[1]+"'.\nPossible parent type: [conic|circle,point], [point,conic|circle]");return b[1].elementClass===g.OBJECT_CLASS_POINT?(e=a.select(b[0]),k=a.select(b[1])):(e=a.select(b[1]),k=a.select(b[0])),d=a.create("tangent",[e,k],c),d.elType="polarline",d},m.registerElement("tangent",m.createTangent),m.registerElement("polar",m.createTangent),m.registerElement("radicalaxis",m.createRadicalAxis),m.registerElement("polarline",m.createPolarLine),{Line:m.Line,createLine:m.createLine,
createTangent:m.createTangent,createPolar:m.createTangent,createSegment:m.createSegment,createAxis:m.createAxis,createArrow:m.createArrow,createRadicalAxis:m.createRadicalAxis,createPolarLine:m.createPolarLine}});E("base/circle","jxg base/element base/coords base/constants parser/geonext math/geometry math/statistics utils/type base/transformation base/point".split(" "),function(m,q,l,e,h,g,d,b){return m.Circle=function(a,d,c,f,n){this.constructor(a,n,e.OBJECT_TYPE_CIRCLE,e.OBJECT_CLASS_CIRCLE);this.method=
d;this.midpoint=this.board.select(c);this.center=this.board.select(c);this.point2=null;this.radius=0;this.circle=this.line=null;"twoPoints"===d?(this.point2=a.select(f),this.radius=this.Radius()):"pointRadius"===d?(this.gxtterm=f,this.updateRadius=b.createFunction(f,this.board,null,!0),this.updateRadius()):"pointLine"===d?(this.line=a.select(f),this.radius=this.line.point1.coords.distance(e.COORDS_BY_USER,this.line.point2.coords)):"pointCircle"===d&&(this.circle=a.select(f),this.radius=this.circle.Radius());
this.id=this.board.setId(this,"C");this.board.renderer.drawEllipse(this);this.board.finalizeAdding(this);this.createGradient();this.elType="circle";this.createLabel();this.center.addChild(this);"pointRadius"===d?this.notifyParents(f):"pointLine"===d?this.line.addChild(this):"pointCircle"===d?this.circle.addChild(this):"twoPoints"===d&&this.point2.addChild(this);this.methodMap=b.deepCopy(this.methodMap,{setRadius:"setRadius",getRadius:"getRadius",radius:"Radius",center:"center",line:"line",point2:"point2"})},
m.Circle.prototype=new q,m.extend(m.Circle.prototype,{hasPoint:function(a,b){var c=this.board.options.precision.hasPoint/this.board.unitX,f=this.center.coords.usrCoords,d=new l(e.COORDS_BY_SCREEN,[a,b],this.board),g=this.Radius(),f=Math.sqrt((f[1]-d.usrCoords[1])*(f[1]-d.usrCoords[1])+(f[2]-d.usrCoords[2])*(f[2]-d.usrCoords[2]));return this.visProp.hasinnerpoints?g+c>f:Math.abs(f-g)<c},generatePolynomial:function(a){var b=this.center.symbolic.x,c=this.center.symbolic.y,f=a.symbolic.x;a=a.symbolic.y;
var d=this.generateRadiusSquared();return""===d?[]:["(("+f+")-("+b+"))^2 + (("+a+")-("+c+"))^2 - ("+d+")"]},generateRadiusSquared:function(){var a,b,c,f,d,e,g="";return"twoPoints"===this.method?(a=this.center.symbolic.x,b=this.center.symbolic.y,c=this.point2.symbolic.x,f=this.point2.symbolic.y,g="(("+c+")-("+a+"))^2 + (("+f+")-("+b+"))^2"):"pointRadius"===this.method?"number"==typeof this.radius&&(g=(this.radius*this.radius).toString()):"pointLine"===this.method?(c=this.line.point1.symbolic.x,f=this.line.point1.symbolic.y,
d=this.line.point2.symbolic.x,e=this.line.point2.symbolic.y,g="(("+c+")-("+d+"))^2 + (("+f+")-("+e+"))^2"):"pointCircle"===this.method&&(g=this.circle.Radius()),g},update:function(){return this.needsUpdate&&(this.visProp.trace&&this.cloneToBackground(!0),"pointLine"===this.method?this.radius=this.line.point1.coords.distance(e.COORDS_BY_USER,this.line.point2.coords):"pointCircle"===this.method?this.radius=this.circle.Radius():"pointRadius"===this.method&&(this.radius=this.updateRadius()),this.updateStdform(),
this.updateQuadraticform()),this},updateQuadraticform:function(){var a=this.center,b=a.X(),a=a.Y(),c=this.Radius();this.quadraticform=[[b*b+a*a-c*c,-b,-a],[-b,1,0],[-a,0,1]]},updateStdform:function(){this.stdform[3]=.5;this.stdform[4]=this.Radius();this.stdform[1]=-this.center.coords.usrCoords[1];this.stdform[2]=-this.center.coords.usrCoords[2];this.normalize()},updateRenderer:function(){var a;this.needsUpdate&&this.visProp.visible&&(a=this.isReal,this.isReal=!isNaN(this.center.coords.usrCoords[1]+
this.center.coords.usrCoords[2]+this.Radius())&&this.center.isReal,this.isReal?(a!==this.isReal&&(this.board.renderer.show(this),this.hasLabel&&this.label.visProp.visible&&this.board.renderer.show(this.label)),this.board.renderer.updateEllipse(this)):a!==this.isReal&&(this.board.renderer.hide(this),this.hasLabel&&this.label.visProp.visible&&this.board.renderer.hide(this.label)),this.needsUpdate=!1);this.hasLabel&&this.label.visProp.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label))},
notifyParents:function(a){"string"==typeof a&&h.findDependencies(this,a,this.board)},setRadius:function(a){return this.updateRadius=b.createFunction(a,this.board,null,!0),this.board.update(),this},Radius:function(a){return b.exists(a)?(this.setRadius(a),this.Radius()):"twoPoints"===this.method?0===g.distance(this.point2.coords.usrCoords,[0,0,0])||0===g.distance(this.center.coords.usrCoords,[0,0,0])?0/0:this.center.Dist(this.point2):"pointLine"===this.method||"pointCircle"===this.method?this.radius:
"pointRadius"===this.method?this.updateRadius():0/0},getRadius:function(){return this.Radius()},getTextAnchor:function(){return this.center.coords},getLabelAnchor:function(){var a,b;b=this.Radius();var c=this.center.coords.usrCoords;switch(this.visProp.label.position){case "lft":a=c[1]-b;b=c[2];break;case "llft":a=c[1]-Math.sqrt(.5)*b;b=c[2]-Math.sqrt(.5)*b;break;case "rt":a=c[1]+b;b=c[2];break;case "lrt":a=c[1]+Math.sqrt(.5)*b;b=c[2]-Math.sqrt(.5)*b;break;case "urt":a=c[1]+Math.sqrt(.5)*b;b=c[2]+
Math.sqrt(.5)*b;break;case "top":a=c[1];b=c[2]+b;break;case "bot":a=c[1];b=c[2]-b;break;default:a=c[1]-Math.sqrt(.5)*b,b=c[2]+Math.sqrt(.5)*b}return new l(e.COORDS_BY_USER,[a,b],this.board)},cloneToBackground:function(){var a,d=this.Radius(),c={id:this.id+"T"+this.numTraces,elementClass:e.OBJECT_CLASS_CIRCLE,center:{coords:this.center.coords},Radius:function(){return d},getRadius:function(){return d},board:this.board,visProp:b.deepCopy(this.visProp,this.visProp.traceattributes,!0)};return c.visProp.layer=
this.board.options.layer.trace,this.numTraces++,b.clearVisPropOld(c),a=this.board.renderer.enhancedRendering,this.board.renderer.enhancedRendering=!0,this.board.renderer.drawEllipse(c),this.board.renderer.enhancedRendering=a,this.traces[c.id]=c.rendNode,this},addTransform:function(a){var d=b.isArray(a)?a:[a],c=d.length;for(a=0;c>a;a++)this.center.transformations.push(d[a]),"twoPoints"===this.method&&this.point2.transformations.push(d[a]);return this},snapToGrid:function(){var a=this.visProp.snaptogrid;
return this.center.snapToGrid(a),"twoPoints"===this.method&&this.point2.snapToGrid(a),this},snapToPoints:function(){var a=this.visProp.snaptopoints;return this.center.handleSnapToPoints(a),"twoPoints"===this.method&&this.point2.handleSnapToPoints(a),this},setPosition:function(a,b){var c;return b=new l(a,b,this.board),c=this.board.create("transform",b.usrCoords.slice(1),{type:"translate"}),this.addTransform(c),this},setPositionDirectly:function(a,b,c){var f,e,g,h,m,r=this.parents.length;m=[];for(f=
0;r>f;f++){if(e=this.board.select(this.parents[f]),!e.draggable())return this;m.push(e)}return b=new l(a,b,this.board),c=new l(a,c,this.board),g=d.subtract(b.usrCoords,c.usrCoords),h=this.board.create("transform",g.slice(1),{type:"translate"}),h.applyOnce(m),this},X:function(a){return this.Radius()*Math.cos(2*a*Math.PI)+this.center.coords.usrCoords[1]},Y:function(a){return this.Radius()*Math.sin(2*a*Math.PI)+this.center.coords.usrCoords[2]},Z:function(){return 1},minX:function(){return 0},maxX:function(){return 1},
Area:function(){var a=this.Radius();return a*a*Math.PI},bounds:function(){var a=this.center.coords.usrCoords,b=this.Radius();return[a[1]-b,a[2]+b,a[1]+b,a[2]-b]}}),m.createCircle=function(a,d,c){var f,g,h;f=[];for(g=0;g<d.length;g++)b.isPoint(d[g])?f[g]=d[g]:b.isArray(d[g])&&1<d[g].length?(h=b.copyAttributes(c,a.options,"circle","center"),f[g]=a.create("point",d[g],h)):f[g]=d[g];if(h=b.copyAttributes(c,a.options,"circle"),2===d.length&&b.isPoint(f[0])&&b.isPoint(f[1]))a=new m.Circle(a,"twoPoints",
f[0],f[1],h);else if((b.isNumber(f[0])||b.isFunction(f[0])||b.isString(f[0]))&&b.isPoint(f[1]))a=new m.Circle(a,"pointRadius",f[1],f[0],h);else if((b.isNumber(f[1])||b.isFunction(f[1])||b.isString(f[1]))&&b.isPoint(f[0]))a=new m.Circle(a,"pointRadius",f[0],f[1],h);else if(f[0].elementClass===e.OBJECT_CLASS_CIRCLE&&b.isPoint(f[1]))a=new m.Circle(a,"pointCircle",f[1],f[0],h);else if(f[1].elementClass===e.OBJECT_CLASS_CIRCLE&&b.isPoint(f[0]))a=new m.Circle(a,"pointCircle",f[0],f[1],h);else if(f[0].elementClass===
e.OBJECT_CLASS_LINE&&b.isPoint(f[1]))a=new m.Circle(a,"pointLine",f[1],f[0],h);else if(f[1].elementClass===e.OBJECT_CLASS_LINE&&b.isPoint(f[0]))a=new m.Circle(a,"pointLine",f[0],f[1],h);else{if(!(3===d.length&&b.isPoint(f[0])&&b.isPoint(f[1])&&b.isPoint(f[2])))throw Error("JSXGraph: Can't create circle with parent types '"+typeof d[0]+"' and '"+typeof d[1]+"'.\nPossible parent types: [point,point], [point,number], [point,function], [point,circle], [point,point,point]");if(!m.elements.circumcircle)throw Error("JSXGraph: Can't create circle with three points. Please include the circumcircle element (element/composition).");
a=m.elements.circumcircle(a,f,h)}a.isDraggable=!0;a.parents=[];for(g=0;g<d.length;g++)d[g].id&&a.parents.push(d[g].id);return a.elType="circle",a},m.registerElement("circle",m.createCircle),{Circle:m.Circle,createCircle:m.createCircle}});E("base/composition",["jxg","utils/type"],function(m,q){return m.Composition=function(l){var e,h=this,g="setAttribute prepareUpdate updateRenderer update highlight noHighlight".split(" "),d=function(b){return function(){for(var a in h.elements)h.elements.hasOwnProperty(a)&&
q.exists(h.elements[a][b])&&h.elements[a][b].apply(h.elements[a],arguments);return h}};for(e=0;e<g.length;e++)this[g[e]]=d(g[e]);this.objects=this.elements={};this.elementsByName={};this.objectsList=[];this.groups={};this.methodMap={setAttribute:"setAttribute",setProperty:"setAttribute",add:"add",remove:"remove",select:"select"};for(e in l)l.hasOwnProperty(e)&&this.add(e,l[e]);this.dump=!0;this.subs={}},m.extend(m.Composition.prototype,{add:function(l,e){return!q.exists(this[l])&&q.exists(e)?(q.exists(e.id)?
this.elements[e.id]=e:this.elements[l]=e,q.exists(e.name)&&(this.elementsByName[e.name]=e),e.on("attribute:name",this.nameListener,this),this.objectsList.push(e),this[l]=e,this.methodMap[l]=e,!0):!1},remove:function(l){var e,h=!1;for(e in this.elements)if(this.elements.hasOwnProperty(e)&&this.elements[e].id===this[l].id){h=!0;break}return h&&(delete this.elements[this[l].id],delete this[l]),h},nameListener:function(l,e,h){delete this.elementsByName[l];this.elementsByName[e]=h},select:function(l){return q.exists(m.Board)?
m.Board.prototype.select.call(this,l):new m.Composition},getParents:function(){return this.parents},getType:function(){return this.elType},getAttributes:function(){for(var l in this.subs)this.subs.hasOwnProperty(l);return this.attr}}),m.Composition});E("base/curve","jxg base/constants base/coords base/element math/math math/statistics math/numerics math/geometry parser/geonext utils/type base/transformation math/qdt".split(" "),function(m,q,l,e,h,g,d,b,a,k,c,f){return m.Curve=function(a,b,c){this.constructor(a,
c,q.OBJECT_TYPE_CURVE,q.OBJECT_CLASS_CURVE);this.points=[];this.numberPoints=this.visProp.numberpointshigh;this.bezierDegree=1;this.qdt=this.dataY=this.dataX=null;this.varname=k.exists(b[0])?b[0]:"x";this.xterm=b[1];this.yterm=b[2];this.generateTerm(this.varname,this.xterm,this.yterm,b[3],b[4]);this.updateCurve();this.id=this.board.setId(this,"G");this.board.renderer.drawCurve(this);this.board.finalizeAdding(this);this.createGradient();this.elType="curve";this.createLabel();"string"==typeof this.xterm&&
this.notifyParents(this.xterm);"string"==typeof this.yterm&&this.notifyParents(this.yterm);this.methodMap=k.deepCopy(this.methodMap,{generateTerm:"generateTerm",setTerm:"generateTerm"})},m.Curve.prototype=new e,m.extend(m.Curve.prototype,{minX:function(){var a;return"polar"===this.visProp.curvetype?0:(a=new l(q.COORDS_BY_SCREEN,[0,0],this.board,!1),a.usrCoords[1])},maxX:function(){var a;return"polar"===this.visProp.curvetype?2*Math.PI:(a=new l(q.COORDS_BY_SCREEN,[this.board.canvasWidth,0],this.board,
!1),a.usrCoords[1])},Z:function(){return 1},hasPoint:function(a,c,f){var d,e,g,m,u,t,w,z,B=this.visProp.numberpointslow,A=(this.maxX()-this.minX())/B,C=this.board.options.precision.hasPoint/this.board.unitX,F=1/0;if(e=new l(q.COORDS_BY_SCREEN,[a,c],this.board,!1),a=e.usrCoords[1],c=e.usrCoords[2],0<this.transformations.length&&(this.updateTransformMatrix(),g=h.inverse(this.transformMat),m=h.matVecMult(g,[1,a,c]),a=m[1],c=m[2]),"parameter"===this.visProp.curvetype||"polar"===this.visProp.curvetype)for(C*=
C,f=0,d=this.minX();B>f;f++){if(u=this.X(d,!0),t=this.Y(d,!0),F=(a-u)*(a-u)+(c-t)*(c-t),C>F)return!0;d+=A}else if("plot"===this.visProp.curvetype||"functiongraph"===this.visProp.curvetype){(!k.exists(f)||0>f)&&(f=0);for(k.exists(this.qdt)&&this.visProp.useqdt&&3!==this.bezierDegree?(z=this.qdt.query(new l(q.COORDS_BY_USER,[a,c],this.board)),w=z.points,d=w.length):(w=this.points,d=this.numberPoints-1);d>f;f++)for(t=[],3===this.bezierDegree?t.push(b.projectCoordsToBeziersegment([1,a,c],this,f)):z?(w[f].prev&&
t.push(b.projectCoordsToSegment([1,a,c],w[f].prev.usrCoords,w[f].usrCoords)),w[f].next&&w[f+1]!==w[f].next&&t.push(b.projectCoordsToSegment([1,a,c],w[f].usrCoords,w[f].next.usrCoords))):t.push(b.projectCoordsToSegment([1,a,c],w[f].usrCoords,w[f+1].usrCoords)),u=0;u<t.length;u++)if(0<=t[u][1]&&1>=t[u][1]&&b.distance([1,a,c],t[u][0],3)<=C)return!0;return!1}return C>F},allocatePoints:function(){var a,b;if(b=this.numberPoints,this.points.length<this.numberPoints)for(a=this.points.length;b>a;a++)this.points[a]=
new l(q.COORDS_BY_USER,[0,0],this.board,!1)},update:function(){return this.needsUpdate&&(this.visProp.trace&&this.cloneToBackground(!0),this.updateCurve()),this},updateRenderer:function(){var a;return this.needsUpdate&&this.visProp.visible&&(a=this.isReal,this.checkReal(),(this.isReal||a)&&this.board.renderer.updateCurve(this),this.isReal?a!==this.isReal&&(this.board.renderer.show(this),this.hasLabel&&this.label.visProp.visible&&this.board.renderer.show(this.label.content)):a!==this.isReal&&(this.board.renderer.hide(this),
this.hasLabel&&this.label.visProp.visible&&this.board.renderer.hide(this.label)),this.hasLabel&&k.exists(this.label.visProp)&&this.label.visProp.visible&&(this.label.update(),this.board.renderer.updateText(this.label))),this},updateDataArray:function(){},updateCurve:function(){var a,b,c,d,e=!1;if(this.updateTransformMatrix(),this.updateDataArray(),b=this.minX(),c=this.maxX(),k.exists(this.dataX))for(a=this.numberPoints=this.dataX.length,this.allocatePoints(),c=0;a>c;c++)b=c,k.exists(this.dataY)?(d=
c,this.points[c].setCoordinates(q.COORDS_BY_USER,[this.dataX[c],this.dataY[c]],!1)):(d=this.X(b),this.points[c].setCoordinates(q.COORDS_BY_USER,[this.dataX[c],this.Y(d,e)],!1)),this.updateTransform(this.points[c]),e=!0;else{if(this.visProp.doadvancedplot?this.updateParametricCurve(b,c,a):this.visProp.doadvancedplotold?this.updateParametricCurveOld(b,c,a):(this.numberPoints=this.board.updateQuality===this.board.BOARD_QUALITY_HIGH?this.visProp.numberpointshigh:this.visProp.numberpointslow,this.allocatePoints(),
this.updateParametricCurveNaive(b,c,this.numberPoints)),a=this.numberPoints,this.visProp.useqdt&&this.board.updateQuality===this.board.BOARD_QUALITY_HIGH)for(this.qdt=new f(this.board.getBoundingBox()),c=0;c<this.points.length;c++)this.qdt.insert(this.points[c]),0<c&&(this.points[c].prev=this.points[c-1]),a-1>c&&(this.points[c].next=this.points[c+1]);for(c=0;a>c;c++)this.updateTransform(this.points[c])}return this},updateTransformMatrix:function(){var a,b,c=this.transformations.length;this.transformMat=
[[1,0,0],[0,1,0],[0,0,1]];for(b=0;c>b;b++)a=this.transformations[b],a.update(),this.transformMat=h.matMatMult(a.matrix,this.transformMat);return this},checkReal:function(){var a,b,c=!1,f=this.numberPoints;for(a=0;f>a;a++)if(b=this.points[a].usrCoords,!isNaN(b[1])&&!isNaN(b[2])&&Math.abs(b[0])>h.eps){c=!0;break}this.isReal=c},updateParametricCurveNaive:function(a,b,c){var f,d=!1,e=(b-a)/c;for(b=0;c>b;b++)f=a+b*e,this.points[b].setCoordinates(q.COORDS_BY_USER,[this.X(f,d),this.Y(f,d)],!1),d=!0;return this},
updateParametricCurveOld:function(a,b){var c,f,d,e,k,g,t,m,z,B,A,C=!1,F=new l(q.COORDS_BY_USER,[0,0],this.board,!1),D=[],J=[],G=[],L=[];d=!1;var N=0;this.board.updateQuality===this.board.BOARD_QUALITY_LOW?(z=15,B=10,A=10):(z=21,B=.7,A=.7);L[0]=b-a;for(c=1;z>c;c++)L[c]=.5*L[c-1];c=1;D[0]=1;J[0]=0;f=a;F.setCoordinates(q.COORDS_BY_USER,[this.X(f,C),this.Y(f,C)],!1);C=!0;k=F.scrCoords[1];g=F.scrCoords[2];f=b;F.setCoordinates(q.COORDS_BY_USER,[this.X(f,C),this.Y(f,C)],!1);f=F.scrCoords[1];e=F.scrCoords[2];
G[0]=[f,e];t=1;m=0;this.points=[];this.points[N++]=new l(q.COORDS_BY_SCREEN,[k,g],this.board,!1);do{for(d=this.isDistOK(f-k,e-g,B,A)||this.isSegmentOutside(k,g,f,e);z>m&&(!d||6>m)&&(7>=m||this.isSegmentDefined(k,g,f,e));)D[t]=c,J[t]=m,G[t]=[f,e],t+=1,c=2*c-1,m++,f=a+c*L[m],F.setCoordinates(q.COORDS_BY_USER,[this.X(f,C),this.Y(f,C)],!1,!0),f=F.scrCoords[1],e=F.scrCoords[2],d=this.isDistOK(f-k,e-g,B,A)||this.isSegmentOutside(k,g,f,e);if(1<N){var M=this.points[N-2].scrCoords,H=[f,e];m=this.points[N-
1].scrCoords;k=c=void 0;g=m[1]-M[1];m=m[2]-M[2];d=H[0]-M[1];M=H[1]-M[2];H=d*d+M*M;d=(H>=h.eps&&(c=(g*d+m*M)/H,0<c&&(1>=c?(g-=c*d,m-=c*M):(g-=d,m-=M))),k=g*g+m*m,Math.sqrt(k));.015>d&&(N-=1)}this.points[N]=new l(q.COORDS_BY_SCREEN,[f,e],this.board,!1);N+=1;k=f;g=e;t-=1;f=G[t][0];e=G[t][1];m=J[t]+1;c=2*D[t]}while(0<t&&5E5>N);return this.numberPoints=this.points.length,this},isSegmentOutside:function(a,b,c,f){return 0>b&&0>f||b>this.board.canvasHeight&&f>this.board.canvasHeight||0>a&&0>c||a>this.board.canvasWidth&&
c>this.board.canvasWidth},isDistOK:function(a,b,c,f){return Math.abs(a)<c&&Math.abs(b)<f&&!isNaN(a+b)},isSegmentDefined:function(a,b,c,f){return!(isNaN(a+b)&&isNaN(c+f))},_insertPoint:function(a){var b=!isNaN(this._lastCrds[1]+this._lastCrds[2]),c=!isNaN(a.scrCoords[1]+a.scrCoords[2]);(!c&&b||c&&(!b||.7<Math.abs(a.scrCoords[1]-this._lastCrds[1])||.7<Math.abs(a.scrCoords[2]-this._lastCrds[2])))&&(this.points.push(a),this._lastCrds=a.copy("scrCoords"))},_borderCase:function(a,b,c,f,d,e,k){var g,h=null,
m=!1;if(k<this.smoothLevel){if(k=new l(q.COORDS_BY_USER,[0,0],this.board,!1),isNaN(a[1]+a[2])&&!isNaN(c[1]+c[2]+b[1]+b[2]))for(c=0;70>c;++c){g=0;do a=.5*(f+e),k.setCoordinates(q.COORDS_BY_USER,[this.X(a,!0),this.Y(a,!0)],!1),b=k.scrCoords,(m=isNaN(b[1]+b[2]))&&(f=a),++g;while(m&&5>g);if(!(5>g))break;e=a;h=b.slice()}else if(isNaN(b[1]+b[2])&&!isNaN(c[1]+c[2]+a[1]+a[2]))for(c=0;70>c;++c){g=0;do a=.5*(e+d),k.setCoordinates(q.COORDS_BY_USER,[this.X(a,!0),this.Y(a,!0)],!1),b=k.scrCoords,(m=isNaN(b[1]+
b[2]))&&(d=a),++g;while(m&&5>g);if(!(5>g))break;e=a;h=b.slice()}if(null!==h)return this._insertPoint(new l(q.COORDS_BY_SCREEN,h.slice(1),this.board,!1)),!0}return!1},_triangleDists:function(a,c,f){var d,e,k,g,h;return d=[a[0]*c[0],.5*(a[1]+c[1]),.5*(a[2]+c[2])],e=b.distance(a,c,3),k=b.distance(a,f,3),g=b.distance(f,c,3),h=b.distance(f,d,3),[e,k,g,h]},_plotRecursive:function(a,b,c,f,d,e){var k,g,h,m,z,B,A=0,C=new l(q.COORDS_BY_USER,[0,0],this.board,!1);if(!(65536<this.numberPoints))return k=.5*(b+
f),C.setCoordinates(q.COORDS_BY_USER,[this.X(k,!0),this.Y(k,!0)],!1),g=C.scrCoords,this._borderCase(a,c,g,b,f,k,d)?this:(h=this._triangleDists(a,c,g),m=d<this.smoothLevel&&h[3]<e,z=d<this.jumpLevel&&(h[2]>.99*h[0]||h[1]>.99*h[0]||1/0===h[0]||1/0===h[1]||1/0===h[2]),B=d<this.smoothLevel+2&&h[0]<.5*(h[1]+h[2]),B&&(A=0,m=!1),--d,z?this._insertPoint(new l(q.COORDS_BY_SCREEN,[0/0,0/0],this.board,!1)):A>=d||m?this._insertPoint(C):(this._plotRecursive(a,b,g,k,d,e),this._insertPoint(C),this._plotRecursive(g,
k,c,f,d,e)),this)},updateParametricCurve:function(a,b){var c,f,d,e,k=!1,g=new l(q.COORDS_BY_USER,[0,0],this.board,!1),h=new l(q.COORDS_BY_USER,[0,0],this.board,!1);return this.board.updateQuality===this.board.BOARD_QUALITY_LOW?(d=12,e=3,this.smoothLevel=d-5,this.jumpLevel=5):(d=17,e=.9,this.smoothLevel=d-9,this.jumpLevel=3),this.points=[],this._lastCrds=[0,0/0,0/0],g.setCoordinates(q.COORDS_BY_USER,[this.X(a,k),this.Y(a,k)],!1),c=g.copy("scrCoords"),k=!0,h.setCoordinates(q.COORDS_BY_USER,[this.X(b,
k),this.Y(b,k)],!1),f=h.copy("scrCoords"),this.points.push(g),this._plotRecursive(c,a,f,b,d,e),this.points.push(h),this.numberPoints=this.points.length,this},updateTransform:function(a){var b;return 0<this.transformations.length&&(b=h.matVecMult(this.transformMat,a.usrCoords),a.setPosition(q.COORDS_BY_USER,[b[1],b[2]])),a},addTransform:function(a){var b=k.isArray(a)?a:[a],c=b.length;for(a=0;c>a;a++)this.transformations.push(b[a]);return this},setPosition:function(a,b){var c,f,d,e=0;k.exists(this.parents)&&
(e=this.parents.length);for(d=0;e>d;d++)if(f=this.board.select(this.parents[d]),!f.draggable())return this;if(b=new l(a,b,this.board,!1),c=this.board.create("transform",b.usrCoords.slice(1),{type:"translate"}),0<e)for(d=0;e>d;d++)f=this.board.select(this.parents[d]),c.applyOnce(f);else 0<this.transformations.length&&this.transformations[this.transformations.length-1].isNumericMatrix?this.transformations[this.transformations.length-1].melt(c):this.addTransform(c);return this},setPositionDirectly:function(a,
b,c){b=new l(a,b,this.board,!1);a=new l(a,c,this.board,!1);a=g.subtract(b.usrCoords,a.usrCoords);return this.setPosition(q.COORDS_BY_USER,a),this},interpolationFunctionFromArray:function(a){var b="data"+a;return function(a){var c,f,d,e=this[b];f=e.length;var g=[];if(isNaN(a))return 0/0;if(0>a)return k.isFunction(e[0])?e[0]():e[0];if(3===this.bezierDegree){if(f/=3,a>=f)return k.isFunction(e[e.length-1])?e[e.length-1]():e[e.length-1];c=3*Math.floor(a);a%=1;d=1-a;for(f=0;4>f;f++)g[f]=k.isFunction(e[c+
f])?e[c+f]():e[c+f];return d*d*(d*g[0]+3*a*g[1])+(3*d*g[2]+a*g[3])*a*a}if(c=a>f-2?f-2:parseInt(Math.floor(a),10),c===a)return k.isFunction(e[c])?e[c]():e[c];for(f=0;2>f;f++)g[f]=k.isFunction(e[c+f])?e[c+f]():e[c+f];return g[0]+(g[1]-g[0])*(a-c)}},generateTerm:function(a,b,c,f,d){var e,g;k.isArray(b)?(this.dataX=b,this.numberPoints=this.dataX.length,this.X=this.interpolationFunctionFromArray("X"),this.visProp.curvetype="plot",this.isDraggable=!0):(this.X=k.createFunction(b,this.board,a),k.isString(b)?
this.visProp.curvetype="functiongraph":(k.isFunction(b)||k.isNumber(b))&&(this.visProp.curvetype="parameter"),this.isDraggable=!0);k.isArray(c)?(this.dataY=c,this.Y=this.interpolationFunctionFromArray("Y")):this.Y=k.createFunction(c,this.board,a);k.isFunction(b)&&k.isArray(c)&&(e=k.createFunction(c[0],this.board,""),g=k.createFunction(c[1],this.board,""),this.X=function(a){return b(a)*Math.cos(a)+e()},this.Y=function(a){return b(a)*Math.sin(a)+g()},this.visProp.curvetype="polar");k.exists(f)&&(this.minX=
k.createFunction(f,this.board,""));k.exists(d)&&(this.maxX=k.createFunction(d,this.board,""))},notifyParents:function(b){a.findDependencies(this,b,this.board)},getLabelAnchor:function(){var a,c,f;c=.05*this.board.canvasWidth;f=.05*this.board.canvasHeight;var d=.95*this.board.canvasWidth,e=.95*this.board.canvasHeight;switch(this.visProp.label.position){case "ulft":break;case "llft":f=e;break;case "rt":c=d;f=.5*e;break;case "lrt":c=d;f=e;break;case "urt":c=d;break;case "top":c=.5*d;break;case "bot":c=
.5*d;f=e;break;default:f=.5*e}return a=new l(q.COORDS_BY_SCREEN,[c,f],this.board,!1),b.projectCoordsToCurve(a.usrCoords[1],a.usrCoords[2],0,this,this.board)[0]},cloneToBackground:function(){var a,b={id:this.id+"T"+this.numTraces,elementClass:q.OBJECT_CLASS_CURVE,points:this.points.slice(0),bezierDegree:this.bezierDegree,numberPoints:this.numberPoints,board:this.board,visProp:k.deepCopy(this.visProp,this.visProp.traceattributes,!0)};return b.visProp.layer=this.board.options.layer.trace,b.visProp.curvetype=
this.visProp.curvetype,this.numTraces++,k.clearVisPropOld(b),a=this.board.renderer.enhancedRendering,this.board.renderer.enhancedRendering=!0,this.board.renderer.drawCurve(b),this.board.renderer.enhancedRendering=a,this.traces[b.id]=b.rendNode,this},bounds:function(){var a,b=1/0,c=-1/0,f=1/0,d=-1/0,e=this.points.length;for(a=0;e>a;a++)b>this.points[a].usrCoords[1]&&(b=this.points[a].usrCoords[1]),c<this.points[a].usrCoords[1]&&(c=this.points[a].usrCoords[1]),f>this.points[a].usrCoords[2]&&(f=this.points[a].usrCoords[2]),
d<this.points[a].usrCoords[2]&&(d=this.points[a].usrCoords[2]);return[b,d,c,f]}}),m.createCurve=function(a,b,c){c=k.copyAttributes(c,a.options,"curve");return new m.Curve(a,["x"].concat(b),c)},m.registerElement("curve",m.createCurve),m.createFunctiongraph=function(a,b,c){var f;b=["x","x"].concat(b);return f=k.copyAttributes(c,a.options,"curve"),f.curvetype="functiongraph",new m.Curve(a,b,f)},m.registerElement("functiongraph",m.createFunctiongraph),m.registerElement("plot",m.createFunctiongraph),m.createSpline=
function(a,b,c){var f;return f=function(){var a,c=[],f=[];return function(e,g){var h;if(!g){if(c=[],f=[],2===b.length&&k.isArray(b[0])&&k.isArray(b[1])&&b[0].length===b[1].length)for(h=0;h<b[0].length;h++)"function"==typeof b[0][h]?c.push(b[0][h]()):c.push(b[0][h]),"function"==typeof b[1][h]?f.push(b[1][h]()):f.push(b[1][h]);else for(h=0;h<b.length;h++)if(k.isPoint(b[h]))c.push(b[h].X()),f.push(b[h].Y());else if(k.isArray(b[h])&&2===b[h].length)for(h=0;h<b.length;h++)"function"==typeof b[h][0]?c.push(b[h][0]()):
c.push(b[h][0]),"function"==typeof b[h][1]?f.push(b[h][1]()):f.push(b[h][1]);a=d.splineDef(c,f)}return d.splineEval(e,c,f,a)}},a.create("curve",["x",f()],c)},m.registerElement("spline",m.createSpline),m.createRiemannsum=function(a,b,c){var f,e,g,h,l,t;if(t=k.copyAttributes(c,a.options,"riemannsum"),t.curvetype="plot",g=b[0],f=k.createFunction(b[1],a,""),!k.exists(f))throw Error("JSXGraph: JXG.createRiemannsum: argument '2' n has to be number or function.\nPossible parent types: [function,n:number|function,type,start:number|function,end:number|function]");
if(e=k.createFunction(b[2],a,"",!1),!k.exists(e))throw Error("JSXGraph: JXG.createRiemannsum: argument 3 'type' has to be string or function.\nPossible parent types: [function,n:number|function,type,start:number|function,end:number|function]");return h=[[0],[0]].concat(b.slice(3)),l=a.create("curve",h,t),l.sum=0,l.Value=function(){return this.sum},l.updateDataArray=function(){var a=d.riemann(g,f(),e(),this.minX(),this.maxX());this.dataX=a[0];this.dataY=a[1];this.sum=a[2]},l},m.registerElement("riemannsum",
m.createRiemannsum),m.createTracecurve=function(a,b,c){var f,d,e,g;if(2!==b.length)throw Error("JSXGraph: Can't create trace curve with given parent'\nPossible parent types: [glider, point]");if(d=a.select(b[0]),e=a.select(b[1]),d.type!==q.OBJECT_TYPE_GLIDER||!k.isPoint(e))throw Error("JSXGraph: Can't create trace curve with parent types '"+typeof b[0]+"' and '"+typeof b[1]+"'.\nPossible parent types: [glider, point]");return g=k.copyAttributes(c,a.options,"tracecurve"),g.curvetype="plot",f=a.create("curve",
[[0],[0]],g),f.updateDataArray=function(){var a,b,c,f,k,h,n,p=g.numberpoints,l=d.position,m=d.slideObject,s=m.minX();b=(m.maxX()-s)/p;this.dataX=[];this.dataY=[];m.elementClass!==q.OBJECT_CLASS_CURVE&&p++;for(a=0;p>a;a++){c=s+a*b;h=m.X(c)/m.Z(c);c=m.Y(c)/m.Z(c);d.setPositionDirectly(q.COORDS_BY_USER,[h,c]);h=!1;for(f in this.board.objects)if(this.board.objects.hasOwnProperty(f)&&(k=this.board.objects[f],k===d&&(h=!0),h&&k.needsRegularUpdate&&(n=k.visProp.trace,k.visProp.trace=!1,k.needsUpdate=!0,
k.update(!0),k.visProp.trace=n,k===e)))break;this.dataX[a]=e.X();this.dataY[a]=e.Y()}d.position=l;h=!1;for(f in this.board.objects)if(this.board.objects.hasOwnProperty(f)&&(k=this.board.objects[f],k===d&&(h=!0),h&&k.needsRegularUpdate&&(n=k.visProp.trace,k.visProp.trace=!1,k.needsUpdate=!0,k.update(!0),k.visProp.trace=n,k===e)))break},f},m.registerElement("tracecurve",m.createTracecurve),m.createStepfunction=function(a,b,c){var f,d;if(2!==b.length)throw Error("JSXGraph: Can't create step function with given parent'\nPossible parent types: [array, array|function]");
return d=k.copyAttributes(c,a.options,"stepfunction"),f=a.create("curve",b,d),f.updateDataArray=function(){var a,b=0,c=this.xterm.length;if(this.dataX=[],this.dataY=[],0!==c)for(this.dataX[b]=this.xterm[0],this.dataY[b]=this.yterm[0],++b,a=1;c>a;++a)this.dataX[b]=this.xterm[a],this.dataY[b]=this.dataY[b-1],++b,this.dataX[b]=this.xterm[a],this.dataY[b]=this.yterm[a],++b},f},m.registerElement("stepfunction",m.createStepfunction),{Curve:m.Curve,createCurve:m.createCurve,createFunctiongraph:m.createFunctiongraph,
createPlot:m.createPlot,createSpline:m.createSpline,createRiemannsum:m.createRiemannsum,createTracecurve:m.createTracecurve,createStepfunction:m.createStepfunction}});E("element/composition","jxg math/math math/geometry math/numerics math/statistics base/coords utils/type base/constants base/point base/line base/circle base/transformation base/composition base/curve base/text".split(" "),function(m,q,l,e,h,g,d,b,a,k,c,f,n){return m.createOrthogonalProjection=function(a,c,f){var e,k,g,h;if(d.isPoint(c[0])&&
c[1].elementClass===b.OBJECT_CLASS_LINE)k=c[0],e=c[1];else{if(!d.isPoint(c[1])||c[0].elementClass!==b.OBJECT_CLASS_LINE)throw Error("JSXGraph: Can't create perpendicular point with parent types '"+typeof c[0]+"' and '"+typeof c[1]+"'.\nPossible parent types: [point,line]");k=c[1];e=c[0]}return h=d.copyAttributes(f,a.options,"orthogonalprojection"),g=a.create("point",[function(){return l.projectPointToLine(k,e,a)}],h),k.addChild(g),e.addChild(g),g.elType="orthogonalprojection",g.parents=[k.id,g.id],
g.update(),g.generatePolynomial=function(){var a=e.point1.symbolic.x,b=e.point1.symbolic.y,c=e.point2.symbolic.x,f=e.point2.symbolic.y,d=k.symbolic.x,h=k.symbolic.y,n=g.symbolic.x,p=g.symbolic.y;return["("+b+")*("+n+")-("+b+")*("+c+")+("+p+")*("+c+")-("+a+")*("+p+")+("+a+")*("+f+")-("+n+")*("+f+")","("+h+")*("+b+")-("+h+")*("+f+")-("+p+")*("+b+")+("+p+")*("+f+")+("+d+")*("+a+")-("+d+")*("+c+")-("+n+")*("+a+")+("+n+")*("+c+")"]},g},m.createPerpendicular=function(a,c,f){var e,g,h,n;if(c[0]=a.select(c[0]),
c[1]=a.select(c[1]),d.isPoint(c[0])&&c[1].elementClass===b.OBJECT_CLASS_LINE)g=c[1],e=c[0];else{if(!d.isPoint(c[1])||c[0].elementClass!==b.OBJECT_CLASS_LINE)throw Error("JSXGraph: Can't create perpendicular with parent types '"+typeof c[0]+"' and '"+typeof c[1]+"'.\nPossible parent types: [line,point]");g=c[0];e=c[1]}return n=d.copyAttributes(f,a.options,"perpendicular"),h=k.createLine(a,[function(){return g.stdform[2]*e.X()-g.stdform[1]*e.Y()},function(){return-g.stdform[2]*e.Z()},function(){return g.stdform[1]*
e.Z()}],n),h.elType="perpendicular",h.parents=[g.id,e.id],h},m.createPerpendicularPoint=function(a,c,f){var e,k,g;if(d.isPoint(c[0])&&c[1].elementClass===b.OBJECT_CLASS_LINE)k=c[0],e=c[1];else{if(!d.isPoint(c[1])||c[0].elementClass!==b.OBJECT_CLASS_LINE)throw Error("JSXGraph: Can't create perpendicular point with parent types '"+typeof c[0]+"' and '"+typeof c[1]+"'.\nPossible parent types: [point,line]");k=c[1];e=c[0]}return g=a.create("point",[function(){return l.perpendicular(e,k,a)[0]}],f),k.addChild(g),
e.addChild(g),g.elType="perpendicularpoint",g.parents=[k.id,e.id],g.update(),g.generatePolynomial=function(){var a=e.point1.symbolic.x,b=e.point1.symbolic.y,c=e.point2.symbolic.x,f=e.point2.symbolic.y,d=k.symbolic.x,h=k.symbolic.y,n=g.symbolic.x,p=g.symbolic.y;return["("+b+")*("+n+")-("+b+")*("+c+")+("+p+")*("+c+")-("+a+")*("+p+")+("+a+")*("+f+")-("+n+")*("+f+")","("+h+")*("+b+")-("+h+")*("+f+")-("+p+")*("+b+")+("+p+")*("+f+")+("+d+")*("+a+")-("+d+")*("+c+")-("+n+")*("+a+")+("+n+")*("+c+")"]},g},
m.createPerpendicularSegment=function(a,c,f){var e,g,h,n,t;if(c[0]=a.select(c[0]),c[1]=a.select(c[1]),d.isPoint(c[0])&&c[1].elementClass===b.OBJECT_CLASS_LINE)g=c[1],e=c[0];else{if(!d.isPoint(c[1])||c[0].elementClass!==b.OBJECT_CLASS_LINE)throw Error("JSXGraph: Can't create perpendicular with parent types '"+typeof c[0]+"' and '"+typeof c[1]+"'.\nPossible parent types: [line,point]");g=c[0];e=c[1]}return t=d.copyAttributes(f,a.options,"perpendicularsegment","point"),n=m.createPerpendicularPoint(a,
[g,e],t),n.dump=!1,d.exists(f.layer)||(f.layer=a.options.layer.line),t=d.copyAttributes(f,a.options,"perpendicularsegment"),h=k.createLine(a,[function(){return l.perpendicular(g,e,a)[1]?[n,e]:[e,n]}],t),h.point=n,h.elType="perpendicularsegment",h.parents=[e.id,g.id],h.subs={point:n},h},m.createMidpoint=function(a,c,f){var e,k,g;if(2===c.length&&d.isPoint(c[0])&&d.isPoint(c[1]))e=c[0],k=c[1];else{if(1!==c.length||c[0].elementClass!==b.OBJECT_CLASS_LINE)throw Error("JSXGraph: Can't create midpoint.\nPossible parent types: [point,point], [line]");
e=c[0].point1;k=c[0].point2}return g=a.create("point",[function(){var a=e.coords.usrCoords[1]+k.coords.usrCoords[1];return isNaN(a)||Math.abs(e.coords.usrCoords[0])<q.eps||Math.abs(k.coords.usrCoords[0])<q.eps?0/0:.5*a},function(){var a=e.coords.usrCoords[2]+k.coords.usrCoords[2];return isNaN(a)||Math.abs(e.coords.usrCoords[0])<q.eps||Math.abs(k.coords.usrCoords[0])<q.eps?0/0:.5*a}],f),e.addChild(g),k.addChild(g),g.elType="midpoint",g.parents=[e.id,k.id],g.prepareUpdate().update(),g.generatePolynomial=
function(){var a=e.symbolic.x,b=e.symbolic.y,c=k.symbolic.x,f=k.symbolic.y,d=g.symbolic.x,h=g.symbolic.y;return["("+b+")*("+d+")-("+b+")*("+c+")+("+h+")*("+c+")-("+a+")*("+h+")+("+a+")*("+f+")-("+d+")*("+f+")","("+a+")^2 - 2*("+a+")*("+d+")+("+b+")^2-2*("+b+")*("+h+")-("+c+")^2+2*("+c+")*("+d+")-("+f+")^2+2*("+f+")*("+h+")"]},g},m.createParallelPoint=function(a,c,f){var d,e,k,g;if(3===c.length&&c[0].elementClass===b.OBJECT_CLASS_POINT&&c[1].elementClass===b.OBJECT_CLASS_POINT&&c[2].elementClass===
b.OBJECT_CLASS_POINT)d=c[0],e=c[1],k=c[2];else if(c[0].elementClass===b.OBJECT_CLASS_POINT&&c[1].elementClass===b.OBJECT_CLASS_LINE)k=c[0],d=c[1].point1,e=c[1].point2;else{if(c[1].elementClass!==b.OBJECT_CLASS_POINT||c[0].elementClass!==b.OBJECT_CLASS_LINE)throw Error("JSXGraph: Can't create parallel point with parent types '"+typeof c[0]+"', '"+typeof c[1]+"' and '"+typeof c[2]+"'.\nPossible parent types: [line,point], [point,point,point]");k=c[1];d=c[0].point1;e=c[0].point2}return g=a.create("point",
[function(){return k.coords.usrCoords[1]+e.coords.usrCoords[1]-d.coords.usrCoords[1]},function(){return k.coords.usrCoords[2]+e.coords.usrCoords[2]-d.coords.usrCoords[2]}],f),d.addChild(g),e.addChild(g),k.addChild(g),g.elType="parallelpoint",g.parents=[d.id,e.id,k.id],g.prepareUpdate().update(),g.generatePolynomial=function(){var a=d.symbolic.x,b=d.symbolic.y,c=e.symbolic.x,f=e.symbolic.y,h=k.symbolic.x,n=k.symbolic.y,p=g.symbolic.x,l=g.symbolic.y;return["("+f+")*("+p+")-("+f+")*("+h+")-("+b+")*("+
p+")+("+b+")*("+h+")-("+l+")*("+c+")+("+l+")*("+a+")+("+n+")*("+c+")-("+n+")*("+a+")","("+l+")*("+a+")-("+l+")*("+h+")-("+f+")*("+a+")+("+f+")*("+h+")-("+p+")*("+b+")+("+p+")*("+n+")+("+c+")*("+b+")-("+c+")*("+n+")"]},g},m.createParallel=function(a,c,f){var e,k,g,h,n;return e=null,3===c.length?(e=c[2],h=function(){return q.crossProduct(c[0].coords.usrCoords,c[1].coords.usrCoords)}):c[0].elementClass===b.OBJECT_CLASS_POINT?(e=c[0],h=function(){return c[1].stdform}):c[1].elementClass===b.OBJECT_CLASS_POINT&&
(e=c[1],h=function(){return c[0].stdform}),d.exists(f.layer)||(f.layer=a.options.layer.line),n=d.copyAttributes(f,a.options,"parallel","point"),k=a.create("point",[function(){return q.crossProduct([1,0,0],h())}],n),k.isDraggable=!0,n=d.copyAttributes(f,a.options,"parallel"),g=a.create("line",[e,k],n),g.elType="parallel",g.parents=[c[0].id,c[1].id],3===c.length&&g.parents.push(c[2].id),g.point=k,g},m.createArrowParallel=function(a,b,c){var f;try{return c.firstArrow=!1,c.lastArrow=!0,f=m.createParallel(a,
b,c).setAttribute({straightFirst:!1,straightLast:!1}),f.elType="arrowparallel",f}catch(d){throw Error("JSXGraph: Can't create arrowparallel with parent types '"+typeof b[0]+"' and '"+typeof b[1]+"'.\nPossible parent types: [line,point], [point,point,point]");}},m.createNormal=function(a,c,f){var k,g,h,n,l,m;if(1===c.length)k=c[0],g=k.slideObject;else{if(2!==c.length)throw Error("JSXGraph: Can't create normal with parent types '"+typeof c[0]+"' and '"+typeof c[1]+"'.\nPossible parent types: [point,line], [point,circle], [glider]");
if(d.isPoint(c[0]))k=c[0],g=c[1];else{if(!d.isPoint(c[1]))throw Error("JSXGraph: Can't create normal with parent types '"+typeof c[0]+"' and '"+typeof c[1]+"'.\nPossible parent types: [point,line], [point,circle], [glider]");g=c[0];k=c[1]}}if(m=d.copyAttributes(f,a.options,"normal"),g.elementClass===b.OBJECT_CLASS_LINE)h=d.copyAttributes(f,a.options,"normal","point"),f=a.create("point",[function(){var a=q.crossProduct([1,0,0],g.stdform);return[a[0],-a[2],a[1]]}],h),f.isDraggable=!0,h=a.create("line",
[k,f],m),h.point=f;else if(g.elementClass===b.OBJECT_CLASS_CIRCLE)h=a.create("line",[g.midpoint,k],m);else if(g.elementClass===b.OBJECT_CLASS_CURVE)"plot"!==g.visProp.curvetype?(n=g.X,l=g.Y,h=a.create("line",[function(){return-k.X()*e.D(n)(k.position)-k.Y()*e.D(l)(k.position)},function(){return e.D(n)(k.position)},function(){return e.D(l)(k.position)}],m)):h=a.create("line",[function(){var a=Math.floor(k.position),b=k.position-a;return a===g.numberPoints-1&&(a-=1,b=1),0>a?1:(g.Y(a)+b*(g.Y(a+1)-g.Y(a)))*
(g.Y(a)-g.Y(a+1))-(g.X(a)+b*(g.X(a+1)-g.X(a)))*(g.X(a+1)-g.X(a))},function(){var a=Math.floor(k.position);return a===g.numberPoints-1&&(a-=1),0>a?0:g.X(a+1)-g.X(a)},function(){var a=Math.floor(k.position);return a===g.numberPoints-1&&(a-=1),0>a?0:g.Y(a+1)-g.Y(a)}],m);else{if(g.type!==b.OBJECT_TYPE_TURTLE)throw Error("JSXGraph: Can't create normal with parent types '"+typeof c[0]+"' and '"+typeof c[1]+"'.\nPossible parent types: [point,line], [point,circle], [glider]");h=a.create("line",[function(){var a,
c,f=Math.floor(k.position),d=k.position-f;for(c=0;c<g.objects.length;c++)if(a=g.objects[c],a.type===b.OBJECT_TYPE_CURVE){if(f<a.numberPoints)break;f-=a.numberPoints}return f===a.numberPoints-1&&(f-=1,d=1),0>f?1:(a.Y(f)+d*(a.Y(f+1)-a.Y(f)))*(a.Y(f)-a.Y(f+1))-(a.X(f)+d*(a.X(f+1)-a.X(f)))*(a.X(f+1)-a.X(f))},function(){var a,c,f=Math.floor(k.position);for(c=0;c<g.objects.length;c++)if(a=g.objects[c],a.type===b.OBJECT_TYPE_CURVE){if(f<a.numberPoints)break;f-=a.numberPoints}return f===a.numberPoints-1&&
(f-=1),0>f?0:a.X(f+1)-a.X(f)},function(){var a,c,f=Math.floor(k.position);for(c=0;c<g.objects.length;c++)if(a=g.objects[c],a.type===b.OBJECT_TYPE_CURVE){if(f<a.numberPoints)break;f-=a.numberPoints}return f===a.numberPoints-1&&(f-=1),0>f?0:a.Y(f+1)-a.Y(f)}],m)}h.parents=[];for(a=0;a<c.length;a++)h.parents.push(c[a].id);return h.elType="normal",h},m.createBisector=function(a,c,f){var e,g,h,n;if(c[0].elementClass===b.OBJECT_CLASS_POINT&&c[1].elementClass===b.OBJECT_CLASS_POINT&&c[2].elementClass===b.OBJECT_CLASS_POINT){n=
d.copyAttributes(f,a.options,"bisector","point");n.snapToGrid=!1;e=a.create("point",[function(){return l.angleBisector(c[0],c[1],c[2],a)}],n);e.dump=!1;for(h=0;3>h;h++)c[h].addChild(e);return d.exists(f.layer)||(f.layer=a.options.layer.line),n=d.copyAttributes(f,a.options,"bisector"),g=k.createLine(a,[c[1],e],n),g.point=e,g.elType="bisector",g.parents=[c[0].id,c[1].id,c[2].id],g.subs={point:e},g}throw Error("JSXGraph: Can't create angle bisector with parent types '"+typeof c[0]+"' and '"+typeof c[1]+
"'.\nPossible parent types: [point,point,point]");},m.createAngularBisectorsOfTwoLines=function(a,c,f){var e,k,g,h,l=a.select(c[0]),m=a.select(c[1]);if(l.elementClass!==b.OBJECT_CLASS_LINE||m.elementClass!==b.OBJECT_CLASS_LINE)throw Error("JSXGraph: Can't create angle bisectors of two lines with parent types '"+typeof c[0]+"' and '"+typeof c[1]+"'.\nPossible parent types: [line,line]");return d.exists(f.layer)||(f.layer=a.options.layer.line),g=d.copyAttributes(f,a.options,"bisectorlines","line1"),
e=a.create("line",[function(){var a=Math.sqrt(l.stdform[1]*l.stdform[1]+l.stdform[2]*l.stdform[2]),b=Math.sqrt(m.stdform[1]*m.stdform[1]+m.stdform[2]*m.stdform[2]);return l.stdform[0]/a-m.stdform[0]/b},function(){var a=Math.sqrt(l.stdform[1]*l.stdform[1]+l.stdform[2]*l.stdform[2]),b=Math.sqrt(m.stdform[1]*m.stdform[1]+m.stdform[2]*m.stdform[2]);return l.stdform[1]/a-m.stdform[1]/b},function(){var a=Math.sqrt(l.stdform[1]*l.stdform[1]+l.stdform[2]*l.stdform[2]),b=Math.sqrt(m.stdform[1]*m.stdform[1]+
m.stdform[2]*m.stdform[2]);return l.stdform[2]/a-m.stdform[2]/b}],g),d.exists(f.layer)||(f.layer=a.options.layer.line),g=d.copyAttributes(f,a.options,"bisectorlines","line2"),k=a.create("line",[function(){var a=Math.sqrt(l.stdform[1]*l.stdform[1]+l.stdform[2]*l.stdform[2]),b=Math.sqrt(m.stdform[1]*m.stdform[1]+m.stdform[2]*m.stdform[2]);return l.stdform[0]/a+m.stdform[0]/b},function(){var a=Math.sqrt(l.stdform[1]*l.stdform[1]+l.stdform[2]*l.stdform[2]),b=Math.sqrt(m.stdform[1]*m.stdform[1]+m.stdform[2]*
m.stdform[2]);return l.stdform[1]/a+m.stdform[1]/b},function(){var a=Math.sqrt(l.stdform[1]*l.stdform[1]+l.stdform[2]*l.stdform[2]),b=Math.sqrt(m.stdform[1]*m.stdform[1]+m.stdform[2]*m.stdform[2]);return l.stdform[2]/a+m.stdform[2]/b}],g),h=new n({line1:e,line2:k}),e.dump=!1,k.dump=!1,h.elType="bisectorlines",h.parents=[l.id,m.id],h.subs={line1:e,line2:k},h},m.createCircumcenter=function(c,f,d){var e,k,g,h;if(f[0].elementClass===b.OBJECT_CLASS_POINT&&f[1].elementClass===b.OBJECT_CLASS_POINT&&f[2].elementClass===
b.OBJECT_CLASS_POINT){k=f[0];g=f[1];h=f[2];e=a.createPoint(c,[function(){return l.circumcenterMidpoint(k,g,h,c)}],d);for(d=0;3>d;d++)f[d].addChild(e);return e.elType="circumcenter",e.parents=[k.id,g.id,h.id],e.generatePolynomial=function(){var a=k.symbolic.x,b=k.symbolic.y,c=h.symbolic.x,f=h.symbolic.y,d=e.symbolic.x,n=e.symbolic.y,p=["((",d,")-(",a,"))^2+((",n,")-(",b,"))^2-((",d,")-(",g.symbolic.x,"))^2-((",n,")-(",g.symbolic.y,"))^2"].join(""),a=["((",d,")-(",a,"))^2+((",n,")-(",b,"))^2-((",d,
")-(",c,"))^2-((",n,")-(",f,"))^2"].join("");return[p,a]},e}throw Error("JSXGraph: Can't create circumcircle midpoint with parent types '"+typeof f[0]+"', '"+typeof f[1]+"' and '"+typeof f[2]+"'.\nPossible parent types: [point,point,point]");},m.createIncenter=function(a,c,f){var e,k,h,n;if(!(3<=c.length&&d.isPoint(c[0])&&d.isPoint(c[1])&&d.isPoint(c[2])))throw Error("JSXGraph: Can't create incenter with parent types '"+typeof c[0]+"', '"+typeof c[1]+"' and '"+typeof c[2]+"'.\nPossible parent types: [point,point,point]");
return k=c[0],h=c[1],n=c[2],e=a.create("point",[function(){var c,f,d;return c=Math.sqrt((h.X()-n.X())*(h.X()-n.X())+(h.Y()-n.Y())*(h.Y()-n.Y())),f=Math.sqrt((k.X()-n.X())*(k.X()-n.X())+(k.Y()-n.Y())*(k.Y()-n.Y())),d=Math.sqrt((h.X()-k.X())*(h.X()-k.X())+(h.Y()-k.Y())*(h.Y()-k.Y())),new g(b.COORDS_BY_USER,[(c*k.X()+f*h.X()+d*n.X())/(c+f+d),(c*k.Y()+f*h.Y()+d*n.Y())/(c+f+d)],a)}],f),e.elType="incenter",e.parents=[c[0].id,c[1].id,c[2].id],e},m.createCircumcircle=function(a,b,f){var e,k,g;try{g=d.copyAttributes(f,
a.options,"circumcircle","center"),e=m.createCircumcenter(a,b,g),e.dump=!1,d.exists(f.layer)||(f.layer=a.options.layer.circle),g=d.copyAttributes(f,a.options,"circumcircle"),k=c.createCircle(a,[e,b[0]],g),k.elType="circumcircle",k.parents=[b[0].id,b[1].id,b[2].id],k.subs={center:e}}catch(h){throw Error("JSXGraph: Can't create circumcircle with parent types '"+typeof b[0]+"', '"+typeof b[1]+"' and '"+typeof b[2]+"'.\nPossible parent types: [point,point,point]");}return k},m.createIncircle=function(a,
b,f){var e,k,g;try{g=d.copyAttributes(f,a.options,"incircle","center"),e=m.createIncenter(a,b,g),e.dump=!1,d.exists(f.layer)||(f.layer=a.options.layer.circle),g=d.copyAttributes(f,a.options,"incircle"),k=c.createCircle(a,[e,function(){var a=Math.sqrt((b[1].X()-b[2].X())*(b[1].X()-b[2].X())+(b[1].Y()-b[2].Y())*(b[1].Y()-b[2].Y())),c=Math.sqrt((b[0].X()-b[2].X())*(b[0].X()-b[2].X())+(b[0].Y()-b[2].Y())*(b[0].Y()-b[2].Y())),f=Math.sqrt((b[1].X()-b[0].X())*(b[1].X()-b[0].X())+(b[1].Y()-b[0].Y())*(b[1].Y()-
b[0].Y())),d=(a+c+f)/2;return Math.sqrt((d-a)*(d-c)*(d-f)/d)}],g),k.elType="incircle",k.parents=[b[0].id,b[1].id,b[2].id],k.center=e,k.subs={center:e}}catch(h){throw Error("JSXGraph: Can't create circumcircle with parent types '"+typeof b[0]+"', '"+typeof b[1]+"' and '"+typeof b[2]+"'.\nPossible parent types: [point,point,point]");}return k},m.createReflection=function(c,d,e){var k,g,h,n;if(d[0].elementClass===b.OBJECT_CLASS_POINT&&d[1].elementClass===b.OBJECT_CLASS_LINE)g=d[0],k=d[1];else{if(d[1].elementClass!==
b.OBJECT_CLASS_POINT||d[0].elementClass!==b.OBJECT_CLASS_LINE)throw Error("JSXGraph: Can't create reflection point with parent types '"+typeof d[0]+"' and '"+typeof d[1]+"'.\nPossible parent types: [line,point]");g=d[1];k=d[0]}return n=f.createTransform(c,[k],{type:"reflect"}),h=a.createPoint(c,[g,n],e),g.addChild(h),k.addChild(h),h.elType="reflection",h.parents=[d[0].id,d[1].id],h.prepareUpdate().update(),h.generatePolynomial=function(){var a=k.point1.symbolic.x,b=k.point1.symbolic.y,c=g.symbolic.x,
f=g.symbolic.y,d=h.symbolic.x,e=h.symbolic.y,n=["((",e,")-(",f,"))*((",b,")-(",k.point2.symbolic.y,"))+((",a,")-(",k.point2.symbolic.x,"))*((",d,")-(",c,"))"].join(""),a=["((",d,")-(",a,"))^2+((",e,")-(",b,"))^2-((",c,")-(",a,"))^2-((",f,")-(",b,"))^2"].join("");return[n,a]},h},m.createMirrorPoint=function(b,c,f){var e;if(!d.isPoint(c[0])||!d.isPoint(c[1]))throw Error("JSXGraph: Can't create mirror point with parent types '"+typeof c[0]+"' and '"+typeof c[1]+"'.\nPossible parent types: [point,point]");
f=a.createPoint(b,[function(){return l.rotation(c[0],c[1],Math.PI,b)}],f);for(e=0;2>e;e++)c[e].addChild(f);return f.elType="mirrorpoint",f.parents=[c[0].id,c[1].id],f.prepareUpdate().update(),f},m.createIntegral=function(a,c,f){var k,h,n,l,t,w,z,q,A,C,F,D,J,G,L=null;if(d.isArray(c[0])&&c[1].elementClass===b.OBJECT_CLASS_CURVE)k=c[0],h=c[1];else{if(!d.isArray(c[1])||c[0].elementClass!==b.OBJECT_CLASS_CURVE)throw Error("JSXGraph: Can't create integral with parent types '"+typeof c[0]+"' and '"+typeof c[1]+
"'.\nPossible parent types: [[number|function,number|function],curve]");k=c[1];h=c[0]}return n=d.copyAttributes(f,a.options,"integral"),n.withLabel=!1,G=a.create("curve",[[0],[0]],n),l=k[0],t=k[1],d.isFunction(l)?(w=l,z=function(){return h.Y(w())},l=w()):(w=l,z=h.Y(l)),d.isFunction(t)?(q=t,A=function(){return h.Y(q())},t=q()):(q=t,A=h.Y(t)),n=d.copyAttributes(f,a.options,"integral","curveLeft"),C=a.create("glider",[w,z,h],n),d.isFunction(w)&&C.hideElement(),n=d.copyAttributes(f,a.options,"integral",
"baseLeft"),F=a.create("point",[function(){return"y"===G.visProp.axis?0:C.X()},function(){return"y"===G.visProp.axis?C.Y():0}],n),n=d.copyAttributes(f,a.options,"integral","curveRight"),D=a.create("glider",[q,A,h],n),d.isFunction(q)&&D.hideElement(),n=d.copyAttributes(f,a.options,"integral","baseRight"),J=a.create("point",[function(){return"y"===G.visProp.axis?0:D.X()},function(){return"y"===G.visProp.axis?D.Y():0}],n),n=d.copyAttributes(f,a.options,"integral"),!1!==n.withlabel&&"y"!==n.axis&&(n=
d.copyAttributes(f,a.options,"integral","label"),n=d.copyAttributes(n,a.options,"label"),L=a.create("text",[function(){var a=new g(b.COORDS_BY_SCREEN,[this.visProp.offset[0]+this.board.origin.scrCoords[1],0],this.board,!1);return D.X()+a.usrCoords[1]},function(){var a=new g(b.COORDS_BY_SCREEN,[0,this.visProp.offset[1]+this.board.origin.scrCoords[2]],this.board,!1);return D.Y()+a.usrCoords[2]},function(){return"&int; = "+e.I([F.X(),J.X()],h.Y).toFixed(4)}],n),L.dump=!1,C.addChild(L),D.addChild(L)),
C.dump=!1,F.dump=!1,D.dump=!1,J.dump=!1,G.elType="integral",G.parents=[h.id,k],G.subs={curveLeft:C,baseLeft:F,curveRight:D,baseRight:J},n.withLabel&&(G.subs.label=L),G.Value=function(){return e.I([F.X(),J.X()],h.Y)},G.updateDataArray=function(){var a,b,c,f,d,e,k,g;if("y"===this.visProp.axis){C.Y()<D.Y()?(a=C.X(),k=C.Y(),e=D.X(),g=D.Y()):(a=D.X(),k=D.Y(),e=C.X(),g=C.Y());f=Math.min(a,e);d=Math.max(a,e);a=[0,a];b=[k,k];for(c=0;c<h.numberPoints;c++)k<=h.points[c].usrCoords[2]&&f<=h.points[c].usrCoords[1]&&
h.points[c].usrCoords[2]<=g&&h.points[c].usrCoords[1]<=d&&(a.push(h.points[c].usrCoords[1]),b.push(h.points[c].usrCoords[2]));a.push(e);b.push(g);a.push(0);b.push(g);a.push(0);b.push(k)}else{F.X()<J.X()?(f=F.X(),d=J.X()):(f=J.X(),d=F.X());a=[f,f];b=[0,h.Y(f)];for(c=0;c<h.numberPoints;c++)f<=h.points[c].usrCoords[1]&&h.points[c].usrCoords[1]<=d&&(a.push(h.points[c].usrCoords[1]),b.push(h.points[c].usrCoords[2]));a.push(d);b.push(h.Y(d));a.push(d);b.push(0);a.push(f);b.push(0)}this.dataX=a;this.dataY=
b},C.addChild(G),D.addChild(G),G.baseLeft=F,G.baseRight=J,G.curveLeft=C,G.curveRight=D,G.methodMap=m.deepCopy(G.methodMap,{curveLeft:"curveLeft",baseLeft:"baseLeft",curveRight:"curveRight",baseRight:"baseRight",Value:"Value"}),G.label=L,G},m.createGrid=function(a,c,f){var e,k;return k=d.copyAttributes(f,a.options,"grid"),e=a.create("curve",[[null],[null]],k),e.elType="grid",e.parents=[],e.type=b.OBJECT_TYPE_GRID,e.updateDataArray=function(){var c,f,k,h,n=this.visProp.gridx,l=this.visProp.gridy;k=
d.isArray(this.visProp.topleft)?new g(this.visProp.tltype||b.COORDS_BY_USER,this.visProp.topleft,a):new g(b.COORDS_BY_SCREEN,[0,0],a);h=d.isArray(this.visProp.bottomright)?new g(this.visProp.brtype||b.COORDS_BY_USER,this.visProp.bottomright,a):new g(b.COORDS_BY_SCREEN,[a.canvasWidth,a.canvasHeight],a);a.options.grid.hasGrid=!0;k.setCoordinates(b.COORDS_BY_USER,[Math.floor(k.usrCoords[1]/n)*n,Math.ceil(k.usrCoords[2]/l)*l]);h.setCoordinates(b.COORDS_BY_USER,[Math.ceil(h.usrCoords[1]/n)*n,Math.floor(h.usrCoords[2]/
l)*l]);e.dataX=[];e.dataY=[];c=k.usrCoords[2];f=h.usrCoords[2];for(k.usrCoords[2]<h.usrCoords[2]&&(c=h.usrCoords[2],f=k.usrCoords[2]);c>f-l;c-=l)e.dataX.push(k.usrCoords[1],h.usrCoords[1],0/0),e.dataY.push(c,c,0/0);c=k.usrCoords[1];f=h.usrCoords[1];for(k.usrCoords[1]>h.usrCoords[1]&&(c=h.usrCoords[1],f=k.usrCoords[1]);f+n>c;c+=n)e.dataX.push(c,c,0/0),e.dataY.push(k.usrCoords[2],h.usrCoords[2],0/0)},e.hasPoint=function(){return!1},a.grids.push(e),e},m.createInequality=function(a,c,f){var e,k,g;if(g=
d.copyAttributes(f,a.options,"inequality"),c[0].elementClass===b.OBJECT_CLASS_LINE)k=a.create("curve",[[],[]],g),k.hasPoint=function(){return!1},k.updateDataArray=function(){var f,d,e;f=a.getBoundingBox();var k=g.inverse?-1:1;d=1.5*Math.max(f[2]-f[0],f[1]-f[3]);var n={coords:{usrCoords:[1,(f[0]+f[2])/2,g.inverse?f[1]:f[3]]}},m=c[0].stdform.slice(1),r=m;0<m[1]&&(m=h.multiply(m,-1),r=m);e=1.5*Math.max(l.perpendicular(c[0],n,a)[0].distance(b.COORDS_BY_USER,n.coords),d);e*=k;n={coords:{usrCoords:[1,(f[0]+
f[2])/2,(f[1]+f[3])/2]}};n=Math.abs(q.innerProduct(n.coords.usrCoords,c[0].stdform,3))>=q.eps?l.perpendicular(c[0],n,a)[0].usrCoords:n.coords.usrCoords;f=[1,n[1]+m[1]*d,n[2]-m[0]*d];d=[1,n[1]-r[1]*d,n[2]+r[0]*d];this.dataX=[f[1],f[1]+m[0]*e,d[1]+r[0]*e,d[1],f[1]];this.dataY=[f[2],f[2]+m[1]*e,d[2]+r[1]*e,d[2],f[2]]};else if(e=d.createFunction(c[0]),!d.exists(e))throw Error("JSXGraph: Can't create area with the given parents.\nPossible parent types: [line], [function]");return k},m.registerElement("arrowparallel",
m.createArrowParallel),m.registerElement("bisector",m.createBisector),m.registerElement("bisectorlines",m.createAngularBisectorsOfTwoLines),m.registerElement("circumcircle",m.createCircumcircle),m.registerElement("circumcirclemidpoint",m.createCircumcenter),m.registerElement("circumcenter",m.createCircumcenter),m.registerElement("incenter",m.createIncenter),m.registerElement("incircle",m.createIncircle),m.registerElement("integral",m.createIntegral),m.registerElement("midpoint",m.createMidpoint),
m.registerElement("mirrorpoint",m.createMirrorPoint),m.registerElement("normal",m.createNormal),m.registerElement("orthogonalprojection",m.createOrthogonalProjection),m.registerElement("parallel",m.createParallel),m.registerElement("parallelpoint",m.createParallelPoint),m.registerElement("perpendicular",m.createPerpendicular),m.registerElement("perpendicularpoint",m.createPerpendicularPoint),m.registerElement("perpendicularsegment",m.createPerpendicularSegment),m.registerElement("reflection",m.createReflection),
m.registerElement("grid",m.createGrid),m.registerElement("inequality",m.createInequality),{createArrowParallel:m.createArrowParallel,createBisector:m.createBisector,createAngularBisectorOfTwoLines:m.createAngularBisectorsOfTwoLines,createCircumcircle:m.createCircumcircle,createCircumcenter:m.createCircumcenter,createIncenter:m.createIncenter,createIncircle:m.createIncircle,createIntegral:m.createIntegral,createMidpoint:m.createMidpoint,createMirrorPoint:m.createMirrorPoint,createNormal:m.createNormal,
createOrthogonalProjection:m.createOrthogonalProjection,createParallel:m.createParallel,createParallelPoint:m.createParallelPoint,createPerpendicular:m.createPerpendicular,createPerpendicularPoint:m.createPerpendicularPoint,createPerpendicularSegmen:m.createPerpendicularSegment,createReflection:m.createReflection,createGrid:m.createGrid,createInequality:m.createInequality}});E("base/board","jxg base/constants base/coords options math/numerics math/math math/geometry math/complex parser/jessiecode parser/geonext utils/color utils/type utils/event utils/env base/transformation base/point base/line base/text element/composition base/composition".split(" "),
function(m,q,l,e,h,g,d,b,a,k,c,f,n,p,s,v,r,y,x,u){return m.Board=function(b,c,d,k,g,h,l,m,s,r,v){if(this.BOARD_MODE_NONE=0,this.BOARD_MODE_DRAG=1,this.BOARD_MODE_MOVE_ORIGIN=2,this.BOARD_QUALITY_LOW=1,this.BOARD_QUALITY_HIGH=2,this.BOARD_MODE_ZOOM=17,this.document=v.document||document,this.container=b,this.containerObj=p.isBrowser?this.document.getElementById(this.container):null,p.isBrowser&&null===this.containerObj)throw Error("\nJSXGraph: HTML container element '"+b+"' not found.");this.renderer=
c;this.grids=[];this.options=f.deepCopy(e);this.attr=v;this.dimension=2;this.jc=new a;this.jc.use(this);this.origin={};this.origin.usrCoords=[1,0,0];this.origin.scrCoords=[1,k[0],k[1]];this.zoomX=g;this.zoomY=h;this.unitX=l*this.zoomX;this.unitY=m*this.zoomY;this.canvasWidth=s;this.canvasHeight=r;this.id=f.exists(d)&&""!==d&&p.isBrowser&&!f.exists(this.document.getElementById(d))?d:this.generateId();n.eventify(this);this.hooks=[];this.dependentBoards=[];this.inUpdate=!1;this.objects={};this.objectsList=
[];this.groups={};this.animationObjects={};this.highlightedObjects={};this.numObjects=0;this.elementsByName={};this.mode=this.BOARD_MODE_NONE;this.updateQuality=this.BOARD_QUALITY_HIGH;this.isSuspendedRedraw=!1;this.calculateSnapSizes();this.drag_dy=this.drag_dx=0;this.drag_position=[0,0];this.mouse={};this.touches=[];this.xmlString="";this.cPos=[];this.positionAccessLast=this.touchMoveLast=0;this.downObjects=[];this.attr.showcopyright&&this.renderer.displayCopyright(q.licenseText,parseInt(this.options.text.fontSize,
10));this.reducedUpdate=this.needsFullUpdate=!1;this.currentCBDef="none";this.geonextCompatibilityMode=!1;this.options.text.useASCIIMathML&&translateASCIIMath?init():this.options.text.useASCIIMathML=!1;this.hasPointerUp=this.hasTouchEnd=this.hasMouseUp=this.hasGestureHandlers=this.hasPointerHandlers=this.hasTouchHandlers=this.hasMouseHandlers=!1;this.attr.registerevents&&this.addEventHandlers();this.methodMap={update:"update",fullUpdate:"fullUpdate",on:"on",off:"off",trigger:"trigger",setView:"setBoundingBox",
setBoundingBox:"setBoundingBox",migratePoint:"migratePoint",colorblind:"emulateColorblindness",suspendUpdate:"suspendUpdate",unsuspendUpdate:"unsuspendUpdate",clearTraces:"clearTraces",left:"clickLeftArrow",right:"clickRightArrow",up:"clickUpArrow",down:"clickDownArrow",zoomIn:"zoomIn",zoomOut:"zoomOut",zoom100:"zoom100",zoomElements:"zoomElements",remove:"removeObject",removeObject:"removeObject"}},m.extend(m.Board.prototype,{generateName:function(a){var b,c="",d="",e=[],k="";if(a.type===q.OBJECT_TYPE_TICKS)return"";
b=a.elementClass===q.OBJECT_CLASS_POINT?" A B C D E F G H I J K L M N O P Q R S T U V W X Y Z".split(" "):a.type===q.OBJECT_TYPE_ANGLE?" &alpha; &beta; &gamma; &delta; &epsilon; &zeta; &eta; &theta; &iota; &kappa; &lambda; &mu; &nu; &xi; &omicron; &pi; &rho; &sigma; &tau; &upsilon; &phi; &chi; &psi; &omega;".split(" "):" a b c d e f g h i j k l m n o p q r s t u v w x y z".split(" ");a.elementClass!==q.OBJECT_CLASS_POINT&&a.elementClass!==q.OBJECT_CLASS_LINE&&a.type!==q.OBJECT_TYPE_ANGLE&&(c=a.type===
q.OBJECT_TYPE_POLYGON?"P_{":a.elementClass===q.OBJECT_CLASS_CIRCLE?"k_{":a.type===q.OBJECT_TYPE_TEXT?"t_{":"s_{",d="}");for(a=0;2>a;a++)e[a]=0;for(;e[1]<b.length;){for(e[0]=1;e[0]<b.length;e[0]++){k=c;for(a=2;0<a;a--)k+=b[e[a-1]];if(!f.exists(this.elementsByName[k+d]))return k+d}e[0]=b.length;for(a=1;2>a;a++)e[a-1]===b.length&&(e[a-1]=1,e[a]+=1)}return""},generateId:function(){for(var a=1;f.exists(m.boards["jxgBoard"+a]);)a=Math.round(65535*Math.random());return"jxgBoard"+a},setId:function(a,b){var c=
this.numObjects,d=a.id;return this.numObjects+=1,""!==d&&f.exists(d)||(d=this.id+b+c),a.id=d,this.objects[d]=a,a._pos=this.objectsList.length,this.objectsList[this.objectsList.length]=a,d},finalizeAdding:function(a){a.visProp.visible||this.renderer.hide(a)},finalizeLabel:function(a){!a.hasLabel||a.label.visProp.islabel||a.label.visProp.visible||this.renderer.hide(a.label)},getCoordsTopLeftCorner:function(){var a,b,c,f,d,e=this.document.documentElement||this.document.body.parentNode,k=this.document.body,
g=this.containerObj;return 0<this.cPos.length&&(this.mode===this.BOARD_MODE_DRAG||this.mode===this.BOARD_MODE_MOVE_ORIGIN||500>(new Date).getTime()-this.positionAccessLast)?this.cPos:(this.positionAccessLast=(new Date).getTime(),g.getBoundingClientRect?(f="number"==typeof window.pageXOffset?window.pageXOffset:"number"===e.ScrollLeft?e.ScrollLeft:this.document.body.scrollLeft,d="number"==typeof window.pageYOffset?window.pageYOffset:"number"===e.ScrollTop?e.ScrollTop:this.document.body.scrollTop,c=
g.getBoundingClientRect(),a=[c.left+f,c.top+d],a[0]+=p.getProp(g,"border-left-width"),a[1]+=p.getProp(g,"border-top-width"),"vml"!==this.renderer.type&&(a[0]+=p.getProp(g,"padding-left"),a[1]+=p.getProp(g,"padding-top")),this.cpos=a,this.cpos):(a=p.getOffset(g),b=this.document.documentElement.ownerDocument,!this.containerObj.currentStyle&&b.defaultView&&(a[0]+=p.getProp(e,"margin-left"),a[1]+=p.getProp(e,"margin-top"),a[0]+=p.getProp(e,"border-left-width"),a[1]+=p.getProp(e,"border-top-width"),a[0]+=
p.getProp(e,"padding-left"),a[1]+=p.getProp(e,"padding-top")),k&&(a[0]+=p.getProp(k,"left"),a[1]+=p.getProp(k,"top")),"object"==typeof google&&google.translate&&(a[0]+=10,a[1]+=25),a[0]+=p.getProp(g,"border-left-width"),a[1]+=p.getProp(g,"border-top-width"),"vml"!==this.renderer.type&&(a[0]+=p.getProp(g,"padding-left"),a[1]+=p.getProp(g,"padding-top")),a[0]+=this.attr.offsetx,a[1]+=this.attr.offsety,this.cPos=a,a))},getMousePosition:function(a,b){var c,d,e=this.getCoordsTopLeftCorner();return c=p.getPosition(a,
b,this.document),f.exists(this.cssTransMat)||this.updateCSSTransforms(),d=[1,c[0]-e[0],c[1]-e[1]],d=g.matVecMult(this.cssTransMat,d),d[1]/=d[0],d[2]/=d[0],[d[1],d[2]]},initMoveOrigin:function(a,b){this.drag_dx=a-this.origin.scrCoords[1];this.drag_dy=b-this.origin.scrCoords[2];this.mode=this.BOARD_MODE_MOVE_ORIGIN;this.updateQuality=this.BOARD_QUALITY_LOW},initMoveObject:function(a,b,c,d){var e,k,g,h=[],n=this.objectsList.length,p={visProp:{layer:-1E4}};for(k=0;n>k;k++)e=this.objectsList[k],g=e.hasPoint&&
e.hasPoint(a,b),e.visProp.visible&&g&&(e.triggerEventHandlers([d+"down","down"],[c]),this.downObjects.push(e)),(!this.geonextCompatibilityMode||e.elementClass!==q.OBJECT_CLASS_POINT&&e.type!==q.OBJECT_TYPE_TEXT)&&this.geonextCompatibilityMode||!e.isDraggable||!e.visProp.visible||e.visProp.fixed||e.visProp.frozen||!g||(e.visProp.layer>p.visProp.layer||e.visProp.layer===p.visProp.layer&&e.lastDragTime.getTime()>=p.lastDragTime.getTime())&&(f.exists(p.label)&&e===p.label||(p=e,h[0]=p));return 0<h.length&&
(this.mode=this.BOARD_MODE_DRAG),this.attr.takefirst&&(h.length=1),h},moveObject:function(a,b,c,f,e){var k;a=new l(q.COORDS_BY_SCREEN,this.getScrCoordsOfMouse(a,b),this);(b=c.obj)&&(this.drag_position=[a.scrCoords[1],a.scrCoords[2]],b.type!==q.OBJECT_TYPE_GLIDER?(isNaN(c.targets[0].Xprev+c.targets[0].Yprev)||b.setPositionDirectly(q.COORDS_BY_SCREEN,[a.scrCoords[1],a.scrCoords[2]],[c.targets[0].Xprev,c.targets[0].Yprev]),c.targets[0].Xprev=a.scrCoords[1],c.targets[0].Yprev=a.scrCoords[2],b.prepareUpdate().update(!1).updateRenderer()):
b.type===q.OBJECT_TYPE_GLIDER&&(k=b.coords,b.setPositionDirectly(q.COORDS_BY_USER,a.usrCoords.slice(1)),0!==b.group.length?(b.slideObject.elementClass===q.OBJECT_CLASS_CIRCLE?b.coords.setCoordinates(q.COORDS_BY_USER,d.projectPointToCircle(b,b.slideObject,this).usrCoords,!1):b.slideObject.elementClass===q.OBJECT_CLASS_LINE&&b.coords.setCoordinates(q.COORDS_BY_USER,d.projectPointToLine(b,b.slideObject,this).usrCoords,!1),b.group[b.group.length-1].dX=b.coords.scrCoords[1]-k.scrCoords[1],b.group[b.group.length-
1].dY=b.coords.scrCoords[2]-k.scrCoords[2],b.group[b.group.length-1].update(this)):b.prepareUpdate().update(!1).updateRenderer()),b.triggerEventHandlers([e+"drag","drag"],[f]),this.updateInfobox(b),this.update(),b.highlight(!0),b.lastDragTime=new Date)},twoFingerMove:function(a,b,c,d){var e,k,g;f.exists(c)&&f.exists(c.obj)&&(g=c.obj,e=new l(q.COORDS_BY_SCREEN,this.getScrCoordsOfMouse(a[0],a[1]),this),k=new l(q.COORDS_BY_SCREEN,this.getScrCoordsOfMouse(b[0],b[1]),this),g.elementClass===q.OBJECT_CLASS_LINE||
g.type===q.OBJECT_TYPE_POLYGON?this.twoFingerTouchObject(e,k,c,g):g.elementClass===q.OBJECT_CLASS_CIRCLE&&this.twoFingerTouchCircle(e,k,c,g),g.triggerEventHandlers(["touchdrag","drag"],[d]),c.targets[0].Xprev=e.scrCoords[1],c.targets[0].Yprev=e.scrCoords[2],c.targets[1].Xprev=k.scrCoords[1],c.targets[1].Yprev=k.scrCoords[2])},twoFingerTouchObject:function(a,b,c,e){var k,h,n,p,m,s,r,v,u,x,y,E,K;f.exists(c.targets[0])&&f.exists(c.targets[1])&&!isNaN(c.targets[0].Xprev+c.targets[0].Yprev+c.targets[1].Xprev+
c.targets[1].Yprev)&&!(k=a.usrCoords,h=b.usrCoords,n=(new l(q.COORDS_BY_SCREEN,[c.targets[0].Xprev,c.targets[0].Yprev],this)).usrCoords,p=(new l(q.COORDS_BY_SCREEN,[c.targets[1].Xprev,c.targets[1].Yprev],this)).usrCoords,s=[1,.5*(n[1]+p[1]),.5*(n[2]+p[2])],m=[1,.5*(k[1]+h[1]),.5*(k[2]+h[2])],v=g.crossProduct(n,p),r=g.crossProduct(k,h),x=g.crossProduct(v,r),Math.abs(x[0])<g.eps)&&(x[1]/=x[0],x[2]/=x[0],a=d.rad(s.slice(1),x.slice(1),m.slice(1)),x=this.create("transform",[a,x[1],x[2]],{type:"rotate"}),
x.update(),s=g.matVecMult(x.matrix,s),s[1]/=s[0],s[2]/=s[0],s=this.create("transform",[m[1]-s[1],m[2]-s[2]],{type:"translate"}),s.update(),x.melt(s),e.visProp.scalable&&(u=d.distance(k,h)/d.distance(n,p),y=this.create("transform",[-m[1],-m[2]],{type:"translate"}),E=this.create("transform",[u,u],{type:"scale"}),K=this.create("transform",[m[1],m[2]],{type:"translate"}),x.melt(y).melt(E).melt(K)),e.elementClass===q.OBJECT_CLASS_LINE?x.applyOnce([e.point1,e.point2]):e.type===q.OBJECT_TYPE_POLYGON&&x.applyOnce(e.vertices.slice(0,
-1)),this.update(),e.highlight(!0))},twoFingerTouchCircle:function(a,b,c,e){var k,g,h,n,p,m,s,r,v,x,u;"pointCircle"!==e.method&&"pointLine"!==e.method&&f.exists(c.targets[0])&&f.exists(c.targets[1])&&!isNaN(c.targets[0].Xprev+c.targets[0].Yprev+c.targets[1].Xprev+c.targets[1].Yprev)&&(k=a.usrCoords,g=b.usrCoords,h=(new l(q.COORDS_BY_SCREEN,[c.targets[0].Xprev,c.targets[0].Yprev],this)).usrCoords,n=(new l(q.COORDS_BY_SCREEN,[c.targets[1].Xprev,c.targets[1].Yprev],this)).usrCoords,s=this.create("transform",
[k[1]-h[1],k[2]-h[2]],{type:"translate"}),m=d.rad(n.slice(1),k.slice(1),g.slice(1)),r=this.create("transform",[-k[1],-k[2]],{type:"translate"}),v=this.create("transform",[m],{type:"rotate"}),s.melt(r).melt(v),e.visProp.scalable&&(p=d.distance(k,g)/d.distance(h,n),x=this.create("transform",[p,p],{type:"scale"}),s.melt(x)),u=this.create("transform",[k[1],k[2]],{type:"translate"}),s.melt(u),s.applyOnce([e.center]),"twoPoints"===e.method?s.applyOnce([e.point2]):"pointRadius"===e.method&&f.isNumber(e.updateRadius.origin)&&
e.setRadius(e.radius*p),this.update(e.center),e.highlight(!0))},highlightElements:function(a,b,c,d){var e,k,g,h={},n=this.objectsList.length;for(e=0;n>e;e++)k=this.objectsList[e],g=k.id,f.exists(k.hasPoint)&&k.visProp.visible&&k.hasPoint(a,b)&&(this.updateInfobox(k),f.exists(this.highlightedObjects[g])||(h[g]=k,k.highlight(),this.triggerEventHandlers(["mousehit","hit"],[c,k,d])),k.mouseover?k.triggerEventHandlers(["mousemove","move"],[c]):(k.triggerEventHandlers(["mouseover","over"],[c]),k.mouseover=
!0));for(e=0;n>e;e++)k=this.objectsList[e],g=k.id,k.mouseover&&(h[g]||(k.triggerEventHandlers(["mouseout","out"],[c]),k.mouseover=!1))},saveStartPos:function(a,b){var c,f,d=[];if(a.type===q.OBJECT_TYPE_TICKS)d.push([1,0/0,0/0]);else if(a.elementClass===q.OBJECT_CLASS_LINE)d.push(a.point1.coords.usrCoords),d.push(a.point2.coords.usrCoords);else if(a.elementClass===q.OBJECT_CLASS_CIRCLE)d.push(a.center.coords.usrCoords),"twoPoints"===a.method&&d.push(a.point2.coords.usrCoords);else if(a.type===q.OBJECT_TYPE_POLYGON)for(f=
a.vertices.length-1,c=0;f>c;c++)d.push(a.vertices[c].coords.usrCoords);else if(a.elementClass===q.OBJECT_CLASS_POINT||a.type===q.OBJECT_TYPE_GLIDER)d.push(a.coords.usrCoords);else try{d.push(a.coords.usrCoords)}catch(e){m.debug("JSXGraph+ saveStartPos: obj.coords.usrCoords not available: "+e)}f=d.length;for(c=0;f>c;c++)b.Zstart.push(d[c][0]),b.Xstart.push(d[c][1]),b.Ystart.push(d[c][2])},mouseOriginMoveStart:function(a){var b,c=this.attr.pan.enabled&&(!this.attr.pan.needshift||a.shiftKey);return c&&
(b=this.getMousePosition(a),this.initMoveOrigin(b[0],b[1])),c},mouseOriginMove:function(a){var b,c=this.mode===this.BOARD_MODE_MOVE_ORIGIN;return c&&(b=this.getMousePosition(a),this.moveOrigin(b[0],b[1],!0)),c},touchOriginMoveStart:function(a){var b,c=a[m.touchProperty],c=2===c.length&&80>d.distance([c[0].screenX,c[0].screenY],[c[1].screenX,c[1].screenY]),c=this.attr.pan.enabled&&(!this.attr.pan.needtwofingers||c);return c&&(b=this.getMousePosition(a,0),this.initMoveOrigin(b[0],b[1])),c},touchOriginMove:function(a){var b,
c=this.mode===this.BOARD_MODE_MOVE_ORIGIN;return c&&(b=this.getMousePosition(a,0),this.moveOrigin(b[0],b[1],!0)),c},originMoveEnd:function(){this.updateQuality=this.BOARD_QUALITY_HIGH;this.mode=this.BOARD_MODE_NONE},addEventHandlers:function(){p.supportsPointerEvents()?this.addPointerEventHandlers():(this.addMouseEventHandlers(),this.addTouchEventHandlers())},addPointerEventHandlers:function(){!this.hasPointerHandlers&&p.isBrowser&&(window.navigator.pointerEnabled?(p.addEvent(this.containerObj,"pointerdown",
this.pointerDownListener,this),p.addEvent(this.containerObj,"pointermove",this.pointerMoveListener,this)):(p.addEvent(this.containerObj,"MSPointerDown",this.pointerDownListener,this),p.addEvent(this.containerObj,"MSPointerMove",this.pointerMoveListener,this)),this.hasPointerHandlers=!0)},addMouseEventHandlers:function(){!this.hasMouseHandlers&&p.isBrowser&&(p.addEvent(this.containerObj,"mousedown",this.mouseDownListener,this),p.addEvent(this.containerObj,"mousemove",this.mouseMoveListener,this),p.addEvent(this.containerObj,
"mousewheel",this.mouseWheelListener,this),p.addEvent(this.containerObj,"DOMMouseScroll",this.mouseWheelListener,this),this.hasMouseHandlers=!0,this.containerObj.oncontextmenu=function(a){return f.exists(a)&&a.preventDefault(),!1})},addTouchEventHandlers:function(a){!this.hasTouchHandlers&&p.isBrowser&&(p.addEvent(this.containerObj,"touchstart",this.touchStartListener,this),p.addEvent(this.containerObj,"touchmove",this.touchMoveListener,this),(!f.exists(a)||a)&&(p.addEvent(this.containerObj,"gesturestart",
this.gestureStartListener,this),p.addEvent(this.containerObj,"gesturechange",this.gestureChangeListener,this),this.hasGestureHandlers=!0),this.hasTouchHandlers=!0)},removePointerEventHandlers:function(){this.hasPointerHandlers&&p.isBrowser&&(window.navigator.pointerEnabled?(p.removeEvent(this.containerObj,"pointerdown",this.pointerDownListener,this),p.removeEvent(this.containerObj,"pointermove",this.pointerMoveListener,this)):(p.removeEvent(this.containerObj,"MSPointerDown",this.pointerDownListener,
this),p.removeEvent(this.containerObj,"MSPointerMove",this.pointerMoveListener,this)),this.hasPointerUp&&(window.navigator.pointerEnabled?p.removeEvent(this.document,"pointerup",this.pointerUpListener,this):p.removeEvent(this.document,"MSPointerUp",this.pointerUpListener,this),this.hasPointerUp=!1),this.hasPointerHandlers=!1)},removeMouseEventHandlers:function(){this.hasMouseHandlers&&p.isBrowser&&(p.removeEvent(this.containerObj,"mousedown",this.mouseDownListener,this),p.removeEvent(this.containerObj,
"mousemove",this.mouseMoveListener,this),this.hasMouseUp&&(p.removeEvent(this.document,"mouseup",this.mouseUpListener,this),this.hasMouseUp=!1),p.removeEvent(this.containerObj,"mousewheel",this.mouseWheelListener,this),p.removeEvent(this.containerObj,"DOMMouseScroll",this.mouseWheelListener,this),this.hasMouseHandlers=!1)},removeTouchEventHandlers:function(){this.hasTouchHandlers&&p.isBrowser&&(p.removeEvent(this.containerObj,"touchstart",this.touchStartListener,this),p.removeEvent(this.containerObj,
"touchmove",this.touchMoveListener,this),this.hasTouchEnd&&(p.removeEvent(this.document,"touchend",this.touchEndListener,this),this.hasTouchEnd=!1),this.hasGestureHandlers&&(p.removeEvent(this.containerObj,"gesturestart",this.gestureStartListener,this),p.removeEvent(this.containerObj,"gesturechange",this.gestureChangeListener,this),this.hasGestureHandlers=!1),this.hasTouchHandlers=!1)},removeEventHandlers:function(){this.removeMouseEventHandlers();this.removeTouchEventHandlers();this.removePointerEventHandlers()},
clickLeftArrow:function(){return this.moveOrigin(this.origin.scrCoords[1]+.1*this.canvasWidth,this.origin.scrCoords[2]),!1},clickRightArrow:function(){return this.moveOrigin(this.origin.scrCoords[1]-.1*this.canvasWidth,this.origin.scrCoords[2]),!1},clickUpArrow:function(){return this.moveOrigin(this.origin.scrCoords[1],this.origin.scrCoords[2]-.1*this.canvasHeight),!1},clickDownArrow:function(){return this.moveOrigin(this.origin.scrCoords[1],this.origin.scrCoords[2]+.1*this.canvasHeight),!1},gestureChangeListener:function(a){var b,
c=this.attr.zoom.factorx,f=this.attr.zoom.factory;return this.attr.zoom.wheel?(a.preventDefault(),this.mode===this.BOARD_MODE_ZOOM&&(b=new l(q.COORDS_BY_SCREEN,this.getMousePosition(a),this),this.attr.zoom.factorx=a.scale/this.prevScale,this.attr.zoom.factory=a.scale/this.prevScale,this.zoomIn(b.usrCoords[1],b.usrCoords[2]),this.prevScale=a.scale,this.attr.zoom.factorx=c,this.attr.zoom.factory=f),!1):!0},gestureStartListener:function(a){return this.attr.zoom.wheel?(a.preventDefault(),this.prevScale=
1,this.mode===this.BOARD_MODE_NONE&&(this.mode=this.BOARD_MODE_ZOOM),!1):!0},pointerDownListener:function(a,b){var c,f,d,e,k,g;k=this.options.precision.touch;if(this.hasPointerUp||(window.navigator.pointerEnabled?p.addEvent(this.document,"pointerup",this.pointerUpListener,this):p.addEvent(this.document,"MSPointerUp",this.pointerUpListener,this),this.hasPointerUp=!0),this.hasMouseHandlers&&this.removeMouseEventHandlers(),this.hasTouchHandlers&&this.removeTouchEventHandlers(),this.document.selection&&
"function"==typeof this.document.selection.empty?this.document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges(),m.isBrowser&&window.navigator.msMaxTouchPoints&&1<window.navigator.msMaxTouchPoints&&(this.options.precision.hasPoint=k),e=this.getMousePosition(a),b?(c=[b],this.mode=this.BOARD_MODE_DRAG):c=this.initMoveObject(e[0],e[1],a,"mouse"),0<c.length){g=c[c.length-1];k=!1;for(c=0;c<this.touches.length;c++)if(this.touches[c].obj===g){f=c;d=this.touches[c].targets.push({num:a.pointerId,
X:e[0],Y:e[1],Xprev:0/0,Yprev:0/0,Xstart:[],Ystart:[],Zstart:[]})-1;k=!0;break}k||(d=0,f=this.touches.push({obj:g,targets:[{num:a.pointerId,X:e[0],Y:e[1],Xprev:0/0,Yprev:0/0,Xstart:[],Ystart:[],Zstart:[]}]})-1);this.dehighlightAll();g.highlight(!0);this.saveStartPos(g,this.touches[f].targets[d]);a&&a.preventDefault?a.preventDefault():window.event&&(window.event.returnValue=!1)}return 0<this.touches.length&&(a.preventDefault(),a.stopPropagation()),this.mode===this.BOARD_MODE_NONE&&this.mouseOriginMoveStart(a)?
(this.triggerEventHandlers(["touchstart","down","pointerdown","MSPointerDown"],[a]),!1):(this.options.precision.hasPoint=this.options.precision.mouse,this.triggerEventHandlers(["touchstart","down","pointerdown","MSPointerDown"],[a]),void 0)},pointerMoveListener:function(a){var b,c,f;if(a[m.touchProperty],this.mode!==this.BOARD_MODE_DRAG&&(this.dehighlightAll(),this.renderer.hide(this.infobox)),this.mode!==this.BOARD_MODE_NONE&&(a.preventDefault(),a.stopPropagation()),m.isBrowser&&window.navigator.msMaxTouchPoints&&
1<window.navigator.msMaxTouchPoints&&(this.options.precision.hasPoint=this.options.precision.touch),this.updateQuality=this.BOARD_QUALITY_LOW,!this.mouseOriginMove(a))if(this.mode===this.BOARD_MODE_DRAG)for(b=0;b<this.touches.length;b++)for(c=0;c<this.touches[b].targets.length;c++){if(this.touches[b].targets[c].num===a.pointerId){1===this.touches[b].targets.length?(this.touches[b].targets[c].X=a.pageX,this.touches[b].targets[c].Y=a.pageY,f=this.getMousePosition(a),this.moveObject(f[0],f[1],this.touches[b],
a,"touch")):2===this.touches[b].targets.length&&-1<this.touches[b].targets[0].num&&-1<this.touches[b].targets[1].num&&(this.touches[b].targets[c].X=a.pageX,this.touches[b].targets[c].Y=a.pageY,this.twoFingerMove(this.getMousePosition({pageX:this.touches[b].targets[0].X,pageY:this.touches[b].targets[0].Y}),this.getMousePosition({pageX:this.touches[b].targets[1].X,pageY:this.touches[b].targets[1].Y}),this.touches[b],a));break}}else f=this.getMousePosition(a),this.highlightElements(f[0],f[1],a,-1);return this.mode!==
this.BOARD_MODE_DRAG&&this.renderer.hide(this.infobox),this.options.precision.hasPoint=this.options.precision.mouse,this.triggerEventHandlers(["touchmove","move","pointermove","MSPointerMove"],[a,this.mode]),this.mode===this.BOARD_MODE_NONE},pointerUpListener:function(a){var b,c,f;if(this.options.precision.touch,this.triggerEventHandlers(["touchend","up","pointerup","MSPointerUp"],[a]),this.renderer.hide(this.infobox),a)for(b=0;b<this.touches.length;b++)for(c=0;c<this.touches[b].targets.length;c++)if(this.touches[b].targets[c].num===
a.pointerId){this.touches[b].targets.splice(c,1);0===this.touches[b].targets.length&&this.touches.splice(b,1);break}for(b=this.downObjects.length-1;-1<b;b--){f=!1;for(c=0;c<this.touches.length;c++)this.touches[c].obj.id===this.downObjects[b].id&&(f=!0);f||(this.downObjects[b].triggerEventHandlers(["touchend","up","pointerup","MSPointerUp"],[a]),this.downObjects[b].snapToGrid(),this.downObjects[b].snapToPoints(),this.downObjects.splice(b,1))}return 0===this.touches.length&&(this.hasPointerUp&&(window.navigator.pointerEnabled?
p.removeEvent(this.document,"pointerup",this.pointerUpListener,this):p.removeEvent(this.document,"MSPointerUp",this.pointerUpListener,this),this.hasPointerUp=!1),this.dehighlightAll(),this.updateQuality=this.BOARD_QUALITY_HIGH,this.originMoveEnd(),this.update()),!0},touchStartListener:function(a){var b,c,d,k,g,h,n,l,s,r=this.options.precision.touch,v=a[m.touchProperty];this.hasTouchEnd||(p.addEvent(this.document,"touchend",this.touchEndListener,this),this.hasTouchEnd=!0);this.hasMouseHandlers&&this.removeMouseEventHandlers();
this.document.selection&&"function"==typeof this.document.selection.empty?this.document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges();this.options.precision.hasPoint=this.options.precision.touch;for(b=0;b<v.length;b++)v[b].jxg_isused=!1;for(b=0;b<this.touches.length;b++)for(k=0;k<this.touches[b].targets.length;k++){this.touches[b].targets[k].num=-1;r=this.options.precision.touch;do{for(g=0;g<v.length;g++)if(Math.abs(Math.pow(v[g].screenX-this.touches[b].targets[k].X,
2)+Math.pow(v[g].screenY-this.touches[b].targets[k].Y,2))<r*r){this.touches[b].targets[k].num=g;this.touches[b].targets[k].X=v[g].screenX;this.touches[b].targets[k].Y=v[g].screenY;v[g].jxg_isused=!0;break}r*=2}while(-1===this.touches[b].targets[k].num&&r<this.options.precision.touchMax);-1===this.touches[b].targets[k].num&&(m.debug("i couldn't find a targettouches for target no "+k+" on "+this.touches[b].obj.name+" ("+this.touches[b].obj.id+"). Removed the target."),m.debug("eps = "+r+", touchMax = "+
e.precision.touchMax),this.touches[b].targets.splice(b,1))}for(b=0;b<v.length;b++)if(!v[b].jxg_isused){if(c=this.getMousePosition(a,b),d=this.initMoveObject(c[0],c[1],a,"touch"),0!==d.length)if(n=d[d.length-1],f.isPoint(n)||n.type===q.OBJECT_TYPE_TEXT||n.type===q.OBJECT_TYPE_TICKS||n.type===q.OBJECT_TYPE_IMAGE)l=[{num:b,X:v[b].screenX,Y:v[b].screenY,Xprev:0/0,Yprev:0/0,Xstart:[],Ystart:[],Zstart:[]}],this.saveStartPos(n,l[0]),this.touches.push({obj:n,targets:l}),n.highlight(!0);else if(n.elementClass===
q.OBJECT_CLASS_LINE||n.elementClass===q.OBJECT_CLASS_CIRCLE||n.type===q.OBJECT_TYPE_POLYGON){g=!1;for(k=0;k<this.touches.length;k++)n.id===this.touches[k].obj.id&&(g=!0,1===this.touches[k].targets.length&&(s={num:b,X:v[b].screenX,Y:v[b].screenY,Xprev:0/0,Yprev:0/0,Xstart:[],Ystart:[],Zstart:[]},this.saveStartPos(n,s),this.touches[k].targets.push(s)),v[b].jxg_isused=!0);g||(l=[{num:b,X:v[b].screenX,Y:v[b].screenY,Xprev:0/0,Yprev:0/0,Xstart:[],Ystart:[],Zstart:[]}],this.saveStartPos(n,l[0]),this.touches.push({obj:n,
targets:l}),n.highlight(!0))}v[b].jxg_isused=!0}return 0<this.touches.length&&(a.preventDefault(),a.stopPropagation()),this.mode===this.BOARD_MODE_NONE&&this.touchOriginMoveStart(a)?(this.triggerEventHandlers(["touchstart","down"],[a]),!1):(p.isWebkitAndroid()&&(h=new Date,this.touchMoveLast=h.getTime()-200),this.options.precision.hasPoint=this.options.precision.mouse,this.triggerEventHandlers(["touchstart","down"],[a]),0<this.touches.length)},touchMoveListener:function(a){var b,c,f=a[m.touchProperty];
if(this.mode!==this.BOARD_MODE_NONE&&(a.preventDefault(),a.stopPropagation()),p.isWebkitAndroid()){if(b=new Date,b=b.getTime(),80>b-this.touchMoveLast)return this.updateQuality=this.BOARD_QUALITY_HIGH,this.triggerEventHandlers(["touchmove","move"],[a,this.mode]),!1;this.touchMoveLast=b}if(this.mode!==this.BOARD_MODE_DRAG&&this.renderer.hide(this.infobox),this.options.precision.hasPoint=this.options.precision.touch,this.updateQuality=this.BOARD_QUALITY_LOW,!this.touchOriginMove(a)&&this.mode===this.BOARD_MODE_DRAG)for(b=
0;b<this.touches.length;b++)1===this.touches[b].targets.length?f[this.touches[b].targets[0].num]&&(this.touches[b].targets[0].X=f[this.touches[b].targets[0].num].screenX,this.touches[b].targets[0].Y=f[this.touches[b].targets[0].num].screenY,c=this.getMousePosition(a,this.touches[b].targets[0].num),this.moveObject(c[0],c[1],this.touches[b],a,"touch")):2===this.touches[b].targets.length&&-1<this.touches[b].targets[0].num&&-1<this.touches[b].targets[1].num&&f[this.touches[b].targets[0].num]&&f[this.touches[b].targets[1].num]&&
(this.touches[b].targets[0].X=f[this.touches[b].targets[0].num].screenX,this.touches[b].targets[0].Y=f[this.touches[b].targets[0].num].screenY,this.touches[b].targets[1].X=f[this.touches[b].targets[1].num].screenX,this.touches[b].targets[1].Y=f[this.touches[b].targets[1].num].screenY,this.twoFingerMove(this.getMousePosition(a,this.touches[b].targets[0].num),this.getMousePosition(a,this.touches[b].targets[1].num),this.touches[b],a));return this.mode!==this.BOARD_MODE_DRAG&&this.renderer.hide(this.infobox),
this.options.precision.hasPoint=this.options.precision.mouse,this.triggerEventHandlers(["touchmove","move"],[a,this.mode]),this.mode===this.BOARD_MODE_NONE},touchEndListener:function(a){var b,c,d,e,k,g=this.options.precision.touch,h=[],n=a&&a[m.touchProperty];if(this.triggerEventHandlers(["touchend","up"],[a]),this.renderer.hide(this.infobox),n&&0<n.length){for(b=0;b<this.touches.length;b++)h[b]=this.touches[b];for(b=this.touches.length=0;b<n.length;b++)n[b].jxg_isused=!1;for(b=0;b<h.length;b++){e=
!1;for(c=k=0;c<h[b].targets.length;c++)for(h[b].targets[c].found=!1,d=0;d<n.length;d++)if(Math.abs(Math.pow(n[d].screenX-h[b].targets[c].X,2)+Math.pow(n[d].screenY-h[b].targets[c].Y,2))<g*g){h[b].targets[c].found=!0;h[b].targets[c].num=d;h[b].targets[c].X=n[d].screenX;h[b].targets[c].Y=n[d].screenY;k+=1;break}if(f.isPoint(h[b].obj)?e=h[b].targets[0]&&h[b].targets[0].found:h[b].obj.elementClass===q.OBJECT_CLASS_LINE?e=h[b].targets[0]&&h[b].targets[0].found||h[b].targets[1]&&h[b].targets[1].found:h[b].obj.elementClass===
q.OBJECT_CLASS_CIRCLE&&(e=1===k||3===k),e)for(this.touches.push({obj:h[b].obj,targets:[]}),c=0;c<h[b].targets.length;c++)h[b].targets[c].found&&this.touches[this.touches.length-1].targets.push({num:h[b].targets[c].num,X:h[b].targets[c].screenX,Y:h[b].targets[c].screenY,Xprev:0/0,Yprev:0/0,Xstart:h[b].targets[c].Xstart,Ystart:h[b].targets[c].Ystart,Zstart:h[b].targets[c].Zstart});else h[b].obj.noHighlight()}}else this.touches.length=0;for(b=this.downObjects.length-1;-1<b;b--){e=!1;for(c=0;c<this.touches.length;c++)this.touches[c].obj.id===
this.downObjects[b].id&&(e=!0);e||(this.downObjects[b].triggerEventHandlers(["touchup","up"],[a]),this.downObjects[b].snapToGrid(),this.downObjects[b].snapToPoints(),this.downObjects.splice(b,1))}return n&&0!==n.length||(this.hasTouchEnd&&(p.removeEvent(this.document,"touchend",this.touchEndListener,this),this.hasTouchEnd=!1),this.dehighlightAll(),this.updateQuality=this.BOARD_QUALITY_HIGH,this.originMoveEnd(),this.update()),!0},mouseDownListener:function(a){var b,c,f;return this.document.selection&&
"function"==typeof this.document.selection.empty?this.document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges(),this.hasMouseUp?void 0:(p.addEvent(this.document,"mouseup",this.mouseUpListener,this),this.hasMouseUp=!0,b=this.getMousePosition(a),c=this.initMoveObject(b[0],b[1],a,"mouse"),0===c.length?(this.mode=this.BOARD_MODE_NONE,f=!0):(this.mouse={obj:null,targets:[{X:b[0],Y:b[1],Xprev:0/0,Yprev:0/0}]},this.mouse.obj=c[c.length-1],this.dehighlightAll(),this.mouse.obj.highlight(!0),
this.mouse.targets[0].Xstart=[],this.mouse.targets[0].Ystart=[],this.mouse.targets[0].Zstart=[],this.saveStartPos(this.mouse.obj,this.mouse.targets[0]),a&&a.preventDefault?a.preventDefault():window.event&&(window.event.returnValue=!1)),this.mode===this.BOARD_MODE_NONE&&(f=this.mouseOriginMoveStart(a)),this.triggerEventHandlers(["mousedown","down"],[a]),f)},mouseUpListener:function(a){var b;this.triggerEventHandlers(["mouseup","up"],[a]);this.updateQuality=this.BOARD_QUALITY_HIGH;this.mouse&&this.mouse.obj&&
(this.mouse.obj.snapToGrid(this.mouse.targets[0]),this.mouse.obj.snapToPoints());this.originMoveEnd();this.dehighlightAll();this.update();for(b=0;b<this.downObjects.length;b++)this.downObjects[b].triggerEventHandlers(["mouseup","up"],[a]);this.downObjects.length=0;this.hasMouseUp&&(p.removeEvent(this.document,"mouseup",this.mouseUpListener,this),this.hasMouseUp=!1);this.mouse=null},mouseMoveListener:function(a){var b;b=this.getMousePosition(a);this.updateQuality=this.BOARD_QUALITY_LOW;this.mode!==
this.BOARD_MODE_DRAG&&(this.dehighlightAll(),this.renderer.hide(this.infobox));this.mouseOriginMove(a)||(this.mode===this.BOARD_MODE_DRAG?this.moveObject(b[0],b[1],this.mouse,a,"mouse"):this.highlightElements(b[0],b[1],a,-1));this.updateQuality=this.BOARD_QUALITY_HIGH;this.triggerEventHandlers(["mousemove","move"],[a,this.mode])},mouseWheelListener:function(a){if(!this.attr.zoom.wheel||this.attr.zoom.needshift&&!a.shiftKey)return!0;a=a||window.event;var b=a.detail?-a.detail:a.wheelDelta/40,c=new l(q.COORDS_BY_SCREEN,
this.getMousePosition(a),this);return 0<b?this.zoomIn(c.usrCoords[1],c.usrCoords[2]):this.zoomOut(c.usrCoords[1],c.usrCoords[2]),a.preventDefault(),!1},updateInfobox:function(a){var b,c,d,e;return a.visProp.showinfobox?(a.elementClass===q.OBJECT_CLASS_POINT&&(d=a.coords.usrCoords[1],e=a.coords.usrCoords[2],this.infobox.setCoords(d+this.infobox.distanceX/this.unitX,e+this.infobox.distanceY/this.unitY),"string"!=typeof a.infoboxText?("auto"===a.visProp.infoboxdigits?(b=f.autoDigits(d),c=f.autoDigits(e)):
f.isNumber(a.visProp.infoboxdigits)?(b=d.toFixed(a.visProp.infoboxdigits),c=e.toFixed(a.visProp.infoboxdigits)):(b=d,c=e),this.highlightInfobox(b,c,a)):this.highlightCustomInfobox(a.infoboxText,a),this.renderer.show(this.infobox)),this):this},highlightCustomInfobox:function(a){return this.infobox.setText(a),this},highlightInfobox:function(a,b,c){return this.highlightCustomInfobox("("+a+", "+b+")",c),this},dehighlightAll:function(){var a,b,c=!1;for(a in this.highlightedObjects)this.highlightedObjects.hasOwnProperty(a)&&
(b=this.highlightedObjects[a],(this.hasMouseHandlers||this.hasPointerHandlers)&&b.noHighlight(),c=!0);return this.highlightedObjects={},"canvas"===this.renderer.type&&c&&(this.prepareUpdate(),this.renderer.suspendRedraw(this),this.updateRenderer(),this.renderer.unsuspendRedraw()),this},getScrCoordsOfMouse:function(a,b){return[a,b]},getUsrCoordsOfMouse:function(a){var b=this.getCoordsTopLeftCorner();a=p.getPosition(a,null,this.document);return(new l(q.COORDS_BY_SCREEN,[a[0]-b[0],a[1]-b[1]],this)).usrCoords.slice(1)},
getAllUnderMouse:function(a){var b=this.getAllObjectsUnderMouse(a);return b.push(this.getUsrCoordsOfMouse(a)),b},getAllObjectsUnderMouse:function(a){var b,c;b=this.getCoordsTopLeftCorner();c=p.getPosition(a,null,this.document);a=c[0]-b[0];var f=c[1]-b[1],d=[],e=this.objectsList.length;for(b=0;e>b;b++)c=this.objectsList[b],c.visProp.visible&&c.hasPoint&&c.hasPoint(a,f)&&(d[d.length]=c);return d},updateCoords:function(){var a,b,c=this.objectsList.length;for(b=0;c>b;b++)a=this.objectsList[b],f.exists(a.coords)&&
(a.visProp.frozen?a.coords.screen2usr():a.coords.usr2screen());return this},moveOrigin:function(a,b,c){return f.exists(a)&&f.exists(b)&&(this.origin.scrCoords[1]=a,this.origin.scrCoords[2]=b,c&&(this.origin.scrCoords[1]-=this.drag_dx,this.origin.scrCoords[2]-=this.drag_dy)),this.updateCoords().clearTraces().fullUpdate(),this.triggerEventHandlers(["boundingbox"]),this},addConditions:function(a){var b,d,e,k,g,h,n,p=[];h=a.indexOf("<data>");var l=a.indexOf("</data>"),s=function(a,b,c,f){return function(){var d,
e;d=a.select(b.id);e=d.coords.usrCoords[f];2===f?d.setPositionDirectly(m.COORDS_BY_USER,[c(),e]):d.setPositionDirectly(m.COORDS_BY_USER,[e,c()]);d.prepareUpdate().update()}},r=function(a,b,c){return function(){var f,d;f=a.select(b.id);d=c();f.setAttribute({visible:d})}},q=function(a,b,f,d){return function(){var e,k;e=a.select(b.id);k=f();"strokewidth"===d?e.visProp.strokewidth=k:(k=c.rgba2rgbo(k),e.visProp[d+"color"]=k[0],e.visProp[d+"opacity"]=k[1])}},v=function(a,b,c){return function(){a.select(b.id).position=
c()}},x=function(a,b,c){return function(){a.select(b.id).setStyle(c())}};if(!(0>h)){for(;0<=h;){if(b=a.slice(h+6,l),d=b.indexOf("="),e=b.slice(0,d),k=b.slice(d+1),d=e.indexOf("."),g=e.slice(0,d),h=this.elementsByName[f.unescapeHTML(g)],n=e.slice(d+1).replace(/\s+/g,"").toLowerCase(),k=f.createFunction(k,this,"",!0),f.exists(this.elementsByName[g]))switch(n){case "x":p.push(s(this,h,k,2));break;case "y":p.push(s(this,h,k,1));break;case "visible":p.push(r(this,h,k));break;case "position":p.push(v(this,
h,k));break;case "stroke":p.push(q(this,h,k,"stroke"));break;case "style":p.push(x(this,h,k));break;case "strokewidth":p.push(q(this,h,k,"strokewidth"));break;case "fill":p.push(q(this,h,k,"fill"));break;case "label":break;default:m.debug("property '"+n+"' in conditions not yet implemented:"+k)}else m.debug("debug conditions: |"+g+"| undefined");a=a.slice(l+7);h=a.indexOf("<data>");l=a.indexOf("</data>")}this.updateConditions=function(){var a;for(a=0;a<p.length;a++)p[a]();return this.prepareUpdate().updateElements(),
!0};this.updateConditions()}},updateConditions:function(){return!1},calculateSnapSizes:function(){var a=new l(q.COORDS_BY_USER,[0,0],this),b=new l(q.COORDS_BY_USER,[this.options.grid.gridX,this.options.grid.gridY],this),c=a.scrCoords[1]-b.scrCoords[1],a=a.scrCoords[2]-b.scrCoords[2];for(this.options.grid.snapSizeX=this.options.grid.gridX;25<Math.abs(c);)this.options.grid.snapSizeX*=2,c/=2;for(this.options.grid.snapSizeY=this.options.grid.gridY;25<Math.abs(a);)this.options.grid.snapSizeY*=2,a/=2;return this},
applyZoom:function(){return this.updateCoords().calculateSnapSizes().clearTraces().fullUpdate(),this},zoomIn:function(a,b){var c=this.getBoundingBox(),f=this.attr.zoom.factorx,d=this.attr.zoom.factory,e=(c[2]-c[0])*(1-1/f),k=(c[1]-c[3])*(1-1/d),g=.5,h=.5;return"number"==typeof a&&"number"==typeof b&&(g=(a-c[0])/(c[2]-c[0]),h=(c[1]-b)/(c[1]-c[3])),this.setBoundingBox([c[0]+e*g,c[1]-k*h,c[2]-e*(1-g),c[3]+k*(1-h)],!1),this.zoomX*=f,this.zoomY*=d,this.applyZoom(),!1},zoomOut:function(a,b){var c=this.getBoundingBox(),
f=this.attr.zoom.factorx,d=this.attr.zoom.factory,e=(c[2]-c[0])*(1-f),k=(c[1]-c[3])*(1-d),g=.5,h=.5;return this.zoomX<this.attr.zoom.eps||this.zoomY<this.attr.zoom.eps?!1:("number"==typeof a&&"number"==typeof b&&(g=(a-c[0])/(c[2]-c[0]),h=(c[1]-b)/(c[1]-c[3])),this.setBoundingBox([c[0]+e*g,c[1]-k*h,c[2]-e*(1-g),c[3]+k*(1-h)],!1),this.zoomX/=f,this.zoomY/=d,this.applyZoom(),!1)},zoom100:function(){var a=this.getBoundingBox(),b=.5*(a[2]-a[0])*(1-this.zoomX),c=.5*(a[1]-a[3])*(1-this.zoomY);return this.setBoundingBox([a[0]+
b,a[1]-c,a[2]-b,a[3]+c],!1),this.zoomX=1,this.zoomY=1,this.applyZoom(),!1},zoomAllPoints:function(){var a,b,c,d,e=0,k=0,g=0,h=0,n=this.objectsList.length;for(a=0;n>a;a++)d=this.objectsList[a],f.isPoint(d)&&d.visProp.visible&&(d.coords.usrCoords[1]<e?e=d.coords.usrCoords[1]:d.coords.usrCoords[1]>k&&(k=d.coords.usrCoords[1]),d.coords.usrCoords[2]>h?h=d.coords.usrCoords[2]:d.coords.usrCoords[2]<g&&(g=d.coords.usrCoords[2]));return b=50/this.unitX,c=50/this.unitY,this.zoomX=1,this.zoomY=1,this.setBoundingBox([e-
b,h+c,k+b,g-c],!0),this.applyZoom(),this},zoomElements:function(a){var b,c,d,e,k=[0,0,0,0],g=[1,-1,-1,1];if(!f.isArray(a)||0===a.length)return this;for(b=0;b<a.length;b++)if(d=this.select(a[b]),e=d.bounds(),f.isArray(e))if(f.isArray(k))for(c=0;4>c;c++)g[c]*e[c]<g[c]*k[c]&&(k[c]=e[c]);else k=e;if(f.isArray(k)){for(c=0;4>c;c++)k[c]-=g[c];this.zoomY=this.zoomX=1;this.setBoundingBox(k,!0)}return this},setZoom:function(a,b){var c=this.attr.zoom.factorx,f=this.attr.zoom.factory;return this.attr.zoom.factorx=
a/this.zoomX,this.attr.zoom.factory=b/this.zoomY,this.zoomIn(),this.attr.zoom.factorx=c,this.attr.zoom.factory=f,this},removeObject:function(a){var b;if(f.isArray(a)){for(b=0;b<a.length;b++)this.removeObject(a[b]);return this}if(a=this.select(a),!f.exists(a)||f.isString(a))return this;try{for(b in a.childElements)a.childElements.hasOwnProperty(b)&&a.childElements[b].board.removeObject(a.childElements[b]);for(b in this.objects)this.objects.hasOwnProperty(b)&&f.exists(this.objects[b].childElements)&&
(delete this.objects[b].childElements[a.id],delete this.objects[b].descendants[a.id]);if(-1<a._pos)for(this.objectsList.splice(a._pos,1),b=a._pos;b<this.objectsList.length;b++)this.objectsList[b]._pos--;else m.debug("Board.removeObject: object "+a.id+" not found in list.");delete this.objects[a.id];delete this.elementsByName[a.name];a.visProp&&a.visProp.trace&&a.clearTrace();f.exists(a.remove)&&a.remove()}catch(c){m.debug(a.id+": Could not be removed: "+c)}return this.update(),this},removeAncestors:function(a){for(var b in a.ancestors)a.ancestors.hasOwnProperty(b)&&
this.removeAncestors(a.ancestors[b]);return this.removeObject(a),this},initGeonextBoard:function(){var a,b,c;return a=this.create("point",[0,0],{id:this.id+"g00e0",name:"Ursprung",withLabel:!1,visible:!1,fixed:!0}),b=this.create("point",[1,0],{id:this.id+"gX0e0",name:"Punkt_1_0",withLabel:!1,visible:!1,fixed:!0}),c=this.create("point",[0,1],{id:this.id+"gY0e0",name:"Punkt_0_1",withLabel:!1,visible:!1,fixed:!0}),this.create("line",[a,b],{id:this.id+"gXLe0",name:"X-Achse",withLabel:!1,visible:!1}),
this.create("line",[a,c],{id:this.id+"gYLe0",name:"Y-Achse",withLabel:!1,visible:!1}),this},initInfobox:function(){var a=f.copyAttributes({},this.options,"infobox");return a.id=this.id+"_infobox",this.infobox=this.create("text",[0,0,"0,0"],a),this.infobox.distanceX=-20,this.infobox.distanceY=25,this.infobox.dump=!1,this.renderer.hide(this.infobox),this},resizeContainer:function(a,b,c){return this.canvasWidth=parseInt(a,10),this.canvasHeight=parseInt(b,10),c||(this.containerObj.style.width=this.canvasWidth+
"px",this.containerObj.style.height=this.canvasHeight+"px"),this.renderer.resize(this.canvasWidth,this.canvasHeight),this},showDependencies:function(){var a,b,c,f,d;b="<p>\n";for(a in this.objects)if(this.objects.hasOwnProperty(a)){d=0;for(c in this.objects[a].childElements)this.objects[a].childElements.hasOwnProperty(c)&&(d+=1);0<=d&&(b+="<strong>"+this.objects[a].id+":</strong> ");for(c in this.objects[a].childElements)this.objects[a].childElements.hasOwnProperty(c)&&(b+=this.objects[a].childElements[c].id+
"("+this.objects[a].childElements[c].name+"), ");b+="<p>\n"}return b+="</p>\n",f=window.open(),f.document.open(),f.document.write(b),f.document.close(),this},showXML:function(){var a=window.open("");return a.document.open(),a.document.write("<pre>"+f.escapeHTML(this.xmlString)+"</pre>"),a.document.close(),this},prepareUpdate:function(){var a,b,c=this.objectsList.length;for(a=0;c>a;a++)b=this.objectsList[a],b.needsUpdate=b.needsRegularUpdate||this.needsFullUpdate;return this},updateElements:function(a){var b,
c;a=this.select(a);for(b=0;b<this.objectsList.length;b++)c=this.objectsList[b],c.update(!f.exists(a)||c.id!==a.id);for(b in this.groups)this.groups.hasOwnProperty(b)&&this.groups[b].update(a);return this},updateRenderer:function(){var a,b,c=this.objectsList.length;if("canvas"===this.renderer.type)this.updateRendererCanvas();else for(a=0;c>a;a++)b=this.objectsList[a],b.updateRenderer();return this},updateRendererCanvas:function(){var a,b,c,f,d,e=this.objectsList.length,k=this.options.layer,g=this.options.layer.numlayers,
h=Number.NEGATIVE_INFINITY;for(c=0;g>c;c++){f=Number.POSITIVE_INFINITY;for(d in k)k.hasOwnProperty(d)&&k[d]>h&&k[d]<f&&(f=k[d]);h=f;for(a=0;e>a;a++)b=this.objectsList[a],b.visProp.layer===f&&b.prepareUpdate().updateRenderer()}return this},addHook:function(a,b,c){return b=f.def(b,"update"),c=f.def(c,this),this.hooks.push([b,a]),this.on(b,a,c),this.hooks.length-1},addEvent:m.shortcut(m.Board.prototype,"on"),removeHook:function(a){return this.hooks[a]&&(this.off(this.hooks[a][0],this.hooks[a][1]),this.hooks[a]=
null),this},removeEvent:m.shortcut(m.Board.prototype,"off"),updateHooks:function(){var a=Array.prototype.slice.call(arguments,0);return a[0]=f.def(a[0],"update"),this.triggerEventHandlers([a[0]],arguments),this},addChild:function(a){return f.exists(a)&&f.exists(a.containerObj)&&(this.dependentBoards.push(a),this.update()),this},removeChild:function(a){var b;for(b=this.dependentBoards.length-1;0<=b;b--)this.dependentBoards[b]===a&&this.dependentBoards.splice(b,1);return this},update:function(a){var b,
c;if(this.inUpdate||this.isSuspendedUpdate)return this;this.inUpdate=!0;"all"===this.attr.minimizereflow&&this.containerObj&&"vml"!==this.renderer.type&&(b=this.renderer.removeToInsertLater(this.containerObj));"svg"===this.attr.minimizereflow&&"svg"===this.renderer.type&&(b=this.renderer.removeToInsertLater(this.renderer.svgRoot));this.prepareUpdate().updateElements(a).updateConditions();this.renderer.suspendRedraw(this);this.updateRenderer();this.renderer.unsuspendRedraw();this.triggerEventHandlers(["update"],
[]);b&&b();b=this.dependentBoards.length;for(a=0;b>a;a++)c=this.dependentBoards[a],f.exists(c)&&c!==this&&(c.updateQuality=this.updateQuality,c.prepareUpdate().updateElements().updateConditions(),c.renderer.suspendRedraw(),c.updateRenderer(),c.renderer.unsuspendRedraw(),c.triggerEventHandlers(["update"],[]));return this.inUpdate=!1,this},fullUpdate:function(){return this.needsFullUpdate=!0,this.update(),this.needsFullUpdate=!1,this},addGrid:function(){return this.create("grid",[]),this},removeGrids:function(){var a;
for(a=0;a<this.grids.length;a++)this.removeObject(this.grids[a]);return this.grids.length=0,this.update(),this},create:function(a,b,c){var d,e;a=a.toLowerCase();f.exists(b)||(b=[]);f.exists(c)||(c={});for(e=0;e<b.length;e++)"string"!=typeof b[e]||"text"===a&&2===e||(b[e]=this.select(b[e]));if("function"!=typeof m.elements[a])throw Error("JSXGraph: create: Unknown element type given: "+a);return d=m.elements[a](this,b,c),f.exists(d)?(d.prepareUpdate&&d.update&&d.updateRenderer&&d.prepareUpdate().update().updateRenderer(),
d):(m.debug("JSXGraph: create: failure creating "+a),d)},createElement:m.shortcut(m.Board.prototype,"create"),clearTraces:function(){var a;for(a=0;a<this.objectsList.length;a++)this.objectsList[a].clearTrace();return this.numTraces=0,this},suspendUpdate:function(){return this.inUpdate||(this.isSuspendedUpdate=!0),this},unsuspendUpdate:function(){return this.isSuspendedUpdate&&(this.isSuspendedUpdate=!1,this.update()),this},setBoundingBox:function(a,b){var c,d,e=p.getDimensions(this.container,this.document);
return f.isArray(a)?(this.plainBB=a,this.canvasWidth=parseInt(e.width,10),this.canvasHeight=parseInt(e.height,10),d=this.canvasWidth,c=this.canvasHeight,b?(this.unitX=d/(a[2]-a[0]),this.unitY=c/(a[1]-a[3]),Math.abs(this.unitX)<Math.abs(this.unitY)?this.unitY=Math.abs(this.unitX)*this.unitY/Math.abs(this.unitY):this.unitX=Math.abs(this.unitY)*this.unitX/Math.abs(this.unitX)):(this.unitX=d/(a[2]-a[0]),this.unitY=c/(a[1]-a[3])),this.moveOrigin(-this.unitX*a[0],this.unitY*a[1]),this):this},getBoundingBox:function(){var a=
new l(q.COORDS_BY_SCREEN,[0,0],this),b=new l(q.COORDS_BY_SCREEN,[this.canvasWidth,this.canvasHeight],this);return[a.usrCoords[1],a.usrCoords[2],b.usrCoords[1],b.usrCoords[2]]},addAnimation:function(a){var b=this;return this.animationObjects[a.id]=a,this.animationIntervalCode||(this.animationIntervalCode=window.setInterval(function(){b.animate()},a.board.attr.animationdelay)),this},stopAllAnimation:function(){for(var a in this.animationObjects)this.animationObjects.hasOwnProperty(a)&&f.exists(this.animationObjects[a])&&
(this.animationObjects[a]=null,delete this.animationObjects[a]);return window.clearInterval(this.animationIntervalCode),delete this.animationIntervalCode,this},animate:function(){var a,b,c,d,e,k,g,h,n=0,p=null;for(b in this.animationObjects)if(this.animationObjects.hasOwnProperty(b)&&f.exists(this.animationObjects[b])){if(n+=1,c=this.animationObjects[b],c.animationPath&&(d=f.isFunction(c.animationPath)?c.animationPath((new Date).getTime()-c.animationStart):c.animationPath.pop(),!f.exists(d)||!f.isArray(d)&&
isNaN(d)?delete c.animationPath:(c.setPositionDirectly(q.COORDS_BY_USER,d),c.prepareUpdate().update().updateRenderer(),p=c)),c.animationData){g=0;for(e in c.animationData)c.animationData.hasOwnProperty(e)&&(k=c.animationData[e].pop(),f.exists(k)?(g+=1,a={},a[e]=k,c.setAttribute(a)):delete c.animationData[k]);0===g&&delete c.animationData}f.exists(c.animationData)||f.exists(c.animationPath)||(this.animationObjects[b]=null,delete this.animationObjects[b],f.exists(c.animationCallback)&&(h=c.animationCallback,
c.animationCallback=null,h()))}return 0===n?(window.clearInterval(this.animationIntervalCode),delete this.animationIntervalCode):this.update(p),this},migratePoint:function(a,b,c){var d,e,k,g,h,n=!1;a=this.select(a);b=this.select(b);m.exists(a.label)&&(h=a.label.id,n=!0,this.removeObject(a.label));for(e in a.childElements)if(a.childElements.hasOwnProperty(e)){d=a.childElements[e];g=!1;for(k in d)d.hasOwnProperty(k)&&d[k]===a&&(d[k]=b,g=!0);g&&delete a.childElements[e];for(g=0;g<d.parents.length;g++)d.parents[g]===
a.id&&(d.parents[g]=b.id);b.addChild(d)}return c&&(n&&(delete b.childElements[h],delete b.descendants[h]),b.label&&this.removeObject(b.label),delete this.elementsByName[b.name],b.name=a.name,n&&b.createLabel()),this.removeObject(a),f.exists(b.name)&&""!==b.name&&(this.elementsByName[b.name]=b),this.update(),this},emulateColorblindness:function(a){var b,d;if(f.exists(a)||(a="none"),this.currentCBDef===a)return this;for(b in this.objects)this.objects.hasOwnProperty(b)&&(d=this.objects[b],"none"!==a?
("none"===this.currentCBDef&&(d.visPropOriginal={strokecolor:d.visProp.strokecolor,fillcolor:d.visProp.fillcolor,highlightstrokecolor:d.visProp.highlightstrokecolor,highlightfillcolor:d.visProp.highlightfillcolor}),d.setAttribute({strokecolor:c.rgb2cb(d.visPropOriginal.strokecolor,a),fillcolor:c.rgb2cb(d.visPropOriginal.fillcolor,a),highlightstrokecolor:c.rgb2cb(d.visPropOriginal.highlightstrokecolor,a),highlightfillcolor:c.rgb2cb(d.visPropOriginal.highlightfillcolor,a)})):f.exists(d.visPropOriginal)&&
m.extend(d.visProp,d.visPropOriginal));return this.currentCBDef=a,this.update(),this},select:function(a){var b,c,d;if(null===a)return a;if("string"==typeof a&&""!==a)f.exists(this.objects[a])?a=this.objects[a]:f.exists(this.elementsByName[a])?a=this.elementsByName[a]:f.exists(this.groups[a])&&(a=this.groups[a]);else if("function"==typeof a||"object"==typeof a&&!m.isArray(a)&&"function"!=typeof a.setAttribute){a=f.filterElements(this.objectsList,a);b={};d=a.length;for(c=0;d>c;c++)b[a[c].id]=a[c];a=
new u(b)}else"object"==typeof a&&m.exists(a.id)&&!m.exists(this.objects[a.id])&&(a=null);return a},hasPoint:function(a,b){var c=a,f=b,d=this.getBoundingBox();return m.exists(a)&&m.isArray(a.usrCoords)&&(c=a.usrCoords[1],f=a.usrCoords[2]),"number"==typeof c&&"number"==typeof f&&d[0]<c&&c<d[2]&&d[1]>f&&f>d[3]?!0:!1},updateCSSTransforms:function(){var a=this.containerObj,b=a;this.cssTransMat=p.getCSSTransformMatrix(b);for(b=b.offsetParent;b;){this.cssTransMat=g.matMatMult(p.getCSSTransformMatrix(b),
this.cssTransMat);for(a=a.parentNode;a!==b;)this.cssTransMat=g.matMatMult(p.getCSSTransformMatrix(b),this.cssTransMat),a=a.parentNode;b=b.offsetParent}return this.cssTransMat=g.inverse(this.cssTransMat),this},__evt__down:function(){},__evt__mousedown:function(){},__evt__touchstart:function(){},__evt__up:function(){},__evt__mouseup:function(){},__evt__touchend:function(){},__evt__move:function(){},__evt__mousemove:function(){},__evt__touchmove:function(){},__evt__hit:function(){},__evt__mousehit:function(){},
__evt__update:function(){},__evt__boundingbox:function(){},__evt:function(){},createRoulette:function(a,c,f,d,e,k,g){var n=this;return new function(){var p,l=0,m=0,s=0,r=f,q=h.root(function(b){var f=a.X(r),d=a.Y(r),e=c.X(b);b=c.Y(b);return(f-e)*(f-e)+(d-b)*(d-b)},[0,2*Math.PI]),v=0,x=0,u=n.create("transform",[function(){return l}],{type:"rotate"}),y=n.create("transform",[function(){return l},function(){return a.X(r)},function(){return a.Y(r)}],{type:"rotate"}),E=n.create("transform",[function(){return m},
function(){return s}],{type:"translate"}),O=function(a,b,c){var f=h.D(a.X)(b),d=h.D(a.Y)(b),e=h.D(a.X)(c),k=h.D(a.Y)(c),g=h.D(a.X)(.5*(b+c));a=h.D(a.Y)(.5*(b+c));f=Math.sqrt(f*f+d*d);e=Math.sqrt(e*e+k*k);g=Math.sqrt(g*g+a*a);return(f+4*g+e)*(c-b)/6},S=function(a){return p-O(c,q,a)},Q=Math.PI/18,U=9*Q,P=null;return this.rolling=function(){var f,k,z,C;v=r+e*d;p=O(a,r,v);x=h.root(S,q);f=new b(a.X(v),a.Y(v));k=new b(c.X(x),c.Y(x));z=new b(h.D(a.X)(v),h.D(a.Y)(v));C=new b(h.D(c.X)(x),h.D(c.Y)(x));z=b.C.div(z,
C);l=Math.atan2(z.imaginary,z.real);z.div(b.C.abs(z));z.mult(k);m=f.real-z.real;s=f.imaginary-z.imaginary;-Q>l&&l>-U?(l=-Q,y.applyOnce(g)):l>Q&&U>l?(l=Q,y.applyOnce(g)):(u.applyOnce(g),E.applyOnce(g),r=v,q=x);n.update()},this.start=function(){return 0<k&&(P=window.setInterval(this.rolling,k)),this},this.stop=function(){return window.clearInterval(P),this},this}}}),m.Board});E("renderer/svg","jxg options renderer/abstract base/constants utils/type utils/env utils/color math/numerics".split(" "),function(m,
q,l,e,h,g,d,b){return m.SVGRenderer=function(a,b){var c;this.type="svg";this.svgRoot=null;this.svgNamespace="http://www.w3.org/2000/svg";this.xlinkNamespace="http://www.w3.org/1999/xlink";this.container=a;this.container.style.MozUserSelect="none";this.container.style.overflow="hidden";""===this.container.style.position&&(this.container.style.position="relative");this.svgRoot=this.container.ownerDocument.createElementNS(this.svgNamespace,"svg");this.svgRoot.style.overflow="hidden";this.svgRoot.style.width=
b.width+"px";this.svgRoot.style.height=b.height+"px";this.container.appendChild(this.svgRoot);this.defs=this.container.ownerDocument.createElementNS(this.svgNamespace,"defs");this.svgRoot.appendChild(this.defs);this.filter=this.container.ownerDocument.createElementNS(this.svgNamespace,"filter");this.filter.setAttributeNS(null,"id",this.container.id+"_f1");this.filter.setAttributeNS(null,"width","300%");this.filter.setAttributeNS(null,"height","300%");this.filter.setAttributeNS(null,"filterUnits",
"userSpaceOnUse");this.feOffset=this.container.ownerDocument.createElementNS(this.svgNamespace,"feOffset");this.feOffset.setAttributeNS(null,"result","offOut");this.feOffset.setAttributeNS(null,"in","SourceAlpha");this.feOffset.setAttributeNS(null,"dx","5");this.feOffset.setAttributeNS(null,"dy","5");this.filter.appendChild(this.feOffset);this.feGaussianBlur=this.container.ownerDocument.createElementNS(this.svgNamespace,"feGaussianBlur");this.feGaussianBlur.setAttributeNS(null,"result","blurOut");
this.feGaussianBlur.setAttributeNS(null,"in","offOut");this.feGaussianBlur.setAttributeNS(null,"stdDeviation","3");this.filter.appendChild(this.feGaussianBlur);this.feBlend=this.container.ownerDocument.createElementNS(this.svgNamespace,"feBlend");this.feBlend.setAttributeNS(null,"in","SourceGraphic");this.feBlend.setAttributeNS(null,"in2","blurOut");this.feBlend.setAttributeNS(null,"mode","normal");this.filter.appendChild(this.feBlend);this.defs.appendChild(this.filter);this.layer=[];for(c=0;c<q.layer.numlayers;c++)this.layer[c]=
this.container.ownerDocument.createElementNS(this.svgNamespace,"g"),this.svgRoot.appendChild(this.layer[c]);this.dashArray="2, 2;5, 5;10, 10;20, 20;20, 10, 10, 10;20, 5, 10, 5".split(";")},m.SVGRenderer.prototype=new l,m.extend(m.SVGRenderer.prototype,{_createArrowHead:function(a,b){var c,f,d,e,g=a.id+"Triangle";return h.exists(b)&&(g+=b),c=this.createPrim("marker",g),c.setAttributeNS(null,"stroke",h.evaluate(a.visProp.strokecolor)),c.setAttributeNS(null,"stroke-opacity",h.evaluate(a.visProp.strokeopacity)),
c.setAttributeNS(null,"fill",h.evaluate(a.visProp.strokecolor)),c.setAttributeNS(null,"fill-opacity",h.evaluate(a.visProp.strokeopacity)),c.setAttributeNS(null,"stroke-width",0),c.setAttributeNS(null,"orient","auto"),c.setAttributeNS(null,"markerUnits","strokeWidth"),d=parseInt(a.visProp.strokewidth,10),c.setAttributeNS(null,"viewBox",-d+" "+-d+" "+10*d+" "+10*d),e=Math.max(3*d,10),c.setAttributeNS(null,"markerHeight",e),c.setAttributeNS(null,"markerWidth",e),f=this.container.ownerDocument.createElementNS(this.svgNamespace,
"path"),"End"===b?(c.setAttributeNS(null,"refY",5),c.setAttributeNS(null,"refX",10),f.setAttributeNS(null,"d","M 10 0 L 0 5 L 10 10 z")):(c.setAttributeNS(null,"refY",5),c.setAttributeNS(null,"refX",0),f.setAttributeNS(null,"d","M 0 0 L 10 5 L 0 10 z")),c.appendChild(f),c},_setArrowAtts:function(a,b,c,f){var d;a&&(a.setAttributeNS(null,"stroke",b),a.setAttributeNS(null,"stroke-opacity",c),a.setAttributeNS(null,"fill",b),a.setAttributeNS(null,"fill-opacity",c),a.setAttributeNS(null,"stroke-width",
0),a.setAttributeNS(null,"viewBox",-f+" "+-f+" "+10*f+" "+10*f),d=Math.max(3*f,10),a.setAttributeNS(null,"markerHeight",d),a.setAttributeNS(null,"markerWidth",d))},updateTicks:function(a){var b,c,f,d="",e=a.ticks.length;for(b=0;e>b;b++)c=a.ticks[b],f=c[0],c=c[1],"number"==typeof f[0]&&"number"==typeof f[1]&&(d+="M "+f[0]+" "+c[0]+" L "+f[1]+" "+c[1]+" ");b=a.rendNode;h.exists(b)||(b=this.createPrim("path",a.id),this.appendChildPrim(b,a.visProp.layer),a.rendNode=b);b.setAttributeNS(null,"stroke",a.visProp.strokecolor);
b.setAttributeNS(null,"stroke-opacity",a.visProp.strokeopacity);b.setAttributeNS(null,"stroke-width",a.visProp.strokewidth);this.updatePathPrim(b,d,a.board)},displayCopyright:function(a,b){var c,f=this.createPrim("text","licenseText");f.setAttributeNS(null,"x","20px");f.setAttributeNS(null,"y",2+b+"px");f.setAttributeNS(null,"style","font-family:Arial,Helvetica,sans-serif; font-size:"+b+"px; fill:#356AA0;  opacity:0.3;");c=this.container.ownerDocument.createTextNode(a);f.appendChild(c);this.appendChildPrim(f,
0)},drawInternalText:function(a){var b=this.createPrim("text",a.id);return b.setAttributeNS(null,"class",a.visProp.cssclass),a.rendNodeText=this.container.ownerDocument.createTextNode(""),b.appendChild(a.rendNodeText),this.appendChildPrim(b,a.visProp.layer),b},updateInternalText:function(a){var b,c=a.plaintext;isNaN(a.coords.scrCoords[1]+a.coords.scrCoords[2])||(b=a.coords.scrCoords[1],a.visPropOld.left!==a.visProp.anchorx+b&&(a.rendNode.setAttributeNS(null,"x",b+"px"),"left"===a.visProp.anchorx?
a.rendNode.setAttributeNS(null,"text-anchor","start"):"right"===a.visProp.anchorx?a.rendNode.setAttributeNS(null,"text-anchor","end"):"middle"===a.visProp.anchorx&&a.rendNode.setAttributeNS(null,"text-anchor","middle"),a.visPropOld.left=a.visProp.anchorx+b),b=a.coords.scrCoords[2],a.visPropOld.top!==a.visProp.anchory+b&&(a.rendNode.setAttributeNS(null,"y",b+.5*this.vOffsetText+"px"),"bottom"===a.visProp.anchory?a.rendNode.setAttributeNS(null,"dominant-baseline","text-after-edge"):"top"===a.visProp.anchory?
a.rendNode.setAttributeNS(null,"dominant-baseline","text-before-edge"):"middle"===a.visProp.anchory&&a.rendNode.setAttributeNS(null,"dominant-baseline","middle"),a.visPropOld.top=a.visProp.anchory+b));a.htmlStr!==c&&(a.rendNodeText.data=c,a.htmlStr=c);this.transformImage(a,a.transformations)},updateInternalTextStyle:function(a,b,c){this.setObjectFillColor(a,b,c)},drawImage:function(a){var b=this.createPrim("image",a.id);b.setAttributeNS(null,"preserveAspectRatio","none");this.appendChildPrim(b,a.visProp.layer);
a.rendNode=b;this.updateImage(a)},transformImage:function(a,b){var c,f,d=a.rendNode,e="";0<b.length&&(f=this.joinTransforms(a,b),c=[f[1][1],f[2][1],f[1][2],f[2][2],f[1][0],f[2][0]].join(),e+=" matrix("+c+") ",d.setAttributeNS(null,"transform",e))},updateImageURL:function(a){var b=h.evaluate(a.url);a.rendNode.setAttributeNS(this.xlinkNamespace,"xlink:href",b)},updateImageStyle:function(a,b){a.rendNode.setAttributeNS(null,"class",b?a.visProp.highlightcssclass:a.visProp.cssclass)},appendChildPrim:function(a,
b){return h.exists(b)?b>=q.layer.numlayers&&(b=q.layer.numlayers-1):b=0,this.layer[b].appendChild(a),a},createPrim:function(a,b){var c=this.container.ownerDocument.createElementNS(this.svgNamespace,a);return c.setAttributeNS(null,"id",this.container.id+"_"+b),c.style.position="absolute","path"===a&&(c.setAttributeNS(null,"stroke-linecap","butt"),c.setAttributeNS(null,"stroke-linejoin","round")),c},remove:function(a){h.exists(a)&&h.exists(a.parentNode)&&a.parentNode.removeChild(a)},makeArrows:function(a){var b;
(a.visPropOld.firstarrow!==a.visProp.firstarrow||a.visPropOld.lastarrow!==a.visProp.lastarrow)&&(a.visProp.firstarrow?(b=a.rendNodeTriangleStart,h.exists(b)?this.defs.appendChild(b):(b=this._createArrowHead(a,"End"),this.defs.appendChild(b),a.rendNodeTriangleStart=b,a.rendNode.setAttributeNS(null,"marker-start","url(#"+this.container.id+"_"+a.id+"TriangleEnd)"))):(b=a.rendNodeTriangleStart,h.exists(b)&&this.remove(b)),a.visProp.lastarrow?(b=a.rendNodeTriangleEnd,h.exists(b)?this.defs.appendChild(b):
(b=this._createArrowHead(a,"Start"),this.defs.appendChild(b),a.rendNodeTriangleEnd=b,a.rendNode.setAttributeNS(null,"marker-end","url(#"+this.container.id+"_"+a.id+"TriangleStart)"))):(b=a.rendNodeTriangleEnd,h.exists(b)&&this.remove(b)),a.visPropOld.firstarrow=a.visProp.firstarrow,a.visPropOld.lastarrow=a.visProp.lastarrow)},updateEllipsePrim:function(a,b,c,f,d){b=1E6>Math.abs(b)?b:1E6*b/Math.abs(b);c=1E6>Math.abs(c)?c:1E6*c/Math.abs(c);f=1E6>Math.abs(f)?f:1E6*f/Math.abs(f);d=1E6>Math.abs(d)?d:1E6*
d/Math.abs(d);a.setAttributeNS(null,"cx",b);a.setAttributeNS(null,"cy",c);a.setAttributeNS(null,"rx",Math.abs(f));a.setAttributeNS(null,"ry",Math.abs(d))},updateLinePrim:function(a,b,c,f,d){isNaN(b+c+f+d)||(b=1E6>Math.abs(b)?b:1E6*b/Math.abs(b),c=1E6>Math.abs(c)?c:1E6*c/Math.abs(c),f=1E6>Math.abs(f)?f:1E6*f/Math.abs(f),d=1E6>Math.abs(d)?d:1E6*d/Math.abs(d),a.setAttributeNS(null,"x1",b),a.setAttributeNS(null,"y1",c),a.setAttributeNS(null,"x2",f),a.setAttributeNS(null,"y2",d))},updatePathPrim:function(a,
b){""===b&&(b="M 0 0");a.setAttributeNS(null,"d",b)},updatePathStringPoint:function(a,b,c){var f="";a=a.coords.scrCoords;var d=.5*b*Math.sqrt(3),e=.5*b;return"x"===c?f=" M "+(a[1]-b)+" "+(a[2]-b)+" L "+(a[1]+b)+" "+(a[2]+b)+" M "+(a[1]+b)+" "+(a[2]-b)+" L "+(a[1]-b)+" "+(a[2]+b):"+"===c?f=" M "+(a[1]-b)+" "+a[2]+" L "+(a[1]+b)+" "+a[2]+" M "+a[1]+" "+(a[2]-b)+" L "+a[1]+" "+(a[2]+b):"<>"===c?f=" M "+(a[1]-b)+" "+a[2]+" L "+a[1]+" "+(a[2]+b)+" L "+(a[1]+b)+" "+a[2]+" L "+a[1]+" "+(a[2]-b)+" Z ":"^"===
c?f=" M "+a[1]+" "+(a[2]-b)+" L "+(a[1]-d)+" "+(a[2]+e)+" L "+(a[1]+d)+" "+(a[2]+e)+" Z ":"v"===c?f=" M "+a[1]+" "+(a[2]+b)+" L "+(a[1]-d)+" "+(a[2]-e)+" L "+(a[1]+d)+" "+(a[2]-e)+" Z ":">"===c?f=" M "+(a[1]+b)+" "+a[2]+" L "+(a[1]-e)+" "+(a[2]-d)+" L "+(a[1]-e)+" "+(a[2]+d)+" Z ":"<"===c&&(f=" M "+(a[1]-b)+" "+a[2]+" L "+(a[1]+e)+" "+(a[2]-d)+" L "+(a[1]+e)+" "+(a[2]+d)+" Z "),f},updatePathStringPrim:function(a){var d,c,f,e=" M ",g="";d="plot"!==a.visProp.curvetype;if(0>=a.numberPoints)return"";
if(f=Math.min(a.points.length,a.numberPoints),1===a.bezierDegree)for(d&&a.board.options.curve.RDPsmoothing&&(a.points=b.RamerDouglasPeuker(a.points,.5)),d=0;f>d;d++)c=a.points[d].scrCoords,isNaN(c[1])||isNaN(c[2])?e=" M ":(c[1]=Math.max(Math.min(c[1],5E3),-5E3),c[2]=Math.max(Math.min(c[2],5E3),-5E3),g+=e+c[1]+" "+c[2],e=" L ");else if(3===a.bezierDegree)for(d=0;f>d;)c=a.points[d].scrCoords,isNaN(c[1])||isNaN(c[2])?e=" M ":(g+=e+c[1]+" "+c[2]," C "===e&&(d+=1,c=a.points[d].scrCoords,g+=" "+c[1]+" "+
c[2],d+=1,c=a.points[d].scrCoords,g+=" "+c[1]+" "+c[2]),e=" C "),d+=1;return g},updatePathStringBezierPrim:function(a){var d,c,f,e,g,h,l,m=" M ",q="",x=a.visProp.strokewidth;if(0>=a.numberPoints)return"";"plot"!==a.visProp.curvetype&&a.board.options.curve.RDPsmoothing&&(a.points=b.RamerDouglasPeuker(a.points,.5));l=Math.min(a.points.length,a.numberPoints);for(c=1;3>c;c++)for(m=" M ",d=0;l>d;d++)e=a.points[d].scrCoords,isNaN(e[1])||isNaN(e[2])?m=" M ":(e[1]=Math.max(Math.min(e[1],5E3),-5E3),e[2]=Math.max(Math.min(e[2],
5E3),-5E3)," M "===m?q+=m+e[1]+" "+e[2]:(f=2*c,q+=[m,g+.333*(e[1]-g)+x*(f*Math.random()-c)," ",h+.333*(e[2]-h)+x*(f*Math.random()-c)," ",g+.666*(e[1]-g)+x*(f*Math.random()-c)," ",h+.666*(e[2]-h)+x*(f*Math.random()-c)," ",e[1]," ",e[2]].join("")),m=" C ",g=e[1],h=e[2]);return q},updatePolygonPrim:function(a,b){var c,f,d="",e=b.vertices.length;a.setAttributeNS(null,"stroke","none");for(c=0;e-1>c;c++){if(!b.vertices[c].isReal)return a.setAttributeNS(null,"points",""),void 0;f=b.vertices[c].coords.scrCoords;
d=d+f[1]+","+f[2];e-2>c&&(d+=" ")}-1===d.indexOf("NaN")&&a.setAttributeNS(null,"points",d)},updateRectPrim:function(a,b,c,f,d){a.setAttributeNS(null,"x",b);a.setAttributeNS(null,"y",c);a.setAttributeNS(null,"width",f);a.setAttributeNS(null,"height",d)},setPropertyPrim:function(a,b,c){"stroked"!==b&&a.setAttributeNS(null,b,c)},show:function(a){var b;a&&a.rendNode&&(b=a.rendNode,b.setAttributeNS(null,"display","inline"),b.style.visibility="inherit")},hide:function(a){var b;a&&a.rendNode&&(b=a.rendNode,
b.setAttributeNS(null,"display","none"),b.style.visibility="hidden")},setBuffering:function(a,b){a.rendNode.setAttribute("buffered-rendering",b)},setDashStyle:function(a){var b=a.visProp.dash,c=a.rendNode;0<a.visProp.dash?c.setAttributeNS(null,"stroke-dasharray",this.dashArray[b-1]):c.hasAttributeNS(null,"stroke-dasharray")&&c.removeAttributeNS(null,"stroke-dasharray")},setGradient:function(a){var b,c,f,d,e,g=a.rendNode;c=h.evaluate(a.visProp.fillopacity);c=0<c?c:0;b=h.evaluate(a.visProp.fillcolor);
"linear"===a.visProp.gradient?(f=this.createPrim("linearGradient",a.id+"_gradient"),f.setAttributeNS(null,"x1","0%"),f.setAttributeNS(null,"x2","100%"),f.setAttributeNS(null,"y1","0%"),f.setAttributeNS(null,"y2","0%"),d=this.createPrim("stop",a.id+"_gradient1"),d.setAttributeNS(null,"offset","0%"),d.setAttributeNS(null,"style","stop-color:"+b+";stop-opacity:"+c),e=this.createPrim("stop",a.id+"_gradient2"),e.setAttributeNS(null,"offset","100%"),e.setAttributeNS(null,"style","stop-color:"+a.visProp.gradientsecondcolor+
";stop-opacity:"+a.visProp.gradientsecondopacity),f.appendChild(d),f.appendChild(e),this.defs.appendChild(f),g.setAttributeNS(null,"style","fill:url(#"+this.container.id+"_"+a.id+"_gradient)"),a.gradNode1=d,a.gradNode2=e):"radial"===a.visProp.gradient?(f=this.createPrim("radialGradient",a.id+"_gradient"),f.setAttributeNS(null,"cx","50%"),f.setAttributeNS(null,"cy","50%"),f.setAttributeNS(null,"r","50%"),f.setAttributeNS(null,"fx",100*a.visProp.gradientpositionx+"%"),f.setAttributeNS(null,"fy",100*
a.visProp.gradientpositiony+"%"),d=this.createPrim("stop",a.id+"_gradient1"),d.setAttributeNS(null,"offset","0%"),d.setAttributeNS(null,"style","stop-color:"+a.visProp.gradientsecondcolor+";stop-opacity:"+a.visProp.gradientsecondopacity),e=this.createPrim("stop",a.id+"_gradient2"),e.setAttributeNS(null,"offset","100%"),e.setAttributeNS(null,"style","stop-color:"+b+";stop-opacity:"+c),f.appendChild(d),f.appendChild(e),this.defs.appendChild(f),g.setAttributeNS(null,"style","fill:url(#"+this.container.id+
"_"+a.id+"_gradient)"),a.gradNode1=d,a.gradNode2=e):g.removeAttributeNS(null,"style")},updateGradient:function(a){var b,c,f=a.gradNode1,d=a.gradNode2;h.exists(f)&&h.exists(d)&&(c=h.evaluate(a.visProp.fillopacity),c=0<c?c:0,b=h.evaluate(a.visProp.fillcolor),"linear"===a.visProp.gradient?(f.setAttributeNS(null,"style","stop-color:"+b+";stop-opacity:"+c),d.setAttributeNS(null,"style","stop-color:"+a.visProp.gradientsecondcolor+";stop-opacity:"+a.visProp.gradientsecondopacity)):"radial"===a.visProp.gradient&&
(f.setAttributeNS(null,"style","stop-color:"+a.visProp.gradientsecondcolor+";stop-opacity:"+a.visProp.gradientsecondopacity),d.setAttributeNS(null,"style","stop-color:"+b+";stop-opacity:"+c)))},setObjectFillColor:function(a,b,c){var f,e,g,l;b=h.evaluate(b);c=h.evaluate(c);c=0<c?c:0;(a.visPropOld.fillcolor!==b||a.visPropOld.fillopacity!==c)&&(h.exists(b)&&!1!==b&&(9!==b.length?(e=b,l=c):(g=d.rgba2rgbo(b),e=g[0],l=c*g[1]),f=a.rendNode,"none"!==e?f.setAttributeNS(null,"fill",e):l=0,a.type===m.OBJECT_TYPE_IMAGE?
f.setAttributeNS(null,"opacity",l):f.setAttributeNS(null,"fill-opacity",l),h.exists(a.visProp.gradient)&&this.updateGradient(a)),a.visPropOld.fillcolor=b,a.visPropOld.fillopacity=c)},setObjectStrokeColor:function(a,b,c){var f,g,l,m;b=h.evaluate(b);c=h.evaluate(c);c=0<c?c:0;(a.visPropOld.strokecolor!==b||a.visPropOld.strokeopacity!==c)&&(h.exists(b)&&!1!==b&&(9!==b.length?(f=b,l=c):(g=d.rgba2rgbo(b),f=g[0],l=c*g[1]),m=a.rendNode,a.type===e.OBJECT_TYPE_TEXT?"html"===a.visProp.display?(m.style.color=
f,m.style.opacity=l):(m.setAttributeNS(null,"style","fill:"+f),m.setAttributeNS(null,"style","fill-opacity:"+l)):(m.setAttributeNS(null,"stroke",f),m.setAttributeNS(null,"stroke-opacity",l)),a.type===e.OBJECT_TYPE_ARROW?this._setArrowAtts(a.rendNodeTriangle,f,l,a.visProp.strokewidth):(a.elementClass===e.OBJECT_CLASS_CURVE||a.elementClass===e.OBJECT_CLASS_LINE)&&(a.visProp.firstarrow&&this._setArrowAtts(a.rendNodeTriangleStart,f,l,a.visProp.strokewidth),a.visProp.lastarrow&&this._setArrowAtts(a.rendNodeTriangleEnd,
f,l,a.visProp.strokewidth))),a.visPropOld.strokecolor=b,a.visPropOld.strokeopacity=c)},setObjectStrokeWidth:function(a,b){var c,f=h.evaluate(b);isNaN(f)||a.visPropOld.strokewidth===f||(c=a.rendNode,this.setPropertyPrim(c,"stroked","true"),h.exists(f)&&(this.setPropertyPrim(c,"stroke-width",f+"px"),a.type===e.OBJECT_TYPE_ARROW?this._setArrowAtts(a.rendNodeTriangle,a.visProp.strokecolor,a.visProp.strokeopacity,f):(a.elementClass===e.OBJECT_CLASS_CURVE||a.elementClass===e.OBJECT_CLASS_LINE)&&(a.visProp.firstarrow&&
this._setArrowAtts(a.rendNodeTriangleStart,a.visProp.strokecolor,a.visProp.strokeopacity,f),a.visProp.lastarrow&&this._setArrowAtts(a.rendNodeTriangleEnd,a.visProp.strokecolor,a.visProp.strokeopacity,f))),a.visPropOld.strokewidth=f)},setShadow:function(a){a.visPropOld.shadow!==a.visProp.shadow&&(h.exists(a.rendNode)&&(a.visProp.shadow?a.rendNode.setAttributeNS(null,"filter","url(#"+this.container.id+"_f1)"):a.rendNode.removeAttributeNS(null,"filter")),a.visPropOld.shadow=a.visProp.shadow)},suspendRedraw:function(){},
unsuspendRedraw:function(){},resize:function(a,b){this.svgRoot.style.width=parseFloat(a)+"px";this.svgRoot.style.height=parseFloat(b)+"px"},createTouchpoints:function(a){var b,c;this.touchpoints=[];for(b=0;a>b;b++)c="touchpoint1_"+b,c=this.createPrim("path",c),this.appendChildPrim(c,19),c.setAttributeNS(null,"d","M 0 0"),this.touchpoints.push(c),this.setPropertyPrim(c,"stroked","true"),this.setPropertyPrim(c,"stroke-width","1px"),c.setAttributeNS(null,"stroke","#000000"),c.setAttributeNS(null,"stroke-opacity",
1),c.setAttributeNS(null,"display","none"),c="touchpoint2_"+b,c=this.createPrim("ellipse",c),this.appendChildPrim(c,19),this.updateEllipsePrim(c,0,0,0,0),this.touchpoints.push(c),this.setPropertyPrim(c,"stroked","true"),this.setPropertyPrim(c,"stroke-width","1px"),c.setAttributeNS(null,"stroke","#000000"),c.setAttributeNS(null,"stroke-opacity",1),c.setAttributeNS(null,"fill","#ffffff"),c.setAttributeNS(null,"fill-opacity",0),c.setAttributeNS(null,"display","none")},showTouchpoint:function(a){this.touchpoints&&
0<=a&&2*a<this.touchpoints.length&&(this.touchpoints[2*a].setAttributeNS(null,"display","inline"),this.touchpoints[2*a+1].setAttributeNS(null,"display","inline"))},hideTouchpoint:function(a){this.touchpoints&&0<=a&&2*a<this.touchpoints.length&&(this.touchpoints[2*a].setAttributeNS(null,"display","none"),this.touchpoints[2*a+1].setAttributeNS(null,"display","none"))},updateTouchpoint:function(a,b){var c,f;this.touchpoints&&0<=a&&2*a<this.touchpoints.length&&(c=b[0],f=b[1],this.touchpoints[2*a].setAttributeNS(null,
"d","M "+(c-37)+" "+f+" L "+(c+37)+" "+f+" M "+c+" "+(f-37)+" L "+c+" "+(f+37)),this.updateEllipsePrim(this.touchpoints[2*a+1],b[0],b[1],25,25))}}),m.SVGRenderer});E("renderer/vml","jxg renderer/abstract base/constants utils/type utils/color math/math math/numerics".split(" "),function(m,q,l,e,h,g,d){return m.VMLRenderer=function(b){this.type="vml";this.container=b;this.container.style.overflow="hidden";""===this.container.style.position&&(this.container.style.position="relative");this.container.onselectstart=
function(){return!1};this.resolution=10;e.exists(m.vmlStylesheet)||(b.ownerDocument.namespaces.add("jxgvml","urn:schemas-microsoft-com:vml"),m.vmlStylesheet=this.container.ownerDocument.createStyleSheet(),m.vmlStylesheet.addRule(".jxgvml","behavior:url(#default#VML)"));try{b.ownerDocument.namespaces.jxgvml||b.ownerDocument.namespaces.add("jxgvml","urn:schemas-microsoft-com:vml"),this.createNode=function(a){return b.ownerDocument.createElement("<jxgvml:"+a+' class="jxgvml">')}}catch(a){this.createNode=
function(a){return b.ownerDocument.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="jxgvml">')}}this.dashArray="Solid;1 1;ShortDash;Dash;LongDash;ShortDashDot;LongDashDot".split(";")},m.VMLRenderer.prototype=new q,m.extend(m.VMLRenderer.prototype,{_setAttr:function(b,a,d,c){try{8===this.container.ownerDocument.documentMode?b[a]=d:b.setAttribute(a,d,c)}catch(f){m.debug("_setAttr: "+a+" "+d+"<br>\n")}},updateTicks:function(b){var a,d,c,f,g=this.resolution,h=[];d=b.ticks.length;for(a=
0;d>a;a++)c=b.ticks[a],f=c[0],c=c[1],"number"==typeof f[0]&&"number"==typeof f[1]&&h.push(" m "+Math.round(g*f[0])+", "+Math.round(g*c[0])+" l "+Math.round(g*f[1])+", "+Math.round(g*c[1])+" ");e.exists(b.rendNode)||(b.rendNode=this.createPrim("path",b.id),this.appendChildPrim(b.rendNode,b.visProp.layer));this._setAttr(b.rendNode,"stroked","true");this._setAttr(b.rendNode,"strokecolor",b.visProp.strokecolor,1);this._setAttr(b.rendNode,"strokeweight",b.visProp.strokewidth);this._setAttr(b.rendNodeStroke,
"opacity",100*b.visProp.strokeopacity+"%");this.updatePathPrim(b.rendNode,h,b.board)},displayCopyright:function(b,a){var d,c;d=this.createNode("textbox");d.style.position="absolute";this._setAttr(d,"id",this.container.id+"_licenseText");d.style.left=20;d.style.top=2;d.style.fontSize=a;d.style.color="#356AA0";d.style.fontFamily="Arial,Helvetica,sans-serif";this._setAttr(d,"opacity","30%");d.style.filter="alpha(opacity = 30)";c=this.container.ownerDocument.createTextNode(b);d.appendChild(c);this.appendChildPrim(d,
0)},drawInternalText:function(b){var a;return a=this.createNode("textbox"),a.style.position="absolute",b.rendNodeText=this.container.ownerDocument.createTextNode(""),a.appendChild(b.rendNodeText),this.appendChildPrim(a,9),a},updateInternalText:function(b){var a,d=b.plaintext;isNaN(b.coords.scrCoords[1]+b.coords.scrCoords[2])||(a="right"===b.visProp.anchorx?Math.floor(b.board.canvasWidth-b.coords.scrCoords[1]):"middle"===b.visProp.anchorx?Math.floor(b.coords.scrCoords[1]-.5*b.size[0]):Math.floor(b.coords.scrCoords[1]),
b.visPropOld.left!==b.visProp.anchorx+a&&("right"===b.visProp.anchorx?(b.rendNode.style.right=a+"px",b.rendNode.style.left="auto"):(b.rendNode.style.left=a+"px",b.rendNode.style.right="auto"),b.visPropOld.left=b.visProp.anchorx+a),a="top"===b.visProp.anchory?Math.floor(b.coords.scrCoords[2]+this.vOffsetText):"middle"===b.visProp.anchory?Math.floor(b.coords.scrCoords[2]-.5*b.size[1]+this.vOffsetText):Math.floor(b.board.canvasHeight-b.coords.scrCoords[2]-this.vOffsetText),b.visPropOld.top!==b.visProp.anchory+
a&&("bottom"===b.visProp.anchory?(b.rendNode.style.bottom=a+"px",b.rendNode.style.top="auto"):(b.rendNode.style.top=a+"px",b.rendNode.style.bottom="auto"),b.visPropOld.top=b.visProp.anchory+a));b.htmlStr!==d&&(b.rendNodeText.data=d,b.htmlStr=d);this.transformImage(b,b.transformations)},drawImage:function(b){var a;a=this.container.ownerDocument.createElement("img");a.style.position="absolute";this._setAttr(a,"id",this.container.id+"_"+b.id);this.container.appendChild(a);this.appendChildPrim(a,b.visProp.layer);
a.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11='1.0', sizingMethod='auto expand')";b.rendNode=a;this.updateImage(b)},transformImage:function(b,a){var d,c,f,e,h,l,m=b.rendNode,r=[];if(0<a.length){d=b.rendNode.style.filter.toString();d.match(/DXImageTransform/)||(m.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11='1.0', sizingMethod='auto expand') "+d);d=this.joinTransforms(b,a);r[0]=g.matVecMult(d,b.coords.scrCoords);r[0][1]/=r[0][0];r[0][2]/=r[0][0];r[1]=g.matVecMult(d,[1,
b.coords.scrCoords[1]+b.size[0],b.coords.scrCoords[2]]);r[1][1]/=r[1][0];r[1][2]/=r[1][0];r[2]=g.matVecMult(d,[1,b.coords.scrCoords[1]+b.size[0],b.coords.scrCoords[2]-b.size[1]]);r[2][1]/=r[2][0];r[2][2]/=r[2][0];r[3]=g.matVecMult(d,[1,b.coords.scrCoords[1],b.coords.scrCoords[2]-b.size[1]]);r[3][1]/=r[3][0];r[3][2]/=r[3][0];c=r[0][1];e=r[0][1];f=r[0][2];h=r[0][2];for(l=1;4>l;l++)c=Math.max(c,r[l][1]),e=Math.min(e,r[l][1]),f=Math.max(f,r[l][2]),h=Math.min(h,r[l][2]);m.style.left=Math.floor(e)+"px";
m.style.top=Math.floor(h)+"px";m.filters.item(0).M11=d[1][1];m.filters.item(0).M12=d[1][2];m.filters.item(0).M21=d[2][1];m.filters.item(0).M22=d[2][2]}},updateImageURL:function(b){var a=e.evaluate(b.url);this._setAttr(b.rendNode,"src",a)},appendChildPrim:function(b,a){return e.exists(a)||(a=0),b.style.zIndex=a,this.container.appendChild(b),b},appendNodesToElement:function(b,a){"shape"!==a&&"path"!==a&&"polygon"!==a||(b.rendNodePath=this.getElementById(b.id+"_path"));b.rendNodeFill=this.getElementById(b.id+
"_fill");b.rendNodeStroke=this.getElementById(b.id+"_stroke");b.rendNodeShadow=this.getElementById(b.id+"_shadow");b.rendNode=this.getElementById(b.id)},createPrim:function(b,a){var d,c,f=this.createNode("fill"),e=this.createNode("stroke"),g=this.createNode("shadow");return this._setAttr(f,"id",this.container.id+"_"+a+"_fill"),this._setAttr(e,"id",this.container.id+"_"+a+"_stroke"),this._setAttr(g,"id",this.container.id+"_"+a+"_shadow"),"circle"===b||"ellipse"===b?(d=this.createNode("oval"),d.appendChild(f),
d.appendChild(e),d.appendChild(g)):"polygon"===b||"path"===b||"shape"===b||"line"===b?(d=this.createNode("shape"),d.appendChild(f),d.appendChild(e),d.appendChild(g),c=this.createNode("path"),this._setAttr(c,"id",this.container.id+"_"+a+"_path"),d.appendChild(c)):(d=this.createNode(b),d.appendChild(f),d.appendChild(e),d.appendChild(g)),d.style.position="absolute",d.style.left="0px",d.style.top="0px",this._setAttr(d,"id",this.container.id+"_"+a),d},remove:function(b){e.exists(b)&&b.removeNode(!0)},
makeArrows:function(b){var a;(b.visPropOld.firstarrow!==b.visProp.firstarrow||b.visPropOld.lastarrow!==b.visProp.lastarrow)&&(b.visProp.firstarrow?(a=b.rendNodeStroke,this._setAttr(a,"startarrow","block"),this._setAttr(a,"startarrowlength","long")):(a=b.rendNodeStroke,e.exists(a)&&this._setAttr(a,"startarrow","none")),b.visProp.lastarrow?(a=b.rendNodeStroke,this._setAttr(a,"id",this.container.id+"_"+b.id+"stroke"),this._setAttr(a,"endarrow","block"),this._setAttr(a,"endarrowlength","long")):(a=b.rendNodeStroke,
e.exists(a)&&this._setAttr(a,"endarrow","none")),b.visPropOld.firstarrow=b.visProp.firstarrow,b.visPropOld.lastarrow=b.visProp.lastarrow)},updateEllipsePrim:function(b,a,d,c,f){b.style.left=Math.floor(a-c)+"px";b.style.top=Math.floor(d-f)+"px";b.style.width=Math.floor(2*Math.abs(c))+"px";b.style.height=Math.floor(2*Math.abs(f))+"px"},updateLinePrim:function(b,a,d,c,f,e){var g,h=this.resolution;isNaN(a+d+c+f)||(g=["m ",Math.floor(h*a),", ",Math.floor(h*d)," l ",Math.floor(h*c),", ",Math.floor(h*f)],
this.updatePathPrim(b,g,e))},updatePathPrim:function(b,a,d){var c=d.canvasWidth;d=d.canvasHeight;0>=a.length&&(a=["m 0,0"]);b.style.width=c;b.style.height=d;this._setAttr(b,"coordsize",[Math.floor(this.resolution*c),Math.floor(this.resolution*d)].join());this._setAttr(b,"path",a.join(""))},updatePathStringPoint:function(b,a,d){var c=[],f=Math.round;b=b.coords.scrCoords;var e=.5*a*Math.sqrt(3),g=.5*a,h=this.resolution;return"x"===d?c.push([" m ",f(h*(b[1]-a)),", ",f(h*(b[2]-a))," l ",f(h*(b[1]+a)),
", ",f(h*(b[2]+a))," m ",f(h*(b[1]+a)),", ",f(h*(b[2]-a))," l ",f(h*(b[1]-a)),", ",f(h*(b[2]+a))].join("")):"+"===d?c.push([" m ",f(h*(b[1]-a)),", ",f(h*b[2])," l ",f(h*(b[1]+a)),", ",f(h*b[2])," m ",f(h*b[1]),", ",f(h*(b[2]-a))," l ",f(h*b[1]),", ",f(h*(b[2]+a))].join("")):"<>"===d?c.push([" m ",f(h*(b[1]-a)),", ",f(h*b[2])," l ",f(h*b[1]),", ",f(h*(b[2]+a))," l ",f(h*(b[1]+a)),", ",f(h*b[2])," l ",f(h*b[1]),", ",f(h*(b[2]-a))," x e "].join("")):"^"===d?c.push([" m ",f(h*b[1]),", ",f(h*(b[2]-a)),
" l ",f(h*(b[1]-e)),", ",f(h*(b[2]+g))," l ",f(h*(b[1]+e)),", ",f(h*(b[2]+g))," x e "].join("")):"v"===d?c.push([" m ",f(h*b[1]),", ",f(h*(b[2]+a))," l ",f(h*(b[1]-e)),", ",f(h*(b[2]-g))," l ",f(h*(b[1]+e)),", ",f(h*(b[2]-g))," x e "].join("")):">"===d?c.push([" m ",f(h*(b[1]+a)),", ",f(h*b[2])," l ",f(h*(b[1]-g)),", ",f(h*(b[2]-e))," l ",f(h*(b[1]-g)),", ",f(h*(b[2]+e))," l ",f(h*(b[1]+a)),", ",f(h*b[2])].join("")):"<"===d&&c.push([" m ",f(h*(b[1]-a)),", ",f(h*b[2])," l ",f(h*(b[1]+g)),", ",f(h*
(b[2]-e))," l ",f(h*(b[1]+g)),", ",f(h*(b[2]+e))," x e "].join("")),c},updatePathStringPrim:function(b){var a,e,c=[],f=this.resolution,g=Math.round,h=" m ";a="plot"!==b.visProp.curvetype;var l=Math.min(b.numberPoints,8192);if(0>=b.numberPoints)return"";if(l=Math.min(l,b.points.length),1===b.bezierDegree)for(a&&b.board.options.curve.RDPsmoothing&&(b.points=d.RamerDouglasPeuker(b.points,1)),a=0;l>a;a++)e=b.points[a].scrCoords,isNaN(e[1])||isNaN(e[2])?h=" m ":(2E4<e[1]?e[1]=2E4:-2E4>e[1]&&(e[1]=-2E4),
2E4<e[2]?e[2]=2E4:-2E4>e[2]&&(e[2]=-2E4),c.push([h,g(f*e[1]),", ",g(f*e[2])].join("")),h=" l ");else if(3===b.bezierDegree)for(a=0;l>a;)e=b.points[a].scrCoords,isNaN(e[1])||isNaN(e[2])?h=" m ":(c.push([h,g(f*e[1]),", ",g(f*e[2])].join(""))," c "===h&&(a+=1,e=b.points[a].scrCoords,c.push([" ",g(f*e[1]),", ",g(f*e[2])].join("")),a+=1,e=b.points[a].scrCoords,c.push([" ",g(f*e[1]),", ",g(f*e[2])].join(""))),h=" c "),a+=1;return c.push(" e"),c},updatePathStringBezierPrim:function(b){var a,e,c,f,g,h,l=
[],m=b.visProp.strokewidth,r=this.resolution,q=Math.round,x=" m ";a="plot"!==b.visProp.curvetype;var u=Math.min(b.numberPoints,8192);if(0>=b.numberPoints)return"";a&&b.board.options.curve.RDPsmoothing&&(b.points=d.RamerDouglasPeuker(b.points,1));u=Math.min(u,b.points.length);for(e=1;3>e;e++)for(x=" m ",a=0;u>a;a++)f=b.points[a].scrCoords,isNaN(f[1])||isNaN(f[2])?x=" m ":(2E4<f[1]?f[1]=2E4:-2E4>f[1]&&(f[1]=-2E4),2E4<f[2]?f[2]=2E4:-2E4>f[2]&&(f[2]=-2E4)," m "===x?l.push([x,q(r*f[1])," ",q(r*f[2])].join("")):
(c=2*e,l.push([x,q(r*(g+.333*(f[1]-g)+m*(c*Math.random()-e)))," ",q(r*(h+.333*(f[2]-h)+m*(c*Math.random()-e)))," ",q(r*(g+.666*(f[1]-g)+m*(c*Math.random()-e)))," ",q(r*(h+.666*(f[2]-h)+m*(c*Math.random()-e)))," ",q(r*f[1])," ",q(r*f[2])].join(""))),x=" c ",g=f[1],h=f[2]);return l.push(" e"),l},updatePolygonPrim:function(b,a){var d,c,f=a.vertices.length,e=this.resolution,g=[];if(this._setAttr(b,"stroked","false"),c=a.vertices[0].coords.scrCoords,!isNaN(c[1]+c[2])){g.push(["m ",Math.floor(e*c[1]),",",
Math.floor(e*c[2])," l "].join(""));for(d=1;f-1>d;d++){if(!a.vertices[d].isReal)return this.updatePathPrim(b,"",a.board),void 0;if(c=a.vertices[d].coords.scrCoords,isNaN(c[1]+c[2]))return;g.push(Math.floor(e*c[1])+","+Math.floor(e*c[2]));f-2>d&&g.push(", ")}g.push(" x e");this.updatePathPrim(b,g,a.board)}},updateRectPrim:function(b,a,d,c,f){b.style.left=Math.floor(a)+"px";b.style.top=Math.floor(d)+"px";0<=c&&(b.style.width=c+"px");0<=f&&(b.style.height=f+"px")},setPropertyPrim:function(b,a,d){var c,
f="";switch(a){case "stroke":f="strokecolor";break;case "stroke-width":f="strokeweight";break;case "stroke-dasharray":f="dashstyle"}""!==f&&(c=e.evaluate(d),this._setAttr(b,f,c))},show:function(b){b&&b.rendNode&&(b.rendNode.style.visibility="inherit")},hide:function(b){b&&b.rendNode&&(b.rendNode.style.visibility="hidden")},setDashStyle:function(b,a){var d;0<=a.dash&&(d=b.rendNodeStroke,this._setAttr(d,"dashstyle",this.dashArray[a.dash]))},setGradient:function(b){var a=b.rendNodeFill;"linear"===b.visProp.gradient?
(this._setAttr(a,"type","gradient"),this._setAttr(a,"color2",b.visProp.gradientsecondcolor),this._setAttr(a,"opacity2",b.visProp.gradientsecondopacity),this._setAttr(a,"angle",b.visProp.gradientangle)):"radial"===b.visProp.gradient?(this._setAttr(a,"type","gradientradial"),this._setAttr(a,"color2",b.visProp.gradientsecondcolor),this._setAttr(a,"opacity2",b.visProp.gradientsecondopacity),this._setAttr(a,"focusposition",100*b.visProp.gradientpositionx+"%,"+100*b.visProp.gradientpositiony+"%"),this._setAttr(a,
"focussize","0,0")):this._setAttr(a,"type","solid")},setObjectFillColor:function(b,a,d){var c,f,g,m;a=e.evaluate(a);d=e.evaluate(d);b.rendNode;d=0<d?d:0;(b.visPropOld.fillcolor!==a||b.visPropOld.fillopacity!==d)&&(e.exists(a)&&!1!==a&&(9!==a.length?(c=a,g=d):(f=h.rgba2rgbo(a),c=f[0],g=d*f[1]),"none"===c||!1===c?this._setAttr(b.rendNode,"filled","false"):(this._setAttr(b.rendNode,"filled","true"),this._setAttr(b.rendNode,"fillcolor",c),e.exists(g)&&b.rendNodeFill&&this._setAttr(b.rendNodeFill,"opacity",
100*g+"%")),b.type===l.OBJECT_TYPE_IMAGE&&(m=b.rendNode.style.filter.toString(),m.match(/alpha/)?b.rendNode.style.filter=m.replace(/alpha\(opacity *= *[0-9\.]+\)/,"alpha(opacity = "+100*g+")"):b.rendNode.style.filter+=" alpha(opacity = "+100*g+")")),b.visPropOld.fillcolor=a,b.visPropOld.fillopacity=d)},setObjectStrokeColor:function(b,a,d){var c,f,g,h,m=e.evaluate(a);d=e.evaluate(d);var q=b.rendNode;d=0<d?d:0;(b.visPropOld.strokecolor!==m||b.visPropOld.strokeopacity!==d)&&(e.exists(m)&&!1!==m&&(9!==
m.length?(c=m,g=d):(f=a.rgba2rgbo(m),c=f[0],g=d*f[1]),b.type===l.OBJECT_TYPE_TEXT?(g=Math.round(100*g),q.style.filter=" alpha(opacity = "+g+")",q.style.color=c):(!1!==c&&(this._setAttr(q,"stroked","true"),this._setAttr(q,"strokecolor",c)),h=b.rendNodeStroke,e.exists(g)&&b.type!==l.OBJECT_TYPE_IMAGE&&this._setAttr(h,"opacity",100*g+"%"))),b.visPropOld.strokecolor=m,b.visPropOld.strokeopacity=d)},setObjectStrokeWidth:function(b,a){var d,c=e.evaluate(a);isNaN(c)||b.visPropOld.strokewidth===c||(d=b.rendNode,
this.setPropertyPrim(d,"stroked","true"),e.exists(c)&&(this.setPropertyPrim(d,"stroke-width",c),0===c&&e.exists(b.rendNodeStroke)&&this._setAttr(d,"stroked","false")),b.visPropOld.strokewidth=c)},setShadow:function(b){var a=b.rendNodeShadow;a&&b.visPropOld.shadow!==b.visProp.shadow&&(b.visProp.shadow?(this._setAttr(a,"On","True"),this._setAttr(a,"Offset","3pt,3pt"),this._setAttr(a,"Opacity","60%"),this._setAttr(a,"Color","#aaaaaa")):this._setAttr(a,"On","False"),b.visPropOld.shadow=b.visProp.shadow)},
suspendRedraw:function(){this.container.style.display="none"},unsuspendRedraw:function(){this.container.style.display=""}}),m.VMLRenderer});E("renderer/canvas","jxg renderer/abstract base/constants utils/env utils/type utils/uuid utils/color base/coords math/math math/geometry math/numerics".split(" "),function(m,q,l,e,h,g,d,b,a,k,c){return m.CanvasRenderer=function(a,b){this.type="canvas";this.suspendHandle=this.canvasRoot=null;this.canvasId=g.genUUID();this.canvasNamespace=null;e.isBrowser?(this.container=
a,this.container.style.MozUserSelect="none",this.container.style.overflow="hidden",""===this.container.style.position&&(this.container.style.position="relative"),this.container.innerHTML=['<canvas id="',this.canvasId,'" width="',b.width,'px" height="',b.height,'px"></canvas>'].join(""),this.canvasRoot=this.container.ownerDocument.getElementById(this.canvasId),this.context=this.canvasRoot.getContext("2d")):e.isNode()&&(this.canvasId="object"==typeof module?module.require("canvas"):P("canvas"),this.canvasRoot=
new this.canvasId(500,500),this.context=this.canvasRoot.getContext("2d"));this.dashArray=[[2,2],[5,5],[10,10],[20,20],[20,10,10,10],[20,5,10,5]]},m.CanvasRenderer.prototype=new q,m.extend(m.CanvasRenderer.prototype,{_drawFilledPolygon:function(a){var b,c=a.length,d=this.context;if(0<c){d.beginPath();d.moveTo(a[0][0],a[0][1]);for(b=0;c>b;b++)0<b&&d.lineTo(a[b][0],a[b][1]);d.lineTo(a[0][0],a[0][1]);d.fill()}},_fill:function(a){var b=this.context;b.save();this._setColor(a,"fill")&&b.fill();b.restore()},
_rotatePoint:function(a,b,c){return[b*Math.cos(a)-c*Math.sin(a),b*Math.sin(a)+c*Math.cos(a)]},_rotateShape:function(a,b){var c,d=[],e=a.length;if(0>=e)return a;for(c=0;e>c;c++)d.push(this._rotatePoint(b,a[c][0],a[c][1]));return d},_setColor:function(a,b,c){var e,g,k,l,m,q,t=!0,w=!1,z=a.visProp;return b=b||"stroke",c=c||b,h.exists(a.board)&&h.exists(a.board.highlightedObjects)||(w=!0),e=!w&&h.exists(a.board.highlightedObjects[a.id])?"highlight":"",g=h.evaluate(z[e+b+"color"]),"none"!==g&&!1!==g?(m=
h.evaluate(z[e+b+"opacity"]),m=0<m?m:0,9!==g.length?(l=g,q=m):(k=d.rgba2rgbo(g),l=k[0],q=m*k[1]),this.context.globalAlpha=q,this.context[c+"Style"]=l):t=!1,"stroke"!==b||isNaN(parseFloat(z.strokewidth))||(this.context.lineWidth=parseFloat(z.strokewidth)),t},_stroke:function(a){var b=this.context;b.save();0<a.visProp.dash?b.setLineDash&&b.setLineDash(this.dashArray[a.visProp.dash]):this.context.lineDashArray=[];this._setColor(a,"stroke")&&b.stroke();b.restore()},_translateShape:function(a,b,c){var d,
e=[],g=a.length;if(0>=g)return a;for(d=0;g>d;d++)e.push([a[d][0]+b,a[d][1]+c]);return e},drawPoint:function(a){var b=a.visProp.face,c=a.visProp.size,d=a.coords.scrCoords,e=.5*c*Math.sqrt(3),g=.5*c,h=parseFloat(a.visProp.strokewidth)/2,k=this.context;if(a.visProp.visible)switch(b){case "cross":case "x":k.beginPath();k.moveTo(d[1]-c,d[2]-c);k.lineTo(d[1]+c,d[2]+c);k.moveTo(d[1]+c,d[2]-c);k.lineTo(d[1]-c,d[2]+c);k.closePath();this._stroke(a);break;case "circle":case "o":k.beginPath();k.arc(d[1],d[2],
c+1+h,0,2*Math.PI,!1);k.closePath();this._fill(a);this._stroke(a);break;case "square":case "[]":if(0>=c)break;k.save();this._setColor(a,"stroke","fill")&&k.fillRect(d[1]-c-h,d[2]-c-h,2*c+3*h,2*c+3*h);k.restore();k.save();this._setColor(a,"fill");k.fillRect(d[1]-c+h,d[2]-c+h,2*c-h,2*c-h);k.restore();break;case "plus":case "+":k.beginPath();k.moveTo(d[1]-c,d[2]);k.lineTo(d[1]+c,d[2]);k.moveTo(d[1],d[2]-c);k.lineTo(d[1],d[2]+c);k.closePath();this._stroke(a);break;case "diamond":case "<>":k.beginPath();
k.moveTo(d[1]-c,d[2]);k.lineTo(d[1],d[2]+c);k.lineTo(d[1]+c,d[2]);k.lineTo(d[1],d[2]-c);k.closePath();this._fill(a);this._stroke(a);break;case "triangleup":case "a":case "^":k.beginPath();k.moveTo(d[1],d[2]-c);k.lineTo(d[1]-e,d[2]+g);k.lineTo(d[1]+e,d[2]+g);k.closePath();this._fill(a);this._stroke(a);break;case "triangledown":case "v":k.beginPath();k.moveTo(d[1],d[2]+c);k.lineTo(d[1]-e,d[2]-g);k.lineTo(d[1]+e,d[2]-g);k.closePath();this._fill(a);this._stroke(a);break;case "triangleleft":case "<":k.beginPath();
k.moveTo(d[1]-c,d[2]);k.lineTo(d[1]+g,d[2]-e);k.lineTo(d[1]+g,d[2]+e);k.closePath();this.fill(a);this._stroke(a);break;case "triangleright":case ">":k.beginPath(),k.moveTo(d[1]+c,d[2]),k.lineTo(d[1]-g,d[2]-e),k.lineTo(d[1]-g,d[2]+e),k.closePath(),this._fill(a),this._stroke(a)}},updatePoint:function(a){this.drawPoint(a)},drawLine:function(c){var d,e,g,h,m,q,x=new b(l.COORDS_BY_USER,c.point1.coords.usrCoords,c.board),u=new b(l.COORDS_BY_USER,c.point2.coords.usrCoords,c.board),t=null;c.visProp.visible&&
((c.visProp.firstarrow||c.visProp.lastarrow)&&(t=-4),k.calcStraight(c,x,u,t),g=h=m=q=0,d=Math.max(3*parseInt(c.visProp.strokewidth,10),10),c.visProp.lastarrow&&(e=x.distance(l.COORDS_BY_SCREEN,u),e>a.eps&&(m=(u.scrCoords[1]-x.scrCoords[1])*d/e,q=(u.scrCoords[2]-x.scrCoords[2])*d/e)),c.visProp.firstarrow&&(e=x.distance(l.COORDS_BY_SCREEN,u),e>a.eps&&(g=(u.scrCoords[1]-x.scrCoords[1])*d/e,h=(u.scrCoords[2]-x.scrCoords[2])*d/e)),this.context.beginPath(),this.context.moveTo(x.scrCoords[1]+g,x.scrCoords[2]+
h),this.context.lineTo(u.scrCoords[1]-m,u.scrCoords[2]-q),this._stroke(c),this.makeArrows(c,x,u))},updateLine:function(a){this.drawLine(a)},drawTicks:function(){},updateTicks:function(a){var b,c,d,e=a.ticks.length,g=this.context;g.beginPath();for(b=0;e>b;b++)c=a.ticks[b],d=c[0],c=c[1],g.moveTo(d[0],c[0]),g.lineTo(d[1],c[1]);for(b=0;e>b;b++)a.ticks[b].major&&(a.board.needsFullUpdate||a.needsRegularUpdate)&&a.labels[b]&&a.labels[b].visProp.visible&&this.updateText(a.labels[b]);this._stroke(a)},drawCurve:function(a){a.visProp.handdrawing?
this.updatePathStringBezierPrim(a):this.updatePathStringPrim(a)},updateCurve:function(a){this.drawCurve(a)},drawEllipse:function(a){var b=a.center.coords.scrCoords[1],c=a.center.coords.scrCoords[2],d=a.board.unitX,e=a.board.unitY,g=2*a.Radius(),h=2*a.Radius(),k=g*d,l=h*e,e=b-k/2,d=c-l/2,m=k/2*.5522848,q=l/2*.5522848,z=e+k,B=d+l,k=e+k/2,l=d+l/2,A=this.context;0<g&&0<h&&!isNaN(b+c)&&(A.beginPath(),A.moveTo(e,l),A.bezierCurveTo(e,l-q,k-m,d,k,d),A.bezierCurveTo(k+m,d,z,l-q,z,l),A.bezierCurveTo(z,l+q,
k+m,B,k,B),A.bezierCurveTo(k-m,B,e,l+q,e,l),A.closePath(),this._fill(a),this._stroke(a))},updateEllipse:function(a){return this.drawEllipse(a)},displayCopyright:function(a,b){var c=this.context;c.save();c.font=b+"px Arial";c.fillStyle="#aaa";c.lineWidth=.5;c.fillText(a,10,2+b);c.restore()},drawInternalText:function(a){var b,c=this.context;return c.save(),this._setColor(a,"stroke","fill")&&!isNaN(a.coords.scrCoords[1]+a.coords.scrCoords[2])&&(a.visProp.fontsize&&("function"==typeof a.visProp.fontsize?
(b=a.visProp.fontsize(),c.font=(0<b?b:0)+"px Arial"):c.font=a.visProp.fontsize+"px Arial"),this.transformImage(a,a.transformations),"left"===a.visProp.anchorx?c.textAlign="left":"right"===a.visProp.anchorx?c.textAlign="right":"middle"===a.visProp.anchorx&&(c.textAlign="center"),"bottom"===a.visProp.anchory?c.textBaseline="bottom":"top"===a.visProp.anchory?c.textBaseline="top":"middle"===a.visProp.anchory&&(c.textBaseline="middle"),c.fillText(a.plaintext,a.coords.scrCoords[1],a.coords.scrCoords[2])),
c.restore(),null},updateInternalText:function(a){this.drawInternalText(a)},setObjectStrokeColor:function(a,b,c){var e,g,k,m;b=h.evaluate(b);c=h.evaluate(c);c=0<c?c:0;(a.visPropOld.strokecolor!==b||a.visPropOld.strokeopacity!==c)&&(h.exists(b)&&!1!==b&&(9!==b.length?(e=b,k=c):(g=d.rgba2rgbo(b),e=g[0],k=c*g[1]),m=a.rendNode,a.type===l.OBJECT_TYPE_TEXT&&"html"===a.visProp.display&&(m.style.color=e,m.style.opacity=k)),a.visPropOld.strokecolor=b,a.visPropOld.strokeopacity=c)},drawImage:function(a){a.rendNode=
new Image;a._src="";this.updateImage(a)},updateImage:function(a){var b=this.context,c=h.evaluate(a.visProp.fillopacity),d=h.bind(function(){a.imgIsLoaded=!0;0>=a.size[0]||0>=a.size[1]||(b.save(),b.globalAlpha=c,this.transformImage(a,a.transformations),b.drawImage(a.rendNode,a.coords.scrCoords[1],a.coords.scrCoords[2]-a.size[1],a.size[0],a.size[1]),b.restore())},this);this.updateImageURL(a)?a.rendNode.onload=d:a.imgIsLoaded&&d()},transformImage:function(b,d){var e,g=this.context;0<d.length&&(e=this.joinTransforms(b,
d),Math.abs(c.det(e))>=a.eps&&g.transform(e[1][1],e[2][1],e[1][2],e[2][2],e[1][0],e[2][0]))},updateImageURL:function(a){var b;return b=h.evaluate(a.url),a._src!==b?(a.imgIsLoaded=!1,a.rendNode.src=b,a._src=b,!0):!1},remove:function(a){h.exists(a)&&h.exists(a.parentNode)&&a.parentNode.removeChild(a)},makeArrows:function(a,b,c){var d,e,g;d=Math.max(3*a.visProp.strokewidth,10);var h=[[-d,.5*-d],[0,0],[-d,.5*d]],k=[[d,.5*-d],[0,0],[d,.5*d]],m=this.context;"none"!==a.visProp.strokecolor&&(a.visProp.lastarrow||
a.visProp.firstarrow)&&a.elementClass===l.OBJECT_CLASS_LINE&&(d=b.scrCoords[1],b=b.scrCoords[2],e=c.scrCoords[1],c=c.scrCoords[2],m.save(),this._setColor(a,"stroke","fill")&&(g=Math.atan2(c-b,e-d),a.visProp.lastarrow&&this._drawFilledPolygon(this._translateShape(this._rotateShape(h,g),e,c)),a.visProp.firstarrow&&this._drawFilledPolygon(this._translateShape(this._rotateShape(k,g),d,b))),m.restore())},updatePathStringPrim:function(a){var b,d,e,g,h,k="M";b="plot"!==a.visProp.curvetype;var l=this.context;
if(!(0>=a.numberPoints)){if(h=Math.min(a.points.length,a.numberPoints),l.beginPath(),1===a.bezierDegree)for(b&&a.board.options.curve.RDPsmoothing&&(a.points=c.RamerDouglasPeuker(a.points,.5)),b=0;h>b;b++)d=a.points[b].scrCoords,isNaN(d[1])||isNaN(d[2])?k="M":(5E3<d[1]?d[1]=5E3:-5E3>d[1]&&(d[1]=-5E3),5E3<d[2]?d[2]=5E3:-5E3>d[2]&&(d[2]=-5E3),"M"===k?l.moveTo(d[1],d[2]):l.lineTo(d[1],d[2]),k="L");else if(3===a.bezierDegree)for(b=0;h>b;)d=a.points[b].scrCoords,isNaN(d[1])||isNaN(d[2])?k="M":("M"===k?
l.moveTo(d[1],d[2]):(b+=1,e=a.points[b].scrCoords,b+=1,g=a.points[b].scrCoords,l.bezierCurveTo(d[1],d[2],e[1],e[2],g[1],g[2])),k="C"),b+=1;this._fill(a);this._stroke(a)}},updatePathStringBezierPrim:function(a){var b,d,e,g,h,k,l,m="M",q=a.visProp.strokewidth;b="plot"!==a.visProp.curvetype;var w=this.context;if(!(0>=a.numberPoints)){b&&a.board.options.curve.RDPsmoothing&&(a.points=c.RamerDouglasPeuker(a.points,.5));l=Math.min(a.points.length,a.numberPoints);w.beginPath();for(d=1;3>d;d++)for(m="M",b=
0;l>b;b++)g=a.points[b].scrCoords,isNaN(g[1])||isNaN(g[2])?m="M":(5E3<g[1]?g[1]=5E3:-5E3>g[1]&&(g[1]=-5E3),5E3<g[2]?g[2]=5E3:-5E3>g[2]&&(g[2]=-5E3),"M"===m?w.moveTo(g[1],g[2]):(e=2*d,w.bezierCurveTo(h+.333*(g[1]-h)+q*(e*Math.random()-d),k+.333*(g[2]-k)+q*(e*Math.random()-d),h+.666*(g[1]-h)+q*(e*Math.random()-d),k+.666*(g[2]-k)+q*(e*Math.random()-d),g[1],g[2])),m="C",h=g[1],k=g[2]);this._fill(a);this._stroke(a)}},updatePolygonPrim:function(a,b){var c,d,e=b.vertices.length,g=this.context,h=!0;if(!(0>=
e)&&b.visProp.visible){g.beginPath();for(d=0;!b.vertices[d].isReal&&e-1>d;)d++,h=!1;c=b.vertices[d].coords.scrCoords;for(g.moveTo(c[1],c[2]);e-1>d;d++)b.vertices[d].isReal||(h=!1),c=b.vertices[d].coords.scrCoords,g.lineTo(c[1],c[2]);g.closePath();h&&this._fill(b)}},show:function(a){h.exists(a.rendNode)&&(a.rendNode.style.visibility="inherit")},hide:function(a){h.exists(a.rendNode)&&(a.rendNode.style.visibility="hidden")},setGradient:function(a){h.evaluate(a.visProp.fillopacity);h.evaluate(a.visProp.fillcolor)},
setShadow:function(a){a.visPropOld.shadow!==a.visProp.shadow&&(a.visPropOld.shadow=a.visProp.shadow)},highlight:function(a){return a.type===l.OBJECT_TYPE_TEXT&&"html"===a.visProp.display?this.updateTextStyle(a,!0):(a.board.prepareUpdate(),a.board.renderer.suspendRedraw(a.board),a.board.updateRenderer(),a.board.renderer.unsuspendRedraw()),this},noHighlight:function(a){return a.type===l.OBJECT_TYPE_TEXT&&"html"===a.visProp.display?this.updateTextStyle(a,!1):(a.board.prepareUpdate(),a.board.renderer.suspendRedraw(a.board),
a.board.updateRenderer(),a.board.renderer.unsuspendRedraw()),this},suspendRedraw:function(a){this.context.save();this.context.clearRect(0,0,this.canvasRoot.width,this.canvasRoot.height);a&&a.showCopyright&&this.displayCopyright(m.licenseText,12)},unsuspendRedraw:function(){this.context.restore()},resize:function(a,b){this.container?(this.canvasRoot.style.width=parseFloat(a)+"px",this.canvasRoot.style.height=parseFloat(b)+"px",this.canvasRoot.setAttribute("width",parseFloat(a)+"px"),this.canvasRoot.setAttribute("height",
parseFloat(b)+"px")):(this.canvasRoot.width=parseFloat(a),this.canvasRoot.height=parseFloat(b))},removeToInsertLater:function(){return function(){}}}),m.CanvasRenderer});E("jsxgraph","jxg utils/env utils/type base/board reader/file options renderer/svg renderer/vml renderer/canvas renderer/no".split(" "),function(m,q,l,e,h,g,d,b,a,k){return m.JSXGraph={rendererType:function(){return g.renderer="no",q.supportsVML()&&(g.renderer="vml",document.onmousemove=function(){var a;return document.body&&(a=document.body.scrollLeft,
a+=document.body.scrollTop),a}),q.supportsCanvas()&&(g.renderer="canvas"),q.supportsSVG()&&(g.renderer="svg"),q.isNode()&&q.supportsCanvas()&&(g.renderer="canvas"),(q.isNode()||"no"===g.renderer)&&(g.text.display="internal",g.infobox.display="internal"),g.renderer}(),initRenderer:function(c,e,h){if(h=h||document,"object"==typeof h&&null!==c)for(c=h.getElementById(c);c.firstChild;)c.removeChild(c.firstChild);return"svg"===g.renderer?new d(c,e):"vml"===g.renderer?new b(c):"canvas"===g.renderer?new a(c,
e):new k},initBoard:function(a,b){var d,h,k,v,r,y,x,u,t,w,z,B;return b=b||{},w=l.copyAttributes(b,g,"board"),w.zoom=l.copyAttributes(w,g,"board","zoom"),w.pan=l.copyAttributes(w,g,"board","pan"),u=q.getDimensions(a,w.document),w.unitx||w.unity?(d=l.def(w.originx,150),h=l.def(w.originy,150),k=l.def(w.unitx,50),v=l.def(w.unity,50)):(t=w.boundingbox,y=parseInt(u.width,10),x=parseInt(u.height,10),w.keepaspectratio?(k=y/(t[2]-t[0]),v=x/(t[1]-t[3]),Math.abs(k)<Math.abs(v)?v=Math.abs(k)*v/Math.abs(v):k=
Math.abs(v)*k/Math.abs(k)):(k=y/(t[2]-t[0]),v=x/(t[1]-t[3])),d=-k*t[0],h=v*t[1]),r=this.initRenderer(a,u,w.document),B=new e(a,r,"",[d,h],w.zoomfactor*w.zoomx,w.zoomfactor*w.zoomy,k,v,u.width,u.height,w),m.boards[B.id]=B,m.boards[B.id]=B,B.resizeContainer(u.width,u.height,!0),B.suspendUpdate(),B.initInfobox(),w.axis&&(z="object"==typeof w.axis?w.axis:{ticks:{drawZero:!0}},B.defaultAxes={},B.defaultAxes.x=B.create("axis",[[0,0],[1,0]],z),B.defaultAxes.y=B.create("axis",[[0,0],[0,1]],z)),w.grid&&B.create("grid",
[],"object"==typeof w.grid?w.grid:{}),B.renderer.drawZoomBar(B),B.unsuspendUpdate(),B},loadBoardFromFile:function(a,b,d,k,s){var v,r,y,x;return k=k||{},v=l.copyAttributes(k,g,"board"),v.zoom=l.copyAttributes(k,g,"board","zoom"),v.pan=l.copyAttributes(k,g,"board","pan"),x=q.getDimensions(a,v.document),r=this.initRenderer(a,x,v.document),y=new e(a,r,"",[150,150],1,1,50,50,x.width,x.height,v),y.initInfobox(),y.resizeContainer(x.width,x.height,!0),h.parseFileContent(b,y,d,!0,s),y.renderer.drawZoomBar(y),
m.boards[y.id]=y,y},loadBoardFromString:function(a,b,d,k,s){var v,r,y,x;return k=k||{},v=l.copyAttributes(k,g,"board"),v.zoom=l.copyAttributes(k,g,"board","zoom"),v.pan=l.copyAttributes(k,g,"board","pan"),y=q.getDimensions(a,v.document),r=this.initRenderer(a,y,v.document),x=new e(a,r,"",[150,150],1,1,50,50,y.width,y.height,v),x.initInfobox(),x.resizeContainer(y.width,y.height,!0),h.parseString(b,x,d,!0,s),x.renderer.drawZoomBar(x),m.boards[x.id]=x,x},freeBoard:function(a){var b;"string"==typeof a&&
(a=m.boards[a]);a.removeEventHandlers();a.suspendUpdate();for(b in a.objects)a.objects.hasOwnProperty(b)&&a.objects[b].remove();for(;a.containerObj.firstChild;)a.containerObj.removeChild(a.containerObj.firstChild);for(b in a.objects)a.objects.hasOwnProperty(b)&&delete a.objects[b];delete a.renderer;a.jc.creator.clearCache();delete a.jc;delete m.boards[a.id]},registerElement:function(a,b){m.registerElement(a,b)},unregisterElement:function(){throw Error("Unimplemented");}},q.isBrowser&&"object"==typeof window&&
"object"==typeof document&&q.addEvent(window,"load",function(){var a,b,d,e,g,h,k,q,x,u,t,w=document.getElementsByTagName("script"),z=function(a,b,c){c=m.JSXGraph.initBoard(e,{boundingbox:c,keepaspectratio:!0,grid:u,axis:x,showReload:!0});if(-1<b.toLowerCase().indexOf("script"))c.construct(a);else try{c.jc.parse(a)}catch(d){m.debug(d)}return c},B=function(a,b,c,d){return function(){var e;m.JSXGraph.freeBoard(a);e=z(b,c,d);e.reload=B(e,b,c,d)}};for(b=0;b<w.length;b++)if(a=w[b].getAttribute("type",!1),
l.exists(a)&&("text/jessiescript"===a.toLowerCase()||"jessiescript"===a.toLowerCase()||"text/jessiecode"===a.toLowerCase()||"jessiecode"===a.toLowerCase())){if(h=w[b].getAttribute("width",!1)||"500px",k=w[b].getAttribute("height",!1)||"500px",q=w[b].getAttribute("boundingbox",!1)||"-5, 5, 5, -5",e=w[b].getAttribute("container",!1),q=q.split(","),4!==q.length)q=[-5,5,5,-5];else for(d=0;d<q.length;d++)q[d]=parseFloat(q[d]);if(x=l.str2Bool(w[b].getAttribute("axis",!1)||"false"),u=l.str2Bool(w[b].getAttribute("grid",
!1)||"false"),l.exists(e))d=document.getElementById(e);else{e="jessiescript_autgen_jxg_"+b;d=document.createElement("div");d.setAttribute("id",e);d.setAttribute("style","width:"+h+"; height:"+k+"; float:left");d.setAttribute("class","jxgbox");try{document.body.insertBefore(d,w[b])}catch(A){"object"==typeof jQuery&&jQuery(d).insertBefore(w[b])}}document.getElementById(e)?(t=w[b].innerHTML,t=t.replace(/<!\[CDATA\[/g,"").replace(/\]\]>/g,""),w[b].innerHTML=t,g=z(t,a,q),g.reload=B(g,t,a,q)):m.debug("JSXGraph: Apparently the div injection failed. Can't create a board, sorry.")}},
window),m.JSXGraph});E("base/group",["jxg","base/constants","base/element","math/math","utils/type"],function(m,q,l,e,h){return m.Group=function(e,d,b,a){var k,c,f;this.board=e;this.objects={};k=this.board.numObjects;this.board.numObjects+=1;this.id=""!==d&&h.exists(d)?d:this.board.id+"Group"+k;this.board.groups[this.id]=this;this.type=q.OBJECT_TYPE_POINT;this.elementClass=q.OBJECT_CLASS_POINT;this.name=""!==b&&h.exists(b)?b:"group_"+this.board.generateName(this);delete this.type;this.coords={};k=
h.isArray(a)?a:Array.prototype.slice.call(arguments,3);for(c=0;c<k.length;c++)f=this.board.select(k[c]),f.visProp.fixed||f.type!==q.OBJECT_TYPE_POINT&&f.type!==q.OBJECT_TYPE_GLIDER||(0!==f.group.length?this.addGroup(f.group[f.group.length-1]):this.addPoint(f));this.methodMap={ungroup:"ungroup",add:"addPoint",addPoint:"addPoint",addPoints:"addPoints",addGroup:"addGroup",remove:"removePoint",removePoint:"removePoint",setAttribute:"setAttribute",setProperty:"setAttribute"}},m.extend(m.Group.prototype,
{ungroup:function(){for(var e in this.objects)this.objects.hasOwnProperty(e)&&(h.isArray(this.objects[e].point.group)&&this.objects[e].point.group[this.objects[e].point.group.length-1]===this&&this.objects[e].point.group.pop(),this.removePoint(this.objects[e].point))},update:function(g){var d,b,a,k,c=null;for(d in this.objects)if(this.objects.hasOwnProperty(d)&&(c=this.objects[d].point,c.coords.distance(q.COORDS_BY_USER,this.coords[d])>e.eps)){b=[c.coords.usrCoords[1]-this.coords[c.id].usrCoords[1],
c.coords.usrCoords[2]-this.coords[c.id].usrCoords[2]];a=c;break}if(h.exists(a)){for(d in this.objects)this.objects.hasOwnProperty(d)&&(h.exists(this.board.objects[d])?(c=this.objects[d].point,c.id!==a.id&&c.coords.setCoordinates(q.COORDS_BY_USER,[this.coords[d].usrCoords[1]+b[0],this.coords[d].usrCoords[2]+b[1]])):delete this.objects[d],this.coords[c.id]={usrCoords:[c.coords.usrCoords[0],c.coords.usrCoords[1],c.coords.usrCoords[2]]});for(d in this.objects)if(this.objects.hasOwnProperty(d))for(k in this.objects[d].descendants)this.objects[d].descendants.hasOwnProperty(k)&&
(this.objects[d].descendants.needsUpdate=this.objects[d].descendants.needsRegularUpdate||this.board.needsFullUpdate);this.board.updateElements(g)}return this},addPoint:function(e){this.objects[e.id]={point:e};this.coords[e.id]={usrCoords:[e.coords.usrCoords[0],e.coords.usrCoords[1],e.coords.usrCoords[2]]}},addPoints:function(e){var d;for(d=0;d<e.length;d++)this.addPoint(e[d])},addGroup:function(e){for(var d in e.objects)e.objects.hasOwnProperty(d)&&this.addPoint(e.objects[d].point)},removePoint:function(e){delete this.objects[e.id]},
setProperty:m.shortcut(m.Group.prototype,"setAttribute"),setAttribute:function(){for(var e in this.objects)this.objects.hasOwnProperty(e)&&this.objects[e].point.setAttribute.apply(this.objects[e].point,arguments)}}),m.createGroup=function(e,d,b){b=new m.Group(e,b.id,b.name,d);b.elType="group";b.parents=[];for(e=0;e<d.length;e++)b.parents.push(d[e].id);return b},m.registerElement("group",m.createGroup),{Group:m.Group,createGroup:m.createGroup}});E("element/conic","jxg base/constants base/coords math/math math/numerics math/geometry utils/type base/point base/curve".split(" "),
function(m,q,l,e,h,g,d){return m.createEllipse=function(b,a,e){var c,f,g,h,m,v,r,y=[];g=d.copyAttributes(e,b.options,"conic","foci");e=d.copyAttributes(e,b.options,"conic");for(v=0;2>v;v++)if(1<a[v].length)y[v]=b.create("point",a[v],g);else if(d.isPoint(a[v]))y[v]=b.select(a[v]);else if("function"==typeof a[v]&&a[v]().elementClass===q.OBJECT_CLASS_POINT)y[v]=a[v]();else{if(!d.isString(a[v]))throw Error("JSXGraph: Can't create Ellipse with parent types '"+typeof a[0]+"' and '"+typeof a[1]+"'.\nPossible parent types: [point,point,point], [point,point,number|function]");
y[v]=b.select(a[v])}if(d.isNumber(a[2]))m=d.createFunction(a[2],b);else if("function"==typeof a[2]&&d.isNumber(a[2]()))m=a[2];else{if(d.isPoint(a[2]))h=b.select(a[2]);else if(1<a[2].length)h=b.create("point",a[2],g);else if("function"==typeof a[2]&&a[2]().elementClass===q.OBJECT_CLASS_POINT)h=a[2]();else{if(!d.isString(a[2]))throw Error("JSXGraph: Can't create Ellipse with parent types '"+typeof a[0]+"' and '"+typeof a[1]+"' and '"+typeof a[2]+"'.\nPossible parent types: [point,point,point], [point,point,number|function]");
h=b.select(a[2])}m=function(){return h.Dist(y[0])+h.Dist(y[1])}}d.exists(a[4])||(a[4]=2*Math.PI);d.exists(a[3])||(a[3]=0);g=b.create("point",[function(){return.5*(y[0].X()+y[1].X())},function(){return.5*(y[0].Y()+y[1].Y())}],g);f=b.create("curve",[function(){return 0},function(){return 0},a[3],a[4]],e);f.majorAxis=m;r=f.hasPoint;c=function(a,b){var c,d,e,g,h,k,l,n,p;b||(c=m(),d=c*c,e=y[0].X(),g=y[0].Y(),h=y[1].X(),k=y[1].Y(),l=e-h,n=g-k,p=(d-e*e-g*g+h*h+k*k)/(2*c),f.quadraticform=[[p*p-h*h-k*k,p*
l/c+h,p*n/c+k],[p*l/c+h,l*l/d-1,l*n/d],[p*n/c+k,l*n/d,n*n/d-1]])};f.X=function(a,b){var d=m(),e=y[1].Dist(y[0]),d=.5*(e*e-d*d)/(e*Math.cos(a)-d),e=Math.atan2(y[1].Y()-y[0].Y(),y[1].X()-y[0].X());return b||c(a,b),y[0].X()+Math.cos(e+a)*d};f.Y=function(a){var b=m(),c=y[1].Dist(y[0]),b=.5*(c*c-b*b)/(c*Math.cos(a)-b),c=Math.atan2(y[1].Y()-y[0].Y(),y[1].X()-y[0].X());return y[0].Y()+Math.sin(c+a)*b};f.midpoint=g;f.type=q.OBJECT_TYPE_CONIC;f.hasPoint=function(a,b){var c,d,e,f,g;return this.visProp.hasinnerpoints?
(c=y[0].coords,d=y[1].coords,e=this.majorAxis(),f=new l(q.COORDS_BY_SCREEN,[a,b],this.board),g=f.distance(q.COORDS_BY_USER,c)+f.distance(q.COORDS_BY_USER,d),e>=g):r.apply(this,arguments)};g.addChild(f);for(v=0;2>v;v++)d.isPoint(y[v])&&y[v].addChild(f);d.isPoint(h)&&h.addChild(f);f.parents=[];for(v=0;v<a.length;v++)a[v].id&&f.parents.push(a[v].id);return f},m.createHyperbola=function(b,a,e){var c,f,g,h,l,m,r=[];g=d.copyAttributes(e,b.options,"conic","foci");e=d.copyAttributes(e,b.options,"conic");
for(m=0;2>m;m++)if(1<a[m].length)r[m]=b.create("point",a[m],g);else if(d.isPoint(a[m]))r[m]=b.select(a[m]);else if("function"==typeof a[m]&&a[m]().elementClass===q.OBJECT_CLASS_POINT)r[m]=a[m]();else{if(!d.isString(a[m]))throw Error("JSXGraph: Can't create Hyperbola with parent types '"+typeof a[0]+"' and '"+typeof a[1]+"'.\nPossible parent types: [point,point,point], [point,point,number|function]");r[m]=b.select(a[m])}if(d.isNumber(a[2]))l=d.createFunction(a[2],b);else if("function"==typeof a[2]&&
d.isNumber(a[2]()))l=a[2];else{if(d.isPoint(a[2]))h=b.select(a[2]);else if(1<a[2].length)h=b.create("point",a[2],g);else if("function"==typeof a[2]&&a[2]().elementClass===q.OBJECT_CLASS_POINT)h=a[2]();else{if(!d.isString(a[2]))throw Error("JSXGraph: Can't create Hyperbola with parent types '"+typeof a[0]+"' and '"+typeof a[1]+"' and '"+typeof a[2]+"'.\nPossible parent types: [point,point,point], [point,point,number|function]");h=b.select(a[2])}l=function(){return h.Dist(r[0])-h.Dist(r[1])}}d.exists(a[4])||
(a[4]=1.0001*Math.PI);d.exists(a[3])||(a[3]=-1.0001*Math.PI);g=b.create("point",[function(){return.5*(r[0].X()+r[1].X())},function(){return.5*(r[0].Y()+r[1].Y())}],g);f=b.create("curve",[function(){return 0},function(){return 0},a[3],a[4]],e);f.majorAxis=l;c=function(a,b){var c,d,e,g,h,k,m,n,p;b||(c=l(),d=c*c,e=r[0].X(),g=r[0].Y(),h=r[1].X(),k=r[1].Y(),m=e-h,n=g-k,p=(d-e*e-g*g+h*h+k*k)/(2*c),f.quadraticform=[[p*p-h*h-k*k,p*m/c+h,p*n/c+k],[p*m/c+h,m*m/d-1,m*n/d],[p*n/c+k,m*n/d,n*n/d-1]])};f.X=function(a,
b){var d=this.majorAxis(),e=r[1].Dist(r[0]),d=.5*(e*e-d*d)/(e*Math.cos(a)+d),e=Math.atan2(r[1].Y()-r[0].Y(),r[1].X()-r[0].X());return b||c(a,b),r[0].X()+Math.cos(e+a)*d};f.Y=function(a){var b=this.majorAxis(),c=r[1].Dist(r[0]),b=.5*(c*c-b*b)/(c*Math.cos(a)+b),c=Math.atan2(r[1].Y()-r[0].Y(),r[1].X()-r[0].X());return r[0].Y()+Math.sin(c+a)*b};f.midpoint=g;f.type=q.OBJECT_TYPE_CONIC;g.addChild(f);for(m=0;2>m;m++)d.isPoint(r[m])&&r[m].addChild(f);d.isPoint(h)&&h.addChild(f);f.parents=[];for(m=0;m<a.length;m++)a[m].id&&
f.parents.push(a[m].id);return f},m.createParabola=function(b,a,h){var c,f,l,m=a[0],s=a[1];l=d.copyAttributes(h,b.options,"conic","foci");h=d.copyAttributes(h,b.options,"conic");if(1<a[0].length)m=b.create("point",a[0],l);else if(d.isPoint(a[0]))m=b.select(a[0]);else if("function"==typeof a[0]&&a[0]().elementClass===q.OBJECT_CLASS_POINT)m=a[0]();else{if(!d.isString(a[0]))throw Error("JSXGraph: Can't create Parabola with parent types '"+typeof a[0]+"' and '"+typeof a[1]+"'.\nPossible parent types: [point,line]");
m=b.select(a[0])}d.exists(a[3])||(a[3]=10);d.exists(a[2])||(a[2]=-10);l=b.create("point",[function(){var a=[0,s.stdform[1],s.stdform[2]];return a=e.crossProduct(a,m.coords.usrCoords),g.meetLineLine(a,s.stdform,0,b).usrCoords}],l);f=b.create("curve",[function(){return 0},function(){return 0},a[2],a[3]],h);c=function(a,b){var c,d,e,g,h,k;b||(c=s.stdform[1],d=s.stdform[2],e=s.stdform[0],g=c*c+d*d,h=m.X(),k=m.Y(),f.quadraticform=[[e*e-g*(h*h+k*k),e*c+g*h,e*d+g*k],[e*c+g*h,-d*d,c*d],[e*d+g*k,c*d,-c*c]])};
f.X=function(a,b){var d,e,f=s.getAngle(),h=g.distPointLine(m.coords.usrCoords,s.stdform),k=s.point1.coords.usrCoords,l=s.point2.coords.usrCoords,n=m.coords.usrCoords;return e=0<=(l[1]-k[1])*(n[2]-k[2])-(l[2]-k[2])*(n[1]-k[1])?1:-1,d=e*h/(1-Math.sin(a)),b||c(a,b),m.X()+Math.cos(a+f)*d};f.Y=function(a){var b,c,d=s.getAngle(),e=g.distPointLine(m.coords.usrCoords,s.stdform),f=s.point1.coords.usrCoords,h=s.point2.coords.usrCoords,k=m.coords.usrCoords;return c=0<=(h[1]-f[1])*(k[2]-f[2])-(h[2]-f[2])*(k[1]-
f[1])?1:-1,b=c*e/(1-Math.sin(a)),m.Y()+Math.sin(a+d)*b};f.type=q.OBJECT_TYPE_CONIC;l.addChild(f);d.isPoint(m)&&m.addChild(f);s.addChild(f);f.parents=[];for(l=0;l<a.length;l++)a[l].id&&f.parents.push(a[l].id);return f},m.createConic=function(b,a,g){var c,f,l,p,s,v,r,y,x,u,t,w,z,B=[[1,0,0],[0,1,0],[0,0,1]],A=[[1,0,0],[0,1,0],[0,0,1]],C=[],F=[],D=d.copyAttributes(g,b.options,"conic","foci"),E=d.copyAttributes(g,b.options,"conic");if(5===a.length)z=!0;else{if(6!==a.length)throw Error("JSXGraph: Can't create generic Conic with "+
a.length+" parameters.");z=!1}if(z)for(g=0;5>g;g++)if(1<a[g].length)C[g]=b.create("point",a[g],D);else if(d.isPoint(a[g]))C[g]=b.select(a[g]);else if("function"==typeof a[g]&&a[g]().elementClass===q.OBJECT_CLASS_POINT)C[g]=a[g]();else{if(!d.isString(a[g]))throw Error("JSXGraph: Can't create Conic section with parent types '"+typeof a[g]+"'.\nPossible parent types: [point,point,point,point,point], [a00,a11,a22,a01,a02,a12]");C[g]=b.select(a[g])}else w=[[0,0,0],[0,0,0],[0,0,0]],w[0][0]=d.isFunction(a[2])?
function(){return a[2]()}:function(){return a[2]},w[0][1]=d.isFunction(a[4])?function(){return a[4]()}:function(){return a[4]},w[0][2]=d.isFunction(a[5])?function(){return a[5]()}:function(){return a[5]},w[1][1]=d.isFunction(a[0])?function(){return a[0]()}:function(){return a[0]},w[1][2]=d.isFunction(a[3])?function(){return a[3]()}:function(){return a[3]},w[2][2]=d.isFunction(a[1])?function(){return a[1]()}:function(){return a[1]};if(s=function(a){var b,c;for(b=0;3>b;b++)for(c=b;3>c;c++)a[b][c]+=
a[c][b];for(b=0;3>b;b++)for(c=0;b>c;c++)a[b][c]=a[c][b];return a},p=function(a,b){var c,d,e=[[0,0,0],[0,0,0],[0,0,0]];for(c=0;3>c;c++)for(d=0;3>d;d++)e[c][d]=a[c]*b[d];return s(e)},l=function(a,b,c){var d,f,g,h=[[0,0,0],[0,0,0],[0,0,0]];d=e.matVecMult(b,c);f=e.innerProduct(c,d);d=e.matVecMult(a,c);g=e.innerProduct(c,d);for(c=0;3>c;c++)for(d=0;3>d;d++)h[c][d]=f*a[c][d]-g*b[c][d];return h},f=b.create("curve",[function(){return 0},function(){return 0},0,2*Math.PI],E),c=function(a,b){var c,d,g,k;if(!b){if(z){for(c=
0;5>c;c++)F[c]=C[c].coords.usrCoords;u=p(e.crossProduct(F[0],F[1]),e.crossProduct(F[2],F[3]));t=p(e.crossProduct(F[0],F[2]),e.crossProduct(F[1],F[3]));A=l(u,t,F[4])}else for(c=0;3>c;c++)for(d=c;3>d;d++)A[c][d]=w[c][d](),d>c&&(A[d][c]=A[c][d]);f.quadraticform=A;v=h.Jacobi(A);0>v[0][0][0]&&(v[0][0][0]*=-1,v[0][1][1]*=-1,v[0][2][2]*=-1);for(c=0;3>c;c++){for(d=g=0;3>d;d++)g+=v[1][d][c]*v[1][d][c];Math.sqrt(g)}B=v[1];x=Math.sqrt(Math.abs(v[0][0][0]));r=Math.sqrt(Math.abs(v[0][1][1]));y=Math.sqrt(Math.abs(v[0][2][2]))}return 0>=
v[0][1][1]&&0>=v[0][2][2]?k=e.matVecMult(B,[1/x,Math.cos(a)/r,Math.sin(a)/y]):0>=v[0][1][1]&&0<v[0][2][2]?k=e.matVecMult(B,[Math.cos(a)/x,1/r,Math.sin(a)/y]):0>v[0][2][2]&&(k=e.matVecMult(B,[Math.sin(a)/x,Math.cos(a)/r,1/y])),m.exists(k)?(k[1]/=k[0],k[2]/=k[0],k[0]=1):k=[1,0/0,0/0],k},f.X=function(a,b){return c(a,b)[1]},f.Y=function(a,b){return c(a,b)[2]},f.midpoint=b.create("point",[function(){var a=f.quadraticform;return[a[1][1]*a[2][2]-a[1][2]*a[1][2],a[1][2]*a[0][2]-a[2][2]*a[0][1],a[0][1]*a[1][2]-
a[1][1]*a[0][2]]}],D),f.type=q.OBJECT_TYPE_CONIC,z){for(g=0;5>g;g++)d.isPoint(C[g])&&C[g].addChild(f);f.parents=[];for(g=0;g<a.length;g++)a[g].id&&f.parents.push(a[g].id)}return f.addChild(f.midpoint),f},m.registerElement("ellipse",m.createEllipse),m.registerElement("hyperbola",m.createHyperbola),m.registerElement("parabola",m.createParabola),m.registerElement("conic",m.createConic),{createEllipse:m.createEllipse,createHyperbola:m.createHyperbola,createParabola:m.createParabola,createConic:m.createConic}});
E("base/polygon","jxg base/constants base/coords math/statistics utils/type base/element base/line base/transformation".split(" "),function(m,q,l,e,h,g){return m.Polygon=function(d,b,a){this.constructor(d,a,q.OBJECT_TYPE_POLYGON,q.OBJECT_CLASS_AREA);var e,c,f,g=h.copyAttributes(a,d.options,"polygon","borders");this.withLines=a.withlines;this.attr_line=g;this.vertices=[];for(e=0;e<b.length;e++)c=this.board.select(b[e]),this.vertices[e]=c;if(this.vertices[this.vertices.length-1]!==this.vertices[0]&&
this.vertices.push(this.vertices[0]),this.borders=[],this.withLines)for(c=this.vertices.length-1,f=0;c>f;f++)e=(f+1)%c,g.id=g.ids&&g.ids[e],g.name=g.names&&g.names[e],g.strokecolor=h.isArray(g.colors)&&g.colors[e%g.colors.length]||g.strokecolor,g.visible=h.exists(a.borders.visible)?a.borders.visible:a.visible,!1===g.strokecolor&&(g.strokecolor="none"),b=d.create("segment",[this.vertices[e],this.vertices[e+1]],g),b.dump=!1,this.borders[e]=b,b.parentPolygon=this;this.id=this.board.setId(this,"Py");
for(e=0;e<this.vertices.length-1;e++)c=this.board.select(this.vertices[e]),c.addChild(this);this.board.renderer.drawPolygon(this);this.board.finalizeAdding(this);this.elType="polygon";this.createLabel();this.methodMap=m.deepCopy(this.methodMap,{borders:"borders",vertices:"vertices",A:"Area",Area:"Area",addPoints:"addPoints",insertPoints:"insertPoints",removePoints:"removePoints"})},m.Polygon.prototype=new g,m.extend(m.Polygon.prototype,{hasPoint:function(d,b){var a,e,c,f=!1;if(this.visProp.hasinnerpoints)for(c=
this.vertices.length,a=0,e=c-2;c-1>a;e=a++)this.vertices[a].coords.scrCoords[2]>b!=this.vertices[e].coords.scrCoords[2]>b&&d<(this.vertices[e].coords.scrCoords[1]-this.vertices[a].coords.scrCoords[1])*(b-this.vertices[a].coords.scrCoords[2])/(this.vertices[e].coords.scrCoords[2]-this.vertices[a].coords.scrCoords[2])+this.vertices[a].coords.scrCoords[1]&&(f=!f);else for(c=this.borders.length,a=0;c>a;a++)if(this.borders[a].hasPoint(d,b)){f=!0;break}return f},updateRenderer:function(){this.needsUpdate&&
this.visProp.visible&&(this.board.renderer.updatePolygon(this),this.needsUpdate=!1);this.hasLabel&&this.label.visProp.visible&&(this.label.update(),this.board.renderer.updateText(this.label))},getTextAnchor:function(){var d,b=this.vertices[0].X(),a=this.vertices[0].Y(),e=b,c=a;for(d=0;d<this.vertices.length;d++)this.vertices[d].X()<b&&(b=this.vertices[d].X()),this.vertices[d].X()>e&&(e=this.vertices[d].X()),this.vertices[d].Y()>a&&(a=this.vertices[d].Y()),this.vertices[d].Y()<c&&(c=this.vertices[d].Y());
return new l(q.COORDS_BY_USER,[.5*(b+e),.5*(a+c)],this.board)},getLabelAnchor:m.shortcut(m.Polygon.prototype,"getTextAnchor"),cloneToBackground:function(){var d,b={};return b.id=this.id+"T"+this.numTraces,this.numTraces++,b.vertices=this.vertices,b.visProp=h.deepCopy(this.visProp,this.visProp.traceattributes,!0),b.visProp.layer=this.board.options.layer.trace,b.board=this.board,h.clearVisPropOld(b),d=this.board.renderer.enhancedRendering,this.board.renderer.enhancedRendering=!0,this.board.renderer.drawPolygon(b),
this.board.renderer.enhancedRendering=d,this.traces[b.id]=b.rendNode,this},hideElement:function(d){if(this.visProp.visible=!1,this.board.renderer.hide(this),!d)for(d=0;d<this.borders.length;d++)this.borders[d].hideElement();this.hasLabel&&h.exists(this.label)&&(this.label.hiddenByParent=!0,this.label.visProp.visible&&this.board.renderer.hide(this.label))},showElement:function(d){if(this.visProp.visible=!0,this.board.renderer.show(this),!d)for(d=0;d<this.borders.length;d++)this.borders[d].showElement(),
this.borders[d].updateRenderer();h.exists(this.label)&&this.hasLabel&&this.label.hiddenByParent&&(this.label.hiddenByParent=!1,this.label.visProp.visible||this.label.showElement().updateRenderer())},Area:function(){var d,b=0;for(d=0;d<this.vertices.length-1;d++)b+=this.vertices[d].X()*this.vertices[d+1].Y()-this.vertices[d+1].X()*this.vertices[d].Y();return b/=2,Math.abs(b)},remove:function(){var d;for(d=0;d<this.borders.length;d++)this.board.removeObject(this.borders[d]);g.prototype.remove.call(this)},
findPoint:function(d){var b;if(!h.isPoint(d))return-1;for(b=0;b<this.vertices.length;b++)if(this.vertices[b].id===d.id)return b;return-1},addPoints:function(){var d=Array.prototype.slice.call(arguments);return this.insertPoints.apply(this,[this.vertices.length-2].concat(d))},insertPoints:function(d){var b,a,e=[];if(0===arguments.length||0>d||d>this.vertices.length-2)return this;for(b=1;b<arguments.length;b++)h.isPoint(arguments[b])&&e.push(arguments[b]);if(a=this.vertices.slice(0,d+1).concat(e),this.vertices=
a.concat(this.vertices.slice(d+1)),this.withLines){a=this.borders.slice(0,d);this.board.removeObject(this.borders[d]);for(b=0;b<e.length;b++)a.push(this.board.create("segment",[this.vertices[d+b],this.vertices[d+b+1]],this.attr_line));a.push(this.board.create("segment",[this.vertices[d+e.length],this.vertices[d+e.length+1]],this.attr_line));this.borders=a.concat(this.borders.slice(d))}return this.board.update(),this},removePoints:function(){var d,b,a=[],e=[],c=[],f=[];this.vertices=this.vertices.slice(0,
this.vertices.length-1);for(d=0;d<arguments.length;d++)h.isPoint(arguments[d])&&(b=this.findPoint(arguments[d])),h.isNumber(b)&&-1<b&&b<this.vertices.length&&-1===h.indexOf(c,b)&&c.push(b);c=c.sort();a=this.vertices.slice();e=this.borders.slice();this.withLines&&f.push([c[c.length-1]]);for(d=c.length-1;-1<d;d--)a[c[d]]=-1,this.withLines&&c[d]-1>c[d-1]&&(f[f.length-1][1]=c[d],f.push([c[d-1]]));this.withLines&&(f[f.length-1][1]=c[0]);this.vertices=[];for(d=0;d<a.length;d++)h.isPoint(a[d])&&this.vertices.push(a[d]);
if(this.vertices[this.vertices.length-1].id!==this.vertices[0].id&&this.vertices.push(this.vertices[0]),this.withLines){for(d=0;d<f.length;d++){for(b=f[d][1]-1;b<f[d][0]+1;b++)0>b?(b=0,this.board.removeObject(this.borders[e.length-1]),e[e.length-1]=-1):b>e.length-1&&(b=e.length-1),this.board.removeObject(this.borders[b]),e[b]=-1;0!==f[d][1]&&f[d][0]!==a.length-1&&(e[f[d][0]-1]=this.board.create("segment",[a[Math.max(f[d][1]-1,0)],a[Math.min(f[d][0]+1,this.vertices.length-1)]],this.attr_line))}this.borders=
[];for(d=0;d<e.length;d++)-1!==e[d]&&this.borders.push(e[d]);5!==f[0][1]&&0!==f[f.length-1][1]||this.borders.push(this.board.create("segment",[this.vertices[0],this.vertices[this.vertices.length-2]],this.attr_line))}return this.board.update(),this},getParents:function(){var d,b=[];for(d=0;d<this.vertices.length;d++)b.push(this.vertices[d].id);return b},getAttributes:function(){var d,b=g.prototype.getAttributes.call(this);if(this.withLines)for(b.lines=b.lines||{},b.lines.ids=[],b.lines.colors=[],d=
0;d<this.borders.length;d++)b.lines.ids.push(this.borders[d].id),b.lines.colors.push(this.borders[d].visProp.strokecolor);return b},snapToGrid:function(){var d;for(d=0;d<this.vertices.length;d++)this.vertices[d].snapToGrid()},setPositionDirectly:function(d,b,a){var g,c;b=new l(d,b,this.board);var f=new l(d,a,this.board);a=this.vertices.length-1;for(d=0;a>d;d++)if(!this.vertices[d].draggable())return this;return g=e.subtract(b.usrCoords,f.usrCoords),c=this.board.create("transform",g.slice(1),{type:"translate"}),
c.applyOnce(this.vertices.slice(0,-1)),this}}),m.createPolygon=function(d,b,a){var e,c=h.copyAttributes(a,d.options,"polygon");for(a=0;a<b.length;a++)if(b[a]=d.select(b[a]),!h.isPoint(b[a]))throw Error("JSXGraph: Can't create polygon with parent types other than 'point'.");return e=new m.Polygon(d,b,c),e.isDraggable=!0,e},m.createRegularPolygon=function(d,b,a){var e,c,f,g,l,m,v=[];if(h.isNumber(b[b.length-1])&&3!==b.length)throw Error("JSXGraph: A regular polygon needs two points and a number as input.");
if(g=b.length,f=b[g-1],!h.isNumber(f)&&!h.isPoint(d.select(f))||3>f)throw Error("JSXGraph: The third parameter has to be number greater than 2 or a point.");h.isPoint(d.select(f))?(f=g,l=!0):(g--,l=!1);for(c=0;g>c;c++)if(b[c]=d.select(b[c]),!h.isPoint(b[c]))throw Error("JSXGraph: Can't create regular polygon if the first two parameters aren't points.");v[0]=b[0];v[1]=b[1];m=h.copyAttributes(a,d.options,"polygon","vertices");for(c=2;f>c;c++)g=d.create("transform",[Math.PI*(2-(f-2)/f),v[c-1]],{type:"rotate"}),
l?(v[c]=b[c],v[c].addTransform(b[c-2],g)):(h.isArray(m.ids)&&m.ids.length>=f-2&&(m.id=m.ids[c-2]),v[c]=d.create("point",[v[c-2],g],m),v[c].type=q.OBJECT_TYPE_CAS,v[c].isDraggable=!0,v[c].visProp.fixed=!1);return m=h.copyAttributes(a,d.options,"polygon"),e=d.create("polygon",v,m),e.elType="regularpolygon",e},m.registerElement("polygon",m.createPolygon),m.registerElement("regularpolygon",m.createRegularPolygon),{Polygon:m.Polygon,createPolygon:m.createPolygon,createRegularPolygon:m.createRegularPolygon}});
E("element/arc","jxg math/geometry math/math base/coords base/circle utils/type base/constants base/curve element/composition".split(" "),function(m,q,l,e,h,g,d){return m.createArc=function(b,a,k){var c,f;if(3>a.length||a[0].elementClass!==d.OBJECT_CLASS_POINT||a[1].elementClass!==d.OBJECT_CLASS_POINT||a[2].elementClass!==d.OBJECT_CLASS_POINT||a[3]&&a[3].elementClass!==d.OBJECT_CLASS_POINT)throw Error("JSXGraph: Can't create Arc with parent types '"+typeof a[0]+"' and '"+typeof a[1]+"' and '"+typeof a[2]+
"'.\nPossible parent types: [point,point,point]");c=g.copyAttributes(k,b.options,"arc");k=b.create("curve",[[0],[0]],c);k.elType="arc";k.parents=[];for(f=0;f<a.length;f++)a[f].id&&k.parents.push(a[f].id);return k.type=d.OBJECT_TYPE_ARC,k.center=b.select(a[0]),k.radiuspoint=b.select(a[1]),k.point2=k.radiuspoint,k.anglepoint=b.select(a[2]),k.point3=k.anglepoint,k.center.addChild(k),k.radiuspoint.addChild(k),k.anglepoint.addChild(k),k.useDirection=c.usedirection,k.updateDataArray=function(){var b,c,
d,e,f,g=1,h=this.radiuspoint,k=this.center,l=this.anglepoint;b=q.rad(h,k,l);("minor"===this.visProp.type&&b>Math.PI||"major"===this.visProp.type&&b<Math.PI)&&(g=-1);this.useDirection&&(d=a[1].coords.usrCoords,e=a[3].coords.usrCoords,f=a[2].coords.usrCoords,c=(d[1]-f[1])*(d[2]-e[2])-(d[2]-f[2])*(d[1]-e[1]),0>c?(this.radiuspoint=a[1],this.anglepoint=a[2]):(this.radiuspoint=a[2],this.anglepoint=a[1]));h=h.coords.usrCoords;k=k.coords.usrCoords;l=l.coords.usrCoords;b=q.bezierArc(h,k,l,!1,g);this.dataX=
b[0];this.dataY=b[1];this.bezierDegree=3;this.updateStdform();this.updateQuadraticform()},k.Radius=function(){return this.radiuspoint.Dist(this.center)},k.getRadius=function(){return this.Radius()},k.Value=function(){return this.Radius()*q.rad(this.radiuspoint,this.center,this.anglepoint)},k.hasPoint=function(a,b){var c,f,g,h,k,m,t,w,z=this.board.options.precision.hasPoint/this.board.unitX,B=this.Radius();return f=new e(d.COORDS_BY_SCREEN,[a,b],this.board),0<this.transformations.length&&(this.updateTransformMatrix(),
t=l.inverse(this.transformMat),w=l.matVecMult(t,f.usrCoords),f=new e(d.COORDS_BY_USER,w,this.board)),c=this.center.coords.distance(d.COORDS_BY_USER,f),g=Math.abs(c-B)<z,g&&(h=q.rad(this.radiuspoint,this.center,f.usrCoords.slice(1)),k=0,m=q.rad(this.radiuspoint,this.center,this.anglepoint),("minor"===this.visProp.type&&m>Math.PI||"major"===this.visProp.type&&m<Math.PI)&&(k=m,m=2*Math.PI),(k>h||h>m)&&(g=!1)),g},k.hasPointSector=function(a,b){var c,f,g,h=new e(d.COORDS_BY_SCREEN,[a,b],this.board),k=
this.Radius(),l=this.center.coords.distance(d.COORDS_BY_USER,h),k=k>l;return k&&(c=q.rad(this.radiuspoint,this.center,h.usrCoords.slice(1)),f=0,g=q.rad(this.radiuspoint,this.center,this.anglepoint),("minor"===this.visProp.type&&g>Math.PI||"major"===this.visProp.type&&g<Math.PI)&&(f=g,g=2*Math.PI),(f>c||c>g)&&(k=!1)),k},k.getTextAnchor=function(){return this.center.coords},k.getLabelAnchor=function(){var a,b,c,f,h=q.rad(this.radiuspoint,this.center,this.anglepoint),k=10/this.board.unitX,l=10/this.board.unitY,
m=this.point2.coords.usrCoords,t=this.center.coords.usrCoords,w=m[1]-t[1],m=m[2]-t[2];return g.exists(this.label)&&(this.label.relativeCoords=new e(d.COORDS_BY_SCREEN,[0,0],this.board)),("minor"===this.visProp.type&&h>Math.PI||"major"===this.visProp.type&&h<Math.PI)&&(h=-(2*Math.PI-h)),a=new e(d.COORDS_BY_USER,[t[1]+Math.cos(.5*h)*w-Math.sin(.5*h)*m,t[2]+Math.sin(.5*h)*w+Math.cos(.5*h)*m],this.board),b=a.usrCoords[1]-t[1],c=a.usrCoords[2]-t[2],f=Math.sqrt(b*b+c*c),b=b*(f+k)/f,c=c*(f+l)/f,new e(d.COORDS_BY_USER,
[t[1]+b,t[2]+c],this.board)},k.updateQuadraticform=h.Circle.prototype.updateQuadraticform,k.updateStdform=h.Circle.prototype.updateStdform,k.methodMap=m.deepCopy(k.methodMap,{getRadius:"getRadius",radius:"Radius",center:"center",radiuspoint:"radiuspoint",anglepoint:"anglepoint"}),k.prepareUpdate().update(),k},m.registerElement("arc",m.createArc),m.createSemicircle=function(b,a,d){var c,e,h;if(!g.isPoint(a[0])||!g.isPoint(a[1]))throw Error("JSXGraph: Can't create Semicircle with parent types '"+typeof a[0]+
"' and '"+typeof a[1]+"'.\nPossible parent types: [point,point]");return h=g.copyAttributes(d,b.options,"semicircle","midpoint"),e=b.create("midpoint",[a[0],a[1]],h),e.dump=!1,h=g.copyAttributes(d,b.options,"semicircle"),c=b.create("arc",[e,a[1],a[0]],h),c.elType="semicircle",c.parents=[a[0].id,a[1].id],c.subs={midpoint:e},c.midpoint=c.center=e,c},m.registerElement("semicircle",m.createSemicircle),m.createCircumcircleArc=function(b,a,d){var c,e,h;if(!(g.isPoint(a[0])&&g.isPoint(a[1])&&g.isPoint(a[2])))throw Error("JSXGraph: create Circumcircle Arc with parent types '"+
typeof a[0]+"' and '"+typeof a[1]+"' and '"+typeof a[2]+"'.\nPossible parent types: [point,point,point]");return h=g.copyAttributes(d,b.options,"circumcirclearc","center"),e=b.create("circumcenter",[a[0],a[1],a[2]],h),e.dump=!1,h=g.copyAttributes(d,b.options,"circumcirclearc"),h.usedirection=!0,c=b.create("arc",[e,a[0],a[2],a[1]],h),c.elType="circumcirclearc",c.parents=[a[0].id,a[1].id,a[2].id],c.subs={center:e},c.center=e,c},m.registerElement("circumcirclearc",m.createCircumcircleArc),m.createMinorArc=
function(b,a,d){return d.type="minor",m.createArc(b,a,d)},m.registerElement("minorarc",m.createMinorArc),m.createMajorArc=function(b,a,d){return d.type="major",m.createArc(b,a,d)},m.registerElement("majorarc",m.createMajorArc),{createArc:m.createArc,createSemicircle:m.createSemicircle,createCircumcircleArc:m.createCircumcircleArc,createMinorArc:m.createMinorArc,createMajorArc:m.createMajorArc}});E("element/sector","jxg math/geometry math/math math/statistics base/coords base/constants utils/type base/point base/curve base/transformation element/composition".split(" "),
function(m,q,l,e,h,g,d){return m.createSector=function(b,a,k){var c,f,n,p,s,v="invalid",r=["center","radiuspoint","anglepoint"];if(d.isPoint(a[0])&&d.isPoint(a[1])&&d.isPoint(a[2])?v="3points":a[0].elementClass===g.OBJECT_CLASS_LINE&&a[1].elementClass===g.OBJECT_CLASS_LINE&&(d.isArray(a[2])||d.isNumber(a[2]))&&(d.isArray(a[3])||d.isNumber(a[3]))&&(d.isNumber(a[4])||d.isFunction(a[4]))&&(v="2lines"),"invalid"===v)try{for(f=0;f<a.length;f++)d.isPoint(a[f])||(n=d.copyAttributes(k,b.options,"sector",
r[f]),a[f]=b.create("point",a[f],n));v="3points"}catch(y){throw Error("JSXGraph: Can't create Sector with parent types '"+typeof a[0]+"' and '"+typeof a[1]+"' and '"+typeof a[2]+"'.");}return n=d.copyAttributes(k,b.options,"sector"),c=b.create("curve",[[0],[0]],n),c.type=g.OBJECT_TYPE_SECTOR,c.elType="sector","2lines"===v?(c.Radius=function(){return d.evaluate(a[4])},c.line1=b.select(a[0]),c.line2=b.select(a[1]),c.line1.addChild(c),c.line2.addChild(c),c.parents=[a[0].id,a[1].id],c.point1={visProp:{}},
c.point2={visProp:{}},c.point3={visProp:{}},p=q.meetLineLine(c.line1.stdform,c.line2.stdform,0,b),d.isArray(a[2])?(2===a[2].length&&(a[2]=[1].concat(a[2])),s=[0,c.line1.stdform[1],c.line1.stdform[2]],s=l.crossProduct(s,a[2]),s=q.meetLineLine(s,c.line1.stdform,0,b),s=e.subtract(s.usrCoords,p.usrCoords),c.direction1=0<=l.innerProduct(s,[0,c.line1.stdform[2],-c.line1.stdform[1]],3)?1:-1):c.direction1=0<=a[2]?1:-1,d.isArray(a[3])?(2===a[3].length&&(a[3]=[1].concat(a[3])),s=[0,c.line2.stdform[1],c.line2.stdform[2]],
s=l.crossProduct(s,a[3]),s=q.meetLineLine(s,c.line2.stdform,0,b),s=e.subtract(s.usrCoords,p.usrCoords),c.direction2=0<=l.innerProduct(s,[0,c.line2.stdform[2],-c.line2.stdform[1]],3)?1:-1):c.direction2=0<=a[3]?1:-1,c.updateDataArray=function(){var a,b,d,f,k,m,n;return b=this.line1,d=this.line2,k=l.crossProduct(b.stdform,d.stdform),k[1]/=k[0],k[2]/=k[0],k[0]/=k[0],a=this.direction1*this.Radius(),f=e.add(k,[0,a*b.stdform[2],-a*b.stdform[1]]),a=this.direction2*this.Radius(),m=e.add(k,[0,a*d.stdform[2],
-a*d.stdform[1]]),this.point2.coords=new h(g.COORDS_BY_USER,f,c.board),this.point1.coords=new h(g.COORDS_BY_USER,k,c.board),this.point3.coords=new h(g.COORDS_BY_USER,m,c.board),Math.abs(f[0])<l.eps||Math.abs(k[0])<l.eps||Math.abs(m[0])<l.eps?(this.dataX=[0/0],this.dataY=[0/0],void 0):(n=q.bezierArc(f,k,m,!0,1),this.dataX=n[0],this.dataY=n[1],this.bezierDegree=3,void 0)},c.methodMap=m.deepCopy(c.methodMap,{radius:"getRadius",getRadius:"getRadius",setRadius:"setRadius"}),c.prepareUpdate().update()):
"3points"===v&&(c.point1=b.select(a[0]),c.point2=b.select(a[1]),c.point3=b.select(a[2]),c.point1.addChild(c),c.point2.addChild(c),c.point3.addChild(c),c.useDirection=k.usedirection,c.parents=[a[0].id,a[1].id,a[2].id],d.exists(a[3])&&(c.point4=b.select(a[3]),c.point4.addChild(c)),c.methodMap=m.deepCopy(c.methodMap,{center:"center",radiuspoint:"radiuspoint",anglepoint:"anglepoint",radius:"getRadius",getRadius:"getRadius",setRadius:"setRadius"}),c.updateDataArray=function(){var a,b,c,e,f,g=this.point2,
h=this.point1,k=this.point3;return g.isReal&&h.isReal&&k.isReal?(this.useDirection&&d.exists(this.point4)&&(c=this.point2.coords.usrCoords,e=this.point4.coords.usrCoords,f=this.point3.coords.usrCoords,b=(c[1]-f[1])*(c[2]-e[2])-(c[2]-f[2])*(c[1]-e[1]),0<=b&&(k=this.point2,g=this.point3)),g=g.coords.usrCoords,h=h.coords.usrCoords,k=k.coords.usrCoords,a=q.bezierArc(g,h,k,!0,1),this.dataX=a[0],this.dataY=a[1],this.bezierDegree=3,void 0):(this.dataX=[0/0],this.dataY=[0/0],void 0)},c.Radius=function(){return this.point2.Dist(this.point1)}),
c.center=c.point1,c.radiuspoint=c.point2,c.anglepoint=c.point3,c.hasPointCurve=function(a,b){var c,d,e=this.board.options.precision.hasPoint/this.board.unitX,f=new h(g.COORDS_BY_SCREEN,[a,b],this.board),k=this.Radius(),l=this.center.coords.distance(g.COORDS_BY_USER,f),e=Math.abs(l-k)<e;return e&&(c=q.rad(this.point2,this.center,f.usrCoords.slice(1)),d=q.rad(this.point2,this.center,this.point3),(0>c||c>d)&&(e=!1)),e},c.hasPointSector=function(a,b){var c,d=new h(g.COORDS_BY_SCREEN,[a,b],this.board),
e=this.Radius(),f=this.point1.coords.distance(g.COORDS_BY_USER,d),e=e>f;return e&&(c=q.rad(this.point2,this.point1,d.usrCoords.slice(1)),c>q.rad(this.point2,this.point1,this.point3)&&(e=!1)),e},c.hasPoint=function(a,b){return this.visProp.highlightonsector?this.hasPointSector(a,b):this.hasPointCurve(a,b)},c.getTextAnchor=function(){return this.point1.coords},c.getLabelAnchor=function(){var a,b,c,e,f=q.rad(this.point2,this.point1,this.point3),k=13/this.board.unitX,l=13/this.board.unitY,m=this.point2.coords.usrCoords,
n=this.point1.coords.usrCoords,p=m[1]-n[1],m=m[2]-n[2];return d.exists(this.label)&&(this.label.relativeCoords=new h(g.COORDS_BY_SCREEN,[0,0],this.board)),a=new h(g.COORDS_BY_USER,[n[1]+Math.cos(.5*f)*p-Math.sin(.5*f)*m,n[2]+Math.sin(.5*f)*p+Math.cos(.5*f)*m],this.board),b=a.usrCoords[1]-n[1],c=a.usrCoords[2]-n[2],e=Math.sqrt(b*b+c*c),b=b*(e+k)/e,c=c*(e+l)/e,new h(g.COORDS_BY_USER,[n[1]+b,n[2]+c],this.board)},c.setRadius=function(a){c.Radius=function(){return d.evaluate(a)}},c.getRadius=function(){return this.Radius()},
c.prepareUpdate().update(),c},m.registerElement("sector",m.createSector),m.createCircumcircleSector=function(b,a,e){var c,f,g;if(!(d.isPoint(a[0])&&d.isPoint(a[1])&&d.isPoint(a[2])))throw Error("JSXGraph: Can't create circumcircle sector with parent types '"+typeof a[0]+"' and '"+typeof a[1]+"' and '"+typeof a[2]+"'.");return g=d.copyAttributes(e,b.options,"circumcirclesector","center"),f=b.create("circumcenter",[a[0],a[1],a[2]],g),f.dump=!1,g=d.copyAttributes(e,b.options,"circumcirclesector"),c=
b.create("sector",[f,a[0],a[2],a[1]],g),c.elType="circumcirclesector",c.parents=[a[0].id,a[1].id,a[2].id],c.center=f,c.subs={center:f},c},m.registerElement("circumcirclesector",m.createCircumcircleSector),m.createAngle=function(b,a,e){var c,f,m,p,s,v="invalid";if(d.isPoint(a[0])&&d.isPoint(a[1])&&d.isPoint(a[2])?v="3points":a[0].elementClass===g.OBJECT_CLASS_LINE&&a[1].elementClass===g.OBJECT_CLASS_LINE&&(d.isArray(a[2])||d.isNumber(a[2]))&&(d.isArray(a[3])||d.isNumber(a[3]))&&(v="2lines"),"invalid"===
v)throw Error("JSXGraph: Can't create angle with parent types '"+typeof a[0]+"' and '"+typeof a[1]+"' and '"+typeof a[2]+"'.");if(p=d.copyAttributes(e,b.options,"angle"),m=p.name,d.exists(m)&&""!==m||(m=b.generateName({type:g.OBJECT_TYPE_ANGLE}),p.name=m),f=d.exists(p.radius)?p.radius:0,"2lines"===v?(c=b.create("sector",[a[0],a[1],a[2],a[3],f],p),c.updateDataArraySector=c.updateDataArray,c.setAngle=function(){},c.free=function(){}):(c=b.create("sector",[a[1],a[0],a[2]],p),c.point=c.point2=c.radiuspoint=
a[0],c.pointsquare=c.point3=c.anglepoint=a[2],c.Radius=function(){return d.evaluate(f)},c.updateDataArraySector=function(){var a;a=this.point2;var b=this.point1,c=this.point3,d=this.Radius(),e=b.Dist(a);a=a.coords.usrCoords;b=b.coords.usrCoords;c=c.coords.usrCoords;a=[1,b[1]+(a[1]-b[1])*d/e,b[2]+(a[2]-b[2])*d/e];c=[1,b[1]+(c[1]-b[1])*d/e,b[2]+(c[2]-b[2])*d/e];a=q.bezierArc(a,b,c,!0,1);this.dataX=a[0];this.dataY=a[1];this.bezierDegree=3},c.setAngle=function(a){var b,c=this.anglepoint,d=this.radiuspoint;
return c.draggable()&&(b=this.board.create("transform",[a,this.center],{type:"rotate"}),c.addTransform(d,b),c.isDraggable=!1,c.parents=[d]),this},c.free=function(){var a=this.anglepoint;return 0<a.transformations.length&&(a.transformations.pop(),a.isDraggable=!0,a.parents=[]),this}),c.elType="angle",c.type=g.OBJECT_TYPE_ANGLE,c.parents=[a[0].id,a[1].id,a[2].id],c.subs={},c.updateDataArraySquare=function(){var a,b,c,d,e,f=this.Radius();"2lines"===v&&this.updateDataArraySector();a=this.point2;b=this.point1;
c=this.point3;a=a.coords.usrCoords;b=b.coords.usrCoords;c=c.coords.usrCoords;d=q.distance(a,b,3);e=q.distance(c,b,3);a=[1,b[1]+(a[1]-b[1])*f/d,b[2]+(a[2]-b[2])*f/d];c=[1,b[1]+(c[1]-b[1])*f/e,b[2]+(c[2]-b[2])*f/e];d=l.crossProduct(c,b);e=[-a[1]*d[1]-a[2]*d[2],a[0]*d[1],a[0]*d[2]];d=l.crossProduct(a,b);d=l.crossProduct(e,[-c[1]*d[1]-c[2]*d[2],c[0]*d[1],c[0]*d[2]]);d[1]/=d[0];d[2]/=d[0];this.dataX=[b[1],a[1],d[1],c[1],b[1]];this.dataY=[b[2],a[2],d[2],c[2],b[2]];this.bezierDegree=1},c.updateDataArrayNone=
function(){this.dataX=[0/0];this.dataY=[0/0];this.bezierDegree=1},c.updateDataArray=function(){var a=this.visProp.type,b=q.trueAngle(this.point2,this.point1,this.point3);Math.abs(b-90)<this.visProp.orthosensitivity&&(a=this.visProp.orthotype);"none"===a?this.updateDataArrayNone():"square"===a?this.updateDataArraySquare():"sector"===a?this.updateDataArraySector():"sectordot"===a&&(this.updateDataArraySector(),this.dot.visProp.visible||this.dot.setAttribute({visible:!0}));(!this.visProp.visible||"sectordot"!==
a&&this.dot.visProp.visible)&&this.dot.setAttribute({visible:!1})},s=d.copyAttributes(e,b.options,"angle","dot"),c.dot=b.create("point",[function(){var a,b,e,f,g,h,k,m;return d.exists(c.dot)&&!c.dot.visProp.visible?[0,0]:(a=c.point2.coords.usrCoords,b=c.point1.coords.usrCoords,e=c.Radius(),f=q.distance(a,b,3),g=.5*q.rad(c.point2,c.point1,c.point3),h=Math.cos(g),k=Math.sin(g),a=[1,b[1]+(a[1]-b[1])*e/f,b[2]+(a[2]-b[2])*e/f],m=[[1,0,0],[b[1]-.5*b[1]*h+.5*b[2]*k,.5*h,.5*-k],[b[2]-.5*b[1]*k-.5*b[2]*h,
.5*k,.5*h]],l.matVecMult(m,a))}],s),c.dot.dump=!1,c.subs.dot=c.dot,"2lines"===v)for(e=0;2>e;e++)b.select(a[e]).addChild(c.dot);else for(e=0;3>e;e++)b.select(a[e]).addChild(c.dot);return c.getLabelAnchor=function(){var a,b,e,f,k,m,n,p,s,v=12;return d.exists(this.label)&&(this.label.relativeCoords=new h(g.COORDS_BY_SCREEN,[0,0],this.board)),d.exists(this.label.visProp.fontSize)&&(v=this.label.visProp.fontSize),v/=this.board.unitX,b=c.point2.coords.usrCoords,e=c.point1.coords.usrCoords,f=c.Radius(),
k=q.distance(b,e,3),m=.5*q.rad(c.point2,c.point1,c.point3),n=Math.cos(m),p=Math.sin(m),b=[1,e[1]+(b[1]-e[1])*f/k,e[2]+(b[2]-e[2])*f/k],s=[[1,0,0],[e[1]-.5*e[1]*n+.5*e[2]*p,.5*n,.5*-p],[e[2]-.5*e[1]*p-.5*e[2]*n,.5*p,.5*n]],a=l.matVecMult(s,b),a[1]/=a[0],a[2]/=a[0],a[0]/=a[0],k=q.distance(a,e,3),a=[a[0],e[1]+(a[1]-e[1])*(f+v)/k,e[2]+(a[2]-e[2])*(f+v)/k],new h(g.COORDS_BY_USER,a,this.board)},c.Value=function(){return q.rad(this.point2,this.point1,this.point3)},c.methodMap=d.deepCopy(c.methodMap,{Value:"Value",
setAngle:"setAngle",free:"free"}),c},m.registerElement("angle",m.createAngle),{createSector:m.createSector,createCircumcircleSector:m.createCircumcircleSector,createAngle:m.createAngle}});E("element/locus",["jxg","math/symbolic","utils/type","base/constants","base/curve"],function(m,q,l,e){return m.createLocus=function(h,g,d){var b,a;if(!l.isArray(g)||1!==g.length||g[0].elementClass!==e.OBJECT_CLASS_POINT)throw Error("JSXGraph: Can't create locus with parent of type other than point.\nPossible parent types: [point]");
return a=g[0],b=h.create("curve",[[null],[null]],d),b.dontCallServer=!1,b.elType="locus",b.parents=[a.id],b.updateDataArray=function(){var d,c,e;0<b.board.mode||(d=q.generatePolynomials(h,a,!0).join("|"),d!==b.spe&&(b.spe=d,c=function(a,c,d,e){b.dataX=a;b.dataY=c;b.eq=d;b.ctime=e;b.generatePolynomial=function(a){return function(b){var c="("+b.symbolic.x+")",d="("+b.symbolic.y+")",e=[];for(b=0;b<a.length;b++)e[b]=a[b].replace(/\*\*/g,"^").replace(/x/g,c).replace(/y/g,d);return e}}(d)},e=q.geometricLocusByGroebnerBase(h,
a,c),c(e.datax,e.datay,e.polynomial,e.exectime)))},b},m.registerElement("locus",m.createLocus),{createLocus:m.createLocus}});E("base/image","jxg base/constants base/coords base/element math/math math/statistics utils/type".split(" "),function(m,q,l,e,h,g,d){return m.Image=function(b,a,e,c,f){this.constructor(b,f,q.OBJECT_TYPE_IMAGE,q.OBJECT_CLASS_OTHER);this.initialCoords=new l(q.COORDS_BY_USER,e,this.board);d.isFunction(e[0])||d.isFunction(e[1])||(this.isDraggable=!0);this.X=d.createFunction(e[0],
this.board,"");this.Y=d.createFunction(e[1],this.board,"");this.Z=d.createFunction(1,this.board,"");this.W=d.createFunction(c[0],this.board,"");this.H=d.createFunction(c[1],this.board,"");this.coords=new l(q.COORDS_BY_USER,[this.X(),this.Y()],this.board);this.usrSize=[this.W(),this.H()];this.size=[Math.abs(this.usrSize[0]*b.unitX),Math.abs(this.usrSize[1]*b.unitY)];this.url=a;this.elType="image";this.span=[[this.Z(),this.X(),this.Y()],[this.Z(),this.W(),0],[this.Z(),0,this.H()]];this.parent=b.select(f.anchor);
this.id=this.board.setId(this,"Im");this.board.renderer.drawImage(this);this.visProp.visible||this.board.renderer.hide(this);this.methodMap=m.deepCopy(this.methodMap,{addTransformation:"addTransform",trans:"addTransform"})},m.Image.prototype=new e,m.extend(m.Image.prototype,{hasPoint:function(b,a){var d,c,e,g,m,s,v;return 0===this.transformations.length?(d=b-this.coords.scrCoords[1],c=this.coords.scrCoords[2]-a,e=this.board.options.precision.hasPoint,d>=-e&&d-this.size[0]<=e&&c>=-e&&c-this.size[1]<=
e):(g=new l(q.COORDS_BY_SCREEN,[b,a],this.board),g=g.usrCoords,m=[g[0]-this.span[0][0],g[1]-this.span[0][1],g[2]-this.span[0][2]],v=h.innerProduct,s=v(m,this.span[1]),0<=s&&s<=v(this.span[1],this.span[1])&&(s=v(m,this.span[2]),0<=s&&s<=v(this.span[2],this.span[2]))?!0:!1)},update:function(){return this.needsUpdate&&(this.visProp.frozen||this.updateCoords(),this.usrSize=[this.W(),this.H()],this.size=[Math.abs(this.usrSize[0]*this.board.unitX),Math.abs(this.usrSize[1]*this.board.unitY)],this.updateTransform(),
this.updateSpan()),this},updateRenderer:function(){return this.needsUpdate&&(this.board.renderer.updateImage(this),this.needsUpdate=!1),this},updateTransform:function(){var b,a=this.transformations.length;if(0<a)for(b=0;a>b;b++)this.transformations[b].update();return this},updateCoords:function(){this.coords.setCoordinates(q.COORDS_BY_USER,[this.X(),this.Y()])},updateSize:function(){this.coords.setCoordinates(q.COORDS_BY_USER,[this.W(),this.H()])},updateSpan:function(){var b,a,d=this.transformations.length,
c=[];if(0===d)this.span=[[this.Z(),this.X(),this.Y()],[this.Z(),this.W(),0],[this.Z(),0,this.H()]];else{c[0]=[this.Z(),this.X(),this.Y()];c[1]=[this.Z(),this.X()+this.W(),this.Y()];c[2]=[this.Z(),this.X(),this.Y()+this.H()];for(b=0;d>b;b++)for(a=0;3>a;a++)c[a]=h.matVecMult(this.transformations[b].matrix,c[a]);for(a=0;3>a;a++)c[a][1]/=c[a][0],c[a][2]/=c[a][0],c[a][0]/=c[a][0];for(a=1;3>a;a++)c[a][0]-=c[0][0],c[a][1]-=c[0][1],c[a][2]-=c[0][2];this.span=c}return this},addTransform:function(b){var a;
if(d.isArray(b))for(a=0;a<b.length;a++)this.transformations.push(b[a]);else this.transformations.push(b)},setPositionDirectly:function(b,a,e){var c;a=new l(b,a,this.board);b=new l(b,e,this.board);e=[this.Z(),this.X(),this.Y()];return c=g.subtract(a.usrCoords,b.usrCoords),this.X=d.createFunction(e[1]+c[1],this.board,""),this.Y=d.createFunction(e[2]+c[2],this.board,""),this.visProp.snaptogrid&&(this.coords.setCoordinates(q.COORDS_BY_USER,a.usrCoords),this.snapToGrid(),this.X=d.createFunction(this.coords.usrCoords[1],
this.board,""),this.Y=d.createFunction(this.coords.usrCoords[2],this.board,"")),this},snapToGrid:function(){return this.handleSnapToGrid()}}),m.createImage=function(b,a,e){var c,f;return c=d.copyAttributes(e,b.options,"image"),f=new m.Image(b,a[0],a[1],a[2],c),0!==d.evaluate(c.rotate)&&f.addRotation(d.evaluate(c.rotate)),f},m.registerElement("image",m.createImage),{Image:m.Image,createImage:m.createImage}});E("element/slider","jxg math/math base/constants utils/type base/point base/group base/line base/ticks base/text".split(" "),
function(m,q,l,e,h){return m.createSlider=function(g,d,b){var a,k,c,f,m,p,s,v,r,y,x,u,t,w,z,B,A,C,F,D;return a=d[0],k=d[1],c=d[2][0],f=d[2][1],m=d[2][2],p=m-c,F=e.copyAttributes(b,g.options,"slider"),A=F.withticks,B=F.withlabel,C=F.snapwidth,D=F.precision,F=e.copyAttributes(b,g.options,"slider","point1"),s=g.create("point",a,F),F=e.copyAttributes(b,g.options,"slider","point2"),v=g.create("point",k,F),g.create("group",[s,v]),F=e.copyAttributes(b,g.options,"slider","baseline"),r=g.create("segment",
[s,v],F),r.updateStdform(),A&&(F=e.copyAttributes(b,g.options,"slider","ticks"),y=g.create("ticks",[r,v.Dist(s)/2,function(a){var b=s.Dist(v);a=s.coords.distance(l.COORDS_BY_USER,a);return b<q.eps?0:a/b*p+c}],F)),x=a[0]+(k[0]-a[0])*(f-c)/(m-c),u=a[1]+(k[1]-a[1])*(f-c)/(m-c),F=e.copyAttributes(b,g.options,"slider"),F.withLabel=!1,t=g.create("glider",[x,u,r],F),t.setAttribute({snapwidth:C}),F=e.copyAttributes(b,g.options,"slider","highline"),w=g.create("segment",[s,t],F),t.Value=function(){var a=this._smax-
this._smin;return-1===t.visProp.snapwidth?this.position*a+this._smin:Math.round((this.position*a+this._smin)/this.visProp.snapwidth)*this.visProp.snapwidth},t.methodMap=e.deepCopy(t.methodMap,{Value:"Value",smax:"_smax",smin:"_smin"}),t._smax=m,t._smin=c,B&&(F=e.copyAttributes(b,g.options,"slider","label"),z=g.create("text",[function(){return.05*(v.X()-s.X())+v.X()},function(){return.05*(v.Y()-s.Y())+v.Y()},function(){var a;return a=t.name&&""!==t.name?t.name+" = ":"",a+t.Value().toFixed(D)}],F),
t.label=z,t.visProp.withlabel=!0,t.hasLabel=!0),t.point1=s,t.point2=v,t.baseline=r,t.highline=w,A&&(t.ticks=y),t.remove=function(){B&&g.removeObject(z);g.removeObject(w);g.removeObject(r);g.removeObject(v);g.removeObject(s);h.Point.prototype.remove.call(t)},s.dump=!1,v.dump=!1,r.dump=!1,w.dump=!1,t.elType="slider",t.parents=d,t.subs={point1:s,point2:v,baseLine:r,highLine:w},A&&(y.dump=!1,t.subs.ticks=y),t},m.registerElement("slider",m.createSlider),{createSlider:m.createSlider}});E("element/measure",
"jxg utils/type base/element base/point base/line base/ticks".split(" "),function(m,q,l){return m.createTapemeasure=function(e,h,g){var d,b,a,k,c,f,n,p,s,v,r;return d=h[0],b=h[1],a=q.copyAttributes(g,e.options,"tapemeasure"),k=a.withticks,c=a.withlabel,f=a.precision,a=q.copyAttributes(g,e.options,"tapemeasure","point1"),p=e.create("point",d,a),a=q.copyAttributes(g,e.options,"tapemeasure","point2"),s=e.create("point",b,a),a=q.copyAttributes(g,e.options,"tapemeasure"),c&&(a.withlabel=!0),n=e.create("segment",
[p,s],a),c&&(v=g.name&&""!==g.name?g.name+" = ":"",n.label.setText(function(){return v+p.Dist(s).toFixed(f)})),k&&(a=q.copyAttributes(g,e.options,"tapemeasure","ticks"),r=e.create("ticks",[n,.1],a)),n.remove=function(){k&&n.removeTicks(r);e.removeObject(s);e.removeObject(p);l.prototype.remove.call(this)},n.Value=function(){return p.Dist(s)},p.dump=!1,s.dump=!1,n.elType="tapemeasure",n.parents=h,n.subs={point1:p,point2:s},k&&(r.dump=!1),n.methodMap=m.deepCopy(n.methodMap,{Value:"Value"}),n},m.registerElement("tapemeasure",
m.createTapemeasure),{createTapemeasure:m.createTapemeasure}});E("parser/datasource",["jxg","utils/type"],function(m,q){return m.DataSource=function(){return this.data=[],this.columnHeaders=[],this.rowHeaders=[],this},m.extend(m.DataSource.prototype,{loadFromArray:function(l,e,h){var g,d,b;if(q.isArray(e)&&(this.columnHeaders=e,e=!1),q.isArray(h)&&(this.rowHeaders=h,h=!1),this.data=[],e&&(this.columnHeaders=[]),h&&(this.rowHeaders=[]),q.exists(l)){this.data=[];for(g=0;g<l.length;g++)for(this.data[g]=
[],d=0;d<l[g].length;d++)b=l[g][d],this.data[g][d]=parseFloat(b).toString()===b?parseFloat(b):"-"!==b?b:0/0;if(e&&(this.columnHeaders=this.data[0].slice(1),this.data=this.data.slice(1)),h)for(this.rowHeaders=[],g=0;g<this.data.length;g++)this.rowHeaders.push(this.data[g][0]),this.data[g]=this.data[g].slice(1)}return this},loadFromTable:function(l,e,h){var g,d,b,a;if(q.isArray(e)&&(this.columnHeaders=e,e=!1),q.isArray(h)&&(this.rowHeaders=h,h=!1),this.data=[],e&&(this.columnHeaders=[]),h&&(this.rowHeaders=
[]),l=document.getElementById(l),q.exists(l)){l=l.getElementsByTagName("tr");this.data=[];for(g=0;g<l.length;g++)for(b=l[g].getElementsByTagName("td"),this.data[g]=[],d=0;d<b.length;d++)a=b[d].innerHTML,this.data[g][d]=parseFloat(a).toString()===a?parseFloat(a):"-"!==a?a:0/0;if(e&&(this.columnHeaders=this.data[0].slice(1),this.data=this.data.slice(1)),h)for(this.rowHeaders=[],g=0;g<this.data.length;g++)this.rowHeaders.push(this.data[g][0]),this.data[g]=this.data[g].slice(1)}return this},addColumn:function(){throw Error("not implemented");
},addRow:function(){throw Error("not implemented");},getColumn:function(l){var e,h=[];if("string"==typeof l)for(e=0;e<this.columnHeaders.length;e++)if(l===this.columnHeaders[e]){l=e;break}for(e=0;e<this.data.length;e++)this.data[e].length>l&&(h[e]=parseFloat(this.data[e][l]));return h},getRow:function(l){var e,h;if("string"==typeof l)for(h=0;h<this.rowHeaders.length;h++)if(l===this.rowHeaders[h]){l=h;break}e=[];for(h=0;h<this.data[l].length;h++)e[h]=this.data[l][h];return e}}),m.DataSource});E("base/chart",
"jxg math/numerics math/statistics base/constants base/coords base/element parser/datasource utils/color utils/type utils/env base/curve base/point base/text base/polygon element/sector base/transformation base/line base/circle".split(" "),function(m,q,l,e,h,g,d,b,a,k){return m.Chart=function(b,d,e){this.constructor(b,e);var g,h,k,l,m;if(!a.isArray(d)||0===d.length)throw Error("JSXGraph: Can't create a chart without data");if(this.elements=[],a.isNumber(d[0]))for(h=d,g=[],k=0;k<h.length;k++)g[k]=
k+1;else if(1===d.length&&a.isArray(d[0]))for(h=d[0],g=[],m=a.evaluate(h).length,k=0;m>k;k++)g[k]=k+1;else 2===d.length&&(m=Math.min(d[0].length,d[1].length),g=d[0].slice(0,m),h=d[1].slice(0,m));if(a.isArray(h)&&0===h.length)throw Error("JSXGraph: Can't create charts without data.");m=e.chartstyle.replace(/ /g,"").split(",");for(k=0;k<m.length;k++){switch(m[k]){case "bar":l=this.drawBar(b,g,h,e);break;case "line":l=this.drawLine(b,g,h,e);break;case "fit":l=this.drawFit(b,g,h,e);break;case "spline":l=
this.drawSpline(b,g,h,e);break;case "pie":l=this.drawPie(b,h,e);break;case "point":l=this.drawPoints(b,g,h,e);break;case "radar":l=this.drawRadar(b,d,e)}this.elements.push(l)}return this.id=this.board.setId(this,"Chart"),this.elements},m.Chart.prototype=new g,m.extend(m.Chart.prototype,{drawLine:function(a,b,d,e){return e.fillcolor="none",e.highlightfillcolor="none",a.create("curve",[b,d],e)},drawSpline:function(a,b,d,e){return e.fillColor="none",e.highlightfillcolor="none",a.create("spline",[b,d],
e)},drawFit:function(a,b,d,e){var g=e.degree;return g=Math.max(parseInt(g,10),1)||1,e.fillcolor="none",e.highlightfillcolor="none",a.create("functiongraph",[q.regressionPolynomial(g,b,d)],e)},drawBar:function(b,d,e,g){var h,k,l,m,q,u,t,w,z,B,A,C=[],F=[],D=function(a,b){return function(){return d[a]()-b*q}},E={fixed:!0,withLabel:!1,visible:!1,name:""};if(a.exists(g.fillopacity)||(g.fillopacity=.6),g&&g.width)q=g.width;else{if(1>=d.length)q=1;else for(q=d[1]-d[0],h=1;h<d.length-1;h++)q=d[h+1]-d[h]<
q?d[h+1]-d[h]:q;q*=.8}A=a.copyAttributes(g,b.options,"chart","label");l=parseFloat(A.fontsize);for(h=0;h<d.length;h++)a.isFunction(d[h])?(u=D(h,-.5),t=D(h,0),w=D(h,.5)):(u=d[h]-.5*q,t=d[h],w=d[h]+.5*q),z=e[h],"horizontal"===g.dir?(F[0]=b.create("point",[0,u],E),F[1]=b.create("point",[z,u],E),F[2]=b.create("point",[z,w],E),F[3]=b.create("point",[0,w],E),a.exists(g.labels)&&a.exists(g.labels[h])&&(k=g.labels[h].toString().length,k=2*k*l/b.unitX,0<=z?z+=.5*l/b.unitX:z-=l*k/b.unitX,t-=.2*l/b.unitY,m=
b.create("text",[z,t,g.labels[h]].toString(),A))):(F[0]=b.create("point",[u,0],E),F[1]=b.create("point",[u,z],E),F[2]=b.create("point",[w,z],E),F[3]=b.create("point",[w,0],E),a.exists(g.labels)&&a.exists(g.labels[h])&&(k=g.labels[h].toString().length,k=.6*k*l/b.unitX,0<=z?z+=.5*l/b.unitY:z-=l/b.unitY,m=b.create("text",[t-.5*k,z,g.labels[h].toString()],A))),g.withlines=!1,a.isArray(g.colors)&&(B=g.colors,g.fillcolor=B[h%B.length]),C[h]=b.create("polygon",F,g),a.exists(g.labels)&&a.exists(g.labels[h])&&
(C[h].text=m);return C},drawPoints:function(a,b,d,e){var g,h=[],k=e.infoboxarray;e.fixed=!0;e.name="";for(g=0;g<b.length;g++)e.infoboxtext=k?k[g%k.length]:!1,h[g]=a.create("point",[b[g],d[g]],e);return h},drawPie:function(b,d,g){var k,m,q=[],r=[],y=(l.sum(d),g.colors),x=g.highlightcolors,u=g.labels,t=g.radius||4,w=t;k=g.center||[0,0];var z=k[0],B=k[1],A=function(b,c,e){return function(){var g,h,k,l=0;for(h=0;b>=h;h++)l+=parseFloat(a.evaluate(d[h]));g=l;for(h=b+1;h<d.length;h++)g+=parseFloat(a.evaluate(d[h]));
return k=0!==g?2*Math.PI*l/g:0,w()*Math[c](k)+e}},C=function(b,c){var d=-this.point1.coords.usrCoords[1]+this.point2.coords.usrCoords[1],f=-this.point1.coords.usrCoords[2]+this.point2.coords.usrCoords[2];a.exists(this.label)&&(this.label.rendNode.style.fontSize=c*this.label.visProp.fontsize+"px",this.label.prepareUpdate().update().updateRenderer());this.point2.coords=new h(e.COORDS_BY_USER,[this.point1.coords.usrCoords[1]+d*b,this.point1.coords.usrCoords[2]+f*b],this.board);this.prepareUpdate().update().updateRenderer()},
F=function(){this.highlighted||(this.highlighted=!0,this.board.highlightedObjects[this.id]=this,this.board.renderer.highlight(this),C.call(this,1.1,2))},D=function(){this.highlighted&&(this.highlighted=!1,this.board.renderer.noHighlight(this),C.call(this,.9090909,1))},E={fixed:!0,withLabel:!1,visible:!1,name:""};if(!a.isArray(u))for(u=[],k=0;k<d.length;k++)u[k]="";a.isFunction(t)||(w=function(){return t});g.highlightonsector=g.highlightonsector||!1;g.straightfirst=!1;g.straightlast=!1;m=b.create("point",
[z,B],E);q[0]=b.create("point",[function(){return w()+z},function(){return B}],E);for(k=0;k<d.length;k++)q[k+1]=b.create("point",[A(k,"cos",z),A(k,"sin",B)],E),g.name=u[k],g.withlabel=""!==g.name,g.fillcolor=y&&y[k%y.length],g.labelcolor=y&&y[k%y.length],g.highlightfillcolor=x&&x[k%x.length],r[k]=b.create("sector",[m,q[k],q[k+1]],g),g.highlightonsector&&(r[k].hasPoint=r[k].hasPointSector),g.highlightbysize&&(r[k].highlight=F,r[k].noHighlight=D);return{sectors:r,points:q,midpoint:m}},drawRadar:function(b,
d,g){var k,l,q,r,y,x,u,t,w,z,B,A,C,E,D,J,G,L,N,M,H,I,P,K,R;I=d.length;var T=function(){var a,b,c,d,f=this.visProp.label.offset.slice(0);return a=this.point1.X(),b=this.point2.X(),c=this.point1.Y(),d=this.point2.Y(),a>b&&(f[0]=-f[0]),c>d&&(f[1]=-f[1]),this.setLabelRelativeCoords(f),new h(e.COORDS_BY_USER,[this.point2.X(),this.point2.Y()],this.board)},O=function(a,d){var e,f,g;return e=b.create("transform",[-(D[d]-C[d]),0],{type:"translate"}),f=b.create("transform",[G/(J[d]+E[d]-(D[d]-C[d])),1],{type:"scale"}),
e.melt(f),g=b.create("transform",[a],{type:"rotate"}),e.melt(g),e};if(0>=I)return m.debug("No data"),void 0;if(q=g.paramarray,!a.exists(q))return m.debug("Need paramArray attribute"),void 0;if(r=q.length,1>=r)return m.debug("Need more than 1 param"),void 0;for(k=0;I>k;k++)if(r!==d[k].length)return m.debug("Use data length equal to number of params ("+d[k].length+" != "+r+")"),void 0;y=[];x=[];for(l=0;r>l;l++)y[l]=d[0][l],x[l]=y[l];for(k=1;I>k;k++)for(l=0;r>l;l++)d[k][l]>y[l]&&(y[l]=d[k][l]),d[k][l]<
x[l]&&(x[l]=d[k][l]);u=[];t=[];for(k=0;I>k;k++)u[k]="",t[k]=[];w=[];z=[];B=g.startshiftratio||0;A=g.endshiftratio||0;for(k=0;r>k;k++)w[k]=(y[k]-x[k])*B,z[k]=(y[k]-x[k])*A;if(C=g.startshiftarray||w,E=g.endshiftarray||z,D=g.startarray||x,a.exists(g.start))for(k=0;r>k;k++)D[k]=g.start;if(J=g.endarray||y,a.exists(g.end))for(k=0;r>k;k++)J[k]=g.end;if(C.length!==r)return m.debug("Start shifts length is not equal to number of parameters"),void 0;if(E.length!==r)return m.debug("End shifts length is not equal to number of parameters"),
void 0;if(D.length!==r)return m.debug("Starts length is not equal to number of parameters"),void 0;if(J.length!==r)return m.debug("Ends length is not equal to number of parameters"),void 0;z=g.labelarray||u;B=g.colors;G=g.radius||10;k=g.strokewidth||1;a.exists(g.highlightonsector)||(g.highlightonsector=!1);y={name:g.name,id:g.id,strokewidth:k,polystrokewidth:g.polystrokewidth||k,strokecolor:g.strokecolor||"black",straightfirst:!1,straightlast:!1,fillcolor:g.fillColor||"#FFFF88",fillopacity:g.fillOpacity||
.4,highlightfillcolor:g.highlightFillColor||"#FF7400",highlightstrokecolor:g.highlightStrokeColor||"black",gradient:g.gradient||"none"};k=g.center||[0,0];A=k[0];L=k[1];x=b.create("point",[A,L],{name:"",fixed:!0,withlabel:!1,visible:!1});w=Math.PI/2-Math.PI/r;N=w=g.startangle||0;M=[];u=[];for(k=0;r>k;k++)for(N+=2*Math.PI/r,H=G*Math.cos(N)+A,l=G*Math.sin(N)+L,M[k]=b.create("point",[H,l],{name:"",fixed:!0,withlabel:!1,visible:!1}),u[k]=b.create("line",[x,M[k]],{name:q[k],strokeColor:y.strokecolor,strokeWidth:y.strokewidth,
strokeOpacity:1,straightFirst:!1,straightLast:!1,withLabel:!0,highlightStrokeColor:y.highlightstrokecolor}),u[k].getLabelAnchor=T,H=O(N,k),l=0;l<d.length;l++)R=d[l][k],t[l][k]=b.create("point",[R,0],{name:"",fixed:!0,withlabel:!1,visible:!1}),t[l][k].addTransform(t[l][k],H);d=[];for(k=0;I>k;k++)for(y.labelcolor=B&&B[k%B.length],y.strokecolor=B&&B[k%B.length],y.fillcolor=B&&B[k%B.length],d[k]=b.create("polygon",t[k],{withLines:!0,withLabel:!1,fillColor:y.fillcolor,fillOpacity:y.fillopacity,highlightFillColor:y.highlightfillcolor}),
l=0;r>l;l++)d[k].borders[l].setAttribute("strokecolor:"+B[k%B.length]),d[k].borders[l].setAttribute("strokewidth:"+y.polystrokewidth);switch(g.legendposition||"none"){case "right":k=g.legendleftoffset||2;I=g.legendtopoffset||1;this.legend=b.create("legend",[A+G+k,L+G-I],{labels:z,colors:B});break;case "none":break;default:m.debug("Unknown legend position")}if(I=[],g.showcircles){q=[];for(k=0;6>k;k++)q[k]=20*k;if(q[0]="0",P=g.circlelabelarray||q,K=P.length,2>K)return m.debug("Too less circles"),void 0;
q=[];r=w+Math.PI/r;H=O(r,0);y.fillcolor="none";y.highlightfillcolor="none";y.strokecolor=g.strokecolor||"black";y.strokewidth=g.circlestrokewidth||.5;y.layer=0;g=(J[0]-D[0])/(K-1);for(k=0;K>k;k++)q[k]=b.create("point",[D[0]+k*g,0],{name:P[k],size:0,fixed:!0,withLabel:!0,visible:!0}),q[k].addTransform(q[k],H),I[k]=b.create("circle",[x,q[k]],y)}return this.rendNode=d[0].rendNode,{circles:I,lines:u,points:t,midpoint:x,polygons:d}},updateRenderer:function(){return this},update:function(){return this.needsUpdate&&
this.updateDataArray(),this},updateDataArray:function(){}}),m.createChart=function(c,e,g){var h,l,q,r,y,x,u,t,w,z,B,A,C=[];q=k.isBrowser?c.document.getElementById(e[0]):null;if(1===e.length&&"string"==typeof e[0]){if(a.exists(q)){if(y=a.copyAttributes(g,c.options,"chart"),q=(new d).loadFromTable(e[0],y.withheaders,y.withheaders),h=q.data,e=q.columnHeaders,l=q.rowHeaders,x=y.width,u=y.name,t=y.strokecolor,w=y.fillcolor,z=y.highlightstrokecolor,B=y.highlightfillcolor,c.suspendUpdate(),A=h.length,g=
[],y.rows&&a.isArray(y.rows))for(q=0;A>q;q++)for(r=0;r<y.rows.length;r++){if(y.rows[r]===q||y.withheaders&&y.rows[r]===l[q]){g.push(h[q]);break}}else g=h;A=g.length;for(q=0;A>q;q++){if(l=[],y.chartstyle&&-1!==y.chartstyle.indexOf("bar")){h=x?x:.8;l.push(1-h/2+(q+.5)*h/A);for(r=1;r<g[q].length;r++)l.push(l[r-1]+1);y.width=h/A}u&&u.length===A?y.name=u[q]:y.withheaders&&(y.name=e[q]);y.strokecolor=t&&t.length===A?t[q]:b.hsv2rgb((q+1)/A*360,.9,.6);y.fillcolor=w&&w.length===A?w[q]:b.hsv2rgb((q+1)/A*360,
.9,1);y.highlightstrokecolor=z&&z.length===A?z[q]:b.hsv2rgb((q+1)/A*360,.9,1);y.highlightfillcolor=B&&B.length===A?B[q]:b.hsv2rgb((q+1)/A*360,.9,.6);y.chartstyle&&-1!==y.chartstyle.indexOf("bar")?C.push(new m.Chart(c,[l,g[q]],y)):C.push(new m.Chart(c,[g[q]],y))}c.unsuspendUpdate()}return C}return y=a.copyAttributes(g,c.options,"chart"),new m.Chart(c,e,y)},m.registerElement("chart",m.createChart),m.Legend=function(b,d,g){var k;if(this.constructor(),k=a.copyAttributes(g,b.options,"legend"),this.board=
b,this.coords=new h(e.COORDS_BY_USER,d,this.board),this.myAtts={},this.label_array=k.labelarray||k.labels,this.color_array=k.colorarray||k.colors,this.lines=[],this.myAtts.strokewidth=k.strokewidth||5,this.myAtts.straightfirst=!1,this.myAtts.straightlast=!1,this.myAtts.withlabel=!0,this.myAtts.fixed=!0,this.style=k.legendstyle||k.style,"vertical"!==this.style)throw Error("JSXGraph: Unknown legend style: "+this.style);this.drawVerticalLegend(b,k)},m.Legend.prototype=new g,m.Legend.prototype.drawVerticalLegend=
function(a,b){var d,g=b.linelength||1,k=(b.rowheight||20)/this.board.unitY,l=function(){return this.setLabelRelativeCoords(this.visProp.label.offset),new h(e.COORDS_BY_USER,[this.point2.X(),this.point2.Y()],this.board)};for(d=0;d<this.label_array.length;d++)this.myAtts.strokecolor=this.color_array[d],this.myAtts.highlightstrokecolor=this.color_array[d],this.myAtts.name=this.label_array[d],this.myAtts.label={offset:[10,0],strokeColor:this.color_array[d],strokeWidth:this.myAtts.strokewidth},this.lines[d]=
a.create("line",[[this.coords.usrCoords[1],this.coords.usrCoords[2]-d*k],[this.coords.usrCoords[1]+g,this.coords.usrCoords[2]-d*k]],this.myAtts),this.lines[d].getLabelAnchor=l},m.createLegend=function(b,d,e){var g=[0,0];return a.exists(d)&&2===d.length&&(g=d),new m.Legend(b,g,e)},m.registerElement("legend",m.createLegend),{Chart:m.Chart,Legend:m.Legend,createChart:m.createChart,createLegend:m.createLegend}});E("base/turtle","jxg base/constants base/element utils/type base/curve base/point base/line base/transformation".split(" "),
function(m,q,l,e){return m.Turtle=function(h,g,d){var b,a,k;return this.constructor(h,d,q.OBJECT_TYPE_TURTLE,q.OBJECT_CLASS_OTHER),this.turtleIsHidden=!1,this.board=h,this.visProp.curveType="plot",this._attributes=e.copyAttributes(this.visProp,h.options,"turtle"),delete this._attributes.id,b=0,a=0,k=90,0!==g.length&&(3===g.length?(b=g[0],a=g[1],k=g[2]):2===g.length?e.isArray(g[0])?(b=g[0][0],a=g[0][1],k=g[1]):(b=g[0],a=g[1]):(b=g[0][0],a=g[0][1])),this.init(b,a,k),this.methodMap=e.deepCopy(this.methodMap,
{forward:"forward",fd:"forward",back:"back",bk:"back",right:"right",rt:"right",left:"left",lt:"left",penUp:"penUp",pu:"penUp",penDown:"penDown",pd:"penDown",clearScreen:"clearScreen",cs:"clearScreen",clean:"clean",setPos:"setPos",home:"home",hideTurtle:"hideTurtle",ht:"hideTurtle",showTurtle:"showTurtle",st:"showTurtle",penSize:"setPenSize",penColor:"setPenColor",pushTurtle:"pushTurtle",push:"pushTurtle",popTurtle:"popTurtle",pop:"popTurtle",lookTo:"lookTo",pos:"pos",moveTo:"moveTo",X:"X",Y:"Y"}),
this},m.Turtle.prototype=new l,m.extend(m.Turtle.prototype,{init:function(e,g,d){var b={fixed:!0,name:"",visible:!1,withLabel:!1};this.arrowLen=20/Math.sqrt(this.board.unitX*this.board.unitX+this.board.unitY*this.board.unitY);this.pos=[e,g];this.isPenDown=!0;this.dir=90;this.stack=[];this.objects=[];this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes);this.objects.push(this.curve);this.turtle=this.board.create("point",this.pos,b);this.objects.push(this.turtle);this.turtle2=
this.board.create("point",[this.pos[0],this.pos[1]+this.arrowLen],b);this.objects.push(this.turtle2);this.visProp.arrow.lastArrow=!0;this.visProp.arrow.straightFirst=!1;this.visProp.arrow.straightLast=!1;this.arrow=this.board.create("line",[this.turtle,this.turtle2],this.visProp.arrow);this.objects.push(this.arrow);this.right(90-d);this.board.update()},forward:function(e){if(0===e)return this;var g,d=e*Math.cos(this.dir*Math.PI/180);e*=Math.sin(this.dir*Math.PI/180);return this.turtleIsHidden||(g=
this.board.create("transform",[d,e],{type:"translate"}),g.applyOnce(this.turtle),g.applyOnce(this.turtle2)),this.isPenDown&&8192<=this.curve.dataX.length&&(this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve)),this.pos[0]+=d,this.pos[1]+=e,this.isPenDown&&(this.curve.dataX.push(this.pos[0]),this.curve.dataY.push(this.pos[1])),this.board.update(),this},back:function(e){return this.forward(-e)},right:function(e){(this.dir-=e,this.dir%=360,
this.turtleIsHidden)||this.board.create("transform",[-e*Math.PI/180,this.turtle],{type:"rotate"}).applyOnce(this.turtle2);return this.board.update(),this},left:function(e){return this.right(-e)},penUp:function(){return this.isPenDown=!1,this},penDown:function(){return this.isPenDown=!0,this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve),this},clean:function(){var e,g;for(e=0;e<this.objects.length;e++)g=this.objects[e],g.type===q.OBJECT_TYPE_CURVE&&
(this.board.removeObject(g),this.objects.splice(e,1));return this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve),this.board.update(),this},clearScreen:function(){var e,g,d=this.objects.length;for(e=0;d>e;e++)g=this.objects[e],this.board.removeObject(g);return this.init(0,0,90),this},setPos:function(h,g){var d;return this.pos=e.isArray(h)?h:[h,g],this.turtleIsHidden||(this.turtle.setPositionDirectly(q.COORDS_BY_USER,[h,g]),this.turtle2.setPositionDirectly(q.COORDS_BY_USER,
[h,g+this.arrowLen]),d=this.board.create("transform",[-(this.dir-90)*Math.PI/180,this.turtle],{type:"rotate"}),d.applyOnce(this.turtle2)),this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve),this.board.update(),this},setPenSize:function(e){return this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this.copyAttr("strokeWidth",e)),this.objects.push(this.curve),this},setPenColor:function(e){return this.curve=this.board.create("curve",
[[this.pos[0]],[this.pos[1]]],this.copyAttr("strokeColor",e)),this.objects.push(this.curve),this},setHighlightPenColor:function(e){return this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this.copyAttr("highlightStrokeColor",e)),this.objects.push(this.curve),this},setAttribute:function(h){var g,d,b,a=this.objects.length;for(g=0;a>g;g++)d=this.objects[g],d.type===q.OBJECT_TYPE_CURVE&&d.setAttribute(h);return b=this.visProp.id,this.visProp=e.deepCopy(this.curve.visProp),this.visProp.id=
b,this._attributes=e.deepCopy(this.visProp),delete this._attributes.id,this},copyAttr:function(e,g){return this._attributes[e.toLowerCase()]=g,this._attributes},showTurtle:function(){return this.turtleIsHidden=!1,this.arrow.setAttribute({visible:!0}),this.visProp.arrow.visible=!1,this.setPos(this.pos[0],this.pos[1]),this.board.update(),this},hideTurtle:function(){return this.turtleIsHidden=!0,this.arrow.setAttribute({visible:!1}),this.visProp.arrow.visible=!1,this.board.update(),this},home:function(){return this.pos=
[0,0],this.setPos(this.pos[0],this.pos[1]),this},pushTurtle:function(){return this.stack.push([this.pos[0],this.pos[1],this.dir]),this},popTurtle:function(){var e=this.stack.pop();return this.pos[0]=e[0],this.pos[1]=e[1],this.dir=e[2],this.setPos(this.pos[0],this.pos[1]),this},lookTo:function(h){var g,d,b,a,k;return e.isArray(h)?(g=this.pos[0],d=this.pos[1],b=h[0],a=h[1],k=Math.atan2(a-d,b-g),this.right(this.dir-180*k/Math.PI)):e.isNumber(h)&&this.right(this.dir-h),this},moveTo:function(h){var g,
d,b;return e.isArray(h)&&(g=h[0]-this.pos[0],d=h[1]-this.pos[1],this.turtleIsHidden||(b=this.board.create("transform",[g,d],{type:"translate"}),b.applyOnce(this.turtle),b.applyOnce(this.turtle2)),this.isPenDown&&8192<=this.curve.dataX.length&&(this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve)),this.pos[0]=h[0],this.pos[1]=h[1],this.isPenDown&&(this.curve.dataX.push(this.pos[0]),this.curve.dataY.push(this.pos[1])),this.board.update()),
this},fd:function(e){return this.forward(e)},bk:function(e){return this.back(e)},lt:function(e){return this.left(e)},rt:function(e){return this.right(e)},pu:function(){return this.penUp()},pd:function(){return this.penDown()},ht:function(){return this.hideTurtle()},st:function(){return this.showTurtle()},cs:function(){return this.clearScreen()},push:function(){return this.pushTurtle()},pop:function(){return this.popTurtle()},evalAt:function(e,g){var d,b,a,k,c=this.objects.length;for(b=d=0;c>d;d++)if(a=
this.objects[d],a.elementClass===q.OBJECT_CLASS_CURVE){if(e>=b&&e<b+a.numberPoints)return k=e-b,a[g](k);b+=a.numberPoints}return this[g]()},X:function(h){return e.exists(h)?this.evalAt(h,"X"):this.pos[0]},Y:function(h){return e.exists(h)?this.evalAt(h,"Y"):this.pos[1]},Z:function(){return 1},minX:function(){return 0},maxX:function(){var e,g,d=this.objects.length,b=0;for(e=0;d>e;e++)g=this.objects[e],g.elementClass===q.OBJECT_CLASS_CURVE&&(b+=this.objects[e].numberPoints);return b},hasPoint:function(e,
g){var d,b;for(d=0;d<this.objects.length;d++)if(b=this.objects[d],b.type===q.OBJECT_TYPE_CURVE&&b.hasPoint(e,g))return!0;return!1}}),m.createTurtle=function(h,g,d){var b;return g=g||[],b=e.copyAttributes(d,h.options,"turtle"),new m.Turtle(h,g,b)},m.registerElement("turtle",m.createTurtle),{Turtle:m.Turtle,createTurtle:m.createTurtle}});E("utils/dump",["jxg","utils/type"],function(m,q){return m.Dump={addMarkers:function(l,e,h){var g,d,b;q.isArray(e)||(e=[e]);q.isArray(h)||(h=[h]);d=Math.min(e.length,
h.length);e.length=d;h.length=d;for(g in l.objects)if(l.objects.hasOwnProperty(g))for(b=0;d>b;b++)l.objects[g][e[b]]=h[b]},deleteMarkers:function(l,e){var h,g,d;q.isArray(e)||(e=[e]);g=e.length;e.length=g;for(h in l.objects)if(l.objects.hasOwnProperty(h))for(d=0;g>d;d++)delete l.objects[h][e[d]]},str:function(l){return"string"==typeof l&&"function"!==l.substr(0,7)&&(l="'"+l+"'"),l},minimizeObject:function(l){var e,h,g,d={},b=q.deepCopy(l),a=[];for(g=1;g<arguments.length;g++)a.push(arguments[g]);for(g=
a.length;0<g;g--)d=q.deepCopy(d,a[g-1],!0);for(e in d)d.hasOwnProperty(e)&&(h=e.toLowerCase(),"object"!=typeof d[e]&&d[e]===b[h]&&delete b[h]);return b},prepareAttributes:function(l,e){var h,g;h=this.minimizeObject(e.getAttributes(),m.Options[e.elType]);for(g in e.subs)e.subs.hasOwnProperty(g)&&(h[g]=this.minimizeObject(e.subs[g].getAttributes(),m.Options[e.elType][g],m.Options[e.subs[g].elType]),h[g].id=e.subs[g].id,h[g].name=e.subs[g].name);return h.id=e.id,h.name=e.name,h},dump:function(l){var e,
h,g,d,b=[],a=[],k=[],c=l.objectsList.length;this.addMarkers(l,"dumped",!1);a.push({obj:"$board",method:"setBoundingBox",params:[l.getBoundingBox(),!0]});for(e=0;c>e;e++)if(h=l.objectsList[e],g={},!h.dumped&&h.dump){g.type=h.getType();g.parents=h.getParents();"point"===g.type&&1===g.parents[0]&&(g.parents=g.parents.slice(1));for(d=0;d<g.parents.length;d++)"string"==typeof g.parents[d]&&(g.parents[d]="'"+g.parents[d]+"'");g.attributes=this.prepareAttributes(l,h);"glider"===g.type&&h.onPolygon&&b.push({obj:h.id,
prop:"onPolygon",val:!0});k.push(g)}return this.deleteMarkers(l,"dumped"),{elements:k,props:b,methods:a}},arrayToParamStr:function(l,e){var h,g=[];for(h=0;h<l.length;h++)g.push(e.call(this,l[h]));return g.join(", ")},toJSAN:function(l){var e,h;switch(typeof l){case "object":if(l){if(h=[],q.isArray(l)){for(e=0;e<l.length;e++)h.push(this.toJSAN(l[e]));return"["+h.join(",")+"]"}for(e in l)l.hasOwnProperty(e)&&h.push(e+": "+this.toJSAN(l[e]));return"<<"+h.join(", ")+">> "}return"null";case "string":return"'"+
l.replace(/(["'])/g,"\\$1")+"'";case "number":case "boolean":return l.toString();case "null":return"null"}},toJessie:function(l){var e,h=this.dump(l),g=[];e=h.elements;for(l=0;l<e.length;l++)0<e[l].attributes.name.length&&g.push("// "+e[l].attributes.name),g.push("s"+l+" = "+e[l].type+"("+e[l].parents.join(", ")+") "+this.toJSAN(e[l].attributes).replace(/\n/,"\\n")+";"),g.push("");for(l=0;l<h.methods.length;l++)g.push(h.methods[l].obj+"."+h.methods[l].method+"("+this.arrayToParamStr(h.methods[l].params,
this.toJSAN)+");"),g.push("");for(l=0;l<h.props.length;l++)g.push(h.props[l].obj+"."+h.props[l].prop+" = "+this.toJSAN(h.props[l].val)+";"),g.push("");return g.join("\n")},toJavaScript:function(l){var e,h=this.dump(l),g=[];e=h.elements;for(l=0;l<e.length;l++)g.push('board.create("'+e[l].type+'", ['+e[l].parents.join(", ")+"], "+q.toJSON(e[l].attributes)+");");for(l=0;l<h.methods.length;l++)g.push(h.methods[l].obj+"."+h.methods[l].method+"("+this.arrayToParamStr(h.methods[l].params,q.toJSON)+");"),
g.push("");for(l=0;l<h.props.length;l++)g.push(h.props[l].obj+"."+h.props[l].prop+" = "+q.toJSON(h.props[l].val)+";"),g.push("");return g.join("\n")}},m.Dump});E("element/slopetriangle","jxg options utils/type base/constants base/line base/polygon base/point base/element".split(" "),function(m,q,l,e,h,g){var d=function(){g.Polygon.prototype.remove.call(this);this.board.removeObject(this.toppoint);this.board.removeObject(this.glider);this.board.removeObject(this.baseline);this.board.removeObject(this.basepoint);
this.board.removeObject(this.label)},b=function(){return this.tangent.getSlope()};return m.createSlopeTriangle=function(a,g,c){var f,h,p,q,v,r,y,x,u;if(1===g.length&&g[0].type===e.OBJECT_TYPE_TANGENT)h=g[0],p=h.glider;else{if(2!==g.length||g[0].elementClass!==e.OBJECT_CLASS_LINE||g[1].elementClass!==e.OBJECT_CLASS_POINT)throw Error("JSXGraph: Can't create slope triangle with parent types '"+typeof g[0]+"'.");h=g[0];p=g[1]}return u=l.copyAttributes(c,a.options,"slopetriangle","basepoint"),y=a.create("point",
[function(){return[p.X()+1,p.Y()]}],u),u=l.copyAttributes(c,a.options,"slopetriangle","baseline"),r=a.create("line",[p,y],u),u=l.copyAttributes(c,a.options,"slopetriangle","glider"),q=a.create("glider",[p.X()+1,p.Y(),r],u),u=l.copyAttributes(c,a.options,"slopetriangle","toppoint"),v=a.create("point",[function(){return[q.X(),q.Y()+(q.X()-p.X())*h.getSlope()]}],u),u=l.copyAttributes(c,a.options,"slopetriangle"),f=a.create("polygon",[p,q,v],u),f.Value=b,f.tangent=h,u=l.copyAttributes(c,a.options,"slopetriangle",
"label"),x=a.create("text",[function(){return q.X()+.1},function(){return.5*(q.Y()+v.Y())},function(){return""}],u),x._setText(function(){return f.Value().toFixed(x.visProp.digits)}),x.prepareUpdate().update().updateRenderer(),f.glider=q,f.basepoint=y,f.baseline=r,f.toppoint=v,f.label=x,f.methodMap=m.deepCopy(f.methodMap,{tangent:"tangent",glider:"glider",basepoint:"basepoint",baseline:"baseline",toppoint:"toppoint",label:"label",Value:"Value",V:"Value"}),f.remove=d,f},m.registerElement("slopetriangle",
m.createSlopeTriangle),{createSlopeTriangle:m.createSlopeTriangle}});E("../build/core.deps.js","jxg utils/env base/constants utils/type utils/xml utils/event utils/expect math/math math/qdt math/numerics math/statistics math/symbolic math/geometry math/poly math/complex renderer/abstract renderer/no reader/file parser/geonext base/board options jsxgraph base/element base/coords base/point base/line base/group base/circle element/conic base/polygon base/curve element/arc element/sector base/composition element/composition element/locus base/text base/image element/slider element/measure base/chart base/transformation base/turtle utils/color base/ticks utils/zip utils/base64 utils/uuid utils/encoding server/server parser/datasource parser/jessiecode utils/dump renderer/svg renderer/vml renderer/canvas renderer/no element/slopetriangle".split(" "),
function(m,q){return q.isBrowser?window.JXG=m:q.isNode()&&"object"==typeof module?module.exports=m:q.isWebWorker()&&(self.JXG=m),m});P("../build/core.deps.js")}();
